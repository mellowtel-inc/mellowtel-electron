{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/CSSStyleDeclaration.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/CharacterData.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/ChildNode.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/Comment.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/ContainerNode.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/CustomEvent.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/DOMException.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/DOMImplementation.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/DOMTokenList.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/Document.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/DocumentFragment.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/DocumentType.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/Element.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/Event.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/EventTarget.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/FilteredElementList.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/HTMLParser.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/Leaf.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/LinkedList.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/Location.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/MouseEvent.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/MutationConstants.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/NamedNodeMap.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/NavigatorID.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/Node.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/NodeFilter.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/NodeIterator.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/NodeList.es5.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/NodeList.es6.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/NodeList.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/NodeTraversal.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/NodeUtils.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/NonDocumentTypeChildNode.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/ProcessingInstruction.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/Text.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/TreeWalker.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/UIEvent.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/URL.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/URLUtils.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/Window.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/WindowTimers.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/attributes.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/config.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/defineElement.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/events.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/htmlelts.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/impl.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/index.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/select.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/style_parser.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/svg.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/utils.js","webpack://mellowtel-electron/./node_modules/@mixmark-io/domino/lib/xmlnames.js","webpack://mellowtel-electron/./node_modules/ajv-formats/dist/formats.js","webpack://mellowtel-electron/./node_modules/ajv-formats/dist/index.js","webpack://mellowtel-electron/./node_modules/ajv-formats/dist/limit.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/ajv.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/codegen/code.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/codegen/index.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/codegen/scope.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/errors.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/index.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/names.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/ref_error.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/resolve.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/rules.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/util.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/validate/applicability.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/validate/boolSchema.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/validate/dataType.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/validate/defaults.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/validate/index.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/validate/keyword.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/compile/validate/subschema.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/core.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/runtime/equal.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/runtime/ucs2length.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/runtime/uri.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/runtime/validation_error.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/additionalItems.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/additionalProperties.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/allOf.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/anyOf.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/contains.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/dependencies.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/if.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/index.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/items.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/items2020.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/not.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/oneOf.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/patternProperties.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/prefixItems.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/properties.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/propertyNames.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/applicator/thenElse.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/code.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/core/id.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/core/index.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/core/ref.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/discriminator/index.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/discriminator/types.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/draft7.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/format/format.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/format/index.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/metadata.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/validation/const.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/validation/enum.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/validation/index.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/validation/limitItems.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/validation/limitLength.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/validation/limitNumber.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/validation/limitProperties.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/validation/multipleOf.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/validation/pattern.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/validation/required.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/ajv/dist/vocabularies/validation/uniqueItems.js","webpack://mellowtel-electron/./node_modules/ajv-formats/node_modules/json-schema-traverse/index.js","webpack://mellowtel-electron/./node_modules/atomically/dist/consts.js","webpack://mellowtel-electron/./node_modules/atomically/dist/index.js","webpack://mellowtel-electron/./node_modules/atomically/dist/utils/attemptify.js","webpack://mellowtel-electron/./node_modules/atomically/dist/utils/fs.js","webpack://mellowtel-electron/./node_modules/atomically/dist/utils/fs_handlers.js","webpack://mellowtel-electron/./node_modules/atomically/dist/utils/lang.js","webpack://mellowtel-electron/./node_modules/atomically/dist/utils/retryify.js","webpack://mellowtel-electron/./node_modules/atomically/dist/utils/retryify_queue.js","webpack://mellowtel-electron/./node_modules/atomically/dist/utils/scheduler.js","webpack://mellowtel-electron/./node_modules/atomically/dist/utils/temp.js","webpack://mellowtel-electron/./node_modules/conf/dist/source/index.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/ajv.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/codegen/code.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/codegen/index.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/codegen/scope.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/errors.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/index.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/names.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/ref_error.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/resolve.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/rules.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/util.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/validate/applicability.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/validate/boolSchema.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/validate/dataType.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/validate/defaults.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/validate/index.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/validate/keyword.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/compile/validate/subschema.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/core.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/runtime/equal.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/runtime/ucs2length.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/runtime/uri.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/runtime/validation_error.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/additionalItems.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/additionalProperties.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/allOf.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/anyOf.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/contains.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/dependencies.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/if.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/index.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/items.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/items2020.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/not.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/oneOf.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/patternProperties.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/prefixItems.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/properties.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/propertyNames.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/applicator/thenElse.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/code.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/core/id.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/core/index.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/core/ref.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/discriminator/index.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/discriminator/types.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/draft7.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/format/format.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/format/index.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/metadata.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/validation/const.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/validation/enum.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/validation/index.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/validation/limitItems.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/validation/limitLength.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/validation/limitNumber.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/validation/limitProperties.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/validation/multipleOf.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/validation/pattern.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/validation/required.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/ajv/dist/vocabularies/validation/uniqueItems.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/json-schema-traverse/index.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/classes/comparator.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/classes/range.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/classes/semver.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/clean.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/cmp.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/coerce.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/compare-build.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/compare-loose.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/compare.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/diff.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/eq.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/gt.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/gte.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/inc.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/lt.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/lte.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/major.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/minor.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/neq.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/parse.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/patch.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/prerelease.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/rcompare.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/rsort.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/satisfies.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/sort.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/functions/valid.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/index.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/internal/constants.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/internal/debug.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/internal/identifiers.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/internal/lrucache.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/internal/parse-options.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/internal/re.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/ranges/gtr.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/ranges/intersects.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/ranges/ltr.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/ranges/max-satisfying.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/ranges/min-satisfying.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/ranges/min-version.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/ranges/outside.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/ranges/simplify.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/ranges/subset.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/ranges/to-comparators.js","webpack://mellowtel-electron/./node_modules/conf/node_modules/semver/ranges/valid.js","webpack://mellowtel-electron/./node_modules/debounce-fn/index.js","webpack://mellowtel-electron/./node_modules/dot-prop/index.js","webpack://mellowtel-electron/./node_modules/electron-store/index.js","webpack://mellowtel-electron/./node_modules/env-paths/index.js","webpack://mellowtel-electron/./node_modules/fast-deep-equal/index.js","webpack://mellowtel-electron/./node_modules/is-obj/index.js","webpack://mellowtel-electron/./node_modules/isomorphic-fetch/fetch-npm-node.js","webpack://mellowtel-electron/./node_modules/isomorphic-ws/node.js","webpack://mellowtel-electron/./node_modules/lodash.memoize/index.js","webpack://mellowtel-electron/./node_modules/mimic-fn/index.js","webpack://mellowtel-electron/./node_modules/onetime/index.js","webpack://mellowtel-electron/./node_modules/onetime/node_modules/mimic-fn/index.js","webpack://mellowtel-electron/./node_modules/p-limit/index.js","webpack://mellowtel-electron/./node_modules/p-try/index.js","webpack://mellowtel-electron/./node_modules/pkg-up/index.js","webpack://mellowtel-electron/./node_modules/pkg-up/node_modules/find-up/index.js","webpack://mellowtel-electron/./node_modules/pkg-up/node_modules/locate-path/index.js","webpack://mellowtel-electron/./node_modules/pkg-up/node_modules/p-locate/index.js","webpack://mellowtel-electron/./node_modules/pkg-up/node_modules/path-exists/index.js","webpack://mellowtel-electron/./node_modules/tr46/index.js","webpack://mellowtel-electron/./src/constants.ts","webpack://mellowtel-electron/./src/index.ts","webpack://mellowtel-electron/./src/local-rate-limiting/rate-limiter.ts","webpack://mellowtel-electron/./src/logger/logger.ts","webpack://mellowtel-electron/./src/main.ts","webpack://mellowtel-electron/./src/storage/storage-helpers.ts","webpack://mellowtel-electron/./src/utils/identity-helpers.ts","webpack://mellowtel-electron/./src/utils/measure-connection-speed.ts","webpack://mellowtel-electron/./src/utils/put-to-signed.ts","webpack://mellowtel-electron/./src/utils/scrape-request.ts","webpack://mellowtel-electron/./src/utils/scraping-helpers.ts","webpack://mellowtel-electron/./src/websockets.ts","webpack://mellowtel-electron/./node_modules/turndown/lib/turndown.es.js","webpack://mellowtel-electron/./node_modules/webidl-conversions/lib/index.js","webpack://mellowtel-electron/./node_modules/whatwg-url/lib/URL-impl.js","webpack://mellowtel-electron/./node_modules/whatwg-url/lib/URL.js","webpack://mellowtel-electron/./node_modules/whatwg-url/lib/public-api.js","webpack://mellowtel-electron/./node_modules/whatwg-url/lib/url-state-machine.js","webpack://mellowtel-electron/./node_modules/whatwg-url/lib/utils.js","webpack://mellowtel-electron/./node_modules/ws/index.js","webpack://mellowtel-electron/./node_modules/ws/lib/buffer-util.js","webpack://mellowtel-electron/./node_modules/ws/lib/constants.js","webpack://mellowtel-electron/./node_modules/ws/lib/event-target.js","webpack://mellowtel-electron/./node_modules/ws/lib/extension.js","webpack://mellowtel-electron/./node_modules/ws/lib/limiter.js","webpack://mellowtel-electron/./node_modules/ws/lib/permessage-deflate.js","webpack://mellowtel-electron/./node_modules/ws/lib/receiver.js","webpack://mellowtel-electron/./node_modules/ws/lib/sender.js","webpack://mellowtel-electron/./node_modules/ws/lib/stream.js","webpack://mellowtel-electron/./node_modules/ws/lib/subprotocol.js","webpack://mellowtel-electron/./node_modules/ws/lib/validation.js","webpack://mellowtel-electron/./node_modules/ws/lib/websocket-server.js","webpack://mellowtel-electron/./node_modules/ws/lib/websocket.js","webpack://mellowtel-electron/external node-commonjs \"assert\"","webpack://mellowtel-electron/external node-commonjs \"buffer\"","webpack://mellowtel-electron/external node-commonjs \"crypto\"","webpack://mellowtel-electron/external node-commonjs \"electron\"","webpack://mellowtel-electron/external node-commonjs \"events\"","webpack://mellowtel-electron/external node-commonjs \"fs\"","webpack://mellowtel-electron/external node-commonjs \"http\"","webpack://mellowtel-electron/external node-commonjs \"https\"","webpack://mellowtel-electron/external node-commonjs \"net\"","webpack://mellowtel-electron/external node-commonjs \"os\"","webpack://mellowtel-electron/external node-commonjs \"path\"","webpack://mellowtel-electron/external node-commonjs \"punycode\"","webpack://mellowtel-electron/external node-commonjs \"stream\"","webpack://mellowtel-electron/external node-commonjs \"tls\"","webpack://mellowtel-electron/external node-commonjs \"url\"","webpack://mellowtel-electron/external node-commonjs \"util\"","webpack://mellowtel-electron/external node-commonjs \"zlib\"","webpack://mellowtel-electron/./node_modules/fast-uri/index.js","webpack://mellowtel-electron/./node_modules/fast-uri/lib/schemes.js","webpack://mellowtel-electron/./node_modules/fast-uri/lib/scopedChars.js","webpack://mellowtel-electron/./node_modules/fast-uri/lib/utils.js","webpack://mellowtel-electron/./node_modules/d3-array/src/ascending.js","webpack://mellowtel-electron/./node_modules/d3-array/src/descending.js","webpack://mellowtel-electron/./node_modules/d3-array/src/bisector.js","webpack://mellowtel-electron/./node_modules/d3-array/src/bisect.js","webpack://mellowtel-electron/./node_modules/d3-array/src/number.js","webpack://mellowtel-electron/./node_modules/d3-scale/src/init.js","webpack://mellowtel-electron/./node_modules/d3-scale/src/threshold.js","webpack://mellowtel-electron/./node_modules/@cloudflare/speedtest/dist/speedtest.js","webpack://mellowtel-electron/./node_modules/node-fetch/lib/index.mjs","webpack://mellowtel-electron/webpack/bootstrap","webpack://mellowtel-electron/webpack/runtime/define property getters","webpack://mellowtel-electron/webpack/runtime/hasOwnProperty shorthand","webpack://mellowtel-electron/webpack/runtime/make namespace object","webpack://mellowtel-electron/webpack/runtime/node module decorator","webpack://mellowtel-electron/webpack/startup"],"sourcesContent":["\"use strict\";\r\n\r\nconst { parse } = require('./style_parser');\r\n\r\nmodule.exports = function (elt) {\r\n  const style = new CSSStyleDeclaration(elt)\r\n  const handler = {\r\n    get: function(target, property) {\r\n      return property in target ? target[property] : target.getPropertyValue(dasherizeProperty(property));\r\n    },\r\n    has: function(target, key) {\r\n      return true;\r\n    },\r\n    set: function(target, property, value) {\r\n      if (property in target) {\r\n        target[property] = value;\r\n      } else {\r\n        target.setProperty(dasherizeProperty(property), value ?? undefined);\r\n      }\r\n\r\n      return true;\r\n    }\r\n  };\r\n\r\n  return new Proxy(style, handler);\r\n};\r\n\r\nfunction dasherizeProperty(property) {\r\n  return property.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\r\n}\r\n\r\n\r\nfunction CSSStyleDeclaration(elt) {\r\n  this._element = elt;\r\n}\r\n\r\nconst IMPORTANT_BANG = '!important';\r\n\r\n// Utility function for parsing style declarations\r\n// Pass in a string like \"margin-left: 5px; border-style: solid\"\r\n// and this function returns an object like\r\n// {\"margin-left\":\"5px\", \"border-style\":\"solid\"}\r\nfunction parseStyles(value) {\r\n  const result = {\r\n    property: {},\r\n    priority: {},\r\n  }\r\n\r\n  if (!value) {\r\n    return result;\r\n  }\r\n\r\n  const styleValues = parse(value);\r\n  if (styleValues.length < 2) {\r\n    return result;\r\n  }\r\n\r\n  for (let i = 0; i < styleValues.length; i += 2) {\r\n    const name = styleValues[i];\r\n    let value = styleValues[i+1];\r\n\r\n    if (value.endsWith(IMPORTANT_BANG)) {\r\n      result.priority[name] = 'important';\r\n      value = value.slice(0, -IMPORTANT_BANG.length).trim();\r\n    }\r\n\r\n    result.property[name] = value;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nvar NO_CHANGE = {}; // Private marker object\r\n\r\nCSSStyleDeclaration.prototype = Object.create(Object.prototype, {\r\n\r\n  // Return the parsed form of the element's style attribute.\r\n  // If the element's style attribute has never been parsed\r\n  // or if it has changed since the last parse, then reparse it\r\n  // Note that the styles don't get parsed until they're actually needed\r\n  _parsed: { get: function() {\r\n    if (!this._parsedStyles || this.cssText !== this._lastParsedText) {\r\n      var text = this.cssText;\r\n      this._parsedStyles = parseStyles(text);\r\n      this._lastParsedText = text;\r\n      delete this._names;\r\n    }\r\n    return this._parsedStyles;\r\n  }},\r\n\r\n  // Call this method any time the parsed representation of the\r\n  // style changes.  It converts the style properties to a string and\r\n  // sets cssText and the element's style attribute\r\n  _serialize: { value: function() {\r\n    var styles = this._parsed;\r\n    var s = \"\";\r\n\r\n    for(var name in styles.property) {\r\n      if (s) s += \" \";\r\n      s += name + \": \" + styles.property[name];\r\n      if (styles.priority[name]) {\r\n        s += \" !\" + styles.priority[name];\r\n      }\r\n      s += \";\";\r\n    }\r\n\r\n    this.cssText = s;      // also sets the style attribute\r\n    this._lastParsedText = s;  // so we don't reparse\r\n    delete this._names;\r\n  }},\r\n\r\n  cssText: {\r\n    get: function() {\r\n      // XXX: this is a CSSStyleDeclaration for an element.\r\n      // A different impl might be necessary for a set of styles\r\n      // associated returned by getComputedStyle(), e.g.\r\n      return this._element.getAttribute(\"style\");\r\n    },\r\n    set: function(value) {\r\n      // XXX: I should parse and serialize the value to\r\n      // normalize it and remove errors. FF and chrome do that.\r\n      this._element.setAttribute(\"style\", value);\r\n    }\r\n  },\r\n\r\n  length: { get: function() {\r\n    if (!this._names)\r\n      this._names = Object.getOwnPropertyNames(this._parsed.property);\r\n    return this._names.length;\r\n  }},\r\n\r\n  item: { value: function(n) {\r\n    if (!this._names)\r\n      this._names = Object.getOwnPropertyNames(this._parsed.property);\r\n    return this._names[n];\r\n  }},\r\n\r\n  getPropertyValue: { value: function(property) {\r\n    property = property.toLowerCase();\r\n    return this._parsed.property[property] || \"\";\r\n  }},\r\n\r\n  getPropertyPriority: { value: function(property) {\r\n    property = property.toLowerCase();\r\n    return this._parsed.priority[property] || \"\";\r\n  }},\r\n\r\n  setProperty: { value: function(property, value, priority) {\r\n    property = property.toLowerCase();\r\n    if (value === null || value === undefined) {\r\n      value = \"\";\r\n    }\r\n    if (priority === null || priority === undefined) {\r\n      priority = \"\";\r\n    }\r\n\r\n    // String coercion\r\n    if (value !== NO_CHANGE) {\r\n      value = \"\" + value;\r\n    }\r\n\r\n    value = value.trim();\r\n    if (value === \"\") {\r\n      this.removeProperty(property);\r\n      return;\r\n    }\r\n\r\n    if (priority !== \"\" && priority !== NO_CHANGE &&\r\n        !/^important$/i.test(priority)) {\r\n      return;\r\n    }\r\n\r\n    var styles = this._parsed;\r\n    if (value === NO_CHANGE) {\r\n      if (!styles.property[property]) {\r\n        return; // Not a valid property name.\r\n      }\r\n      if (priority !== \"\") {\r\n        styles.priority[property] = \"important\";\r\n      } else {\r\n        delete styles.priority[property];\r\n      }\r\n    } else {\r\n      // We don't just accept the property value.  Instead\r\n      // we parse it to ensure that it is something valid.\r\n      // If it contains a semicolon it is invalid\r\n      if (value.indexOf(\";\") !== -1) return;\r\n\r\n      var newprops = parseStyles(property + \":\" + value);\r\n      if (Object.getOwnPropertyNames(newprops.property).length === 0) {\r\n        return; // no valid property found\r\n      }\r\n      if (Object.getOwnPropertyNames(newprops.priority).length !== 0) {\r\n        return; // if the value included '!important' it wasn't valid.\r\n      }\r\n\r\n      // XXX handle shorthand properties\r\n\r\n      for (var p in newprops.property) {\r\n        styles.property[p] = newprops.property[p];\r\n        if (priority === NO_CHANGE) {\r\n          continue;\r\n        } else if (priority !== \"\") {\r\n          styles.priority[p] = \"important\";\r\n        } else if (styles.priority[p]) {\r\n          delete styles.priority[p];\r\n        }\r\n      }\r\n    }\r\n\r\n    // Serialize and update cssText and element.style!\r\n    this._serialize();\r\n  }},\r\n\r\n  setPropertyValue: { value: function(property, value) {\r\n    return this.setProperty(property, value, NO_CHANGE);\r\n  }},\r\n\r\n  setPropertyPriority: { value: function(property, priority) {\r\n    return this.setProperty(property, NO_CHANGE, priority);\r\n  }},\r\n\r\n  removeProperty: { value: function(property) {\r\n    property = property.toLowerCase();\r\n    var styles = this._parsed;\r\n    if (property in styles.property) {\r\n      delete styles.property[property];\r\n      delete styles.priority[property];\r\n\r\n      // Serialize and update cssText and element.style!\r\n      this._serialize();\r\n    }\r\n  }},\r\n});\r\n","/* jshint bitwise: false */\r\n\"use strict\";\r\nmodule.exports = CharacterData;\r\n\r\nvar Leaf = require('./Leaf');\r\nvar utils = require('./utils');\r\nvar ChildNode = require('./ChildNode');\r\nvar NonDocumentTypeChildNode = require('./NonDocumentTypeChildNode');\r\n\r\nfunction CharacterData() {\r\n  Leaf.call(this);\r\n}\r\n\r\nCharacterData.prototype = Object.create(Leaf.prototype, {\r\n  // DOMString substringData(unsigned long offset,\r\n  //               unsigned long count);\r\n  // The substringData(offset, count) method must run these steps:\r\n  //\r\n  //     If offset is greater than the context object's\r\n  //     length, throw an INDEX_SIZE_ERR exception and\r\n  //     terminate these steps.\r\n  //\r\n  //     If offset+count is greater than the context\r\n  //     object's length, return a DOMString whose value is\r\n  //     the UTF-16 code units from the offsetth UTF-16 code\r\n  //     unit to the end of data.\r\n  //\r\n  //     Return a DOMString whose value is the UTF-16 code\r\n  //     units from the offsetth UTF-16 code unit to the\r\n  //     offset+countth UTF-16 code unit in data.\r\n  substringData: { value: function substringData(offset, count) {\r\n    if (arguments.length < 2) { throw new TypeError(\"Not enough arguments\"); }\r\n    // Convert arguments to WebIDL \"unsigned long\"\r\n    offset = offset >>> 0;\r\n    count = count >>> 0;\r\n    if (offset > this.data.length || offset < 0 || count < 0) {\r\n      utils.IndexSizeError();\r\n    }\r\n    return this.data.substring(offset, offset+count);\r\n  }},\r\n\r\n  // void appendData(DOMString data);\r\n  // The appendData(data) method must append data to the context\r\n  // object's data.\r\n  appendData: { value: function appendData(data) {\r\n    if (arguments.length < 1) { throw new TypeError(\"Not enough arguments\"); }\r\n    this.data += String(data);\r\n  }},\r\n\r\n  // void insertData(unsigned long offset, DOMString data);\r\n  // The insertData(offset, data) method must run these steps:\r\n  //\r\n  //     If offset is greater than the context object's\r\n  //     length, throw an INDEX_SIZE_ERR exception and\r\n  //     terminate these steps.\r\n  //\r\n  //     Insert data into the context object's data after\r\n  //     offset UTF-16 code units.\r\n  //\r\n  insertData: { value: function insertData(offset, data) {\r\n    return this.replaceData(offset, 0, data);\r\n  }},\r\n\r\n\r\n  // void deleteData(unsigned long offset, unsigned long count);\r\n  // The deleteData(offset, count) method must run these steps:\r\n  //\r\n  //     If offset is greater than the context object's\r\n  //     length, throw an INDEX_SIZE_ERR exception and\r\n  //     terminate these steps.\r\n  //\r\n  //     If offset+count is greater than the context\r\n  //     object's length var count be length-offset.\r\n  //\r\n  //     Starting from offset UTF-16 code units remove count\r\n  //     UTF-16 code units from the context object's data.\r\n  deleteData: { value: function deleteData(offset, count) {\r\n    return this.replaceData(offset, count, '');\r\n  }},\r\n\r\n\r\n  // void replaceData(unsigned long offset, unsigned long count,\r\n  //          DOMString data);\r\n  //\r\n  // The replaceData(offset, count, data) method must act as\r\n  // if the deleteData() method is invoked with offset and\r\n  // count as arguments followed by the insertData() method\r\n  // with offset and data as arguments and re-throw any\r\n  // exceptions these methods might have thrown.\r\n  replaceData: { value: function replaceData(offset, count, data) {\r\n    var curtext = this.data, len = curtext.length;\r\n    // Convert arguments to correct WebIDL type\r\n    offset = offset >>> 0;\r\n    count = count >>> 0;\r\n    data = String(data);\r\n\r\n    if (offset > len || offset < 0) utils.IndexSizeError();\r\n\r\n    if (offset+count > len)\r\n      count = len - offset;\r\n\r\n    var prefix = curtext.substring(0, offset),\r\n    suffix = curtext.substring(offset+count);\r\n\r\n    this.data = prefix + data + suffix;\r\n  }},\r\n\r\n  // Utility method that Node.isEqualNode() calls to test Text and\r\n  // Comment nodes for equality.  It is okay to put it here, since\r\n  // Node will have already verified that nodeType is equal\r\n  isEqual: { value: function isEqual(n) {\r\n    return this._data === n._data;\r\n  }},\r\n\r\n  length: { get: function() { return this.data.length; }}\r\n\r\n});\r\n\r\nObject.defineProperties(CharacterData.prototype, ChildNode);\r\nObject.defineProperties(CharacterData.prototype, NonDocumentTypeChildNode);\r\n","\"use strict\";\r\n\r\nvar Node = require('./Node');\r\nvar LinkedList = require('./LinkedList');\r\n\r\nvar createDocumentFragmentFromArguments = function(document, args) {\r\n  var docFrag = document.createDocumentFragment();\r\n\r\n  for (var i=0; i<args.length; i++) {\r\n    var argItem = args[i];\r\n    var isNode = argItem instanceof Node;\r\n    docFrag.appendChild(isNode ? argItem :\r\n                        document.createTextNode(String(argItem)));\r\n  }\r\n\r\n  return docFrag;\r\n};\r\n\r\n// The ChildNode interface contains methods that are particular to `Node`\r\n// objects that can have a parent.  It is implemented by `Element`,\r\n// `DocumentType`, and `CharacterData` objects.\r\nvar ChildNode = {\r\n\r\n  // Inserts a set of Node or String objects in the children list of this\r\n  // ChildNode's parent, just after this ChildNode.  String objects are\r\n  // inserted as the equivalent Text nodes.\r\n  after: { value: function after() {\r\n    var argArr = Array.prototype.slice.call(arguments);\r\n    var parentNode = this.parentNode, nextSibling = this.nextSibling;\r\n    if (parentNode === null) { return; }\r\n    // Find \"viable next sibling\"; that is, next one not in argArr\r\n    while (nextSibling && argArr.some(function(v) { return v===nextSibling; }))\r\n      nextSibling = nextSibling.nextSibling;\r\n    // ok, parent and sibling are saved away since this node could itself\r\n    // appear in argArr and we're about to move argArr to a document fragment.\r\n    var docFrag = createDocumentFragmentFromArguments(this.doc, argArr);\r\n\r\n    parentNode.insertBefore(docFrag, nextSibling);\r\n  }},\r\n\r\n  // Inserts a set of Node or String objects in the children list of this\r\n  // ChildNode's parent, just before this ChildNode.  String objects are\r\n  // inserted as the equivalent Text nodes.\r\n  before: { value: function before() {\r\n    var argArr = Array.prototype.slice.call(arguments);\r\n    var parentNode = this.parentNode, prevSibling = this.previousSibling;\r\n    if (parentNode === null) { return; }\r\n    // Find \"viable prev sibling\"; that is, prev one not in argArr\r\n    while (prevSibling && argArr.some(function(v) { return v===prevSibling; }))\r\n      prevSibling = prevSibling.previousSibling;\r\n    // ok, parent and sibling are saved away since this node could itself\r\n    // appear in argArr and we're about to move argArr to a document fragment.\r\n    var docFrag = createDocumentFragmentFromArguments(this.doc, argArr);\r\n\r\n    var nextSibling =\r\n        prevSibling ? prevSibling.nextSibling : parentNode.firstChild;\r\n    parentNode.insertBefore(docFrag, nextSibling);\r\n  }},\r\n\r\n  // Remove this node from its parent\r\n  remove: { value: function remove() {\r\n    if (this.parentNode === null) return;\r\n\r\n    // Send mutation events if necessary\r\n    if (this.doc) {\r\n      this.doc._preremoveNodeIterators(this);\r\n      if (this.rooted) {\r\n        this.doc.mutateRemove(this);\r\n      }\r\n    }\r\n\r\n    // Remove this node from its parents array of children\r\n    // and update the structure id for all ancestors\r\n    this._remove();\r\n\r\n    // Forget this node's parent\r\n    this.parentNode = null;\r\n  }},\r\n\r\n  // Remove this node w/o uprooting or sending mutation events\r\n  // (But do update the structure id for all ancestors)\r\n  _remove: { value: function _remove() {\r\n    var parent = this.parentNode;\r\n    if (parent === null) return;\r\n    if (parent._childNodes) {\r\n      parent._childNodes.splice(this.index, 1);\r\n    } else if (parent._firstChild === this) {\r\n      if (this._nextSibling === this) {\r\n        parent._firstChild = null;\r\n      } else {\r\n        parent._firstChild = this._nextSibling;\r\n      }\r\n    }\r\n    LinkedList.remove(this);\r\n    parent.modify();\r\n  }},\r\n\r\n  // Replace this node with the nodes or strings provided as arguments.\r\n  replaceWith: { value: function replaceWith() {\r\n    var argArr = Array.prototype.slice.call(arguments);\r\n    var parentNode = this.parentNode, nextSibling = this.nextSibling;\r\n    if (parentNode === null) { return; }\r\n    // Find \"viable next sibling\"; that is, next one not in argArr\r\n    while (nextSibling && argArr.some(function(v) { return v===nextSibling; }))\r\n      nextSibling = nextSibling.nextSibling;\r\n    // ok, parent and sibling are saved away since this node could itself\r\n    // appear in argArr and we're about to move argArr to a document fragment.\r\n    var docFrag = createDocumentFragmentFromArguments(this.doc, argArr);\r\n    if (this.parentNode === parentNode) {\r\n      parentNode.replaceChild(docFrag, this);\r\n    } else {\r\n      // `this` was inserted into docFrag\r\n      parentNode.insertBefore(docFrag, nextSibling);\r\n    }\r\n  }},\r\n\r\n};\r\n\r\nmodule.exports = ChildNode;\r\n","\"use strict\";\r\nmodule.exports = Comment;\r\n\r\nvar Node = require('./Node');\r\nvar CharacterData = require('./CharacterData');\r\n\r\nfunction Comment(doc, data) {\r\n  CharacterData.call(this);\r\n  this.nodeType = Node.COMMENT_NODE;\r\n  this.ownerDocument = doc;\r\n  this._data = data;\r\n}\r\n\r\nvar nodeValue = {\r\n  get: function() { return this._data; },\r\n  set: function(v) {\r\n    if (v === null || v === undefined) { v = ''; } else { v = String(v); }\r\n    this._data = v;\r\n    if (this.rooted)\r\n      this.ownerDocument.mutateValue(this);\r\n  }\r\n};\r\n\r\nComment.prototype = Object.create(CharacterData.prototype, {\r\n  nodeName: { value: '#comment' },\r\n  nodeValue: nodeValue,\r\n  textContent: nodeValue,\r\n  innerText: nodeValue,\r\n  data: {\r\n    get: nodeValue.get,\r\n    set: function(v) {\r\n      nodeValue.set.call(this, v===null ? '' : String(v));\r\n    },\r\n  },\r\n\r\n  // Utility methods\r\n  clone: { value: function clone() {\r\n    return new Comment(this.ownerDocument, this._data);\r\n  }},\r\n});\r\n","\"use strict\";\r\nmodule.exports = ContainerNode;\r\n\r\nvar Node = require('./Node');\r\nvar NodeList = require('./NodeList');\r\n\r\n// This class defines common functionality for node subtypes that\r\n// can have children\r\n\r\nfunction ContainerNode() {\r\n  Node.call(this);\r\n  this._firstChild = this._childNodes = null;\r\n}\r\n\r\n// Primary representation is a circular linked list of siblings\r\nContainerNode.prototype = Object.create(Node.prototype, {\r\n\r\n  hasChildNodes: { value: function() {\r\n    if (this._childNodes) {\r\n      return this._childNodes.length > 0;\r\n    }\r\n    return this._firstChild !== null;\r\n  }},\r\n\r\n  childNodes: { get: function() {\r\n    this._ensureChildNodes();\r\n    return this._childNodes;\r\n  }},\r\n\r\n  firstChild: { get: function() {\r\n    if (this._childNodes) {\r\n      return this._childNodes.length === 0 ? null : this._childNodes[0];\r\n    }\r\n    return this._firstChild;\r\n  }},\r\n\r\n  lastChild: { get: function() {\r\n    var kids = this._childNodes, first;\r\n    if (kids) {\r\n      return kids.length === 0 ? null: kids[kids.length-1];\r\n    }\r\n    first = this._firstChild;\r\n    if (first === null) { return null; }\r\n    return first._previousSibling; // circular linked list\r\n  }},\r\n\r\n  _ensureChildNodes: { value: function() {\r\n    if (this._childNodes) { return; }\r\n    var first = this._firstChild,\r\n        kid = first,\r\n        childNodes = this._childNodes = new NodeList();\r\n    if (first) do {\r\n      childNodes.push(kid);\r\n      kid = kid._nextSibling;\r\n    } while (kid !== first); // circular linked list\r\n    this._firstChild = null; // free memory\r\n  }},\r\n\r\n  // Remove all of this node's children.  This is a minor\r\n  // optimization that only calls modify() once.\r\n  removeChildren: { value: function removeChildren() {\r\n    var root = this.rooted ? this.ownerDocument : null,\r\n        next = this.firstChild,\r\n        kid;\r\n    while (next !== null) {\r\n      kid = next;\r\n      next = kid.nextSibling;\r\n\r\n      if (root) root.mutateRemove(kid);\r\n      kid.parentNode = null;\r\n    }\r\n    if (this._childNodes) {\r\n      this._childNodes.length = 0;\r\n    } else {\r\n      this._firstChild = null;\r\n    }\r\n    this.modify(); // Update last modified type once only\r\n  }},\r\n\r\n});\r\n","\"use strict\";\r\nmodule.exports = CustomEvent;\r\n\r\nvar Event = require('./Event');\r\n\r\nfunction CustomEvent(type, dictionary) {\r\n  // Just use the superclass constructor to initialize\r\n  Event.call(this, type, dictionary);\r\n}\r\nCustomEvent.prototype = Object.create(Event.prototype, {\r\n  constructor: { value: CustomEvent }\r\n});\r\n","\"use strict\";\r\nmodule.exports = DOMException;\r\n\r\nvar INDEX_SIZE_ERR = 1;\r\nvar HIERARCHY_REQUEST_ERR = 3;\r\nvar WRONG_DOCUMENT_ERR = 4;\r\nvar INVALID_CHARACTER_ERR = 5;\r\nvar NO_MODIFICATION_ALLOWED_ERR = 7;\r\nvar NOT_FOUND_ERR = 8;\r\nvar NOT_SUPPORTED_ERR = 9;\r\nvar INVALID_STATE_ERR = 11;\r\nvar SYNTAX_ERR = 12;\r\nvar INVALID_MODIFICATION_ERR = 13;\r\nvar NAMESPACE_ERR = 14;\r\nvar INVALID_ACCESS_ERR = 15;\r\nvar TYPE_MISMATCH_ERR = 17;\r\nvar SECURITY_ERR = 18;\r\nvar NETWORK_ERR = 19;\r\nvar ABORT_ERR = 20;\r\nvar URL_MISMATCH_ERR = 21;\r\nvar QUOTA_EXCEEDED_ERR = 22;\r\nvar TIMEOUT_ERR = 23;\r\nvar INVALID_NODE_TYPE_ERR = 24;\r\nvar DATA_CLONE_ERR = 25;\r\n\r\n// Code to name\r\nvar names = [\r\n  null,  // No error with code 0\r\n  'INDEX_SIZE_ERR',\r\n  null, // historical\r\n  'HIERARCHY_REQUEST_ERR',\r\n  'WRONG_DOCUMENT_ERR',\r\n  'INVALID_CHARACTER_ERR',\r\n  null, // historical\r\n  'NO_MODIFICATION_ALLOWED_ERR',\r\n  'NOT_FOUND_ERR',\r\n  'NOT_SUPPORTED_ERR',\r\n  'INUSE_ATTRIBUTE_ERR', // historical\r\n  'INVALID_STATE_ERR',\r\n  'SYNTAX_ERR',\r\n  'INVALID_MODIFICATION_ERR',\r\n  'NAMESPACE_ERR',\r\n  'INVALID_ACCESS_ERR',\r\n  null, // historical\r\n  'TYPE_MISMATCH_ERR',\r\n  'SECURITY_ERR',\r\n  'NETWORK_ERR',\r\n  'ABORT_ERR',\r\n  'URL_MISMATCH_ERR',\r\n  'QUOTA_EXCEEDED_ERR',\r\n  'TIMEOUT_ERR',\r\n  'INVALID_NODE_TYPE_ERR',\r\n  'DATA_CLONE_ERR',\r\n];\r\n\r\n// Code to message\r\n// These strings are from the 13 May 2011 Editor's Draft of DOM Core.\r\n// http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html\r\n// Copyright © 2011 W3C® (MIT, ERCIM, Keio), All Rights Reserved.\r\n// Used under the terms of the W3C Document License:\r\n// http://www.w3.org/Consortium/Legal/2002/copyright-documents-20021231\r\nvar messages = [\r\n  null,  // No error with code 0\r\n  'INDEX_SIZE_ERR (1): the index is not in the allowed range',\r\n  null,\r\n  'HIERARCHY_REQUEST_ERR (3): the operation would yield an incorrect nodes model',\r\n  'WRONG_DOCUMENT_ERR (4): the object is in the wrong Document, a call to importNode is required',\r\n  'INVALID_CHARACTER_ERR (5): the string contains invalid characters',\r\n  null,\r\n  'NO_MODIFICATION_ALLOWED_ERR (7): the object can not be modified',\r\n  'NOT_FOUND_ERR (8): the object can not be found here',\r\n  'NOT_SUPPORTED_ERR (9): this operation is not supported',\r\n  'INUSE_ATTRIBUTE_ERR (10): setAttributeNode called on owned Attribute',\r\n  'INVALID_STATE_ERR (11): the object is in an invalid state',\r\n  'SYNTAX_ERR (12): the string did not match the expected pattern',\r\n  'INVALID_MODIFICATION_ERR (13): the object can not be modified in this way',\r\n  'NAMESPACE_ERR (14): the operation is not allowed by Namespaces in XML',\r\n  'INVALID_ACCESS_ERR (15): the object does not support the operation or argument',\r\n  null,\r\n  'TYPE_MISMATCH_ERR (17): the type of the object does not match the expected type',\r\n  'SECURITY_ERR (18): the operation is insecure',\r\n  'NETWORK_ERR (19): a network error occurred',\r\n  'ABORT_ERR (20): the user aborted an operation',\r\n  'URL_MISMATCH_ERR (21): the given URL does not match another URL',\r\n  'QUOTA_EXCEEDED_ERR (22): the quota has been exceeded',\r\n  'TIMEOUT_ERR (23): a timeout occurred',\r\n  'INVALID_NODE_TYPE_ERR (24): the supplied node is invalid or has an invalid ancestor for this operation',\r\n  'DATA_CLONE_ERR (25): the object can not be cloned.'\r\n];\r\n\r\n// Name to code\r\nvar constants = {\r\n  INDEX_SIZE_ERR: INDEX_SIZE_ERR,\r\n  DOMSTRING_SIZE_ERR: 2, // historical\r\n  HIERARCHY_REQUEST_ERR: HIERARCHY_REQUEST_ERR,\r\n  WRONG_DOCUMENT_ERR: WRONG_DOCUMENT_ERR,\r\n  INVALID_CHARACTER_ERR: INVALID_CHARACTER_ERR,\r\n  NO_DATA_ALLOWED_ERR: 6, // historical\r\n  NO_MODIFICATION_ALLOWED_ERR: NO_MODIFICATION_ALLOWED_ERR,\r\n  NOT_FOUND_ERR: NOT_FOUND_ERR,\r\n  NOT_SUPPORTED_ERR: NOT_SUPPORTED_ERR,\r\n  INUSE_ATTRIBUTE_ERR: 10, // historical\r\n  INVALID_STATE_ERR: INVALID_STATE_ERR,\r\n  SYNTAX_ERR: SYNTAX_ERR,\r\n  INVALID_MODIFICATION_ERR: INVALID_MODIFICATION_ERR,\r\n  NAMESPACE_ERR: NAMESPACE_ERR,\r\n  INVALID_ACCESS_ERR: INVALID_ACCESS_ERR,\r\n  VALIDATION_ERR: 16, // historical\r\n  TYPE_MISMATCH_ERR: TYPE_MISMATCH_ERR,\r\n  SECURITY_ERR: SECURITY_ERR,\r\n  NETWORK_ERR: NETWORK_ERR,\r\n  ABORT_ERR: ABORT_ERR,\r\n  URL_MISMATCH_ERR: URL_MISMATCH_ERR,\r\n  QUOTA_EXCEEDED_ERR: QUOTA_EXCEEDED_ERR,\r\n  TIMEOUT_ERR: TIMEOUT_ERR,\r\n  INVALID_NODE_TYPE_ERR: INVALID_NODE_TYPE_ERR,\r\n  DATA_CLONE_ERR: DATA_CLONE_ERR\r\n};\r\n\r\nfunction DOMException(code) {\r\n  Error.call(this);\r\n  Error.captureStackTrace(this, this.constructor);\r\n  this.code = code;\r\n  this.message = messages[code];\r\n  this.name = names[code];\r\n}\r\nDOMException.prototype.__proto__ = Error.prototype;\r\n\r\n// Initialize the constants on DOMException and DOMException.prototype\r\nfor(var c in constants) {\r\n  var v = { value: constants[c] };\r\n  Object.defineProperty(DOMException, c, v);\r\n  Object.defineProperty(DOMException.prototype, c, v);\r\n}\r\n","\"use strict\";\r\nmodule.exports = DOMImplementation;\r\n\r\nvar Document = require('./Document');\r\nvar DocumentType = require('./DocumentType');\r\nvar HTMLParser = require('./HTMLParser');\r\nvar utils = require('./utils');\r\nvar xml = require('./xmlnames');\r\n\r\n// Each document must have its own instance of the domimplementation object\r\nfunction DOMImplementation(contextObject) {\r\n  this.contextObject = contextObject;\r\n}\r\n\r\n\r\n// Feature/version pairs that DOMImplementation.hasFeature() returns\r\n// true for.  It returns false for anything else.\r\nvar supportedFeatures = {\r\n  'xml': { '': true, '1.0': true, '2.0': true },   // DOM Core\r\n  'core': { '': true, '2.0': true },               // DOM Core\r\n  'html': { '': true, '1.0': true, '2.0': true} ,  // HTML\r\n  'xhtml': { '': true, '1.0': true, '2.0': true} , // HTML\r\n};\r\n\r\nDOMImplementation.prototype = {\r\n  hasFeature: function hasFeature(feature, version) {\r\n    var f = supportedFeatures[(feature || '').toLowerCase()];\r\n    return (f && f[version || '']) || false;\r\n  },\r\n\r\n  createDocumentType: function createDocumentType(qualifiedName, publicId, systemId) {\r\n    if (!xml.isValidQName(qualifiedName)) utils.InvalidCharacterError();\r\n\r\n    return new DocumentType(this.contextObject, qualifiedName, publicId, systemId);\r\n  },\r\n\r\n  createDocument: function createDocument(namespace, qualifiedName, doctype) {\r\n    //\r\n    // Note that the current DOMCore spec makes it impossible to\r\n    // create an HTML document with this function, even if the\r\n    // namespace and doctype are propertly set.  See this thread:\r\n    // http://lists.w3.org/Archives/Public/www-dom/2011AprJun/0132.html\r\n    //\r\n    var d = new Document(false, null);\r\n    var e;\r\n\r\n    if (qualifiedName)\r\n      e = d.createElementNS(namespace, qualifiedName);\r\n    else\r\n      e = null;\r\n\r\n    if (doctype) {\r\n      d.appendChild(doctype);\r\n    }\r\n\r\n    if (e) d.appendChild(e);\r\n    if (namespace === utils.NAMESPACE.HTML) {\r\n      d._contentType = 'application/xhtml+xml';\r\n    } else if (namespace === utils.NAMESPACE.SVG) {\r\n      d._contentType = 'image/svg+xml';\r\n    } else {\r\n      d._contentType = 'application/xml';\r\n    }\r\n\r\n    return d;\r\n  },\r\n\r\n  createHTMLDocument: function createHTMLDocument(titleText) {\r\n    var d = new Document(true, null);\r\n    d.appendChild(new DocumentType(d, 'html'));\r\n    var html = d.createElement('html');\r\n    d.appendChild(html);\r\n    var head = d.createElement('head');\r\n    html.appendChild(head);\r\n    if (titleText !== undefined) {\r\n      var title = d.createElement('title');\r\n      head.appendChild(title);\r\n      title.appendChild(d.createTextNode(titleText));\r\n    }\r\n    html.appendChild(d.createElement('body'));\r\n    d.modclock = 1; // Start tracking modifications\r\n    return d;\r\n  },\r\n\r\n  mozSetOutputMutationHandler: function(doc, handler) {\r\n    doc.mutationHandler = handler;\r\n  },\r\n\r\n  mozGetInputMutationHandler: function(doc) {\r\n    utils.nyi();\r\n  },\r\n\r\n  mozHTMLParser: HTMLParser,\r\n};\r\n","\"use strict\";\r\n// DOMTokenList implementation based on https://github.com/Raynos/DOM-shim\r\nvar utils = require('./utils');\r\n\r\nmodule.exports = DOMTokenList;\r\n\r\nfunction DOMTokenList(getter, setter) {\r\n  this._getString = getter;\r\n  this._setString = setter;\r\n  this._length = 0;\r\n  this._lastStringValue = '';\r\n  this._update();\r\n}\r\n\r\nObject.defineProperties(DOMTokenList.prototype, {\r\n  length: { get: function() { return this._length; } },\r\n  item: { value: function(index) {\r\n    var list = getList(this);\r\n    if (index < 0 || index >= list.length) {\r\n      return null;\r\n    }\r\n    return list[index];\r\n  }},\r\n\r\n  contains: { value: function(token) {\r\n    token = String(token); // no error checking for contains()\r\n    var list = getList(this);\r\n    return list.indexOf(token) > -1;\r\n  }},\r\n\r\n  add: { value: function() {\r\n    var list = getList(this);\r\n    for (var i = 0, len = arguments.length; i < len; i++) {\r\n      var token = handleErrors(arguments[i]);\r\n      if (list.indexOf(token) < 0) {\r\n        list.push(token);\r\n      }\r\n    }\r\n    // Note: as per spec, if handleErrors() throws any errors, we never\r\n    // make it here and none of the changes take effect.\r\n    // Also per spec: we run the \"update steps\" even if no change was\r\n    // made (ie, if the token already existed)\r\n    this._update(list);\r\n  }},\r\n\r\n  remove: { value: function() {\r\n    var list = getList(this);\r\n    for (var i = 0, len = arguments.length; i < len; i++) {\r\n      var token = handleErrors(arguments[i]);\r\n      var index = list.indexOf(token);\r\n      if (index > -1) {\r\n        list.splice(index, 1);\r\n      }\r\n    }\r\n    // Note: as per spec, if handleErrors() throws any errors, we never\r\n    // make it here and none of the changes take effect.\r\n    // Also per spec: we run the \"update steps\" even if no change was\r\n    // made (ie, if the token wasn't previously present)\r\n    this._update(list);\r\n  }},\r\n\r\n  toggle: { value: function toggle(token, force) {\r\n    token = handleErrors(token);\r\n    if (this.contains(token)) {\r\n      if (force === undefined || force === false) {\r\n        this.remove(token);\r\n        return false;\r\n      }\r\n      return true;\r\n    } else {\r\n      if (force === undefined || force === true) {\r\n        this.add(token);\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n  }},\r\n\r\n  replace: { value: function replace(token, newToken) {\r\n    // weird corner case of spec: if `token` contains whitespace, but\r\n    // `newToken` is the empty string, we must throw SyntaxError not\r\n    // InvalidCharacterError (sigh)\r\n    if (String(newToken)==='') { utils.SyntaxError(); }\r\n    token = handleErrors(token);\r\n    newToken = handleErrors(newToken);\r\n    var list = getList(this);\r\n    var idx = list.indexOf(token);\r\n    if (idx < 0) {\r\n      // Note that, per spec, we do not run the update steps on this path.\r\n      return false;\r\n    }\r\n    var idx2 = list.indexOf(newToken);\r\n    if (idx2 < 0) {\r\n      list[idx] = newToken;\r\n    } else {\r\n      // \"replace the first instance of either `token` or `newToken` with\r\n      // `newToken` and remove all other instances\"\r\n      if (idx < idx2) {\r\n        list[idx] = newToken;\r\n        list.splice(idx2, 1);\r\n      } else {\r\n        // idx2 is already `newToken`\r\n        list.splice(idx, 1);\r\n      }\r\n    }\r\n    this._update(list);\r\n    return true;\r\n  }},\r\n\r\n  toString: { value: function() {\r\n    return this._getString();\r\n  }},\r\n\r\n  value: {\r\n    get: function() {\r\n      return this._getString();\r\n    },\r\n    set: function(v) {\r\n      this._setString(v);\r\n      this._update();\r\n    }\r\n  },\r\n\r\n  // Called when the setter is called from outside this interface.\r\n  _update: { value: function(list) {\r\n    if (list) {\r\n      fixIndex(this, list);\r\n      this._setString(list.join(\" \").trim());\r\n    } else {\r\n      fixIndex(this, getList(this));\r\n    }\r\n    this._lastStringValue = this._getString();\r\n  } },\r\n});\r\n\r\nfunction fixIndex(clist, list) {\r\n  var oldLength = clist._length;\r\n  var i;\r\n  clist._length = list.length;\r\n  for (i = 0; i < list.length; i++) {\r\n    clist[i] = list[i];\r\n  }\r\n  // Clear/free old entries.\r\n  for (; i < oldLength; i++) {\r\n    clist[i] = undefined;\r\n  }\r\n}\r\n\r\nfunction handleErrors(token) {\r\n  token = String(token);\r\n  if (token === \"\") {\r\n    utils.SyntaxError();\r\n  }\r\n  if (/[ \\t\\r\\n\\f]/.test(token)) {\r\n    utils.InvalidCharacterError();\r\n  }\r\n  return token;\r\n}\r\n\r\nfunction toArray(clist) {\r\n  var length = clist._length;\r\n  var arr = Array(length);\r\n  for (var i = 0; i < length; i++) {\r\n    arr[i] = clist[i];\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction getList(clist) {\r\n  var strProp = clist._getString();\r\n  if (strProp === clist._lastStringValue) {\r\n    return toArray(clist);\r\n  }\r\n  var str = strProp.replace(/(^[ \\t\\r\\n\\f]+)|([ \\t\\r\\n\\f]+$)/g, '');\r\n  if (str === \"\") {\r\n    return [];\r\n  } else {\r\n    var seen = Object.create(null);\r\n    return str.split(/[ \\t\\r\\n\\f]+/g).filter(function(n) {\r\n      var key = '$' + n;\r\n      if (seen[key]) { return false; }\r\n      seen[key] = true;\r\n      return true;\r\n    });\r\n  }\r\n}\r\n","\"use strict\";\r\nmodule.exports = Document;\r\n\r\nvar Node = require('./Node');\r\nvar NodeList = require('./NodeList');\r\nvar ContainerNode = require('./ContainerNode');\r\nvar Element = require('./Element');\r\nvar Text = require('./Text');\r\nvar Comment = require('./Comment');\r\nvar Event = require('./Event');\r\nvar DocumentFragment = require('./DocumentFragment');\r\nvar ProcessingInstruction = require('./ProcessingInstruction');\r\nvar DOMImplementation = require('./DOMImplementation');\r\nvar TreeWalker = require('./TreeWalker');\r\nvar NodeIterator = require('./NodeIterator');\r\nvar NodeFilter = require('./NodeFilter');\r\nvar URL = require('./URL');\r\nvar select = require('./select');\r\nvar events = require('./events');\r\nvar xml = require('./xmlnames');\r\nvar html = require('./htmlelts');\r\nvar svg = require('./svg');\r\nvar utils = require('./utils');\r\nvar MUTATE = require('./MutationConstants');\r\nvar NAMESPACE = utils.NAMESPACE;\r\nvar isApiWritable = require(\"./config\").isApiWritable;\r\n\r\nfunction Document(isHTML, address) {\r\n  ContainerNode.call(this);\r\n  this.nodeType = Node.DOCUMENT_NODE;\r\n  this.isHTML = isHTML;\r\n  this._address = address || 'about:blank';\r\n  this.readyState = 'loading';\r\n  this.implementation = new DOMImplementation(this);\r\n\r\n  // DOMCore says that documents are always associated with themselves\r\n  this.ownerDocument = null; // ... but W3C tests expect null\r\n  this._contentType = isHTML ? 'text/html' : 'application/xml';\r\n\r\n  // These will be initialized by our custom versions of\r\n  // appendChild and insertBefore that override the inherited\r\n  // Node methods.\r\n  // XXX: override those methods!\r\n  this.doctype = null;\r\n  this.documentElement = null;\r\n\r\n  // \"Associated inert template document\"\r\n  this._templateDocCache = null;\r\n  // List of active NodeIterators, see NodeIterator#_preremove()\r\n  this._nodeIterators = null;\r\n\r\n  // Documents are always rooted, by definition\r\n  this._nid = 1;\r\n  this._nextnid = 2; // For numbering children of the document\r\n  this._nodes = [null, this];  // nid to node map\r\n\r\n  // This maintains the mapping from element ids to element nodes.\r\n  // We may need to update this mapping every time a node is rooted\r\n  // or uprooted, and any time an attribute is added, removed or changed\r\n  // on a rooted element.\r\n  this.byId = Object.create(null);\r\n\r\n  // This property holds a monotonically increasing value akin to\r\n  // a timestamp used to record the last modification time of nodes\r\n  // and their subtrees. See the lastModTime attribute and modify()\r\n  // method of the Node class. And see FilteredElementList for an example\r\n  // of the use of lastModTime\r\n  this.modclock = 0;\r\n}\r\n\r\n// Map from lowercase event category names (used as arguments to\r\n// createEvent()) to the property name in the impl object of the\r\n// event constructor.\r\nvar supportedEvents = {\r\n  event: 'Event',\r\n  customevent: 'CustomEvent',\r\n  uievent: 'UIEvent',\r\n  mouseevent: 'MouseEvent'\r\n};\r\n\r\n// Certain arguments to document.createEvent() must be treated specially\r\nvar replacementEvent = {\r\n  events: 'event',\r\n  htmlevents: 'event',\r\n  mouseevents: 'mouseevent',\r\n  mutationevents: 'mutationevent',\r\n  uievents: 'uievent'\r\n};\r\n\r\nvar mirrorAttr = function(f, name, defaultValue) {\r\n  return {\r\n    get: function() {\r\n      var o = f.call(this);\r\n      if (o) { return o[name]; }\r\n      return defaultValue;\r\n    },\r\n    set: function(value) {\r\n      var o = f.call(this);\r\n      if (o) { o[name] = value; }\r\n    },\r\n  };\r\n};\r\n\r\n/** @spec https://dom.spec.whatwg.org/#validate-and-extract */\r\nfunction validateAndExtract(namespace, qualifiedName) {\r\n  var prefix, localName, pos;\r\n  if (namespace==='') { namespace = null; }\r\n  // See https://github.com/whatwg/dom/issues/671\r\n  // and https://github.com/whatwg/dom/issues/319\r\n  if (!xml.isValidQName(qualifiedName)) {\r\n    utils.InvalidCharacterError();\r\n  }\r\n  prefix = null;\r\n  localName = qualifiedName;\r\n\r\n  pos = qualifiedName.indexOf(':');\r\n  if (pos >= 0) {\r\n    prefix = qualifiedName.substring(0, pos);\r\n    localName = qualifiedName.substring(pos+1);\r\n  }\r\n  if (prefix !== null && namespace === null) {\r\n    utils.NamespaceError();\r\n  }\r\n  if (prefix === 'xml' && namespace !== NAMESPACE.XML) {\r\n    utils.NamespaceError();\r\n  }\r\n  if ((prefix === 'xmlns' || qualifiedName === 'xmlns') &&\r\n      namespace !== NAMESPACE.XMLNS) {\r\n    utils.NamespaceError();\r\n  }\r\n  if (namespace === NAMESPACE.XMLNS && !(prefix==='xmlns' || qualifiedName==='xmlns')) {\r\n    utils.NamespaceError();\r\n  }\r\n  return { namespace: namespace, prefix: prefix, localName: localName };\r\n}\r\n\r\nDocument.prototype = Object.create(ContainerNode.prototype, {\r\n  // This method allows dom.js to communicate with a renderer\r\n  // that displays the document in some way\r\n  // XXX: I should probably move this to the window object\r\n  _setMutationHandler: { value: function(handler) {\r\n    this.mutationHandler = handler;\r\n  }},\r\n\r\n  // This method allows dom.js to receive event notifications\r\n  // from the renderer.\r\n  // XXX: I should probably move this to the window object\r\n  _dispatchRendererEvent: { value: function(targetNid, type, details) {\r\n    var target = this._nodes[targetNid];\r\n    if (!target) return;\r\n    target._dispatchEvent(new Event(type, details), true);\r\n  }},\r\n\r\n  nodeName: { value: '#document'},\r\n  nodeValue: {\r\n    get: function() {\r\n      return null;\r\n    },\r\n    set: function() {}\r\n  },\r\n\r\n  // XXX: DOMCore may remove documentURI, so it is NYI for now\r\n  documentURI: { get: function() { return this._address; }, set: utils.nyi },\r\n  compatMode: { get: function() {\r\n    // The _quirks property is set by the HTML parser\r\n    return this._quirks ? 'BackCompat' : 'CSS1Compat';\r\n  }},\r\n\r\n  createTextNode: { value: function(data) {\r\n    return new Text(this, String(data));\r\n  }},\r\n  createComment: { value: function(data) {\r\n    return new Comment(this, data);\r\n  }},\r\n  createDocumentFragment: { value: function() {\r\n    return new DocumentFragment(this);\r\n  }},\r\n  createProcessingInstruction: { value: function(target, data) {\r\n    if (!xml.isValidName(target) || data.indexOf('?>') !== -1)\r\n      utils.InvalidCharacterError();\r\n    return new ProcessingInstruction(this, target, data);\r\n  }},\r\n\r\n  createAttribute: { value: function(localName) {\r\n    localName = String(localName);\r\n    if (!xml.isValidName(localName)) utils.InvalidCharacterError();\r\n    if (this.isHTML) {\r\n      localName = utils.toASCIILowerCase(localName);\r\n    }\r\n    return new Element._Attr(null, localName, null, null, '');\r\n  }},\r\n  createAttributeNS: { value: function(namespace, qualifiedName) {\r\n    // Convert parameter types according to WebIDL\r\n    namespace =\r\n      (namespace === null || namespace === undefined || namespace === '') ? null :\r\n      String(namespace);\r\n    qualifiedName = String(qualifiedName);\r\n    var ve = validateAndExtract(namespace, qualifiedName);\r\n    return new Element._Attr(null, ve.localName, ve.prefix, ve.namespace, '');\r\n  }},\r\n\r\n  createElement: { value: function(localName) {\r\n    localName = String(localName);\r\n    if (!xml.isValidName(localName)) utils.InvalidCharacterError();\r\n    // Per spec, namespace should be HTML namespace if \"context object is\r\n    // an HTML document or context object's content type is\r\n    // \"application/xhtml+xml\", and null otherwise.\r\n    if (this.isHTML) {\r\n      if (/[A-Z]/.test(localName))\r\n        localName = utils.toASCIILowerCase(localName);\r\n      return html.createElement(this, localName, null);\r\n    } else if (this.contentType === 'application/xhtml+xml') {\r\n      return html.createElement(this, localName, null);\r\n    } else {\r\n      return new Element(this, localName, null, null);\r\n    }\r\n  }, writable: isApiWritable },\r\n\r\n  createElementNS: { value: function(namespace, qualifiedName) {\r\n    // Convert parameter types according to WebIDL\r\n    namespace =\r\n      (namespace === null || namespace === undefined || namespace === '') ? null :\r\n      String(namespace);\r\n    qualifiedName = String(qualifiedName);\r\n    var ve = validateAndExtract(namespace, qualifiedName);\r\n    return this._createElementNS(ve.localName, ve.namespace, ve.prefix);\r\n  }, writable: isApiWritable },\r\n\r\n  // This is used directly by HTML parser, which allows it to create\r\n  // elements with localNames containing ':' and non-default namespaces\r\n  _createElementNS: { value: function(localName, namespace, prefix) {\r\n    if (namespace === NAMESPACE.HTML) {\r\n      return html.createElement(this, localName, prefix);\r\n    }\r\n    else if (namespace === NAMESPACE.SVG) {\r\n      return svg.createElement(this, localName, prefix);\r\n    }\r\n\r\n    return new Element(this, localName, namespace, prefix);\r\n  }},\r\n\r\n  createEvent: { value: function createEvent(interfaceName) {\r\n    interfaceName = interfaceName.toLowerCase();\r\n    var name = replacementEvent[interfaceName] || interfaceName;\r\n    var constructor = events[supportedEvents[name]];\r\n\r\n    if (constructor) {\r\n      var e = new constructor();\r\n      e._initialized = false;\r\n      return e;\r\n    }\r\n    else {\r\n      utils.NotSupportedError();\r\n    }\r\n  }},\r\n\r\n  // See: http://www.w3.org/TR/dom/#dom-document-createtreewalker\r\n  createTreeWalker: {value: function (root, whatToShow, filter) {\r\n    if (!root) { throw new TypeError(\"root argument is required\"); }\r\n    if (!(root instanceof Node)) { throw new TypeError(\"root not a node\"); }\r\n    whatToShow = whatToShow === undefined ? NodeFilter.SHOW_ALL : (+whatToShow);\r\n    filter = filter === undefined ? null : filter;\r\n\r\n    return new TreeWalker(root, whatToShow, filter);\r\n  }},\r\n\r\n  // See: http://www.w3.org/TR/dom/#dom-document-createnodeiterator\r\n  createNodeIterator: {value: function (root, whatToShow, filter) {\r\n    if (!root) { throw new TypeError(\"root argument is required\"); }\r\n    if (!(root instanceof Node)) { throw new TypeError(\"root not a node\"); }\r\n    whatToShow = whatToShow === undefined ? NodeFilter.SHOW_ALL : (+whatToShow);\r\n    filter = filter === undefined ? null : filter;\r\n\r\n    return new NodeIterator(root, whatToShow, filter);\r\n  }},\r\n\r\n  _attachNodeIterator: { value: function(ni) {\r\n    // XXX ideally this should be a weak reference from Document to NodeIterator\r\n    if (!this._nodeIterators) { this._nodeIterators = []; }\r\n    this._nodeIterators.push(ni);\r\n  }},\r\n\r\n  _detachNodeIterator: { value: function(ni) {\r\n    // ni should always be in list of node iterators\r\n    var idx = this._nodeIterators.indexOf(ni);\r\n    this._nodeIterators.splice(idx, 1);\r\n  }},\r\n\r\n  _preremoveNodeIterators: { value: function(toBeRemoved) {\r\n    if (this._nodeIterators) {\r\n      this._nodeIterators.forEach(function(ni) { ni._preremove(toBeRemoved); });\r\n    }\r\n  }},\r\n\r\n  // Maintain the documentElement and\r\n  // doctype properties of the document.  Each of the following\r\n  // methods chains to the Node implementation of the method\r\n  // to do the actual inserting, removal or replacement.\r\n\r\n  _updateDocTypeElement: { value: function _updateDocTypeElement() {\r\n    this.doctype = this.documentElement = null;\r\n    for (var kid = this.firstChild; kid !== null; kid = kid.nextSibling) {\r\n      if (kid.nodeType === Node.DOCUMENT_TYPE_NODE)\r\n        this.doctype = kid;\r\n      else if (kid.nodeType === Node.ELEMENT_NODE)\r\n        this.documentElement = kid;\r\n    }\r\n  }},\r\n\r\n  insertBefore: { value: function insertBefore(child, refChild) {\r\n    Node.prototype.insertBefore.call(this, child, refChild);\r\n    this._updateDocTypeElement();\r\n    return child;\r\n  }},\r\n\r\n  replaceChild: { value: function replaceChild(node, child) {\r\n    Node.prototype.replaceChild.call(this, node, child);\r\n    this._updateDocTypeElement();\r\n    return child;\r\n  }},\r\n\r\n  removeChild: { value: function removeChild(child) {\r\n    Node.prototype.removeChild.call(this, child);\r\n    this._updateDocTypeElement();\r\n    return child;\r\n  }},\r\n\r\n  getElementById: { value: function(id) {\r\n    var n = this.byId[id];\r\n    if (!n) return null;\r\n    if (n instanceof MultiId) { // there was more than one element with this id\r\n      return n.getFirst();\r\n    }\r\n    return n;\r\n  }},\r\n\r\n  _hasMultipleElementsWithId: { value: function(id) {\r\n    // Used internally by querySelectorAll optimization\r\n    return (this.byId[id] instanceof MultiId);\r\n  }},\r\n\r\n  // Just copy this method from the Element prototype\r\n  getElementsByName: { value: Element.prototype.getElementsByName },\r\n  getElementsByTagName: { value: Element.prototype.getElementsByTagName },\r\n  getElementsByTagNameNS: { value: Element.prototype.getElementsByTagNameNS },\r\n  getElementsByClassName: { value: Element.prototype.getElementsByClassName },\r\n\r\n  adoptNode: { value: function adoptNode(node) {\r\n    if (node.nodeType === Node.DOCUMENT_NODE) utils.NotSupportedError();\r\n    if (node.nodeType === Node.ATTRIBUTE_NODE) { return node; }\r\n\r\n    if (node.parentNode) node.parentNode.removeChild(node);\r\n\r\n    if (node.ownerDocument !== this)\r\n      recursivelySetOwner(node, this);\r\n\r\n    return node;\r\n  }},\r\n\r\n  importNode: { value: function importNode(node, deep) {\r\n    return this.adoptNode(node.cloneNode(deep));\r\n  }, writable: isApiWritable },\r\n\r\n  // The following attributes and methods are from the HTML spec\r\n  origin: { get: function origin() { return null; } },\r\n  characterSet: { get: function characterSet() { return \"UTF-8\"; } },\r\n  contentType: { get: function contentType() { return this._contentType; } },\r\n  URL: { get: function URL() { return this._address; } },\r\n  domain: { get: utils.nyi, set: utils.nyi },\r\n  referrer: { get: utils.nyi },\r\n  cookie: { get: utils.nyi, set: utils.nyi },\r\n  lastModified: { get: utils.nyi },\r\n  location: {\r\n\tget: function() {\r\n\t  return this.defaultView ? this.defaultView.location : null; // gh #75\r\n\t},\r\n\tset: utils.nyi\r\n  },\r\n  _titleElement: {\r\n    get: function() {\r\n      // The title element of a document is the first title element in the\r\n      // document in tree order, if there is one, or null otherwise.\r\n      return this.getElementsByTagName('title').item(0) || null;\r\n    }\r\n  },\r\n  title: {\r\n    get: function() {\r\n      var elt = this._titleElement;\r\n      // The child text content of the title element, or '' if null.\r\n      var value = elt ? elt.textContent : '';\r\n      // Strip and collapse whitespace in value\r\n      return value.replace(/[ \\t\\n\\r\\f]+/g, ' ').replace(/(^ )|( $)/g, '');\r\n    },\r\n    set: function(value) {\r\n      var elt = this._titleElement;\r\n      var head = this.head;\r\n      if (!elt && !head) { return; /* according to spec */ }\r\n      if (!elt) {\r\n        elt = this.createElement('title');\r\n        head.appendChild(elt);\r\n      }\r\n      elt.textContent = value;\r\n    }\r\n  },\r\n  dir: mirrorAttr(function() {\r\n    var htmlElement = this.documentElement;\r\n    if (htmlElement && htmlElement.tagName === 'HTML') { return htmlElement; }\r\n  }, 'dir', ''),\r\n  fgColor: mirrorAttr(function() { return this.body; }, 'text', ''),\r\n  linkColor: mirrorAttr(function() { return this.body; }, 'link', ''),\r\n  vlinkColor: mirrorAttr(function() { return this.body; }, 'vLink', ''),\r\n  alinkColor: mirrorAttr(function() { return this.body; }, 'aLink', ''),\r\n  bgColor: mirrorAttr(function() { return this.body; }, 'bgColor', ''),\r\n\r\n  // Historical aliases of Document#characterSet\r\n  charset: { get: function() { return this.characterSet; } },\r\n  inputEncoding: { get: function() { return this.characterSet; } },\r\n\r\n  scrollingElement: {\r\n    get: function() {\r\n      return this._quirks ? this.body : this.documentElement;\r\n    }\r\n  },\r\n\r\n  // Return the first <body> child of the document element.\r\n  // XXX For now, setting this attribute is not implemented.\r\n  body: {\r\n    get: function() {\r\n      return namedHTMLChild(this.documentElement, 'body');\r\n    },\r\n    set: utils.nyi\r\n  },\r\n  // Return the first <head> child of the document element.\r\n  head: { get: function() {\r\n    return namedHTMLChild(this.documentElement, 'head');\r\n  }},\r\n  images: { get: utils.nyi },\r\n  embeds: { get: utils.nyi },\r\n  plugins: { get: utils.nyi },\r\n  links: { get: utils.nyi },\r\n  forms: { get: utils.nyi },\r\n  scripts: { get: utils.nyi },\r\n  applets: { get: function() { return []; } },\r\n  activeElement: { get: function() { return null; } },\r\n  innerHTML: {\r\n    get: function() { return this.serialize(); },\r\n    set: utils.nyi\r\n  },\r\n  outerHTML: {\r\n    get: function() { return this.serialize(); },\r\n    set: utils.nyi\r\n  },\r\n\r\n  write: { value: function(args) {\r\n    if (!this.isHTML) utils.InvalidStateError();\r\n\r\n    // XXX: still have to implement the ignore part\r\n    if (!this._parser /* && this._ignore_destructive_writes > 0 */ )\r\n      return;\r\n\r\n    if (!this._parser) {\r\n      // XXX call document.open, etc.\r\n    }\r\n\r\n    var s = arguments.join('');\r\n\r\n    // If the Document object's reload override flag is set, then\r\n    // append the string consisting of the concatenation of all the\r\n    // arguments to the method to the Document's reload override\r\n    // buffer.\r\n    // XXX: don't know what this is about.  Still have to do it\r\n\r\n    // If there is no pending parsing-blocking script, have the\r\n    // tokenizer process the characters that were inserted, one at a\r\n    // time, processing resulting tokens as they are emitted, and\r\n    // stopping when the tokenizer reaches the insertion point or when\r\n    // the processing of the tokenizer is aborted by the tree\r\n    // construction stage (this can happen if a script end tag token is\r\n    // emitted by the tokenizer).\r\n\r\n    // XXX: still have to do the above. Sounds as if we don't\r\n    // always call parse() here.  If we're blocked, then we just\r\n    // insert the text into the stream but don't parse it reentrantly...\r\n\r\n    // Invoke the parser reentrantly\r\n    this._parser.parse(s);\r\n  }},\r\n\r\n  writeln: { value: function writeln(args) {\r\n    this.write(Array.prototype.join.call(arguments, '') + '\\n');\r\n  }},\r\n\r\n  open: { value: function() {\r\n    this.documentElement = null;\r\n  }},\r\n\r\n  close: { value: function() {\r\n    this.readyState = 'interactive';\r\n    this._dispatchEvent(new Event('readystatechange'), true);\r\n    this._dispatchEvent(new Event('DOMContentLoaded'), true);\r\n    this.readyState = 'complete';\r\n    this._dispatchEvent(new Event('readystatechange'), true);\r\n    if (this.defaultView) {\r\n      this.defaultView._dispatchEvent(new Event('load'), true);\r\n    }\r\n  }},\r\n\r\n  // Utility methods\r\n  clone: { value: function clone() {\r\n    var d = new Document(this.isHTML, this._address);\r\n    d._quirks = this._quirks;\r\n    d._contentType = this._contentType;\r\n    return d;\r\n  }},\r\n\r\n  // We need to adopt the nodes if we do a deep clone\r\n  cloneNode: { value: function cloneNode(deep) {\r\n    var clone = Node.prototype.cloneNode.call(this, false);\r\n    if (deep) {\r\n      for (var kid = this.firstChild; kid !== null; kid = kid.nextSibling) {\r\n        clone._appendChild(clone.importNode(kid, true));\r\n      }\r\n    }\r\n    clone._updateDocTypeElement();\r\n    return clone;\r\n  }},\r\n\r\n  isEqual: { value: function isEqual(n) {\r\n    // Any two documents are shallowly equal.\r\n    // Node.isEqualNode will also test the children\r\n    return true;\r\n  }},\r\n\r\n  // Implementation-specific function.  Called when a text, comment,\r\n  // or pi value changes.\r\n  mutateValue: { value: function(node) {\r\n    if (this.mutationHandler) {\r\n      this.mutationHandler({\r\n        type: MUTATE.VALUE,\r\n        target: node,\r\n        data: node.data\r\n      });\r\n    }\r\n  }},\r\n\r\n  // Invoked when an attribute's value changes. Attr holds the new\r\n  // value.  oldval is the old value.  Attribute mutations can also\r\n  // involve changes to the prefix (and therefore the qualified name)\r\n  mutateAttr: { value: function(attr, oldval) {\r\n    // Manage id->element mapping for getElementsById()\r\n    // XXX: this special case id handling should not go here,\r\n    // but in the attribute declaration for the id attribute\r\n    /*\r\n    if (attr.localName === 'id' && attr.namespaceURI === null) {\r\n      if (oldval) delId(oldval, attr.ownerElement);\r\n      addId(attr.value, attr.ownerElement);\r\n    }\r\n    */\r\n    if (this.mutationHandler) {\r\n      this.mutationHandler({\r\n        type: MUTATE.ATTR,\r\n        target: attr.ownerElement,\r\n        attr: attr\r\n      });\r\n    }\r\n  }},\r\n\r\n  // Used by removeAttribute and removeAttributeNS for attributes.\r\n  mutateRemoveAttr: { value: function(attr) {\r\n/*\r\n* This is now handled in Attributes.js\r\n    // Manage id to element mapping\r\n    if (attr.localName === 'id' && attr.namespaceURI === null) {\r\n      this.delId(attr.value, attr.ownerElement);\r\n    }\r\n*/\r\n    if (this.mutationHandler) {\r\n      this.mutationHandler({\r\n        type: MUTATE.REMOVE_ATTR,\r\n        target: attr.ownerElement,\r\n        attr: attr\r\n      });\r\n    }\r\n  }},\r\n\r\n  // Called by Node.removeChild, etc. to remove a rooted element from\r\n  // the tree. Only needs to generate a single mutation event when a\r\n  // node is removed, but must recursively mark all descendants as not\r\n  // rooted.\r\n  mutateRemove: { value: function(node) {\r\n    // Send a single mutation event\r\n    if (this.mutationHandler) {\r\n      this.mutationHandler({\r\n        type: MUTATE.REMOVE,\r\n        target: node.parentNode,\r\n        node: node\r\n      });\r\n    }\r\n\r\n    // Mark this and all descendants as not rooted\r\n    recursivelyUproot(node);\r\n  }},\r\n\r\n  // Called when a new element becomes rooted.  It must recursively\r\n  // generate mutation events for each of the children, and mark them all\r\n  // as rooted.\r\n  mutateInsert: { value: function(node) {\r\n    // Mark node and its descendants as rooted\r\n    recursivelyRoot(node);\r\n\r\n    // Send a single mutation event\r\n    if (this.mutationHandler) {\r\n      this.mutationHandler({\r\n        type: MUTATE.INSERT,\r\n        target: node.parentNode,\r\n        node: node\r\n      });\r\n    }\r\n  }},\r\n\r\n  // Called when a rooted element is moved within the document\r\n  mutateMove: { value: function(node) {\r\n    if (this.mutationHandler) {\r\n      this.mutationHandler({\r\n        type: MUTATE.MOVE,\r\n        target: node\r\n      });\r\n    }\r\n  }},\r\n\r\n\r\n  // Add a mapping from  id to n for n.ownerDocument\r\n  addId: { value: function addId(id, n) {\r\n    var val = this.byId[id];\r\n    if (!val) {\r\n      this.byId[id] = n;\r\n    }\r\n    else {\r\n      // TODO: Add a way to opt-out console warnings\r\n      //console.warn('Duplicate element id ' + id);\r\n      if (!(val instanceof MultiId)) {\r\n        val = new MultiId(val);\r\n        this.byId[id] = val;\r\n      }\r\n      val.add(n);\r\n    }\r\n  }},\r\n\r\n  // Delete the mapping from id to n for n.ownerDocument\r\n  delId: { value: function delId(id, n) {\r\n    var val = this.byId[id];\r\n    utils.assert(val);\r\n\r\n    if (val instanceof MultiId) {\r\n      val.del(n);\r\n      if (val.length === 1) { // convert back to a single node\r\n        this.byId[id] = val.downgrade();\r\n      }\r\n    }\r\n    else {\r\n      this.byId[id] = undefined;\r\n    }\r\n  }},\r\n\r\n  _resolve: { value: function(href) {\r\n    //XXX: Cache the URL\r\n    return new URL(this._documentBaseURL).resolve(href);\r\n  }},\r\n\r\n  _documentBaseURL: { get: function() {\r\n    // XXX: This is not implemented correctly yet\r\n    var url = this._address;\r\n    if (url === 'about:blank') url = '/';\r\n\r\n    var base = this.querySelector('base[href]');\r\n    if (base) {\r\n      return new URL(url).resolve(base.getAttribute('href'));\r\n    }\r\n    return url;\r\n\r\n    // The document base URL of a Document object is the\r\n    // absolute URL obtained by running these substeps:\r\n\r\n    //     Let fallback base url be the document's address.\r\n\r\n    //     If fallback base url is about:blank, and the\r\n    //     Document's browsing context has a creator browsing\r\n    //     context, then let fallback base url be the document\r\n    //     base URL of the creator Document instead.\r\n\r\n    //     If the Document is an iframe srcdoc document, then\r\n    //     let fallback base url be the document base URL of\r\n    //     the Document's browsing context's browsing context\r\n    //     container's Document instead.\r\n\r\n    //     If there is no base element that has an href\r\n    //     attribute, then the document base URL is fallback\r\n    //     base url; abort these steps. Otherwise, let url be\r\n    //     the value of the href attribute of the first such\r\n    //     element.\r\n\r\n    //     Resolve url relative to fallback base url (thus,\r\n    //     the base href attribute isn't affected by xml:base\r\n    //     attributes).\r\n\r\n    //     The document base URL is the result of the previous\r\n    //     step if it was successful; otherwise it is fallback\r\n    //     base url.\r\n  }},\r\n\r\n  _templateDoc: { get: function() {\r\n    if (!this._templateDocCache) {\r\n      // \"associated inert template document\"\r\n      var newDoc = new Document(this.isHTML, this._address);\r\n      this._templateDocCache = newDoc._templateDocCache = newDoc;\r\n    }\r\n    return this._templateDocCache;\r\n  }},\r\n\r\n  querySelector: { value: function(selector) {\r\n    return select(selector, this)[0];\r\n  }},\r\n\r\n  querySelectorAll: { value: function(selector) {\r\n    var nodes = select(selector, this);\r\n    return nodes.item ? nodes : new NodeList(nodes);\r\n  }}\r\n\r\n});\r\n\r\n\r\nvar eventHandlerTypes = [\r\n  'abort', 'canplay', 'canplaythrough', 'change', 'click', 'contextmenu',\r\n  'cuechange', 'dblclick', 'drag', 'dragend', 'dragenter', 'dragleave',\r\n  'dragover', 'dragstart', 'drop', 'durationchange', 'emptied', 'ended',\r\n  'input', 'invalid', 'keydown', 'keypress', 'keyup', 'loadeddata',\r\n  'loadedmetadata', 'loadstart', 'mousedown', 'mousemove', 'mouseout',\r\n  'mouseover', 'mouseup', 'mousewheel', 'pause', 'play', 'playing',\r\n  'progress', 'ratechange', 'readystatechange', 'reset', 'seeked',\r\n  'seeking', 'select', 'show', 'stalled', 'submit', 'suspend',\r\n  'timeupdate', 'volumechange', 'waiting',\r\n\r\n  'blur', 'error', 'focus', 'load', 'scroll'\r\n];\r\n\r\n// Add event handler idl attribute getters and setters to Document\r\neventHandlerTypes.forEach(function(type) {\r\n  // Define the event handler registration IDL attribute for this type\r\n  Object.defineProperty(Document.prototype, 'on' + type, {\r\n    get: function() {\r\n      return this._getEventHandler(type);\r\n    },\r\n    set: function(v) {\r\n      this._setEventHandler(type, v);\r\n    }\r\n  });\r\n});\r\n\r\nfunction namedHTMLChild(parent, name) {\r\n  if (parent && parent.isHTML) {\r\n    for (var kid = parent.firstChild; kid !== null; kid = kid.nextSibling) {\r\n      if (kid.nodeType === Node.ELEMENT_NODE &&\r\n        kid.localName === name &&\r\n        kid.namespaceURI === NAMESPACE.HTML) {\r\n        return kid;\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction root(n) {\r\n  n._nid = n.ownerDocument._nextnid++;\r\n  n.ownerDocument._nodes[n._nid] = n;\r\n  // Manage id to element mapping\r\n  if (n.nodeType === Node.ELEMENT_NODE) {\r\n    var id = n.getAttribute('id');\r\n    if (id) n.ownerDocument.addId(id, n);\r\n\r\n    // Script elements need to know when they're inserted\r\n    // into the document\r\n    if (n._roothook) n._roothook();\r\n  }\r\n}\r\n\r\nfunction uproot(n) {\r\n  // Manage id to element mapping\r\n  if (n.nodeType === Node.ELEMENT_NODE) {\r\n    var id = n.getAttribute('id');\r\n    if (id) n.ownerDocument.delId(id, n);\r\n  }\r\n  n.ownerDocument._nodes[n._nid] = undefined;\r\n  n._nid = undefined;\r\n}\r\n\r\nfunction recursivelyRoot(node) {\r\n  root(node);\r\n  // XXX:\r\n  // accessing childNodes on a leaf node creates a new array the\r\n  // first time, so be careful to write this loop so that it\r\n  // doesn't do that. node is polymorphic, so maybe this is hard to\r\n  // optimize?  Try switching on nodeType?\r\n/*\r\n  if (node.hasChildNodes()) {\r\n    var kids = node.childNodes;\r\n    for(var i = 0, n = kids.length;  i < n; i++)\r\n      recursivelyRoot(kids[i]);\r\n  }\r\n*/\r\n  if (node.nodeType === Node.ELEMENT_NODE) {\r\n    for (var kid = node.firstChild; kid !== null; kid = kid.nextSibling)\r\n      recursivelyRoot(kid);\r\n  }\r\n}\r\n\r\nfunction recursivelyUproot(node) {\r\n  uproot(node);\r\n  for (var kid = node.firstChild; kid !== null; kid = kid.nextSibling)\r\n      recursivelyUproot(kid);\r\n}\r\n\r\nfunction recursivelySetOwner(node, owner) {\r\n  node.ownerDocument = owner;\r\n  node._lastModTime = undefined; // mod times are document-based\r\n  if (Object.prototype.hasOwnProperty.call(node, '_tagName')) {\r\n    node._tagName = undefined; // Element subclasses might need to change case\r\n  }\r\n  for (var kid = node.firstChild; kid !== null; kid = kid.nextSibling)\r\n    recursivelySetOwner(kid, owner);\r\n}\r\n\r\n// A class for storing multiple nodes with the same ID\r\nfunction MultiId(node) {\r\n  this.nodes = Object.create(null);\r\n  this.nodes[node._nid] = node;\r\n  this.length = 1;\r\n  this.firstNode = undefined;\r\n}\r\n\r\n// Add a node to the list, with O(1) time\r\nMultiId.prototype.add = function(node) {\r\n  if (!this.nodes[node._nid]) {\r\n    this.nodes[node._nid] = node;\r\n    this.length++;\r\n    this.firstNode = undefined;\r\n  }\r\n};\r\n\r\n// Remove a node from the list, with O(1) time\r\nMultiId.prototype.del = function(node) {\r\n  if (this.nodes[node._nid]) {\r\n    delete this.nodes[node._nid];\r\n    this.length--;\r\n    this.firstNode = undefined;\r\n  }\r\n};\r\n\r\n// Get the first node from the list, in the document order\r\n// Takes O(N) time in the size of the list, with a cache that is invalidated\r\n// when the list is modified.\r\nMultiId.prototype.getFirst = function() {\r\n  /* jshint bitwise: false */\r\n  if (!this.firstNode) {\r\n    var nid;\r\n    for (nid in this.nodes) {\r\n      if (this.firstNode === undefined ||\r\n        this.firstNode.compareDocumentPosition(this.nodes[nid]) & Node.DOCUMENT_POSITION_PRECEDING) {\r\n        this.firstNode = this.nodes[nid];\r\n      }\r\n    }\r\n  }\r\n  return this.firstNode;\r\n};\r\n\r\n// If there is only one node left, return it. Otherwise return \"this\".\r\nMultiId.prototype.downgrade = function() {\r\n  if (this.length === 1) {\r\n    var nid;\r\n    for (nid in this.nodes) {\r\n      return this.nodes[nid];\r\n    }\r\n  }\r\n  return this;\r\n};\r\n","\"use strict\";\r\nmodule.exports =  DocumentFragment;\r\n\r\nvar Node = require('./Node');\r\nvar NodeList = require('./NodeList');\r\nvar ContainerNode = require('./ContainerNode');\r\nvar Element = require('./Element');\r\nvar select = require('./select');\r\nvar utils = require('./utils');\r\n\r\nfunction DocumentFragment(doc) {\r\n  ContainerNode.call(this);\r\n  this.nodeType = Node.DOCUMENT_FRAGMENT_NODE;\r\n  this.ownerDocument = doc;\r\n}\r\n\r\nDocumentFragment.prototype = Object.create(ContainerNode.prototype, {\r\n  nodeName: { value: '#document-fragment' },\r\n  nodeValue: {\r\n    get: function() {\r\n      return null;\r\n    },\r\n    set: function() {}\r\n  },\r\n  // Copy the text content getter/setter from Element\r\n  textContent: Object.getOwnPropertyDescriptor(Element.prototype, 'textContent'),\r\n\r\n  // Copy the text content getter/setter from Element\r\n  innerText: Object.getOwnPropertyDescriptor(Element.prototype, 'innerText'),\r\n\r\n  querySelector: { value: function(selector) {\r\n    // implement in terms of querySelectorAll\r\n    var nodes = this.querySelectorAll(selector);\r\n    return nodes.length ? nodes[0] : null;\r\n  }},\r\n  querySelectorAll: { value: function(selector) {\r\n    // create a context\r\n    var context = Object.create(this);\r\n    // add some methods to the context for zest implementation, without\r\n    // adding them to the public DocumentFragment API\r\n    context.isHTML = true; // in HTML namespace (case-insensitive match)\r\n    context.getElementsByTagName = Element.prototype.getElementsByTagName;\r\n    context.nextElement =\r\n      Object.getOwnPropertyDescriptor(Element.prototype, 'firstElementChild').\r\n      get;\r\n    // invoke zest\r\n    var nodes = select(selector, context);\r\n    return nodes.item ? nodes : new NodeList(nodes);\r\n  }},\r\n\r\n  // Utility methods\r\n  clone: { value: function clone() {\r\n      return new DocumentFragment(this.ownerDocument);\r\n  }},\r\n  isEqual: { value: function isEqual(n) {\r\n      // Any two document fragments are shallowly equal.\r\n      // Node.isEqualNode() will test their children for equality\r\n      return true;\r\n  }},\r\n\r\n  // Non-standard, but useful (github issue #73)\r\n  innerHTML: {\r\n    get: function() { return this.serialize(); },\r\n    set: utils.nyi\r\n  },\r\n  outerHTML: {\r\n    get: function() { return this.serialize(); },\r\n    set: utils.nyi\r\n  },\r\n\r\n});\r\n","\"use strict\";\r\nmodule.exports = DocumentType;\r\n\r\nvar Node = require('./Node');\r\nvar Leaf = require('./Leaf');\r\nvar ChildNode = require('./ChildNode');\r\n\r\nfunction DocumentType(ownerDocument, name, publicId, systemId) {\r\n  Leaf.call(this);\r\n  this.nodeType = Node.DOCUMENT_TYPE_NODE;\r\n  this.ownerDocument = ownerDocument || null;\r\n  this.name = name;\r\n  this.publicId = publicId || \"\";\r\n  this.systemId = systemId || \"\";\r\n}\r\n\r\nDocumentType.prototype = Object.create(Leaf.prototype, {\r\n  nodeName: { get: function() { return this.name; }},\r\n  nodeValue: {\r\n    get: function() { return null; },\r\n    set: function() {}\r\n  },\r\n\r\n  // Utility methods\r\n  clone: { value: function clone() {\r\n    return new DocumentType(this.ownerDocument, this.name, this.publicId, this.systemId);\r\n  }},\r\n\r\n  isEqual: { value: function isEqual(n) {\r\n    return this.name === n.name &&\r\n      this.publicId === n.publicId &&\r\n      this.systemId === n.systemId;\r\n  }}\r\n});\r\n\r\nObject.defineProperties(DocumentType.prototype, ChildNode);\r\n","\"use strict\";\r\nmodule.exports = Element;\r\n\r\nvar xml = require('./xmlnames');\r\nvar utils = require('./utils');\r\nvar NAMESPACE = utils.NAMESPACE;\r\nvar attributes = require('./attributes');\r\nvar Node = require('./Node');\r\nvar NodeList = require('./NodeList');\r\nvar NodeUtils = require('./NodeUtils');\r\nvar FilteredElementList = require('./FilteredElementList');\r\nvar DOMException = require('./DOMException');\r\nvar DOMTokenList = require('./DOMTokenList');\r\nvar select = require('./select');\r\nvar ContainerNode = require('./ContainerNode');\r\nvar ChildNode = require('./ChildNode');\r\nvar NonDocumentTypeChildNode = require('./NonDocumentTypeChildNode');\r\nvar NamedNodeMap = require('./NamedNodeMap');\r\n\r\nvar uppercaseCache = Object.create(null);\r\n\r\nfunction Element(doc, localName, namespaceURI, prefix) {\r\n  ContainerNode.call(this);\r\n  this.nodeType = Node.ELEMENT_NODE;\r\n  this.ownerDocument = doc;\r\n  this.localName = localName;\r\n  this.namespaceURI = namespaceURI;\r\n  this.prefix = prefix;\r\n  this._tagName = undefined;\r\n\r\n  // These properties maintain the set of attributes\r\n  this._attrsByQName = Object.create(null); // The qname->Attr map\r\n  this._attrsByLName = Object.create(null); // The ns|lname->Attr map\r\n  this._attrKeys = [];     // attr index -> ns|lname\r\n}\r\n\r\nfunction recursiveGetText(node, a) {\r\n  if (node.nodeType === Node.TEXT_NODE) {\r\n    a.push(node._data);\r\n  }\r\n  else {\r\n    for(var i = 0, n = node.childNodes.length;  i < n; i++)\r\n      recursiveGetText(node.childNodes[i], a);\r\n  }\r\n}\r\n\r\nElement.prototype = Object.create(ContainerNode.prototype, {\r\n  isHTML: { get: function isHTML() {\r\n    return this.namespaceURI === NAMESPACE.HTML && this.ownerDocument.isHTML;\r\n  }},\r\n  tagName: { get: function tagName() {\r\n    if (this._tagName === undefined) {\r\n      var tn;\r\n      if (this.prefix === null) {\r\n        tn = this.localName;\r\n      } else {\r\n        tn = this.prefix + ':' + this.localName;\r\n      }\r\n      if (this.isHTML) {\r\n        var up = uppercaseCache[tn];\r\n        if (!up) {\r\n          // Converting to uppercase can be slow, so cache the conversion.\r\n          uppercaseCache[tn] = up = utils.toASCIIUpperCase(tn);\r\n        }\r\n        tn = up;\r\n      }\r\n      this._tagName = tn;\r\n    }\r\n    return this._tagName;\r\n  }},\r\n  nodeName: { get: function() { return this.tagName; }},\r\n  nodeValue: {\r\n    get: function() {\r\n      return null;\r\n    },\r\n    set: function() {}\r\n  },\r\n  textContent: {\r\n    get: function() {\r\n      var strings = [];\r\n      recursiveGetText(this, strings);\r\n      return strings.join('');\r\n    },\r\n    set: function(newtext) {\r\n      this.removeChildren();\r\n      if (newtext !== null && newtext !== undefined && newtext !== '') {\r\n        this._appendChild(this.ownerDocument.createTextNode(newtext));\r\n      }\r\n    }\r\n  },\r\n  innerText: {\r\n    get: function() {\r\n      var strings = [];\r\n      recursiveGetText(this, strings);\r\n      // Strip and collapse whitespace\r\n      // This doesn't 100% match the browser behavior,\r\n      // but should cover most of the cases. This is also similar to\r\n      // how Angular's renderer used to work: the `textContent` and `innerText`\r\n      // were almost equivalent from the renderer perspective.\r\n      // See: https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent#differences_from_innertext\r\n      return strings.join('').replace(/[ \\t\\n\\f\\r]+/g, ' ').trim();\r\n    },\r\n    set: function(newtext) {\r\n      this.removeChildren();\r\n      if (newtext !== null && newtext !== undefined && newtext !== '') {\r\n        this._appendChild(this.ownerDocument.createTextNode(newtext));\r\n      }\r\n    }\r\n  },\r\n  innerHTML: {\r\n    get: function() {\r\n      return this.serialize();\r\n    },\r\n    set: utils.nyi\r\n  },\r\n  outerHTML: {\r\n    get: function() {\r\n      // \"the attribute must return the result of running the HTML fragment\r\n      // serialization algorithm on a fictional node whose only child is\r\n      // the context object\"\r\n      //\r\n      // The serialization logic is intentionally implemented in a separate\r\n      // `NodeUtils` helper instead of the more obvious choice of a private\r\n      // `_serializeOne()` method on the `Node.prototype` in order to avoid\r\n      // the megamorphic `this._serializeOne` property access, which reduces\r\n      // performance unnecessarily. If you need specialized behavior for a\r\n      // certain subclass, you'll need to implement that in `NodeUtils`.\r\n      // See https://github.com/fgnass/domino/pull/142 for more information.\r\n      return NodeUtils.serializeOne(this, { nodeType: 0 });\r\n    },\r\n    set: function(v) {\r\n      var document = this.ownerDocument;\r\n      var parent = this.parentNode;\r\n      if (parent === null) { return; }\r\n      if (parent.nodeType === Node.DOCUMENT_NODE) {\r\n        utils.NoModificationAllowedError();\r\n      }\r\n      if (parent.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\r\n        parent = parent.ownerDocument.createElement(\"body\");\r\n      }\r\n      var parser = document.implementation.mozHTMLParser(\r\n        document._address,\r\n        parent\r\n      );\r\n      parser.parse(v===null?'':String(v), true);\r\n      this.replaceWith(parser._asDocumentFragment());\r\n    },\r\n  },\r\n\r\n  _insertAdjacent: { value: function _insertAdjacent(position, node) {\r\n    var first = false;\r\n    switch(position) {\r\n    case 'beforebegin':\r\n      first = true;\r\n      /* falls through */\r\n    case 'afterend':\r\n      var parent = this.parentNode;\r\n      if (parent === null) { return null; }\r\n      return parent.insertBefore(node, first ? this : this.nextSibling);\r\n    case 'afterbegin':\r\n      first = true;\r\n      /* falls through */\r\n    case 'beforeend':\r\n      return this.insertBefore(node, first ? this.firstChild : null);\r\n    default:\r\n      return utils.SyntaxError();\r\n    }\r\n  }},\r\n\r\n  insertAdjacentElement: { value: function insertAdjacentElement(position, element) {\r\n    if (element.nodeType !== Node.ELEMENT_NODE) {\r\n      throw new TypeError('not an element');\r\n    }\r\n    position = utils.toASCIILowerCase(String(position));\r\n    return this._insertAdjacent(position, element);\r\n  }},\r\n\r\n  insertAdjacentText: { value: function insertAdjacentText(position, data) {\r\n    var textNode = this.ownerDocument.createTextNode(data);\r\n    position = utils.toASCIILowerCase(String(position));\r\n    this._insertAdjacent(position, textNode);\r\n    // \"This method returns nothing because it existed before we had a chance\r\n    // to design it.\"\r\n  }},\r\n\r\n  insertAdjacentHTML: { value: function insertAdjacentHTML(position, text) {\r\n    position = utils.toASCIILowerCase(String(position));\r\n    text = String(text);\r\n    var context;\r\n    switch(position) {\r\n    case 'beforebegin':\r\n    case 'afterend':\r\n      context = this.parentNode;\r\n      if (context === null || context.nodeType === Node.DOCUMENT_NODE) {\r\n        utils.NoModificationAllowedError();\r\n      }\r\n      break;\r\n    case 'afterbegin':\r\n    case 'beforeend':\r\n      context = this;\r\n      break;\r\n    default:\r\n      utils.SyntaxError();\r\n    }\r\n    if ( (!(context instanceof Element)) || (\r\n      context.ownerDocument.isHTML &&\r\n      context.localName === 'html' &&\r\n      context.namespaceURI === NAMESPACE.HTML\r\n    ) ) {\r\n      context = context.ownerDocument.createElementNS(NAMESPACE.HTML, 'body');\r\n    }\r\n    var parser = this.ownerDocument.implementation.mozHTMLParser(\r\n      this.ownerDocument._address, context\r\n    );\r\n    parser.parse(text, true);\r\n    this._insertAdjacent(position, parser._asDocumentFragment());\r\n  }},\r\n\r\n  children: { get: function() {\r\n    if (!this._children) {\r\n      this._children = new ChildrenCollection(this);\r\n    }\r\n    return this._children;\r\n  }},\r\n\r\n  attributes: { get: function() {\r\n    if (!this._attributes) {\r\n      this._attributes = new AttributesArray(this);\r\n    }\r\n    return this._attributes;\r\n  }},\r\n\r\n\r\n  firstElementChild: { get: function() {\r\n    for (var kid = this.firstChild; kid !== null; kid = kid.nextSibling) {\r\n      if (kid.nodeType === Node.ELEMENT_NODE) return kid;\r\n    }\r\n    return null;\r\n  }},\r\n\r\n  lastElementChild: { get: function() {\r\n    for (var kid = this.lastChild; kid !== null; kid = kid.previousSibling) {\r\n      if (kid.nodeType === Node.ELEMENT_NODE) return kid;\r\n    }\r\n    return null;\r\n  }},\r\n\r\n  childElementCount: { get: function() {\r\n    return this.children.length;\r\n  }},\r\n\r\n\r\n  // Return the next element, in source order, after this one or\r\n  // null if there are no more.  If root element is specified,\r\n  // then don't traverse beyond its subtree.\r\n  //\r\n  // This is not a DOM method, but is convenient for\r\n  // lazy traversals of the tree.\r\n  nextElement: { value: function(root) {\r\n    if (!root) root = this.ownerDocument.documentElement;\r\n    var next = this.firstElementChild;\r\n    if (!next) {\r\n      // don't use sibling if we're at root\r\n      if (this===root) return null;\r\n      next = this.nextElementSibling;\r\n    }\r\n    if (next) return next;\r\n\r\n    // If we can't go down or across, then we have to go up\r\n    // and across to the parent sibling or another ancestor's\r\n    // sibling.  Be careful, though: if we reach the root\r\n    // element, or if we reach the documentElement, then\r\n    // the traversal ends.\r\n    for(var parent = this.parentElement;\r\n      parent && parent !== root;\r\n      parent = parent.parentElement) {\r\n\r\n      next = parent.nextElementSibling;\r\n      if (next) return next;\r\n    }\r\n\r\n    return null;\r\n  }},\r\n\r\n  // XXX:\r\n  // Tests are currently failing for this function.\r\n  // Awaiting resolution of:\r\n  // http://lists.w3.org/Archives/Public/www-dom/2011JulSep/0016.html\r\n  getElementsByTagName: { value: function getElementsByTagName(lname) {\r\n    var filter;\r\n    if (!lname) return new NodeList();\r\n    if (lname === '*')\r\n      filter = function() { return true; };\r\n    else if (this.isHTML)\r\n      filter = htmlLocalNameElementFilter(lname);\r\n    else\r\n      filter = localNameElementFilter(lname);\r\n\r\n    return new FilteredElementList(this, filter);\r\n  }},\r\n\r\n  getElementsByTagNameNS: { value: function getElementsByTagNameNS(ns, lname){\r\n    var filter;\r\n    if (ns === '*' && lname === '*')\r\n      filter = function() { return true; };\r\n    else if (ns === '*')\r\n      filter = localNameElementFilter(lname);\r\n    else if (lname === '*')\r\n      filter = namespaceElementFilter(ns);\r\n    else\r\n      filter = namespaceLocalNameElementFilter(ns, lname);\r\n\r\n    return new FilteredElementList(this, filter);\r\n  }},\r\n\r\n  getElementsByClassName: { value: function getElementsByClassName(names){\r\n    names = String(names).trim();\r\n    if (names === '') {\r\n      var result = new NodeList(); // Empty node list\r\n      return result;\r\n    }\r\n    names = names.split(/[ \\t\\r\\n\\f]+/);  // Split on ASCII whitespace\r\n    return new FilteredElementList(this, classNamesElementFilter(names));\r\n  }},\r\n\r\n  getElementsByName: { value: function getElementsByName(name) {\r\n    return new FilteredElementList(this, elementNameFilter(String(name)));\r\n  }},\r\n\r\n  // Utility methods used by the public API methods above\r\n  clone: { value: function clone() {\r\n    var e;\r\n\r\n    // XXX:\r\n    // Modify this to use the constructor directly or\r\n    // avoid error checking in some other way. In case we try\r\n    // to clone an invalid node that the parser inserted.\r\n    //\r\n    if (this.namespaceURI !== NAMESPACE.HTML || this.prefix || !this.ownerDocument.isHTML) {\r\n      e = this.ownerDocument.createElementNS(\r\n        this.namespaceURI, (this.prefix !== null) ?\r\n          (this.prefix + ':' + this.localName) : this.localName\r\n      );\r\n    } else {\r\n      e = this.ownerDocument.createElement(this.localName);\r\n    }\r\n\r\n    for(var i = 0, n = this._attrKeys.length; i < n; i++) {\r\n      var lname = this._attrKeys[i];\r\n      var a = this._attrsByLName[lname];\r\n      var b = a.cloneNode();\r\n      b._setOwnerElement(e);\r\n      e._attrsByLName[lname] = b;\r\n      e._addQName(b);\r\n    }\r\n    e._attrKeys = this._attrKeys.concat();\r\n\r\n    return e;\r\n  }},\r\n\r\n  isEqual: { value: function isEqual(that) {\r\n    if (this.localName !== that.localName ||\r\n      this.namespaceURI !== that.namespaceURI ||\r\n      this.prefix !== that.prefix ||\r\n      this._numattrs !== that._numattrs)\r\n      return false;\r\n\r\n    // Compare the sets of attributes, ignoring order\r\n    // and ignoring attribute prefixes.\r\n    for(var i = 0, n = this._numattrs; i < n; i++) {\r\n      var a = this._attr(i);\r\n      if (!that.hasAttributeNS(a.namespaceURI, a.localName))\r\n        return false;\r\n      if (that.getAttributeNS(a.namespaceURI,a.localName) !== a.value)\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n  }},\r\n\r\n  // This is the 'locate a namespace prefix' algorithm from the\r\n  // DOM specification.  It is used by Node.lookupPrefix()\r\n  // (Be sure to compare DOM3 and DOM4 versions of spec.)\r\n  _lookupNamespacePrefix: { value: function _lookupNamespacePrefix(ns, originalElement) {\r\n    if (\r\n      this.namespaceURI &&\r\n      this.namespaceURI === ns &&\r\n      this.prefix !== null &&\r\n      originalElement.lookupNamespaceURI(this.prefix) === ns\r\n    ) {\r\n      return this.prefix;\r\n    }\r\n\r\n    for(var i = 0, n = this._numattrs; i < n; i++) {\r\n      var a = this._attr(i);\r\n      if (\r\n        a.prefix === 'xmlns' &&\r\n        a.value === ns &&\r\n        originalElement.lookupNamespaceURI(a.localName) === ns\r\n      ) {\r\n        return a.localName;\r\n      }\r\n    }\r\n\r\n    var parent = this.parentElement;\r\n    return parent ? parent._lookupNamespacePrefix(ns, originalElement) : null;\r\n  }},\r\n\r\n  // This is the 'locate a namespace' algorithm for Element nodes\r\n  // from the DOM Core spec.  It is used by Node#lookupNamespaceURI()\r\n  lookupNamespaceURI: { value: function lookupNamespaceURI(prefix) {\r\n    if (prefix === '' || prefix === undefined) { prefix = null; }\r\n    if (this.namespaceURI !== null && this.prefix === prefix)\r\n      return this.namespaceURI;\r\n\r\n    for(var i = 0, n = this._numattrs; i < n; i++) {\r\n      var a = this._attr(i);\r\n      if (a.namespaceURI === NAMESPACE.XMLNS) {\r\n        if (\r\n          (a.prefix === 'xmlns' && a.localName === prefix) ||\r\n          (prefix === null && a.prefix === null && a.localName === 'xmlns')\r\n        ) {\r\n          return a.value || null;\r\n        }\r\n      }\r\n    }\r\n\r\n    var parent = this.parentElement;\r\n    return parent ? parent.lookupNamespaceURI(prefix) : null;\r\n  }},\r\n\r\n  //\r\n  // Attribute handling methods and utilities\r\n  //\r\n\r\n  /*\r\n   * Attributes in the DOM are tricky:\r\n   *\r\n   * - there are the 8 basic get/set/has/removeAttribute{NS} methods\r\n   *\r\n   * - but many HTML attributes are also 'reflected' through IDL\r\n   *   attributes which means that they can be queried and set through\r\n   *   regular properties of the element.  There is just one attribute\r\n   *   value, but two ways to get and set it.\r\n   *\r\n   * - Different HTML element types have different sets of reflected\r\n     attributes.\r\n   *\r\n   * - attributes can also be queried and set through the .attributes\r\n   *   property of an element.  This property behaves like an array of\r\n   *   Attr objects.  The value property of each Attr is writeable, so\r\n   *   this is a third way to read and write attributes.\r\n   *\r\n   * - for efficiency, we really want to store attributes in some kind\r\n   *   of name->attr map.  But the attributes[] array is an array, not a\r\n   *   map, which is kind of unnatural.\r\n   *\r\n   * - When using namespaces and prefixes, and mixing the NS methods\r\n   *   with the non-NS methods, it is apparently actually possible for\r\n   *   an attributes[] array to have more than one attribute with the\r\n   *   same qualified name.  And certain methods must operate on only\r\n   *   the first attribute with such a name.  So for these methods, an\r\n   *   inefficient array-like data structure would be easier to\r\n   *   implement.\r\n   *\r\n   * - The attributes[] array is live, not a snapshot, so changes to the\r\n   *   attributes must be immediately visible through existing arrays.\r\n   *\r\n   * - When attributes are queried and set through IDL properties\r\n   *   (instead of the get/setAttributes() method or the attributes[]\r\n   *   array) they may be subject to type conversions, URL\r\n   *   normalization, etc., so some extra processing is required in that\r\n   *   case.\r\n   *\r\n   * - But access through IDL properties is probably the most common\r\n   *   case, so we'd like that to be as fast as possible.\r\n   *\r\n   * - We can't just store attribute values in their parsed idl form,\r\n   *   because setAttribute() has to return whatever string is passed to\r\n   *   getAttribute even if it is not a legal, parseable value. So\r\n   *   attribute values must be stored in unparsed string form.\r\n   *\r\n   * - We need to be able to send change notifications or mutation\r\n   *   events of some sort to the renderer whenever an attribute value\r\n   *   changes, regardless of the way in which it changes.\r\n   *\r\n   * - Some attributes, such as id and class affect other parts of the\r\n   *   DOM API, like getElementById and getElementsByClassName and so\r\n   *   for efficiency, we need to specially track changes to these\r\n   *   special attributes.\r\n   *\r\n   * - Some attributes like class have different names (className) when\r\n   *   reflected.\r\n   *\r\n   * - Attributes whose names begin with the string 'data-' are treated\r\n     specially.\r\n   *\r\n   * - Reflected attributes that have a boolean type in IDL have special\r\n   *   behavior: setting them to false (in IDL) is the same as removing\r\n   *   them with removeAttribute()\r\n   *\r\n   * - numeric attributes (like HTMLElement.tabIndex) can have default\r\n   *   values that must be returned by the idl getter even if the\r\n   *   content attribute does not exist. (The default tabIndex value\r\n   *   actually varies based on the type of the element, so that is a\r\n   *   tricky one).\r\n   *\r\n   * See\r\n   * http://www.whatwg.org/specs/web-apps/current-work/multipage/urls.html#reflect\r\n   * for rules on how attributes are reflected.\r\n   *\r\n   */\r\n\r\n  getAttribute: { value: function getAttribute(qname) {\r\n    var attr = this.getAttributeNode(qname);\r\n    return attr ? attr.value : null;\r\n  }},\r\n\r\n  getAttributeNS: { value: function getAttributeNS(ns, lname) {\r\n    var attr = this.getAttributeNodeNS(ns, lname);\r\n    return attr ? attr.value : null;\r\n  }},\r\n\r\n  getAttributeNode: { value: function getAttributeNode(qname) {\r\n    qname = String(qname);\r\n    if (/[A-Z]/.test(qname) && this.isHTML)\r\n      qname = utils.toASCIILowerCase(qname);\r\n    var attr = this._attrsByQName[qname];\r\n    if (!attr) return null;\r\n\r\n    if (Array.isArray(attr))  // If there is more than one\r\n      attr = attr[0];         // use the first\r\n\r\n    return attr;\r\n  }},\r\n\r\n  getAttributeNodeNS: { value: function getAttributeNodeNS(ns, lname) {\r\n    ns = (ns === undefined || ns === null) ? '' : String(ns);\r\n    lname = String(lname);\r\n    var attr = this._attrsByLName[ns + '|' + lname];\r\n    return attr ? attr : null;\r\n  }},\r\n\r\n  hasAttribute: { value: function hasAttribute(qname) {\r\n    qname = String(qname);\r\n    if (/[A-Z]/.test(qname) && this.isHTML)\r\n      qname = utils.toASCIILowerCase(qname);\r\n    return this._attrsByQName[qname] !== undefined;\r\n  }},\r\n\r\n  hasAttributeNS: { value: function hasAttributeNS(ns, lname) {\r\n    ns = (ns === undefined || ns === null) ? '' : String(ns);\r\n    lname = String(lname);\r\n    var key = ns + '|' + lname;\r\n    return this._attrsByLName[key] !== undefined;\r\n  }},\r\n\r\n  hasAttributes: { value: function hasAttributes() {\r\n    return this._numattrs > 0;\r\n  }},\r\n\r\n  toggleAttribute: { value: function toggleAttribute(qname, force) {\r\n    qname = String(qname);\r\n    if (!xml.isValidName(qname)) utils.InvalidCharacterError();\r\n    if (/[A-Z]/.test(qname) && this.isHTML)\r\n      qname = utils.toASCIILowerCase(qname);\r\n    var a = this._attrsByQName[qname];\r\n    if (a === undefined) {\r\n      if (force === undefined || force === true) {\r\n        this._setAttribute(qname, '');\r\n        return true;\r\n      }\r\n      return false;\r\n    } else {\r\n      if (force === undefined || force === false) {\r\n        this.removeAttribute(qname);\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }},\r\n\r\n  // Set the attribute without error checking. The parser uses this.\r\n  _setAttribute: { value: function _setAttribute(qname, value) {\r\n    // XXX: the spec says that this next search should be done\r\n    // on the local name, but I think that is an error.\r\n    // email pending on www-dom about it.\r\n    var attr = this._attrsByQName[qname];\r\n    var isnew;\r\n    if (!attr) {\r\n      attr = this._newattr(qname);\r\n      isnew = true;\r\n    }\r\n    else {\r\n      if (Array.isArray(attr)) attr = attr[0];\r\n    }\r\n\r\n    // Now set the attribute value on the new or existing Attr object.\r\n    // The Attr.value setter method handles mutation events, etc.\r\n    attr.value = value;\r\n    if (this._attributes) this._attributes[qname] = attr;\r\n    if (isnew && this._newattrhook) this._newattrhook(qname, value);\r\n  }},\r\n\r\n  // Check for errors, and then set the attribute\r\n  setAttribute: { value: function setAttribute(qname, value) {\r\n    qname = String(qname);\r\n    if (!xml.isValidName(qname)) utils.InvalidCharacterError();\r\n    if (/[A-Z]/.test(qname) && this.isHTML)\r\n      qname = utils.toASCIILowerCase(qname);\r\n    this._setAttribute(qname, String(value));\r\n  }},\r\n\r\n\r\n  // The version with no error checking used by the parser\r\n  _setAttributeNS: { value: function _setAttributeNS(ns, qname, value) {\r\n    var pos = qname.indexOf(':'), prefix, lname;\r\n    if (pos < 0) {\r\n      prefix = null;\r\n      lname = qname;\r\n    }\r\n    else {\r\n      prefix = qname.substring(0, pos);\r\n      lname = qname.substring(pos+1);\r\n    }\r\n\r\n    if (ns === '' || ns === undefined) ns = null;\r\n    var key = (ns === null ? '' : ns) + '|' + lname;\r\n\r\n    var attr = this._attrsByLName[key];\r\n    var isnew;\r\n    if (!attr) {\r\n      attr = new Attr(this, lname, prefix, ns);\r\n      isnew = true;\r\n      this._attrsByLName[key] = attr;\r\n      if (this._attributes) {\r\n        this._attributes[this._attrKeys.length] = attr;\r\n      }\r\n      this._attrKeys.push(key);\r\n\r\n      // We also have to make the attr searchable by qname.\r\n      // But we have to be careful because there may already\r\n      // be an attr with this qname.\r\n      this._addQName(attr);\r\n    }\r\n    else if (false /* changed in DOM 4 */) {\r\n      // Calling setAttributeNS() can change the prefix of an\r\n      // existing attribute in DOM 2/3.\r\n      if (attr.prefix !== prefix) {\r\n        // Unbind the old qname\r\n        this._removeQName(attr);\r\n        // Update the prefix\r\n        attr.prefix = prefix;\r\n        // Bind the new qname\r\n        this._addQName(attr);\r\n      }\r\n\r\n    }\r\n    attr.value = value; // Automatically sends mutation event\r\n    if (isnew && this._newattrhook) this._newattrhook(qname, value);\r\n  }},\r\n\r\n  // Do error checking then call _setAttributeNS\r\n  setAttributeNS: { value: function setAttributeNS(ns, qname, value) {\r\n    // Convert parameter types according to WebIDL\r\n    ns = (ns === null || ns === undefined || ns === '') ? null : String(ns);\r\n    qname = String(qname);\r\n    if (!xml.isValidQName(qname)) utils.InvalidCharacterError();\r\n\r\n    var pos = qname.indexOf(':');\r\n    var prefix = (pos < 0) ? null : qname.substring(0, pos);\r\n\r\n    if ((prefix !== null && ns === null) ||\r\n      (prefix === 'xml' && ns !== NAMESPACE.XML) ||\r\n      ((qname === 'xmlns' || prefix === 'xmlns') &&\r\n       (ns !== NAMESPACE.XMLNS)) ||\r\n      (ns === NAMESPACE.XMLNS &&\r\n       !(qname === 'xmlns' || prefix === 'xmlns')))\r\n      utils.NamespaceError();\r\n\r\n    this._setAttributeNS(ns, qname, String(value));\r\n  }},\r\n\r\n  setAttributeNode: { value: function setAttributeNode(attr) {\r\n    if (attr.ownerElement !== null && attr.ownerElement !== this) {\r\n      throw new DOMException(DOMException.INUSE_ATTRIBUTE_ERR);\r\n    }\r\n    var result = null;\r\n    var oldAttrs = this._attrsByQName[attr.name];\r\n    if (oldAttrs) {\r\n      if (!Array.isArray(oldAttrs)) { oldAttrs = [ oldAttrs ]; }\r\n      if (oldAttrs.some(function(a) { return a===attr; })) {\r\n        return attr;\r\n      } else if (attr.ownerElement !== null) {\r\n        throw new DOMException(DOMException.INUSE_ATTRIBUTE_ERR);\r\n      }\r\n      oldAttrs.forEach(function(a) { this.removeAttributeNode(a); }, this);\r\n      result = oldAttrs[0];\r\n    }\r\n    this.setAttributeNodeNS(attr);\r\n    return result;\r\n  }},\r\n\r\n  setAttributeNodeNS: { value: function setAttributeNodeNS(attr) {\r\n    if (attr.ownerElement !== null) {\r\n      throw new DOMException(DOMException.INUSE_ATTRIBUTE_ERR);\r\n    }\r\n    var ns = attr.namespaceURI;\r\n    var key = (ns === null ? '' : ns) + '|' + attr.localName;\r\n    var oldAttr = this._attrsByLName[key];\r\n    if (oldAttr) { this.removeAttributeNode(oldAttr); }\r\n    attr._setOwnerElement(this);\r\n    this._attrsByLName[key] = attr;\r\n    if (this._attributes) {\r\n      this._attributes[this._attrKeys.length] = attr;\r\n    }\r\n    this._attrKeys.push(key);\r\n    this._addQName(attr);\r\n    if (this._newattrhook) this._newattrhook(attr.name, attr.value);\r\n    return oldAttr || null;\r\n  }},\r\n\r\n  removeAttribute: { value: function removeAttribute(qname) {\r\n    qname = String(qname);\r\n    if (/[A-Z]/.test(qname) && this.isHTML)\r\n      qname = utils.toASCIILowerCase(qname);\r\n\r\n    var attr = this._attrsByQName[qname];\r\n    if (!attr) return;\r\n\r\n    // If there is more than one match for this qname\r\n    // so don't delete the qname mapping, just remove the first\r\n    // element from it.\r\n    if (Array.isArray(attr)) {\r\n      if (attr.length > 2) {\r\n        attr = attr.shift();  // remove it from the array\r\n      }\r\n      else {\r\n        this._attrsByQName[qname] = attr[1];\r\n        attr = attr[0];\r\n      }\r\n    }\r\n    else {\r\n      // only a single match, so remove the qname mapping\r\n      this._attrsByQName[qname] = undefined;\r\n    }\r\n\r\n    var ns = attr.namespaceURI;\r\n    // Now attr is the removed attribute.  Figure out its\r\n    // ns+lname key and remove it from the other mapping as well.\r\n    var key = (ns === null ? '' : ns) + '|' + attr.localName;\r\n    this._attrsByLName[key] = undefined;\r\n\r\n    var i = this._attrKeys.indexOf(key);\r\n    if (this._attributes) {\r\n      Array.prototype.splice.call(this._attributes, i, 1);\r\n      this._attributes[qname] = undefined;\r\n    }\r\n    this._attrKeys.splice(i, 1);\r\n\r\n    // Onchange handler for the attribute\r\n    var onchange = attr.onchange;\r\n    attr._setOwnerElement(null);\r\n    if (onchange) {\r\n      onchange.call(attr, this, attr.localName, attr.value, null);\r\n    }\r\n    // Mutation event\r\n    if (this.rooted) this.ownerDocument.mutateRemoveAttr(attr);\r\n  }},\r\n\r\n  removeAttributeNS: { value: function removeAttributeNS(ns, lname) {\r\n    ns = (ns === undefined || ns === null) ? '' : String(ns);\r\n    lname = String(lname);\r\n    var key = ns + '|' + lname;\r\n    var attr = this._attrsByLName[key];\r\n    if (!attr) return;\r\n\r\n    this._attrsByLName[key] = undefined;\r\n\r\n    var i = this._attrKeys.indexOf(key);\r\n    if (this._attributes) {\r\n      Array.prototype.splice.call(this._attributes, i, 1);\r\n    }\r\n    this._attrKeys.splice(i, 1);\r\n\r\n    // Now find the same Attr object in the qname mapping and remove it\r\n    // But be careful because there may be more than one match.\r\n    this._removeQName(attr);\r\n\r\n    // Onchange handler for the attribute\r\n    var onchange = attr.onchange;\r\n    attr._setOwnerElement(null);\r\n    if (onchange) {\r\n      onchange.call(attr, this, attr.localName, attr.value, null);\r\n    }\r\n    // Mutation event\r\n    if (this.rooted) this.ownerDocument.mutateRemoveAttr(attr);\r\n  }},\r\n\r\n  removeAttributeNode: { value: function removeAttributeNode(attr) {\r\n    var ns = attr.namespaceURI;\r\n    var key = (ns === null ? '' : ns) + '|' + attr.localName;\r\n    if (this._attrsByLName[key] !== attr) {\r\n      utils.NotFoundError();\r\n    }\r\n    this.removeAttributeNS(ns, attr.localName);\r\n    return attr;\r\n  }},\r\n\r\n  getAttributeNames: { value: function getAttributeNames() {\r\n    var elt = this;\r\n    return this._attrKeys.map(function(key) {\r\n      return elt._attrsByLName[key].name;\r\n    });\r\n  }},\r\n\r\n  // This 'raw' version of getAttribute is used by the getter functions\r\n  // of reflected attributes. It skips some error checking and\r\n  // namespace steps\r\n  _getattr: { value: function _getattr(qname) {\r\n    // Assume that qname is already lowercased, so don't do it here.\r\n    // Also don't check whether attr is an array: a qname with no\r\n    // prefix will never have two matching Attr objects (because\r\n    // setAttributeNS doesn't allow a non-null namespace with a\r\n    // null prefix.\r\n    var attr = this._attrsByQName[qname];\r\n    return attr ? attr.value : null;\r\n  }},\r\n\r\n  // The raw version of setAttribute for reflected idl attributes.\r\n  _setattr: { value: function _setattr(qname, value) {\r\n    var attr = this._attrsByQName[qname];\r\n    var isnew;\r\n    if (!attr) {\r\n      attr = this._newattr(qname);\r\n      isnew = true;\r\n    }\r\n    attr.value = String(value);\r\n    if (this._attributes) this._attributes[qname] = attr;\r\n    if (isnew && this._newattrhook) this._newattrhook(qname, value);\r\n  }},\r\n\r\n  // Create a new Attr object, insert it, and return it.\r\n  // Used by setAttribute() and by set()\r\n  _newattr: { value: function _newattr(qname) {\r\n    var attr = new Attr(this, qname, null, null);\r\n    var key = '|' + qname;\r\n    this._attrsByQName[qname] = attr;\r\n    this._attrsByLName[key] = attr;\r\n    if (this._attributes) {\r\n      this._attributes[this._attrKeys.length] = attr;\r\n    }\r\n    this._attrKeys.push(key);\r\n    return attr;\r\n  }},\r\n\r\n  // Add a qname->Attr mapping to the _attrsByQName object, taking into\r\n  // account that there may be more than one attr object with the\r\n  // same qname\r\n  _addQName: { value: function(attr) {\r\n    var qname = attr.name;\r\n    var existing = this._attrsByQName[qname];\r\n    if (!existing) {\r\n      this._attrsByQName[qname] = attr;\r\n    }\r\n    else if (Array.isArray(existing)) {\r\n      existing.push(attr);\r\n    }\r\n    else {\r\n      this._attrsByQName[qname] = [existing, attr];\r\n    }\r\n    if (this._attributes) this._attributes[qname] = attr;\r\n  }},\r\n\r\n  // Remove a qname->Attr mapping to the _attrsByQName object, taking into\r\n  // account that there may be more than one attr object with the\r\n  // same qname\r\n  _removeQName: { value: function(attr) {\r\n    var qname = attr.name;\r\n    var target = this._attrsByQName[qname];\r\n\r\n    if (Array.isArray(target)) {\r\n      var idx = target.indexOf(attr);\r\n      utils.assert(idx !== -1); // It must be here somewhere\r\n      if (target.length === 2) {\r\n        this._attrsByQName[qname] = target[1-idx];\r\n        if (this._attributes) {\r\n          this._attributes[qname] = this._attrsByQName[qname];\r\n        }\r\n      } else {\r\n        target.splice(idx, 1);\r\n        if (this._attributes && this._attributes[qname] === attr) {\r\n          this._attributes[qname] = target[0];\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      utils.assert(target === attr);  // If only one, it must match\r\n      this._attrsByQName[qname] = undefined;\r\n      if (this._attributes) {\r\n        this._attributes[qname] = undefined;\r\n      }\r\n    }\r\n  }},\r\n\r\n  // Return the number of attributes\r\n  _numattrs: { get: function() { return this._attrKeys.length; }},\r\n  // Return the nth Attr object\r\n  _attr: { value: function(n) {\r\n    return this._attrsByLName[this._attrKeys[n]];\r\n  }},\r\n\r\n  // Define getters and setters for an 'id' property that reflects\r\n  // the content attribute 'id'.\r\n  id: attributes.property({name: 'id'}),\r\n\r\n  // Define getters and setters for a 'className' property that reflects\r\n  // the content attribute 'class'.\r\n  className: attributes.property({name: 'class'}),\r\n\r\n  classList: { get: function() {\r\n    var self = this;\r\n    if (this._classList) {\r\n      return this._classList;\r\n    }\r\n    var dtlist = new DOMTokenList(\r\n      function() {\r\n        return self.className || \"\";\r\n      },\r\n      function(v) {\r\n        self.className = v;\r\n      }\r\n    );\r\n    this._classList = dtlist;\r\n    return dtlist;\r\n  }, set: function(v) { this.className = v; }},\r\n\r\n  matches: { value: function(selector) {\r\n    return select.matches(this, selector);\r\n  }},\r\n\r\n  closest: { value: function(selector) {\r\n    var el = this;\r\n\tdo {\r\n\t  if (el.matches && el.matches(selector)) { return el; }\r\n\t  el = el.parentElement || el.parentNode;\r\n\t} while (el !== null && el.nodeType === Node.ELEMENT_NODE);\r\n\treturn null;\r\n  }},\r\n\r\n  querySelector: { value: function(selector) {\r\n    return select(selector, this)[0];\r\n  }},\r\n\r\n  querySelectorAll: { value: function(selector) {\r\n    var nodes = select(selector, this);\r\n    return nodes.item ? nodes : new NodeList(nodes);\r\n  }}\r\n\r\n});\r\n\r\nObject.defineProperties(Element.prototype, ChildNode);\r\nObject.defineProperties(Element.prototype, NonDocumentTypeChildNode);\r\n\r\n// Register special handling for the id attribute\r\nattributes.registerChangeHandler(Element, 'id',\r\n function(element, lname, oldval, newval) {\r\n   if (element.rooted) {\r\n     if (oldval) {\r\n       element.ownerDocument.delId(oldval, element);\r\n     }\r\n     if (newval) {\r\n       element.ownerDocument.addId(newval, element);\r\n     }\r\n   }\r\n }\r\n);\r\nattributes.registerChangeHandler(Element, 'class',\r\n function(element, lname, oldval, newval) {\r\n   if (element._classList) { element._classList._update(); }\r\n }\r\n);\r\n\r\n// The Attr class represents a single attribute.  The values in\r\n// _attrsByQName and _attrsByLName are instances of this class.\r\nfunction Attr(elt, lname, prefix, namespace, value) {\r\n  // localName and namespace are constant for any attr object.\r\n  // But value may change.  And so can prefix, and so, therefore can name.\r\n  this.localName = lname;\r\n  this.prefix = (prefix===null || prefix==='') ? null : ('' + prefix);\r\n  this.namespaceURI = (namespace===null || namespace==='') ? null : ('' + namespace);\r\n  this.data = value;\r\n  // Set ownerElement last to ensure it is hooked up to onchange handler\r\n  this._setOwnerElement(elt);\r\n}\r\n\r\n// In DOM 3 Attr was supposed to extend Node; in DOM 4 that was abandoned.\r\nAttr.prototype = Object.create(Object.prototype, {\r\n  ownerElement: {\r\n    get: function() { return this._ownerElement; },\r\n  },\r\n  _setOwnerElement: { value: function _setOwnerElement(elt) {\r\n    this._ownerElement = elt;\r\n    if (this.prefix === null && this.namespaceURI === null && elt) {\r\n      this.onchange = elt._attributeChangeHandlers[this.localName];\r\n    } else {\r\n      this.onchange = null;\r\n    }\r\n  }},\r\n\r\n  name: { get: function() {\r\n    return this.prefix ? this.prefix + ':' + this.localName : this.localName;\r\n  }},\r\n\r\n  specified: { get: function() {\r\n    // Deprecated\r\n    return true;\r\n  }},\r\n\r\n  value: {\r\n    get: function() {\r\n      return this.data;\r\n    },\r\n    set: function(value) {\r\n      var oldval = this.data;\r\n      value = (value === undefined) ? '' : value + '';\r\n      if (value === oldval) return;\r\n\r\n      this.data = value;\r\n\r\n      // Run the onchange hook for the attribute\r\n      // if there is one.\r\n      if (this.ownerElement) {\r\n        if (this.onchange)\r\n          this.onchange(this.ownerElement,this.localName, oldval, value);\r\n\r\n        // Generate a mutation event if the element is rooted\r\n        if (this.ownerElement.rooted)\r\n          this.ownerElement.ownerDocument.mutateAttr(this, oldval);\r\n      }\r\n    },\r\n  },\r\n\r\n  cloneNode: { value: function cloneNode(deep) {\r\n    // Both this method and Document#createAttribute*() create unowned Attrs\r\n    return new Attr(\r\n      null, this.localName, this.prefix, this.namespaceURI, this.data\r\n    );\r\n  }},\r\n\r\n  // Legacy aliases (see gh#70 and https://dom.spec.whatwg.org/#interface-attr)\r\n  nodeType: { get: function() { return Node.ATTRIBUTE_NODE; } },\r\n  nodeName: { get: function() { return this.name; } },\r\n  nodeValue: {\r\n    get: function() { return this.value; },\r\n    set: function(v) { this.value = v; },\r\n  },\r\n  textContent: {\r\n    get: function() { return this.value; },\r\n    set: function(v) {\r\n      if (v === null || v === undefined) { v = ''; }\r\n      this.value = v;\r\n    },\r\n  },\r\n  innerText: {\r\n    get: function() { return this.value; },\r\n    set: function(v) {\r\n      if (v === null || v === undefined) { v = ''; }\r\n      this.value = v;\r\n    },\r\n  },\r\n});\r\n// Sneakily export this class for use by Document.createAttribute()\r\nElement._Attr = Attr;\r\n\r\n// The attributes property of an Element will be an instance of this class.\r\n// This class is really just a dummy, though. It only defines a length\r\n// property and an item() method. The AttrArrayProxy that\r\n// defines the public API just uses the Element object itself.\r\nfunction AttributesArray(elt) {\r\n  NamedNodeMap.call(this, elt);\r\n  for (var name in elt._attrsByQName) {\r\n    this[name] = elt._attrsByQName[name];\r\n  }\r\n  for (var i = 0; i < elt._attrKeys.length; i++) {\r\n    this[i] = elt._attrsByLName[elt._attrKeys[i]];\r\n  }\r\n}\r\nAttributesArray.prototype = Object.create(NamedNodeMap.prototype, {\r\n  length: { get: function() {\r\n    return this.element._attrKeys.length;\r\n  }, set: function() { /* ignore */ } },\r\n  item: { value: function(n) {\r\n    /* jshint bitwise: false */\r\n    n = n >>> 0;\r\n    if (n >= this.length) { return null; }\r\n    return this.element._attrsByLName[this.element._attrKeys[n]];\r\n    /* jshint bitwise: true */\r\n  } },\r\n});\r\n\r\n// We can't make direct array access work (without Proxies, node >=6)\r\n// but we can make `Array.from(node.attributes)` and for-of loops work.\r\nif (globalThis.Symbol?.iterator) {\r\n    AttributesArray.prototype[globalThis.Symbol.iterator] = function() {\r\n        var i=0, n=this.length, self=this;\r\n        return {\r\n            next: function() {\r\n                if (i<n) return { value: self.item(i++) };\r\n                return { done: true };\r\n            }\r\n        };\r\n    };\r\n}\r\n\r\n\r\n// The children property of an Element will be an instance of this class.\r\n// It defines length, item() and namedItem() and will be wrapped by an\r\n// HTMLCollection when exposed through the DOM.\r\nfunction ChildrenCollection(e) {\r\n  this.element = e;\r\n  this.updateCache();\r\n}\r\n\r\nChildrenCollection.prototype = Object.create(Object.prototype, {\r\n  length: { get: function() {\r\n    this.updateCache();\r\n    return this.childrenByNumber.length;\r\n  } },\r\n  item: { value: function item(n) {\r\n    this.updateCache();\r\n    return this.childrenByNumber[n] || null;\r\n  } },\r\n\r\n  namedItem: { value: function namedItem(name) {\r\n    this.updateCache();\r\n    return this.childrenByName[name] || null;\r\n  } },\r\n\r\n  // This attribute returns the entire name->element map.\r\n  // It is not part of the HTMLCollection API, but we need it in\r\n  // src/HTMLCollectionProxy\r\n  namedItems: { get: function() {\r\n    this.updateCache();\r\n    return this.childrenByName;\r\n  } },\r\n\r\n  updateCache: { value: function updateCache() {\r\n    var namedElts = /^(a|applet|area|embed|form|frame|frameset|iframe|img|object)$/;\r\n    if (this.lastModTime !== this.element.lastModTime) {\r\n      this.lastModTime = this.element.lastModTime;\r\n\r\n      var n = this.childrenByNumber && this.childrenByNumber.length || 0;\r\n      for(var i = 0; i < n; i++) {\r\n        this[i] = undefined;\r\n      }\r\n\r\n      this.childrenByNumber = [];\r\n      this.childrenByName = Object.create(null);\r\n\r\n      for (var c = this.element.firstChild; c !== null; c = c.nextSibling) {\r\n        if (c.nodeType === Node.ELEMENT_NODE) {\r\n\r\n          this[this.childrenByNumber.length] = c;\r\n          this.childrenByNumber.push(c);\r\n\r\n          // XXX Are there any requirements about the namespace\r\n          // of the id property?\r\n          var id = c.getAttribute('id');\r\n\r\n          // If there is an id that is not already in use...\r\n          if (id && !this.childrenByName[id])\r\n            this.childrenByName[id] = c;\r\n\r\n          // For certain HTML elements we check the name attribute\r\n          var name = c.getAttribute('name');\r\n          if (name &&\r\n            this.element.namespaceURI === NAMESPACE.HTML &&\r\n            namedElts.test(this.element.localName) &&\r\n            !this.childrenByName[name])\r\n            this.childrenByName[id] = c;\r\n        }\r\n      }\r\n    }\r\n  } },\r\n});\r\n\r\n// These functions return predicates for filtering elements.\r\n// They're used by the Document and Element classes for methods like\r\n// getElementsByTagName and getElementsByClassName\r\n\r\nfunction localNameElementFilter(lname) {\r\n  return function(e) { return e.localName === lname; };\r\n}\r\n\r\nfunction htmlLocalNameElementFilter(lname) {\r\n  var lclname = utils.toASCIILowerCase(lname);\r\n  if (lclname === lname)\r\n    return localNameElementFilter(lname);\r\n\r\n  return function(e) {\r\n    return e.isHTML ? e.localName === lclname : e.localName === lname;\r\n  };\r\n}\r\n\r\nfunction namespaceElementFilter(ns) {\r\n  return function(e) { return e.namespaceURI === ns; };\r\n}\r\n\r\nfunction namespaceLocalNameElementFilter(ns, lname) {\r\n  return function(e) {\r\n    return e.namespaceURI === ns && e.localName === lname;\r\n  };\r\n}\r\n\r\nfunction classNamesElementFilter(names) {\r\n  return function(e) {\r\n    return names.every(function(n) { return e.classList.contains(n); });\r\n  };\r\n}\r\n\r\nfunction elementNameFilter(name) {\r\n  return function(e) {\r\n    // All the *HTML elements* in the document with the given name attribute\r\n    if (e.namespaceURI !== NAMESPACE.HTML) { return false; }\r\n    return e.getAttribute('name') === name;\r\n  };\r\n}\r\n","\"use strict\";\r\nmodule.exports = Event;\r\n\r\nEvent.CAPTURING_PHASE = 1;\r\nEvent.AT_TARGET = 2;\r\nEvent.BUBBLING_PHASE = 3;\r\n\r\nfunction Event(type, dictionary) {\r\n  // Initialize basic event properties\r\n  this.type = '';\r\n  this.target = null;\r\n  this.currentTarget = null;\r\n  this.eventPhase = Event.AT_TARGET;\r\n  this.bubbles = false;\r\n  this.cancelable = false;\r\n  this.isTrusted = false;\r\n  this.defaultPrevented = false;\r\n  this.timeStamp = Date.now();\r\n\r\n  // Initialize internal flags\r\n  // XXX: Would it be better to inherit these defaults from the prototype?\r\n  this._propagationStopped = false;\r\n  this._immediatePropagationStopped = false;\r\n  this._initialized = true;\r\n  this._dispatching = false;\r\n\r\n  // Now initialize based on the constructor arguments (if any)\r\n  if (type) this.type = type;\r\n  if (dictionary) {\r\n    for(var p in dictionary) {\r\n      this[p] = dictionary[p];\r\n    }\r\n  }\r\n}\r\n\r\nEvent.prototype = Object.create(Object.prototype, {\r\n  constructor: { value: Event },\r\n  stopPropagation: { value: function stopPropagation() {\r\n    this._propagationStopped = true;\r\n  }},\r\n\r\n  stopImmediatePropagation: { value: function stopImmediatePropagation() {\r\n    this._propagationStopped = true;\r\n    this._immediatePropagationStopped = true;\r\n  }},\r\n\r\n  preventDefault: { value: function preventDefault() {\r\n    if (this.cancelable) this.defaultPrevented = true;\r\n  }},\r\n\r\n  initEvent: { value: function initEvent(type, bubbles, cancelable) {\r\n    this._initialized = true;\r\n    if (this._dispatching) return;\r\n\r\n    this._propagationStopped = false;\r\n    this._immediatePropagationStopped = false;\r\n    this.defaultPrevented = false;\r\n    this.isTrusted = false;\r\n\r\n    this.target = null;\r\n    this.type = type;\r\n    this.bubbles = bubbles;\r\n    this.cancelable = cancelable;\r\n  }},\r\n\r\n});\r\n","\"use strict\";\r\nvar Event = require('./Event');\r\nvar MouseEvent = require('./MouseEvent');\r\nvar utils = require('./utils');\r\n\r\nmodule.exports = EventTarget;\r\n\r\nfunction EventTarget() {}\r\n\r\nEventTarget.prototype = {\r\n  // XXX\r\n  // See WebIDL §4.8 for details on object event handlers\r\n  // and how they should behave.  We actually have to accept\r\n  // any object to addEventListener... Can't type check it.\r\n  // on registration.\r\n\r\n  // XXX:\r\n  // Capturing event listeners are sort of rare.  I think I can optimize\r\n  // them so that dispatchEvent can skip the capturing phase (or much of\r\n  // it).  Each time a capturing listener is added, increment a flag on\r\n  // the target node and each of its ancestors.  Decrement when removed.\r\n  // And update the counter when nodes are added and removed from the\r\n  // tree as well.  Then, in dispatch event, the capturing phase can\r\n  // abort if it sees any node with a zero count.\r\n  addEventListener: function addEventListener(type, listener, capture) {\r\n    if (!listener) return;\r\n    if (capture === undefined) capture = false;\r\n    if (!this._listeners) this._listeners = Object.create(null);\r\n    if (!this._listeners[type]) this._listeners[type] = [];\r\n    var list = this._listeners[type];\r\n\r\n    // If this listener has already been registered, just return\r\n    for(var i = 0, n = list.length; i < n; i++) {\r\n      var l = list[i];\r\n      if (l.listener === listener && l.capture === capture)\r\n        return;\r\n    }\r\n\r\n    // Add an object to the list of listeners\r\n    var obj = { listener: listener, capture: capture };\r\n    if (typeof listener === 'function') obj.f = listener;\r\n    list.push(obj);\r\n  },\r\n\r\n  removeEventListener: function removeEventListener(type,\r\n                            listener,\r\n                            capture) {\r\n    if (capture === undefined) capture = false;\r\n    if (this._listeners) {\r\n      var list = this._listeners[type];\r\n      if (list) {\r\n        // Find the listener in the list and remove it\r\n        for(var i = 0, n = list.length; i < n; i++) {\r\n          var l = list[i];\r\n          if (l.listener === listener && l.capture === capture) {\r\n            if (list.length === 1) {\r\n              this._listeners[type] = undefined;\r\n            }\r\n            else {\r\n              list.splice(i, 1);\r\n            }\r\n            return;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  // This is the public API for dispatching untrusted public events.\r\n  // See _dispatchEvent for the implementation\r\n  dispatchEvent: function dispatchEvent(event) {\r\n    // Dispatch an untrusted event\r\n    return this._dispatchEvent(event, false);\r\n  },\r\n\r\n  //\r\n  // See DOMCore §4.4\r\n  // XXX: I'll probably need another version of this method for\r\n  // internal use, one that does not set isTrusted to false.\r\n  // XXX: see Document._dispatchEvent: perhaps that and this could\r\n  // call a common internal function with different settings of\r\n  // a trusted boolean argument\r\n  //\r\n  // XXX:\r\n  // The spec has changed in how to deal with handlers registered\r\n  // on idl or content attributes rather than with addEventListener.\r\n  // Used to say that they always ran first.  That's how webkit does it\r\n  // Spec now says that they run in a position determined by\r\n  // when they were first set.  FF does it that way.  See:\r\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#event-handlers\r\n  //\r\n  _dispatchEvent: function _dispatchEvent(event, trusted) {\r\n    if (typeof trusted !== 'boolean') trusted = false;\r\n    function invoke(target, event) {\r\n      var type = event.type, phase = event.eventPhase;\r\n      event.currentTarget = target;\r\n\r\n      // If there was an individual handler defined, invoke it first\r\n      // XXX: see comment above: this shouldn't always be first.\r\n      if (phase !== Event.CAPTURING_PHASE &&\r\n        target._handlers && target._handlers[type])\r\n      {\r\n        var handler = target._handlers[type];\r\n        var rv;\r\n        if (typeof handler === 'function') {\r\n          rv=handler.call(event.currentTarget, event);\r\n        }\r\n        else {\r\n          var f = handler.handleEvent;\r\n          if (typeof f !== 'function')\r\n            throw new TypeError('handleEvent property of ' +\r\n                                'event handler object is' +\r\n                                'not a function.');\r\n          rv=f.call(handler, event);\r\n        }\r\n\r\n        switch(event.type) {\r\n        case 'mouseover':\r\n          if (rv === true)  // Historical baggage\r\n            event.preventDefault();\r\n          break;\r\n        case 'beforeunload':\r\n          // XXX: eventually we need a special case here\r\n          /* falls through */\r\n        default:\r\n          if (rv === false)\r\n            event.preventDefault();\r\n          break;\r\n        }\r\n      }\r\n\r\n      // Now invoke list list of listeners for this target and type\r\n      var list = target._listeners && target._listeners[type];\r\n      if (!list) return;\r\n      list = list.slice();\r\n      for(var i = 0, n = list.length; i < n; i++) {\r\n        if (event._immediatePropagationStopped) return;\r\n        var l = list[i];\r\n        if ((phase === Event.CAPTURING_PHASE && !l.capture) ||\r\n          (phase === Event.BUBBLING_PHASE && l.capture))\r\n          continue;\r\n        if (l.f) {\r\n          l.f.call(event.currentTarget, event);\r\n        }\r\n        else {\r\n          var fn = l.listener.handleEvent;\r\n          if (typeof fn !== 'function')\r\n            throw new TypeError('handleEvent property of event listener object is not a function.');\r\n          fn.call(l.listener, event);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!event._initialized || event._dispatching) utils.InvalidStateError();\r\n    event.isTrusted = trusted;\r\n\r\n    // Begin dispatching the event now\r\n    event._dispatching = true;\r\n    event.target = this;\r\n\r\n    // Build the list of targets for the capturing and bubbling phases\r\n    // XXX: we'll eventually have to add Window to this list.\r\n    var ancestors = [];\r\n    for(var n = this.parentNode; n; n = n.parentNode)\r\n      ancestors.push(n);\r\n\r\n    // Capturing phase\r\n    event.eventPhase = Event.CAPTURING_PHASE;\r\n    for(var i = ancestors.length-1; i >= 0; i--) {\r\n      invoke(ancestors[i], event);\r\n      if (event._propagationStopped) break;\r\n    }\r\n\r\n    // At target phase\r\n    if (!event._propagationStopped) {\r\n      event.eventPhase = Event.AT_TARGET;\r\n      invoke(this, event);\r\n    }\r\n\r\n    // Bubbling phase\r\n    if (event.bubbles && !event._propagationStopped) {\r\n      event.eventPhase = Event.BUBBLING_PHASE;\r\n      for(var ii = 0, nn = ancestors.length; ii < nn; ii++) {\r\n        invoke(ancestors[ii], event);\r\n        if (event._propagationStopped) break;\r\n      }\r\n    }\r\n\r\n    event._dispatching = false;\r\n    event.eventPhase = Event.AT_TARGET;\r\n    event.currentTarget = null;\r\n\r\n    // Deal with mouse events and figure out when\r\n    // a click has happened\r\n    if (trusted && !event.defaultPrevented && event instanceof MouseEvent) {\r\n      switch(event.type) {\r\n      case 'mousedown':\r\n        this._armed = {\r\n          x: event.clientX,\r\n          y: event.clientY,\r\n          t: event.timeStamp\r\n        };\r\n        break;\r\n      case 'mouseout':\r\n      case 'mouseover':\r\n        this._armed = null;\r\n        break;\r\n      case 'mouseup':\r\n        if (this._isClick(event)) this._doClick(event);\r\n        this._armed = null;\r\n        break;\r\n      }\r\n    }\r\n\r\n\r\n\r\n    return !event.defaultPrevented;\r\n  },\r\n\r\n  // Determine whether a click occurred\r\n  // XXX We don't support double clicks for now\r\n  _isClick: function(event) {\r\n    return (this._armed !== null &&\r\n        event.type === 'mouseup' &&\r\n        event.isTrusted &&\r\n        event.button === 0 &&\r\n        event.timeStamp - this._armed.t < 1000 &&\r\n        Math.abs(event.clientX - this._armed.x) < 10 &&\r\n        Math.abs(event.clientY - this._armed.Y) < 10);\r\n  },\r\n\r\n  // Clicks are handled like this:\r\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#interactive-content-0\r\n  //\r\n  // Note that this method is similar to the HTMLElement.click() method\r\n  // The event argument must be the trusted mouseup event\r\n  _doClick: function(event) {\r\n    if (this._click_in_progress) return;\r\n    this._click_in_progress = true;\r\n\r\n    // Find the nearest enclosing element that is activatable\r\n    // An element is activatable if it has a\r\n    // _post_click_activation_steps hook\r\n    var activated = this;\r\n    while(activated && !activated._post_click_activation_steps)\r\n      activated = activated.parentNode;\r\n\r\n    if (activated && activated._pre_click_activation_steps) {\r\n      activated._pre_click_activation_steps();\r\n    }\r\n\r\n    var click = this.ownerDocument.createEvent('MouseEvent');\r\n    click.initMouseEvent('click', true, true,\r\n      this.ownerDocument.defaultView, 1,\r\n      event.screenX, event.screenY,\r\n      event.clientX, event.clientY,\r\n      event.ctrlKey, event.altKey,\r\n      event.shiftKey, event.metaKey,\r\n      event.button, null);\r\n\r\n    var result = this._dispatchEvent(click, true);\r\n\r\n    if (activated) {\r\n      if (result) {\r\n        // This is where hyperlinks get followed, for example.\r\n        if (activated._post_click_activation_steps)\r\n          activated._post_click_activation_steps(click);\r\n      }\r\n      else {\r\n        if (activated._cancelled_activation_steps)\r\n          activated._cancelled_activation_steps();\r\n      }\r\n    }\r\n  },\r\n\r\n  //\r\n  // An event handler is like an event listener, but it registered\r\n  // by setting an IDL or content attribute like onload or onclick.\r\n  // There can only be one of these at a time for any event type.\r\n  // This is an internal method for the attribute accessors and\r\n  // content attribute handlers that need to register events handlers.\r\n  // The type argument is the same as in addEventListener().\r\n  // The handler argument is the same as listeners in addEventListener:\r\n  // it can be a function or an object. Pass null to remove any existing\r\n  // handler.  Handlers are always invoked before any listeners of\r\n  // the same type.  They are not invoked during the capturing phase\r\n  // of event dispatch.\r\n  //\r\n  _setEventHandler: function _setEventHandler(type, handler) {\r\n    if (!this._handlers) this._handlers = Object.create(null);\r\n    this._handlers[type] = handler;\r\n  },\r\n\r\n  _getEventHandler: function _getEventHandler(type) {\r\n    return (this._handlers && this._handlers[type]) || null;\r\n  }\r\n\r\n};\r\n","\"use strict\";\r\nmodule.exports = FilteredElementList;\r\n\r\nvar Node = require('./Node');\r\n\r\n//\r\n// This file defines node list implementation that lazily traverses\r\n// the document tree (or a subtree rooted at any element) and includes\r\n// only those elements for which a specified filter function returns true.\r\n// It is used to implement the\r\n// {Document,Element}.getElementsBy{TagName,ClassName}{,NS} methods.\r\n//\r\n// XXX this should inherit from NodeList\r\n\r\nfunction FilteredElementList(root, filter) {\r\n  this.root = root;\r\n  this.filter = filter;\r\n  this.lastModTime = root.lastModTime;\r\n  this.done = false;\r\n  this.cache = [];\r\n  this.traverse();\r\n}\r\n\r\nFilteredElementList.prototype = Object.create(Object.prototype, {\r\n  length: { get: function() {\r\n    this.checkcache();\r\n    if (!this.done) this.traverse();\r\n    return this.cache.length;\r\n  } },\r\n\r\n  item: { value: function(n) {\r\n    this.checkcache();\r\n    if (!this.done && n >= this.cache.length) {\r\n      // This can lead to O(N^2) behavior if we stop when we get to n\r\n      // and the caller is iterating through the items in order; so\r\n      // be sure to do the full traverse here.\r\n      this.traverse(/*n*/);\r\n    }\r\n    return this.cache[n];\r\n  } },\r\n\r\n  checkcache: { value: function() {\r\n    if (this.lastModTime !== this.root.lastModTime) {\r\n      // subtree has changed, so invalidate cache\r\n      for (var i = this.cache.length-1; i>=0; i--) {\r\n        this[i] = undefined;\r\n      }\r\n      this.cache.length = 0;\r\n      this.done = false;\r\n      this.lastModTime = this.root.lastModTime;\r\n    }\r\n  } },\r\n\r\n  // If n is specified, then traverse the tree until we've found the nth\r\n  // item (or until we've found all items).  If n is not specified,\r\n  // traverse until we've found all items.\r\n  traverse: { value: function(n) {\r\n    // increment n so we can compare to length, and so it is never falsy\r\n    if (n !== undefined) n++;\r\n\r\n    var elt;\r\n    while ((elt = this.next()) !== null) {\r\n      this[this.cache.length] = elt; //XXX Use proxy instead\r\n      this.cache.push(elt);\r\n      if (n && this.cache.length === n) return;\r\n    }\r\n\r\n    // no next element, so we've found everything\r\n    this.done = true;\r\n  } },\r\n\r\n  // Return the next element under root that matches filter\r\n  next: { value: function() {\r\n    var start = (this.cache.length === 0) ? this.root // Start at the root or at\r\n      : this.cache[this.cache.length-1]; // the last element we found\r\n\r\n    var elt;\r\n    if (start.nodeType === Node.DOCUMENT_NODE)\r\n      elt = start.documentElement;\r\n    else\r\n      elt = start.nextElement(this.root);\r\n\r\n    while(elt) {\r\n      if (this.filter(elt)) {\r\n        return elt;\r\n      }\r\n\r\n      elt = elt.nextElement(this.root);\r\n    }\r\n    return null;\r\n  } },\r\n});\r\n","\"use strict\";\r\nmodule.exports = HTMLParser;\r\n\r\nvar Document = require('./Document');\r\nvar DocumentType = require('./DocumentType');\r\nvar Node = require('./Node');\r\nvar NAMESPACE = require('./utils').NAMESPACE;\r\nvar html = require('./htmlelts');\r\nvar impl = html.elements;\r\n\r\nvar pushAll = Function.prototype.apply.bind(Array.prototype.push);\r\n\r\n/*\r\n * This file contains an implementation of the HTML parsing algorithm.\r\n * The algorithm and the implementation are complex because HTML\r\n * explicitly defines how the parser should behave for all possible\r\n * valid and invalid inputs.\r\n *\r\n * Usage:\r\n *\r\n * The file defines a single HTMLParser() function, which dom.js exposes\r\n * publicly as document.implementation.mozHTMLParser(). This is a\r\n * factory function, not a constructor.\r\n *\r\n * When you call document.implementation.mozHTMLParser(), it returns\r\n * an object that has parse() and document() methods. To parse HTML text,\r\n * pass the text (in one or more chunks) to the parse() method.  When\r\n * you've passed all the text (on the last chunk, or afterward) pass\r\n * true as the second argument to parse() to tell the parser that there\r\n * is no more coming. Call document() to get the document object that\r\n * the parser is parsing into.  You can call this at any time, before\r\n * or after calling parse().\r\n *\r\n * The first argument to mozHTMLParser is the absolute URL of the document.\r\n *\r\n * The second argument is optional and is for internal use only.  Pass an\r\n * element as the fragmentContext to do innerHTML parsing for the\r\n * element.  To do innerHTML parsing on a document, pass null. Otherwise,\r\n * omit the 2nd argument. See HTMLElement.innerHTML for an example.  Note\r\n * that if you pass a context element, the end() method will return an\r\n * unwrapped document instead of a wrapped one.\r\n *\r\n * Implementation details:\r\n *\r\n * This is a long file of almost 7000 lines. It is structured as one\r\n * big function nested within another big function.  The outer\r\n * function defines a bunch of constant data, utility functions\r\n * that use that data, and a couple of classes used by the parser.\r\n * The outer function also defines and returns the\r\n * inner function. This inner function is the HTMLParser factory\r\n * function that implements the parser and holds all the parser state\r\n * as local variables.  The HTMLParser function is quite big because\r\n * it defines many nested functions that use those local variables.\r\n *\r\n * There are three tightly coupled parser stages: a scanner, a\r\n * tokenizer and a tree builder. In a (possibly misguided) attempt at\r\n * efficiency, the stages are not implemented as separate classes:\r\n * everything shares state and is (mostly) implemented in imperative\r\n * (rather than OO) style.\r\n *\r\n * The stages of the parser work like this: When the client code calls\r\n * the parser's parse() method, the specified string is passed to\r\n * scanChars(). The scanner loops through that string and passes characters\r\n * (sometimes one at a time, sometimes in chunks) to the tokenizer stage.\r\n * The tokenizer groups the characters into tokens: tags, endtags, runs\r\n * of text, comments, doctype declarations, and the end-of-file (EOF)\r\n * token.  These tokens are then passed to the tree building stage via\r\n * the insertToken() function.  The tree building stage builds up the\r\n * document tree.\r\n *\r\n * The tokenizer stage is a finite state machine.  Each state is\r\n * implemented as a function with a name that ends in \"_state\".  The\r\n * initial state is data_state(). The current tokenizer state is stored\r\n * in the variable 'tokenizer'.  Most state functions expect a single\r\n * integer argument which represents a single UTF-16 codepoint.  Some\r\n * states want more characters and set a lookahead property on\r\n * themselves.  The scanChars() function in the scanner checks for this\r\n * lookahead property.  If it doesn't exist, then scanChars() just passes\r\n * the next input character to the current tokenizer state function.\r\n * Otherwise, scanChars() looks ahead (a given # of characters, or for a\r\n * matching string, or for a matching regexp) and passes a string of\r\n * characters to the current tokenizer state function.\r\n *\r\n * As a shortcut, certain states of the tokenizer use regular expressions\r\n * to look ahead in the scanner's input buffer for runs of text, simple\r\n * tags and attributes.  For well-formed input, these shortcuts skip a\r\n * lot of state transitions and speed things up a bit.\r\n *\r\n * When a tokenizer state function has consumed a complete token, it\r\n * emits that token, by calling insertToken(), or by calling a utility\r\n * function that itself calls insertToken().  These tokens are passed to\r\n * the tree building stage, which is also a state machine.  Like the\r\n * tokenizer, the tree building states are implemented as functions, and\r\n * these functions have names that end with _mode (because the HTML spec\r\n * refers to them as insertion modes). The current insertion mode is held\r\n * by the 'parser' variable.  Each insertion mode function takes up to 4\r\n * arguments.  The first is a token type, represented by the constants\r\n * TAG, ENDTAG, TEXT, COMMENT, DOCTYPE and EOF.  The second argument is\r\n * the value of the token: the text or comment data, or tagname or\r\n * doctype.  For tags, the 3rd argument is an array of attributes.  For\r\n * DOCTYPES it is the optional public id.  For tags, the 4th argument is\r\n * true if the tag is self-closing. For doctypes, the 4th argument is the\r\n * optional system id.\r\n *\r\n * Search for \"***\" to find the major sub-divisions in the code.\r\n */\r\n\r\n\r\n/***\r\n * Data prolog.  Lots of constants declared here, including some\r\n * very large objects.  They're used throughout the code that follows\r\n */\r\n// Token types for the tree builder.\r\nvar EOF = -1;\r\nvar TEXT = 1;\r\nvar TAG = 2;\r\nvar ENDTAG = 3;\r\nvar COMMENT = 4;\r\nvar DOCTYPE = 5;\r\n\r\n// A re-usable empty array\r\nvar NOATTRS = [];\r\n\r\n// These DTD public ids put the browser in quirks mode\r\nvar quirkyPublicIds = /^HTML$|^-\\/\\/W3O\\/\\/DTD W3 HTML Strict 3\\.0\\/\\/EN\\/\\/$|^-\\/W3C\\/DTD HTML 4\\.0 Transitional\\/EN$|^\\+\\/\\/Silmaril\\/\\/dtd html Pro v0r11 19970101\\/\\/|^-\\/\\/AdvaSoft Ltd\\/\\/DTD HTML 3\\.0 asWedit \\+ extensions\\/\\/|^-\\/\\/AS\\/\\/DTD HTML 3\\.0 asWedit \\+ extensions\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML 2\\.0 Level 1\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML 2\\.0 Level 2\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML 2\\.0 Strict Level 1\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML 2\\.0 Strict Level 2\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML 2\\.0 Strict\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML 2\\.0\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML 2\\.1E\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML 3\\.0\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML 3\\.2 Final\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML 3\\.2\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML 3\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML Level 0\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML Level 1\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML Level 2\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML Level 3\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML Strict Level 0\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML Strict Level 1\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML Strict Level 2\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML Strict Level 3\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML Strict\\/\\/|^-\\/\\/IETF\\/\\/DTD HTML\\/\\/|^-\\/\\/Metrius\\/\\/DTD Metrius Presentational\\/\\/|^-\\/\\/Microsoft\\/\\/DTD Internet Explorer 2\\.0 HTML Strict\\/\\/|^-\\/\\/Microsoft\\/\\/DTD Internet Explorer 2\\.0 HTML\\/\\/|^-\\/\\/Microsoft\\/\\/DTD Internet Explorer 2\\.0 Tables\\/\\/|^-\\/\\/Microsoft\\/\\/DTD Internet Explorer 3\\.0 HTML Strict\\/\\/|^-\\/\\/Microsoft\\/\\/DTD Internet Explorer 3\\.0 HTML\\/\\/|^-\\/\\/Microsoft\\/\\/DTD Internet Explorer 3\\.0 Tables\\/\\/|^-\\/\\/Netscape Comm\\. Corp\\.\\/\\/DTD HTML\\/\\/|^-\\/\\/Netscape Comm\\. Corp\\.\\/\\/DTD Strict HTML\\/\\/|^-\\/\\/O'Reilly and Associates\\/\\/DTD HTML 2\\.0\\/\\/|^-\\/\\/O'Reilly and Associates\\/\\/DTD HTML Extended 1\\.0\\/\\/|^-\\/\\/O'Reilly and Associates\\/\\/DTD HTML Extended Relaxed 1\\.0\\/\\/|^-\\/\\/SoftQuad Software\\/\\/DTD HoTMetaL PRO 6\\.0::19990601::extensions to HTML 4\\.0\\/\\/|^-\\/\\/SoftQuad\\/\\/DTD HoTMetaL PRO 4\\.0::19971010::extensions to HTML 4\\.0\\/\\/|^-\\/\\/Spyglass\\/\\/DTD HTML 2\\.0 Extended\\/\\/|^-\\/\\/SQ\\/\\/DTD HTML 2\\.0 HoTMetaL \\+ extensions\\/\\/|^-\\/\\/Sun Microsystems Corp\\.\\/\\/DTD HotJava HTML\\/\\/|^-\\/\\/Sun Microsystems Corp\\.\\/\\/DTD HotJava Strict HTML\\/\\/|^-\\/\\/W3C\\/\\/DTD HTML 3 1995-03-24\\/\\/|^-\\/\\/W3C\\/\\/DTD HTML 3\\.2 Draft\\/\\/|^-\\/\\/W3C\\/\\/DTD HTML 3\\.2 Final\\/\\/|^-\\/\\/W3C\\/\\/DTD HTML 3\\.2\\/\\/|^-\\/\\/W3C\\/\\/DTD HTML 3\\.2S Draft\\/\\/|^-\\/\\/W3C\\/\\/DTD HTML 4\\.0 Frameset\\/\\/|^-\\/\\/W3C\\/\\/DTD HTML 4\\.0 Transitional\\/\\/|^-\\/\\/W3C\\/\\/DTD HTML Experimental 19960712\\/\\/|^-\\/\\/W3C\\/\\/DTD HTML Experimental 970421\\/\\/|^-\\/\\/W3C\\/\\/DTD W3 HTML\\/\\/|^-\\/\\/W3O\\/\\/DTD W3 HTML 3\\.0\\/\\/|^-\\/\\/WebTechs\\/\\/DTD Mozilla HTML 2\\.0\\/\\/|^-\\/\\/WebTechs\\/\\/DTD Mozilla HTML\\/\\//i;\r\n\r\nvar quirkySystemId = \"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd\";\r\n\r\nvar conditionallyQuirkyPublicIds = /^-\\/\\/W3C\\/\\/DTD HTML 4\\.01 Frameset\\/\\/|^-\\/\\/W3C\\/\\/DTD HTML 4\\.01 Transitional\\/\\//i;\r\n\r\n// These DTD public ids put the browser in limited quirks mode\r\nvar limitedQuirkyPublicIds = /^-\\/\\/W3C\\/\\/DTD XHTML 1\\.0 Frameset\\/\\/|^-\\/\\/W3C\\/\\/DTD XHTML 1\\.0 Transitional\\/\\//i;\r\n\r\n\r\n// Element sets below. See the isA() function for a way to test\r\n// whether an element is a member of a set\r\nvar specialSet = Object.create(null);\r\nspecialSet[NAMESPACE.HTML] = {\r\n  __proto__: null,\r\n  \"address\":true, \"applet\":true, \"area\":true, \"article\":true,\r\n  \"aside\":true, \"base\":true, \"basefont\":true, \"bgsound\":true,\r\n  \"blockquote\":true, \"body\":true, \"br\":true, \"button\":true,\r\n  \"caption\":true, \"center\":true, \"col\":true, \"colgroup\":true,\r\n  \"dd\":true, \"details\":true, \"dir\":true,\r\n  \"div\":true, \"dl\":true, \"dt\":true, \"embed\":true,\r\n  \"fieldset\":true, \"figcaption\":true, \"figure\":true, \"footer\":true,\r\n  \"form\":true, \"frame\":true, \"frameset\":true, \"h1\":true,\r\n  \"h2\":true, \"h3\":true, \"h4\":true, \"h5\":true,\r\n  \"h6\":true, \"head\":true, \"header\":true, \"hgroup\":true,\r\n  \"hr\":true, \"html\":true, \"iframe\":true, \"img\":true,\r\n  \"input\":true, \"li\":true, \"link\":true,\r\n  \"listing\":true, \"main\":true, \"marquee\":true, \"menu\":true, \"meta\":true,\r\n  \"nav\":true, \"noembed\":true, \"noframes\":true, \"noscript\":true,\r\n  \"object\":true, \"ol\":true, \"p\":true, \"param\":true,\r\n  \"plaintext\":true, \"pre\":true, \"script\":true, \"section\":true,\r\n  \"select\":true, \"source\":true, \"style\":true, \"summary\":true, \"table\":true,\r\n  \"tbody\":true, \"td\":true, \"template\":true, \"textarea\":true, \"tfoot\":true,\r\n  \"th\":true, \"thead\":true, \"title\":true, \"tr\":true, \"track\":true,\r\n  // Note that \"xmp\" was removed from the \"special\" set in the latest\r\n  // spec, apparently by accident; see\r\n  // https://github.com/whatwg/html/pull/1919\r\n  \"ul\":true, \"wbr\":true, \"xmp\":true\r\n};\r\nspecialSet[NAMESPACE.SVG] = {\r\n  __proto__: null,\r\n  \"foreignObject\": true, \"desc\": true, \"title\": true\r\n};\r\nspecialSet[NAMESPACE.MATHML] = {\r\n  __proto__: null,\r\n  \"mi\":true, \"mo\":true, \"mn\":true, \"ms\":true,\r\n  \"mtext\":true, \"annotation-xml\":true\r\n};\r\n\r\n// The set of address, div, and p HTML tags\r\nvar addressdivpSet = Object.create(null);\r\naddressdivpSet[NAMESPACE.HTML] = {\r\n  __proto__: null,\r\n  \"address\":true, \"div\":true, \"p\":true\r\n};\r\n\r\nvar dddtSet = Object.create(null);\r\ndddtSet[NAMESPACE.HTML] = {\r\n  __proto__: null,\r\n  \"dd\":true, \"dt\":true\r\n};\r\n\r\nvar tablesectionrowSet = Object.create(null);\r\ntablesectionrowSet[NAMESPACE.HTML] = {\r\n  __proto__: null,\r\n  \"table\":true, \"thead\":true, \"tbody\":true, \"tfoot\":true, \"tr\":true\r\n};\r\n\r\nvar impliedEndTagsSet = Object.create(null);\r\nimpliedEndTagsSet[NAMESPACE.HTML] = {\r\n  __proto__: null,\r\n  \"dd\": true, \"dt\": true, \"li\": true, \"menuitem\": true, \"optgroup\": true,\r\n  \"option\": true, \"p\": true, \"rb\": true, \"rp\": true, \"rt\": true, \"rtc\": true\r\n};\r\n\r\nvar thoroughImpliedEndTagsSet = Object.create(null);\r\nthoroughImpliedEndTagsSet[NAMESPACE.HTML] = {\r\n  __proto__: null,\r\n  \"caption\": true, \"colgroup\": true, \"dd\": true, \"dt\": true, \"li\": true,\r\n  \"optgroup\": true, \"option\": true, \"p\": true, \"rb\": true, \"rp\": true,\r\n  \"rt\": true, \"rtc\": true, \"tbody\": true, \"td\": true, \"tfoot\": true,\r\n  \"th\": true, \"thead\": true, \"tr\": true\r\n};\r\n\r\nvar tableContextSet = Object.create(null);\r\ntableContextSet[NAMESPACE.HTML] = {\r\n  __proto__: null,\r\n  \"table\": true, \"template\": true, \"html\": true\r\n};\r\n\r\nvar tableBodyContextSet = Object.create(null);\r\ntableBodyContextSet[NAMESPACE.HTML] = {\r\n  __proto__: null,\r\n  \"tbody\": true, \"tfoot\": true, \"thead\": true, \"template\": true, \"html\": true\r\n};\r\n\r\nvar tableRowContextSet = Object.create(null);\r\ntableRowContextSet[NAMESPACE.HTML] = {\r\n  __proto__: null,\r\n  \"tr\": true, \"template\": true, \"html\": true\r\n};\r\n\r\n// See http://www.w3.org/TR/html5/forms.html#form-associated-element\r\nvar formassociatedSet = Object.create(null);\r\nformassociatedSet[NAMESPACE.HTML] = {\r\n  __proto__: null,\r\n  \"button\": true, \"fieldset\": true, \"input\": true, \"keygen\": true,\r\n  \"object\": true, \"output\": true, \"select\": true, \"textarea\": true,\r\n  \"img\": true\r\n};\r\n\r\nvar inScopeSet = Object.create(null);\r\ninScopeSet[NAMESPACE.HTML]= {\r\n  __proto__: null,\r\n  \"applet\":true, \"caption\":true, \"html\":true, \"table\":true,\r\n  \"td\":true, \"th\":true, \"marquee\":true, \"object\":true,\r\n  \"template\":true\r\n};\r\ninScopeSet[NAMESPACE.MATHML] = {\r\n  __proto__: null,\r\n  \"mi\":true, \"mo\":true, \"mn\":true, \"ms\":true,\r\n  \"mtext\":true, \"annotation-xml\":true\r\n};\r\ninScopeSet[NAMESPACE.SVG] = {\r\n  __proto__: null,\r\n  \"foreignObject\":true, \"desc\":true, \"title\":true\r\n};\r\n\r\nvar inListItemScopeSet = Object.create(inScopeSet);\r\ninListItemScopeSet[NAMESPACE.HTML] =\r\n  Object.create(inScopeSet[NAMESPACE.HTML]);\r\ninListItemScopeSet[NAMESPACE.HTML].ol = true;\r\ninListItemScopeSet[NAMESPACE.HTML].ul = true;\r\n\r\nvar inButtonScopeSet = Object.create(inScopeSet);\r\ninButtonScopeSet[NAMESPACE.HTML] =\r\n  Object.create(inScopeSet[NAMESPACE.HTML]);\r\ninButtonScopeSet[NAMESPACE.HTML].button = true;\r\n\r\nvar inTableScopeSet = Object.create(null);\r\ninTableScopeSet[NAMESPACE.HTML] = {\r\n  __proto__: null,\r\n  \"html\":true, \"table\":true, \"template\":true\r\n};\r\n\r\n// The set of elements for select scope is the everything *except* these\r\nvar invertedSelectScopeSet = Object.create(null);\r\ninvertedSelectScopeSet[NAMESPACE.HTML] = {\r\n  __proto__: null,\r\n  \"optgroup\":true, \"option\":true\r\n};\r\n\r\nvar mathmlTextIntegrationPointSet = Object.create(null);\r\nmathmlTextIntegrationPointSet[NAMESPACE.MATHML] = {\r\n  __proto__: null,\r\n  mi: true,\r\n  mo: true,\r\n  mn: true,\r\n  ms: true,\r\n  mtext: true\r\n};\r\n\r\nvar htmlIntegrationPointSet = Object.create(null);\r\nhtmlIntegrationPointSet[NAMESPACE.SVG] = {\r\n  __proto__: null,\r\n  foreignObject: true,\r\n  desc: true,\r\n  title: true\r\n};\r\n\r\nvar foreignAttributes = {\r\n  __proto__: null,\r\n  \"xlink:actuate\": NAMESPACE.XLINK, \"xlink:arcrole\": NAMESPACE.XLINK,\r\n  \"xlink:href\":   NAMESPACE.XLINK,  \"xlink:role\":    NAMESPACE.XLINK,\r\n  \"xlink:show\":   NAMESPACE.XLINK,  \"xlink:title\":   NAMESPACE.XLINK,\r\n  \"xlink:type\":   NAMESPACE.XLINK,  \"xml:base\":      NAMESPACE.XML,\r\n  \"xml:lang\":     NAMESPACE.XML,    \"xml:space\":     NAMESPACE.XML,\r\n  \"xmlns\":        NAMESPACE.XMLNS,  \"xmlns:xlink\":   NAMESPACE.XMLNS\r\n};\r\n\r\n\r\n// Lowercase to mixed case mapping for SVG attributes and tagnames\r\nvar svgAttrAdjustments = {\r\n  __proto__: null,\r\n  attributename: \"attributeName\", attributetype: \"attributeType\",\r\n  basefrequency: \"baseFrequency\", baseprofile: \"baseProfile\",\r\n  calcmode: \"calcMode\", clippathunits: \"clipPathUnits\",\r\n  diffuseconstant: \"diffuseConstant\",\r\n  edgemode: \"edgeMode\",\r\n  filterunits: \"filterUnits\",\r\n  glyphref: \"glyphRef\", gradienttransform: \"gradientTransform\",\r\n  gradientunits: \"gradientUnits\", kernelmatrix: \"kernelMatrix\",\r\n  kernelunitlength: \"kernelUnitLength\", keypoints: \"keyPoints\",\r\n  keysplines: \"keySplines\", keytimes: \"keyTimes\",\r\n  lengthadjust: \"lengthAdjust\", limitingconeangle: \"limitingConeAngle\",\r\n  markerheight: \"markerHeight\", markerunits: \"markerUnits\",\r\n  markerwidth: \"markerWidth\", maskcontentunits: \"maskContentUnits\",\r\n  maskunits: \"maskUnits\", numoctaves: \"numOctaves\",\r\n  pathlength: \"pathLength\", patterncontentunits: \"patternContentUnits\",\r\n  patterntransform: \"patternTransform\", patternunits: \"patternUnits\",\r\n  pointsatx: \"pointsAtX\", pointsaty: \"pointsAtY\",\r\n  pointsatz: \"pointsAtZ\", preservealpha: \"preserveAlpha\",\r\n  preserveaspectratio: \"preserveAspectRatio\",\r\n  primitiveunits: \"primitiveUnits\", refx: \"refX\",\r\n  refy: \"refY\", repeatcount: \"repeatCount\",\r\n  repeatdur: \"repeatDur\", requiredextensions: \"requiredExtensions\",\r\n  requiredfeatures: \"requiredFeatures\",\r\n  specularconstant: \"specularConstant\",\r\n  specularexponent: \"specularExponent\", spreadmethod: \"spreadMethod\",\r\n  startoffset: \"startOffset\", stddeviation: \"stdDeviation\",\r\n  stitchtiles: \"stitchTiles\", surfacescale: \"surfaceScale\",\r\n  systemlanguage: \"systemLanguage\", tablevalues: \"tableValues\",\r\n  targetx: \"targetX\", targety: \"targetY\",\r\n  textlength: \"textLength\", viewbox: \"viewBox\",\r\n  viewtarget: \"viewTarget\", xchannelselector: \"xChannelSelector\",\r\n  ychannelselector: \"yChannelSelector\", zoomandpan: \"zoomAndPan\"\r\n};\r\n\r\nvar svgTagNameAdjustments = {\r\n  __proto__: null,\r\n  altglyph: \"altGlyph\", altglyphdef: \"altGlyphDef\",\r\n  altglyphitem: \"altGlyphItem\", animatecolor: \"animateColor\",\r\n  animatemotion: \"animateMotion\", animatetransform: \"animateTransform\",\r\n  clippath: \"clipPath\", feblend: \"feBlend\",\r\n  fecolormatrix: \"feColorMatrix\",\r\n  fecomponenttransfer: \"feComponentTransfer\", fecomposite: \"feComposite\",\r\n  feconvolvematrix: \"feConvolveMatrix\",\r\n  fediffuselighting: \"feDiffuseLighting\",\r\n  fedisplacementmap: \"feDisplacementMap\",\r\n  fedistantlight: \"feDistantLight\", feflood: \"feFlood\",\r\n  fefunca: \"feFuncA\", fefuncb: \"feFuncB\",\r\n  fefuncg: \"feFuncG\", fefuncr: \"feFuncR\",\r\n  fegaussianblur: \"feGaussianBlur\", feimage: \"feImage\",\r\n  femerge: \"feMerge\", femergenode: \"feMergeNode\",\r\n  femorphology: \"feMorphology\", feoffset: \"feOffset\",\r\n  fepointlight: \"fePointLight\", fespecularlighting: \"feSpecularLighting\",\r\n  fespotlight: \"feSpotLight\", fetile: \"feTile\",\r\n  feturbulence: \"feTurbulence\", foreignobject: \"foreignObject\",\r\n  glyphref: \"glyphRef\", lineargradient: \"linearGradient\",\r\n  radialgradient: \"radialGradient\", textpath: \"textPath\"\r\n};\r\n\r\n\r\n// Data for parsing numeric and named character references\r\n// These next 3 objects are direct translations of tables\r\n// in the HTML spec into JavaScript object format\r\nvar numericCharRefReplacements = {\r\n  __proto__: null,\r\n  0x00:0xFFFD, 0x80:0x20AC, 0x82:0x201A, 0x83:0x0192, 0x84:0x201E,\r\n  0x85:0x2026, 0x86:0x2020, 0x87:0x2021, 0x88:0x02C6, 0x89:0x2030,\r\n  0x8A:0x0160, 0x8B:0x2039, 0x8C:0x0152, 0x8E:0x017D, 0x91:0x2018,\r\n  0x92:0x2019, 0x93:0x201C, 0x94:0x201D, 0x95:0x2022, 0x96:0x2013,\r\n  0x97:0x2014, 0x98:0x02DC, 0x99:0x2122, 0x9A:0x0161, 0x9B:0x203A,\r\n  0x9C:0x0153, 0x9E:0x017E, 0x9F:0x0178\r\n};\r\n\r\n/*\r\n * This table is generated with test/tools/update-entities.js\r\n */\r\nvar namedCharRefs = {\r\n  __proto__: null,\r\n  \"AElig\":0xc6, \"AElig;\":0xc6,\r\n  \"AMP\":0x26, \"AMP;\":0x26,\r\n  \"Aacute\":0xc1, \"Aacute;\":0xc1,\r\n  \"Abreve;\":0x102, \"Acirc\":0xc2,\r\n  \"Acirc;\":0xc2, \"Acy;\":0x410,\r\n  \"Afr;\":[0xd835,0xdd04], \"Agrave\":0xc0,\r\n  \"Agrave;\":0xc0, \"Alpha;\":0x391,\r\n  \"Amacr;\":0x100, \"And;\":0x2a53,\r\n  \"Aogon;\":0x104, \"Aopf;\":[0xd835,0xdd38],\r\n  \"ApplyFunction;\":0x2061, \"Aring\":0xc5,\r\n  \"Aring;\":0xc5, \"Ascr;\":[0xd835,0xdc9c],\r\n  \"Assign;\":0x2254, \"Atilde\":0xc3,\r\n  \"Atilde;\":0xc3, \"Auml\":0xc4,\r\n  \"Auml;\":0xc4, \"Backslash;\":0x2216,\r\n  \"Barv;\":0x2ae7, \"Barwed;\":0x2306,\r\n  \"Bcy;\":0x411, \"Because;\":0x2235,\r\n  \"Bernoullis;\":0x212c, \"Beta;\":0x392,\r\n  \"Bfr;\":[0xd835,0xdd05], \"Bopf;\":[0xd835,0xdd39],\r\n  \"Breve;\":0x2d8, \"Bscr;\":0x212c,\r\n  \"Bumpeq;\":0x224e, \"CHcy;\":0x427,\r\n  \"COPY\":0xa9, \"COPY;\":0xa9,\r\n  \"Cacute;\":0x106, \"Cap;\":0x22d2,\r\n  \"CapitalDifferentialD;\":0x2145, \"Cayleys;\":0x212d,\r\n  \"Ccaron;\":0x10c, \"Ccedil\":0xc7,\r\n  \"Ccedil;\":0xc7, \"Ccirc;\":0x108,\r\n  \"Cconint;\":0x2230, \"Cdot;\":0x10a,\r\n  \"Cedilla;\":0xb8, \"CenterDot;\":0xb7,\r\n  \"Cfr;\":0x212d, \"Chi;\":0x3a7,\r\n  \"CircleDot;\":0x2299, \"CircleMinus;\":0x2296,\r\n  \"CirclePlus;\":0x2295, \"CircleTimes;\":0x2297,\r\n  \"ClockwiseContourIntegral;\":0x2232, \"CloseCurlyDoubleQuote;\":0x201d,\r\n  \"CloseCurlyQuote;\":0x2019, \"Colon;\":0x2237,\r\n  \"Colone;\":0x2a74, \"Congruent;\":0x2261,\r\n  \"Conint;\":0x222f, \"ContourIntegral;\":0x222e,\r\n  \"Copf;\":0x2102, \"Coproduct;\":0x2210,\r\n  \"CounterClockwiseContourIntegral;\":0x2233, \"Cross;\":0x2a2f,\r\n  \"Cscr;\":[0xd835,0xdc9e], \"Cup;\":0x22d3,\r\n  \"CupCap;\":0x224d, \"DD;\":0x2145,\r\n  \"DDotrahd;\":0x2911, \"DJcy;\":0x402,\r\n  \"DScy;\":0x405, \"DZcy;\":0x40f,\r\n  \"Dagger;\":0x2021, \"Darr;\":0x21a1,\r\n  \"Dashv;\":0x2ae4, \"Dcaron;\":0x10e,\r\n  \"Dcy;\":0x414, \"Del;\":0x2207,\r\n  \"Delta;\":0x394, \"Dfr;\":[0xd835,0xdd07],\r\n  \"DiacriticalAcute;\":0xb4, \"DiacriticalDot;\":0x2d9,\r\n  \"DiacriticalDoubleAcute;\":0x2dd, \"DiacriticalGrave;\":0x60,\r\n  \"DiacriticalTilde;\":0x2dc, \"Diamond;\":0x22c4,\r\n  \"DifferentialD;\":0x2146, \"Dopf;\":[0xd835,0xdd3b],\r\n  \"Dot;\":0xa8, \"DotDot;\":0x20dc,\r\n  \"DotEqual;\":0x2250, \"DoubleContourIntegral;\":0x222f,\r\n  \"DoubleDot;\":0xa8, \"DoubleDownArrow;\":0x21d3,\r\n  \"DoubleLeftArrow;\":0x21d0, \"DoubleLeftRightArrow;\":0x21d4,\r\n  \"DoubleLeftTee;\":0x2ae4, \"DoubleLongLeftArrow;\":0x27f8,\r\n  \"DoubleLongLeftRightArrow;\":0x27fa, \"DoubleLongRightArrow;\":0x27f9,\r\n  \"DoubleRightArrow;\":0x21d2, \"DoubleRightTee;\":0x22a8,\r\n  \"DoubleUpArrow;\":0x21d1, \"DoubleUpDownArrow;\":0x21d5,\r\n  \"DoubleVerticalBar;\":0x2225, \"DownArrow;\":0x2193,\r\n  \"DownArrowBar;\":0x2913, \"DownArrowUpArrow;\":0x21f5,\r\n  \"DownBreve;\":0x311, \"DownLeftRightVector;\":0x2950,\r\n  \"DownLeftTeeVector;\":0x295e, \"DownLeftVector;\":0x21bd,\r\n  \"DownLeftVectorBar;\":0x2956, \"DownRightTeeVector;\":0x295f,\r\n  \"DownRightVector;\":0x21c1, \"DownRightVectorBar;\":0x2957,\r\n  \"DownTee;\":0x22a4, \"DownTeeArrow;\":0x21a7,\r\n  \"Downarrow;\":0x21d3, \"Dscr;\":[0xd835,0xdc9f],\r\n  \"Dstrok;\":0x110, \"ENG;\":0x14a,\r\n  \"ETH\":0xd0, \"ETH;\":0xd0,\r\n  \"Eacute\":0xc9, \"Eacute;\":0xc9,\r\n  \"Ecaron;\":0x11a, \"Ecirc\":0xca,\r\n  \"Ecirc;\":0xca, \"Ecy;\":0x42d,\r\n  \"Edot;\":0x116, \"Efr;\":[0xd835,0xdd08],\r\n  \"Egrave\":0xc8, \"Egrave;\":0xc8,\r\n  \"Element;\":0x2208, \"Emacr;\":0x112,\r\n  \"EmptySmallSquare;\":0x25fb, \"EmptyVerySmallSquare;\":0x25ab,\r\n  \"Eogon;\":0x118, \"Eopf;\":[0xd835,0xdd3c],\r\n  \"Epsilon;\":0x395, \"Equal;\":0x2a75,\r\n  \"EqualTilde;\":0x2242, \"Equilibrium;\":0x21cc,\r\n  \"Escr;\":0x2130, \"Esim;\":0x2a73,\r\n  \"Eta;\":0x397, \"Euml\":0xcb,\r\n  \"Euml;\":0xcb, \"Exists;\":0x2203,\r\n  \"ExponentialE;\":0x2147, \"Fcy;\":0x424,\r\n  \"Ffr;\":[0xd835,0xdd09], \"FilledSmallSquare;\":0x25fc,\r\n  \"FilledVerySmallSquare;\":0x25aa, \"Fopf;\":[0xd835,0xdd3d],\r\n  \"ForAll;\":0x2200, \"Fouriertrf;\":0x2131,\r\n  \"Fscr;\":0x2131, \"GJcy;\":0x403,\r\n  \"GT\":0x3e, \"GT;\":0x3e,\r\n  \"Gamma;\":0x393, \"Gammad;\":0x3dc,\r\n  \"Gbreve;\":0x11e, \"Gcedil;\":0x122,\r\n  \"Gcirc;\":0x11c, \"Gcy;\":0x413,\r\n  \"Gdot;\":0x120, \"Gfr;\":[0xd835,0xdd0a],\r\n  \"Gg;\":0x22d9, \"Gopf;\":[0xd835,0xdd3e],\r\n  \"GreaterEqual;\":0x2265, \"GreaterEqualLess;\":0x22db,\r\n  \"GreaterFullEqual;\":0x2267, \"GreaterGreater;\":0x2aa2,\r\n  \"GreaterLess;\":0x2277, \"GreaterSlantEqual;\":0x2a7e,\r\n  \"GreaterTilde;\":0x2273, \"Gscr;\":[0xd835,0xdca2],\r\n  \"Gt;\":0x226b, \"HARDcy;\":0x42a,\r\n  \"Hacek;\":0x2c7, \"Hat;\":0x5e,\r\n  \"Hcirc;\":0x124, \"Hfr;\":0x210c,\r\n  \"HilbertSpace;\":0x210b, \"Hopf;\":0x210d,\r\n  \"HorizontalLine;\":0x2500, \"Hscr;\":0x210b,\r\n  \"Hstrok;\":0x126, \"HumpDownHump;\":0x224e,\r\n  \"HumpEqual;\":0x224f, \"IEcy;\":0x415,\r\n  \"IJlig;\":0x132, \"IOcy;\":0x401,\r\n  \"Iacute\":0xcd, \"Iacute;\":0xcd,\r\n  \"Icirc\":0xce, \"Icirc;\":0xce,\r\n  \"Icy;\":0x418, \"Idot;\":0x130,\r\n  \"Ifr;\":0x2111, \"Igrave\":0xcc,\r\n  \"Igrave;\":0xcc, \"Im;\":0x2111,\r\n  \"Imacr;\":0x12a, \"ImaginaryI;\":0x2148,\r\n  \"Implies;\":0x21d2, \"Int;\":0x222c,\r\n  \"Integral;\":0x222b, \"Intersection;\":0x22c2,\r\n  \"InvisibleComma;\":0x2063, \"InvisibleTimes;\":0x2062,\r\n  \"Iogon;\":0x12e, \"Iopf;\":[0xd835,0xdd40],\r\n  \"Iota;\":0x399, \"Iscr;\":0x2110,\r\n  \"Itilde;\":0x128, \"Iukcy;\":0x406,\r\n  \"Iuml\":0xcf, \"Iuml;\":0xcf,\r\n  \"Jcirc;\":0x134, \"Jcy;\":0x419,\r\n  \"Jfr;\":[0xd835,0xdd0d], \"Jopf;\":[0xd835,0xdd41],\r\n  \"Jscr;\":[0xd835,0xdca5], \"Jsercy;\":0x408,\r\n  \"Jukcy;\":0x404, \"KHcy;\":0x425,\r\n  \"KJcy;\":0x40c, \"Kappa;\":0x39a,\r\n  \"Kcedil;\":0x136, \"Kcy;\":0x41a,\r\n  \"Kfr;\":[0xd835,0xdd0e], \"Kopf;\":[0xd835,0xdd42],\r\n  \"Kscr;\":[0xd835,0xdca6], \"LJcy;\":0x409,\r\n  \"LT\":0x3c, \"LT;\":0x3c,\r\n  \"Lacute;\":0x139, \"Lambda;\":0x39b,\r\n  \"Lang;\":0x27ea, \"Laplacetrf;\":0x2112,\r\n  \"Larr;\":0x219e, \"Lcaron;\":0x13d,\r\n  \"Lcedil;\":0x13b, \"Lcy;\":0x41b,\r\n  \"LeftAngleBracket;\":0x27e8, \"LeftArrow;\":0x2190,\r\n  \"LeftArrowBar;\":0x21e4, \"LeftArrowRightArrow;\":0x21c6,\r\n  \"LeftCeiling;\":0x2308, \"LeftDoubleBracket;\":0x27e6,\r\n  \"LeftDownTeeVector;\":0x2961, \"LeftDownVector;\":0x21c3,\r\n  \"LeftDownVectorBar;\":0x2959, \"LeftFloor;\":0x230a,\r\n  \"LeftRightArrow;\":0x2194, \"LeftRightVector;\":0x294e,\r\n  \"LeftTee;\":0x22a3, \"LeftTeeArrow;\":0x21a4,\r\n  \"LeftTeeVector;\":0x295a, \"LeftTriangle;\":0x22b2,\r\n  \"LeftTriangleBar;\":0x29cf, \"LeftTriangleEqual;\":0x22b4,\r\n  \"LeftUpDownVector;\":0x2951, \"LeftUpTeeVector;\":0x2960,\r\n  \"LeftUpVector;\":0x21bf, \"LeftUpVectorBar;\":0x2958,\r\n  \"LeftVector;\":0x21bc, \"LeftVectorBar;\":0x2952,\r\n  \"Leftarrow;\":0x21d0, \"Leftrightarrow;\":0x21d4,\r\n  \"LessEqualGreater;\":0x22da, \"LessFullEqual;\":0x2266,\r\n  \"LessGreater;\":0x2276, \"LessLess;\":0x2aa1,\r\n  \"LessSlantEqual;\":0x2a7d, \"LessTilde;\":0x2272,\r\n  \"Lfr;\":[0xd835,0xdd0f], \"Ll;\":0x22d8,\r\n  \"Lleftarrow;\":0x21da, \"Lmidot;\":0x13f,\r\n  \"LongLeftArrow;\":0x27f5, \"LongLeftRightArrow;\":0x27f7,\r\n  \"LongRightArrow;\":0x27f6, \"Longleftarrow;\":0x27f8,\r\n  \"Longleftrightarrow;\":0x27fa, \"Longrightarrow;\":0x27f9,\r\n  \"Lopf;\":[0xd835,0xdd43], \"LowerLeftArrow;\":0x2199,\r\n  \"LowerRightArrow;\":0x2198, \"Lscr;\":0x2112,\r\n  \"Lsh;\":0x21b0, \"Lstrok;\":0x141,\r\n  \"Lt;\":0x226a, \"Map;\":0x2905,\r\n  \"Mcy;\":0x41c, \"MediumSpace;\":0x205f,\r\n  \"Mellintrf;\":0x2133, \"Mfr;\":[0xd835,0xdd10],\r\n  \"MinusPlus;\":0x2213, \"Mopf;\":[0xd835,0xdd44],\r\n  \"Mscr;\":0x2133, \"Mu;\":0x39c,\r\n  \"NJcy;\":0x40a, \"Nacute;\":0x143,\r\n  \"Ncaron;\":0x147, \"Ncedil;\":0x145,\r\n  \"Ncy;\":0x41d, \"NegativeMediumSpace;\":0x200b,\r\n  \"NegativeThickSpace;\":0x200b, \"NegativeThinSpace;\":0x200b,\r\n  \"NegativeVeryThinSpace;\":0x200b, \"NestedGreaterGreater;\":0x226b,\r\n  \"NestedLessLess;\":0x226a, \"NewLine;\":0xa,\r\n  \"Nfr;\":[0xd835,0xdd11], \"NoBreak;\":0x2060,\r\n  \"NonBreakingSpace;\":0xa0, \"Nopf;\":0x2115,\r\n  \"Not;\":0x2aec, \"NotCongruent;\":0x2262,\r\n  \"NotCupCap;\":0x226d, \"NotDoubleVerticalBar;\":0x2226,\r\n  \"NotElement;\":0x2209, \"NotEqual;\":0x2260,\r\n  \"NotEqualTilde;\":[0x2242,0x338], \"NotExists;\":0x2204,\r\n  \"NotGreater;\":0x226f, \"NotGreaterEqual;\":0x2271,\r\n  \"NotGreaterFullEqual;\":[0x2267,0x338], \"NotGreaterGreater;\":[0x226b,0x338],\r\n  \"NotGreaterLess;\":0x2279, \"NotGreaterSlantEqual;\":[0x2a7e,0x338],\r\n  \"NotGreaterTilde;\":0x2275, \"NotHumpDownHump;\":[0x224e,0x338],\r\n  \"NotHumpEqual;\":[0x224f,0x338], \"NotLeftTriangle;\":0x22ea,\r\n  \"NotLeftTriangleBar;\":[0x29cf,0x338], \"NotLeftTriangleEqual;\":0x22ec,\r\n  \"NotLess;\":0x226e, \"NotLessEqual;\":0x2270,\r\n  \"NotLessGreater;\":0x2278, \"NotLessLess;\":[0x226a,0x338],\r\n  \"NotLessSlantEqual;\":[0x2a7d,0x338], \"NotLessTilde;\":0x2274,\r\n  \"NotNestedGreaterGreater;\":[0x2aa2,0x338], \"NotNestedLessLess;\":[0x2aa1,0x338],\r\n  \"NotPrecedes;\":0x2280, \"NotPrecedesEqual;\":[0x2aaf,0x338],\r\n  \"NotPrecedesSlantEqual;\":0x22e0, \"NotReverseElement;\":0x220c,\r\n  \"NotRightTriangle;\":0x22eb, \"NotRightTriangleBar;\":[0x29d0,0x338],\r\n  \"NotRightTriangleEqual;\":0x22ed, \"NotSquareSubset;\":[0x228f,0x338],\r\n  \"NotSquareSubsetEqual;\":0x22e2, \"NotSquareSuperset;\":[0x2290,0x338],\r\n  \"NotSquareSupersetEqual;\":0x22e3, \"NotSubset;\":[0x2282,0x20d2],\r\n  \"NotSubsetEqual;\":0x2288, \"NotSucceeds;\":0x2281,\r\n  \"NotSucceedsEqual;\":[0x2ab0,0x338], \"NotSucceedsSlantEqual;\":0x22e1,\r\n  \"NotSucceedsTilde;\":[0x227f,0x338], \"NotSuperset;\":[0x2283,0x20d2],\r\n  \"NotSupersetEqual;\":0x2289, \"NotTilde;\":0x2241,\r\n  \"NotTildeEqual;\":0x2244, \"NotTildeFullEqual;\":0x2247,\r\n  \"NotTildeTilde;\":0x2249, \"NotVerticalBar;\":0x2224,\r\n  \"Nscr;\":[0xd835,0xdca9], \"Ntilde\":0xd1,\r\n  \"Ntilde;\":0xd1, \"Nu;\":0x39d,\r\n  \"OElig;\":0x152, \"Oacute\":0xd3,\r\n  \"Oacute;\":0xd3, \"Ocirc\":0xd4,\r\n  \"Ocirc;\":0xd4, \"Ocy;\":0x41e,\r\n  \"Odblac;\":0x150, \"Ofr;\":[0xd835,0xdd12],\r\n  \"Ograve\":0xd2, \"Ograve;\":0xd2,\r\n  \"Omacr;\":0x14c, \"Omega;\":0x3a9,\r\n  \"Omicron;\":0x39f, \"Oopf;\":[0xd835,0xdd46],\r\n  \"OpenCurlyDoubleQuote;\":0x201c, \"OpenCurlyQuote;\":0x2018,\r\n  \"Or;\":0x2a54, \"Oscr;\":[0xd835,0xdcaa],\r\n  \"Oslash\":0xd8, \"Oslash;\":0xd8,\r\n  \"Otilde\":0xd5, \"Otilde;\":0xd5,\r\n  \"Otimes;\":0x2a37, \"Ouml\":0xd6,\r\n  \"Ouml;\":0xd6, \"OverBar;\":0x203e,\r\n  \"OverBrace;\":0x23de, \"OverBracket;\":0x23b4,\r\n  \"OverParenthesis;\":0x23dc, \"PartialD;\":0x2202,\r\n  \"Pcy;\":0x41f, \"Pfr;\":[0xd835,0xdd13],\r\n  \"Phi;\":0x3a6, \"Pi;\":0x3a0,\r\n  \"PlusMinus;\":0xb1, \"Poincareplane;\":0x210c,\r\n  \"Popf;\":0x2119, \"Pr;\":0x2abb,\r\n  \"Precedes;\":0x227a, \"PrecedesEqual;\":0x2aaf,\r\n  \"PrecedesSlantEqual;\":0x227c, \"PrecedesTilde;\":0x227e,\r\n  \"Prime;\":0x2033, \"Product;\":0x220f,\r\n  \"Proportion;\":0x2237, \"Proportional;\":0x221d,\r\n  \"Pscr;\":[0xd835,0xdcab], \"Psi;\":0x3a8,\r\n  \"QUOT\":0x22, \"QUOT;\":0x22,\r\n  \"Qfr;\":[0xd835,0xdd14], \"Qopf;\":0x211a,\r\n  \"Qscr;\":[0xd835,0xdcac], \"RBarr;\":0x2910,\r\n  \"REG\":0xae, \"REG;\":0xae,\r\n  \"Racute;\":0x154, \"Rang;\":0x27eb,\r\n  \"Rarr;\":0x21a0, \"Rarrtl;\":0x2916,\r\n  \"Rcaron;\":0x158, \"Rcedil;\":0x156,\r\n  \"Rcy;\":0x420, \"Re;\":0x211c,\r\n  \"ReverseElement;\":0x220b, \"ReverseEquilibrium;\":0x21cb,\r\n  \"ReverseUpEquilibrium;\":0x296f, \"Rfr;\":0x211c,\r\n  \"Rho;\":0x3a1, \"RightAngleBracket;\":0x27e9,\r\n  \"RightArrow;\":0x2192, \"RightArrowBar;\":0x21e5,\r\n  \"RightArrowLeftArrow;\":0x21c4, \"RightCeiling;\":0x2309,\r\n  \"RightDoubleBracket;\":0x27e7, \"RightDownTeeVector;\":0x295d,\r\n  \"RightDownVector;\":0x21c2, \"RightDownVectorBar;\":0x2955,\r\n  \"RightFloor;\":0x230b, \"RightTee;\":0x22a2,\r\n  \"RightTeeArrow;\":0x21a6, \"RightTeeVector;\":0x295b,\r\n  \"RightTriangle;\":0x22b3, \"RightTriangleBar;\":0x29d0,\r\n  \"RightTriangleEqual;\":0x22b5, \"RightUpDownVector;\":0x294f,\r\n  \"RightUpTeeVector;\":0x295c, \"RightUpVector;\":0x21be,\r\n  \"RightUpVectorBar;\":0x2954, \"RightVector;\":0x21c0,\r\n  \"RightVectorBar;\":0x2953, \"Rightarrow;\":0x21d2,\r\n  \"Ropf;\":0x211d, \"RoundImplies;\":0x2970,\r\n  \"Rrightarrow;\":0x21db, \"Rscr;\":0x211b,\r\n  \"Rsh;\":0x21b1, \"RuleDelayed;\":0x29f4,\r\n  \"SHCHcy;\":0x429, \"SHcy;\":0x428,\r\n  \"SOFTcy;\":0x42c, \"Sacute;\":0x15a,\r\n  \"Sc;\":0x2abc, \"Scaron;\":0x160,\r\n  \"Scedil;\":0x15e, \"Scirc;\":0x15c,\r\n  \"Scy;\":0x421, \"Sfr;\":[0xd835,0xdd16],\r\n  \"ShortDownArrow;\":0x2193, \"ShortLeftArrow;\":0x2190,\r\n  \"ShortRightArrow;\":0x2192, \"ShortUpArrow;\":0x2191,\r\n  \"Sigma;\":0x3a3, \"SmallCircle;\":0x2218,\r\n  \"Sopf;\":[0xd835,0xdd4a], \"Sqrt;\":0x221a,\r\n  \"Square;\":0x25a1, \"SquareIntersection;\":0x2293,\r\n  \"SquareSubset;\":0x228f, \"SquareSubsetEqual;\":0x2291,\r\n  \"SquareSuperset;\":0x2290, \"SquareSupersetEqual;\":0x2292,\r\n  \"SquareUnion;\":0x2294, \"Sscr;\":[0xd835,0xdcae],\r\n  \"Star;\":0x22c6, \"Sub;\":0x22d0,\r\n  \"Subset;\":0x22d0, \"SubsetEqual;\":0x2286,\r\n  \"Succeeds;\":0x227b, \"SucceedsEqual;\":0x2ab0,\r\n  \"SucceedsSlantEqual;\":0x227d, \"SucceedsTilde;\":0x227f,\r\n  \"SuchThat;\":0x220b, \"Sum;\":0x2211,\r\n  \"Sup;\":0x22d1, \"Superset;\":0x2283,\r\n  \"SupersetEqual;\":0x2287, \"Supset;\":0x22d1,\r\n  \"THORN\":0xde, \"THORN;\":0xde,\r\n  \"TRADE;\":0x2122, \"TSHcy;\":0x40b,\r\n  \"TScy;\":0x426, \"Tab;\":0x9,\r\n  \"Tau;\":0x3a4, \"Tcaron;\":0x164,\r\n  \"Tcedil;\":0x162, \"Tcy;\":0x422,\r\n  \"Tfr;\":[0xd835,0xdd17], \"Therefore;\":0x2234,\r\n  \"Theta;\":0x398, \"ThickSpace;\":[0x205f,0x200a],\r\n  \"ThinSpace;\":0x2009, \"Tilde;\":0x223c,\r\n  \"TildeEqual;\":0x2243, \"TildeFullEqual;\":0x2245,\r\n  \"TildeTilde;\":0x2248, \"Topf;\":[0xd835,0xdd4b],\r\n  \"TripleDot;\":0x20db, \"Tscr;\":[0xd835,0xdcaf],\r\n  \"Tstrok;\":0x166, \"Uacute\":0xda,\r\n  \"Uacute;\":0xda, \"Uarr;\":0x219f,\r\n  \"Uarrocir;\":0x2949, \"Ubrcy;\":0x40e,\r\n  \"Ubreve;\":0x16c, \"Ucirc\":0xdb,\r\n  \"Ucirc;\":0xdb, \"Ucy;\":0x423,\r\n  \"Udblac;\":0x170, \"Ufr;\":[0xd835,0xdd18],\r\n  \"Ugrave\":0xd9, \"Ugrave;\":0xd9,\r\n  \"Umacr;\":0x16a, \"UnderBar;\":0x5f,\r\n  \"UnderBrace;\":0x23df, \"UnderBracket;\":0x23b5,\r\n  \"UnderParenthesis;\":0x23dd, \"Union;\":0x22c3,\r\n  \"UnionPlus;\":0x228e, \"Uogon;\":0x172,\r\n  \"Uopf;\":[0xd835,0xdd4c], \"UpArrow;\":0x2191,\r\n  \"UpArrowBar;\":0x2912, \"UpArrowDownArrow;\":0x21c5,\r\n  \"UpDownArrow;\":0x2195, \"UpEquilibrium;\":0x296e,\r\n  \"UpTee;\":0x22a5, \"UpTeeArrow;\":0x21a5,\r\n  \"Uparrow;\":0x21d1, \"Updownarrow;\":0x21d5,\r\n  \"UpperLeftArrow;\":0x2196, \"UpperRightArrow;\":0x2197,\r\n  \"Upsi;\":0x3d2, \"Upsilon;\":0x3a5,\r\n  \"Uring;\":0x16e, \"Uscr;\":[0xd835,0xdcb0],\r\n  \"Utilde;\":0x168, \"Uuml\":0xdc,\r\n  \"Uuml;\":0xdc, \"VDash;\":0x22ab,\r\n  \"Vbar;\":0x2aeb, \"Vcy;\":0x412,\r\n  \"Vdash;\":0x22a9, \"Vdashl;\":0x2ae6,\r\n  \"Vee;\":0x22c1, \"Verbar;\":0x2016,\r\n  \"Vert;\":0x2016, \"VerticalBar;\":0x2223,\r\n  \"VerticalLine;\":0x7c, \"VerticalSeparator;\":0x2758,\r\n  \"VerticalTilde;\":0x2240, \"VeryThinSpace;\":0x200a,\r\n  \"Vfr;\":[0xd835,0xdd19], \"Vopf;\":[0xd835,0xdd4d],\r\n  \"Vscr;\":[0xd835,0xdcb1], \"Vvdash;\":0x22aa,\r\n  \"Wcirc;\":0x174, \"Wedge;\":0x22c0,\r\n  \"Wfr;\":[0xd835,0xdd1a], \"Wopf;\":[0xd835,0xdd4e],\r\n  \"Wscr;\":[0xd835,0xdcb2], \"Xfr;\":[0xd835,0xdd1b],\r\n  \"Xi;\":0x39e, \"Xopf;\":[0xd835,0xdd4f],\r\n  \"Xscr;\":[0xd835,0xdcb3], \"YAcy;\":0x42f,\r\n  \"YIcy;\":0x407, \"YUcy;\":0x42e,\r\n  \"Yacute\":0xdd, \"Yacute;\":0xdd,\r\n  \"Ycirc;\":0x176, \"Ycy;\":0x42b,\r\n  \"Yfr;\":[0xd835,0xdd1c], \"Yopf;\":[0xd835,0xdd50],\r\n  \"Yscr;\":[0xd835,0xdcb4], \"Yuml;\":0x178,\r\n  \"ZHcy;\":0x416, \"Zacute;\":0x179,\r\n  \"Zcaron;\":0x17d, \"Zcy;\":0x417,\r\n  \"Zdot;\":0x17b, \"ZeroWidthSpace;\":0x200b,\r\n  \"Zeta;\":0x396, \"Zfr;\":0x2128,\r\n  \"Zopf;\":0x2124, \"Zscr;\":[0xd835,0xdcb5],\r\n  \"aacute\":0xe1, \"aacute;\":0xe1,\r\n  \"abreve;\":0x103, \"ac;\":0x223e,\r\n  \"acE;\":[0x223e,0x333], \"acd;\":0x223f,\r\n  \"acirc\":0xe2, \"acirc;\":0xe2,\r\n  \"acute\":0xb4, \"acute;\":0xb4,\r\n  \"acy;\":0x430, \"aelig\":0xe6,\r\n  \"aelig;\":0xe6, \"af;\":0x2061,\r\n  \"afr;\":[0xd835,0xdd1e], \"agrave\":0xe0,\r\n  \"agrave;\":0xe0, \"alefsym;\":0x2135,\r\n  \"aleph;\":0x2135, \"alpha;\":0x3b1,\r\n  \"amacr;\":0x101, \"amalg;\":0x2a3f,\r\n  \"amp\":0x26, \"amp;\":0x26,\r\n  \"and;\":0x2227, \"andand;\":0x2a55,\r\n  \"andd;\":0x2a5c, \"andslope;\":0x2a58,\r\n  \"andv;\":0x2a5a, \"ang;\":0x2220,\r\n  \"ange;\":0x29a4, \"angle;\":0x2220,\r\n  \"angmsd;\":0x2221, \"angmsdaa;\":0x29a8,\r\n  \"angmsdab;\":0x29a9, \"angmsdac;\":0x29aa,\r\n  \"angmsdad;\":0x29ab, \"angmsdae;\":0x29ac,\r\n  \"angmsdaf;\":0x29ad, \"angmsdag;\":0x29ae,\r\n  \"angmsdah;\":0x29af, \"angrt;\":0x221f,\r\n  \"angrtvb;\":0x22be, \"angrtvbd;\":0x299d,\r\n  \"angsph;\":0x2222, \"angst;\":0xc5,\r\n  \"angzarr;\":0x237c, \"aogon;\":0x105,\r\n  \"aopf;\":[0xd835,0xdd52], \"ap;\":0x2248,\r\n  \"apE;\":0x2a70, \"apacir;\":0x2a6f,\r\n  \"ape;\":0x224a, \"apid;\":0x224b,\r\n  \"apos;\":0x27, \"approx;\":0x2248,\r\n  \"approxeq;\":0x224a, \"aring\":0xe5,\r\n  \"aring;\":0xe5, \"ascr;\":[0xd835,0xdcb6],\r\n  \"ast;\":0x2a, \"asymp;\":0x2248,\r\n  \"asympeq;\":0x224d, \"atilde\":0xe3,\r\n  \"atilde;\":0xe3, \"auml\":0xe4,\r\n  \"auml;\":0xe4, \"awconint;\":0x2233,\r\n  \"awint;\":0x2a11, \"bNot;\":0x2aed,\r\n  \"backcong;\":0x224c, \"backepsilon;\":0x3f6,\r\n  \"backprime;\":0x2035, \"backsim;\":0x223d,\r\n  \"backsimeq;\":0x22cd, \"barvee;\":0x22bd,\r\n  \"barwed;\":0x2305, \"barwedge;\":0x2305,\r\n  \"bbrk;\":0x23b5, \"bbrktbrk;\":0x23b6,\r\n  \"bcong;\":0x224c, \"bcy;\":0x431,\r\n  \"bdquo;\":0x201e, \"becaus;\":0x2235,\r\n  \"because;\":0x2235, \"bemptyv;\":0x29b0,\r\n  \"bepsi;\":0x3f6, \"bernou;\":0x212c,\r\n  \"beta;\":0x3b2, \"beth;\":0x2136,\r\n  \"between;\":0x226c, \"bfr;\":[0xd835,0xdd1f],\r\n  \"bigcap;\":0x22c2, \"bigcirc;\":0x25ef,\r\n  \"bigcup;\":0x22c3, \"bigodot;\":0x2a00,\r\n  \"bigoplus;\":0x2a01, \"bigotimes;\":0x2a02,\r\n  \"bigsqcup;\":0x2a06, \"bigstar;\":0x2605,\r\n  \"bigtriangledown;\":0x25bd, \"bigtriangleup;\":0x25b3,\r\n  \"biguplus;\":0x2a04, \"bigvee;\":0x22c1,\r\n  \"bigwedge;\":0x22c0, \"bkarow;\":0x290d,\r\n  \"blacklozenge;\":0x29eb, \"blacksquare;\":0x25aa,\r\n  \"blacktriangle;\":0x25b4, \"blacktriangledown;\":0x25be,\r\n  \"blacktriangleleft;\":0x25c2, \"blacktriangleright;\":0x25b8,\r\n  \"blank;\":0x2423, \"blk12;\":0x2592,\r\n  \"blk14;\":0x2591, \"blk34;\":0x2593,\r\n  \"block;\":0x2588, \"bne;\":[0x3d,0x20e5],\r\n  \"bnequiv;\":[0x2261,0x20e5], \"bnot;\":0x2310,\r\n  \"bopf;\":[0xd835,0xdd53], \"bot;\":0x22a5,\r\n  \"bottom;\":0x22a5, \"bowtie;\":0x22c8,\r\n  \"boxDL;\":0x2557, \"boxDR;\":0x2554,\r\n  \"boxDl;\":0x2556, \"boxDr;\":0x2553,\r\n  \"boxH;\":0x2550, \"boxHD;\":0x2566,\r\n  \"boxHU;\":0x2569, \"boxHd;\":0x2564,\r\n  \"boxHu;\":0x2567, \"boxUL;\":0x255d,\r\n  \"boxUR;\":0x255a, \"boxUl;\":0x255c,\r\n  \"boxUr;\":0x2559, \"boxV;\":0x2551,\r\n  \"boxVH;\":0x256c, \"boxVL;\":0x2563,\r\n  \"boxVR;\":0x2560, \"boxVh;\":0x256b,\r\n  \"boxVl;\":0x2562, \"boxVr;\":0x255f,\r\n  \"boxbox;\":0x29c9, \"boxdL;\":0x2555,\r\n  \"boxdR;\":0x2552, \"boxdl;\":0x2510,\r\n  \"boxdr;\":0x250c, \"boxh;\":0x2500,\r\n  \"boxhD;\":0x2565, \"boxhU;\":0x2568,\r\n  \"boxhd;\":0x252c, \"boxhu;\":0x2534,\r\n  \"boxminus;\":0x229f, \"boxplus;\":0x229e,\r\n  \"boxtimes;\":0x22a0, \"boxuL;\":0x255b,\r\n  \"boxuR;\":0x2558, \"boxul;\":0x2518,\r\n  \"boxur;\":0x2514, \"boxv;\":0x2502,\r\n  \"boxvH;\":0x256a, \"boxvL;\":0x2561,\r\n  \"boxvR;\":0x255e, \"boxvh;\":0x253c,\r\n  \"boxvl;\":0x2524, \"boxvr;\":0x251c,\r\n  \"bprime;\":0x2035, \"breve;\":0x2d8,\r\n  \"brvbar\":0xa6, \"brvbar;\":0xa6,\r\n  \"bscr;\":[0xd835,0xdcb7], \"bsemi;\":0x204f,\r\n  \"bsim;\":0x223d, \"bsime;\":0x22cd,\r\n  \"bsol;\":0x5c, \"bsolb;\":0x29c5,\r\n  \"bsolhsub;\":0x27c8, \"bull;\":0x2022,\r\n  \"bullet;\":0x2022, \"bump;\":0x224e,\r\n  \"bumpE;\":0x2aae, \"bumpe;\":0x224f,\r\n  \"bumpeq;\":0x224f, \"cacute;\":0x107,\r\n  \"cap;\":0x2229, \"capand;\":0x2a44,\r\n  \"capbrcup;\":0x2a49, \"capcap;\":0x2a4b,\r\n  \"capcup;\":0x2a47, \"capdot;\":0x2a40,\r\n  \"caps;\":[0x2229,0xfe00], \"caret;\":0x2041,\r\n  \"caron;\":0x2c7, \"ccaps;\":0x2a4d,\r\n  \"ccaron;\":0x10d, \"ccedil\":0xe7,\r\n  \"ccedil;\":0xe7, \"ccirc;\":0x109,\r\n  \"ccups;\":0x2a4c, \"ccupssm;\":0x2a50,\r\n  \"cdot;\":0x10b, \"cedil\":0xb8,\r\n  \"cedil;\":0xb8, \"cemptyv;\":0x29b2,\r\n  \"cent\":0xa2, \"cent;\":0xa2,\r\n  \"centerdot;\":0xb7, \"cfr;\":[0xd835,0xdd20],\r\n  \"chcy;\":0x447, \"check;\":0x2713,\r\n  \"checkmark;\":0x2713, \"chi;\":0x3c7,\r\n  \"cir;\":0x25cb, \"cirE;\":0x29c3,\r\n  \"circ;\":0x2c6, \"circeq;\":0x2257,\r\n  \"circlearrowleft;\":0x21ba, \"circlearrowright;\":0x21bb,\r\n  \"circledR;\":0xae, \"circledS;\":0x24c8,\r\n  \"circledast;\":0x229b, \"circledcirc;\":0x229a,\r\n  \"circleddash;\":0x229d, \"cire;\":0x2257,\r\n  \"cirfnint;\":0x2a10, \"cirmid;\":0x2aef,\r\n  \"cirscir;\":0x29c2, \"clubs;\":0x2663,\r\n  \"clubsuit;\":0x2663, \"colon;\":0x3a,\r\n  \"colone;\":0x2254, \"coloneq;\":0x2254,\r\n  \"comma;\":0x2c, \"commat;\":0x40,\r\n  \"comp;\":0x2201, \"compfn;\":0x2218,\r\n  \"complement;\":0x2201, \"complexes;\":0x2102,\r\n  \"cong;\":0x2245, \"congdot;\":0x2a6d,\r\n  \"conint;\":0x222e, \"copf;\":[0xd835,0xdd54],\r\n  \"coprod;\":0x2210, \"copy\":0xa9,\r\n  \"copy;\":0xa9, \"copysr;\":0x2117,\r\n  \"crarr;\":0x21b5, \"cross;\":0x2717,\r\n  \"cscr;\":[0xd835,0xdcb8], \"csub;\":0x2acf,\r\n  \"csube;\":0x2ad1, \"csup;\":0x2ad0,\r\n  \"csupe;\":0x2ad2, \"ctdot;\":0x22ef,\r\n  \"cudarrl;\":0x2938, \"cudarrr;\":0x2935,\r\n  \"cuepr;\":0x22de, \"cuesc;\":0x22df,\r\n  \"cularr;\":0x21b6, \"cularrp;\":0x293d,\r\n  \"cup;\":0x222a, \"cupbrcap;\":0x2a48,\r\n  \"cupcap;\":0x2a46, \"cupcup;\":0x2a4a,\r\n  \"cupdot;\":0x228d, \"cupor;\":0x2a45,\r\n  \"cups;\":[0x222a,0xfe00], \"curarr;\":0x21b7,\r\n  \"curarrm;\":0x293c, \"curlyeqprec;\":0x22de,\r\n  \"curlyeqsucc;\":0x22df, \"curlyvee;\":0x22ce,\r\n  \"curlywedge;\":0x22cf, \"curren\":0xa4,\r\n  \"curren;\":0xa4, \"curvearrowleft;\":0x21b6,\r\n  \"curvearrowright;\":0x21b7, \"cuvee;\":0x22ce,\r\n  \"cuwed;\":0x22cf, \"cwconint;\":0x2232,\r\n  \"cwint;\":0x2231, \"cylcty;\":0x232d,\r\n  \"dArr;\":0x21d3, \"dHar;\":0x2965,\r\n  \"dagger;\":0x2020, \"daleth;\":0x2138,\r\n  \"darr;\":0x2193, \"dash;\":0x2010,\r\n  \"dashv;\":0x22a3, \"dbkarow;\":0x290f,\r\n  \"dblac;\":0x2dd, \"dcaron;\":0x10f,\r\n  \"dcy;\":0x434, \"dd;\":0x2146,\r\n  \"ddagger;\":0x2021, \"ddarr;\":0x21ca,\r\n  \"ddotseq;\":0x2a77, \"deg\":0xb0,\r\n  \"deg;\":0xb0, \"delta;\":0x3b4,\r\n  \"demptyv;\":0x29b1, \"dfisht;\":0x297f,\r\n  \"dfr;\":[0xd835,0xdd21], \"dharl;\":0x21c3,\r\n  \"dharr;\":0x21c2, \"diam;\":0x22c4,\r\n  \"diamond;\":0x22c4, \"diamondsuit;\":0x2666,\r\n  \"diams;\":0x2666, \"die;\":0xa8,\r\n  \"digamma;\":0x3dd, \"disin;\":0x22f2,\r\n  \"div;\":0xf7, \"divide\":0xf7,\r\n  \"divide;\":0xf7, \"divideontimes;\":0x22c7,\r\n  \"divonx;\":0x22c7, \"djcy;\":0x452,\r\n  \"dlcorn;\":0x231e, \"dlcrop;\":0x230d,\r\n  \"dollar;\":0x24, \"dopf;\":[0xd835,0xdd55],\r\n  \"dot;\":0x2d9, \"doteq;\":0x2250,\r\n  \"doteqdot;\":0x2251, \"dotminus;\":0x2238,\r\n  \"dotplus;\":0x2214, \"dotsquare;\":0x22a1,\r\n  \"doublebarwedge;\":0x2306, \"downarrow;\":0x2193,\r\n  \"downdownarrows;\":0x21ca, \"downharpoonleft;\":0x21c3,\r\n  \"downharpoonright;\":0x21c2, \"drbkarow;\":0x2910,\r\n  \"drcorn;\":0x231f, \"drcrop;\":0x230c,\r\n  \"dscr;\":[0xd835,0xdcb9], \"dscy;\":0x455,\r\n  \"dsol;\":0x29f6, \"dstrok;\":0x111,\r\n  \"dtdot;\":0x22f1, \"dtri;\":0x25bf,\r\n  \"dtrif;\":0x25be, \"duarr;\":0x21f5,\r\n  \"duhar;\":0x296f, \"dwangle;\":0x29a6,\r\n  \"dzcy;\":0x45f, \"dzigrarr;\":0x27ff,\r\n  \"eDDot;\":0x2a77, \"eDot;\":0x2251,\r\n  \"eacute\":0xe9, \"eacute;\":0xe9,\r\n  \"easter;\":0x2a6e, \"ecaron;\":0x11b,\r\n  \"ecir;\":0x2256, \"ecirc\":0xea,\r\n  \"ecirc;\":0xea, \"ecolon;\":0x2255,\r\n  \"ecy;\":0x44d, \"edot;\":0x117,\r\n  \"ee;\":0x2147, \"efDot;\":0x2252,\r\n  \"efr;\":[0xd835,0xdd22], \"eg;\":0x2a9a,\r\n  \"egrave\":0xe8, \"egrave;\":0xe8,\r\n  \"egs;\":0x2a96, \"egsdot;\":0x2a98,\r\n  \"el;\":0x2a99, \"elinters;\":0x23e7,\r\n  \"ell;\":0x2113, \"els;\":0x2a95,\r\n  \"elsdot;\":0x2a97, \"emacr;\":0x113,\r\n  \"empty;\":0x2205, \"emptyset;\":0x2205,\r\n  \"emptyv;\":0x2205, \"emsp13;\":0x2004,\r\n  \"emsp14;\":0x2005, \"emsp;\":0x2003,\r\n  \"eng;\":0x14b, \"ensp;\":0x2002,\r\n  \"eogon;\":0x119, \"eopf;\":[0xd835,0xdd56],\r\n  \"epar;\":0x22d5, \"eparsl;\":0x29e3,\r\n  \"eplus;\":0x2a71, \"epsi;\":0x3b5,\r\n  \"epsilon;\":0x3b5, \"epsiv;\":0x3f5,\r\n  \"eqcirc;\":0x2256, \"eqcolon;\":0x2255,\r\n  \"eqsim;\":0x2242, \"eqslantgtr;\":0x2a96,\r\n  \"eqslantless;\":0x2a95, \"equals;\":0x3d,\r\n  \"equest;\":0x225f, \"equiv;\":0x2261,\r\n  \"equivDD;\":0x2a78, \"eqvparsl;\":0x29e5,\r\n  \"erDot;\":0x2253, \"erarr;\":0x2971,\r\n  \"escr;\":0x212f, \"esdot;\":0x2250,\r\n  \"esim;\":0x2242, \"eta;\":0x3b7,\r\n  \"eth\":0xf0, \"eth;\":0xf0,\r\n  \"euml\":0xeb, \"euml;\":0xeb,\r\n  \"euro;\":0x20ac, \"excl;\":0x21,\r\n  \"exist;\":0x2203, \"expectation;\":0x2130,\r\n  \"exponentiale;\":0x2147, \"fallingdotseq;\":0x2252,\r\n  \"fcy;\":0x444, \"female;\":0x2640,\r\n  \"ffilig;\":0xfb03, \"fflig;\":0xfb00,\r\n  \"ffllig;\":0xfb04, \"ffr;\":[0xd835,0xdd23],\r\n  \"filig;\":0xfb01, \"fjlig;\":[0x66,0x6a],\r\n  \"flat;\":0x266d, \"fllig;\":0xfb02,\r\n  \"fltns;\":0x25b1, \"fnof;\":0x192,\r\n  \"fopf;\":[0xd835,0xdd57], \"forall;\":0x2200,\r\n  \"fork;\":0x22d4, \"forkv;\":0x2ad9,\r\n  \"fpartint;\":0x2a0d, \"frac12\":0xbd,\r\n  \"frac12;\":0xbd, \"frac13;\":0x2153,\r\n  \"frac14\":0xbc, \"frac14;\":0xbc,\r\n  \"frac15;\":0x2155, \"frac16;\":0x2159,\r\n  \"frac18;\":0x215b, \"frac23;\":0x2154,\r\n  \"frac25;\":0x2156, \"frac34\":0xbe,\r\n  \"frac34;\":0xbe, \"frac35;\":0x2157,\r\n  \"frac38;\":0x215c, \"frac45;\":0x2158,\r\n  \"frac56;\":0x215a, \"frac58;\":0x215d,\r\n  \"frac78;\":0x215e, \"frasl;\":0x2044,\r\n  \"frown;\":0x2322, \"fscr;\":[0xd835,0xdcbb],\r\n  \"gE;\":0x2267, \"gEl;\":0x2a8c,\r\n  \"gacute;\":0x1f5, \"gamma;\":0x3b3,\r\n  \"gammad;\":0x3dd, \"gap;\":0x2a86,\r\n  \"gbreve;\":0x11f, \"gcirc;\":0x11d,\r\n  \"gcy;\":0x433, \"gdot;\":0x121,\r\n  \"ge;\":0x2265, \"gel;\":0x22db,\r\n  \"geq;\":0x2265, \"geqq;\":0x2267,\r\n  \"geqslant;\":0x2a7e, \"ges;\":0x2a7e,\r\n  \"gescc;\":0x2aa9, \"gesdot;\":0x2a80,\r\n  \"gesdoto;\":0x2a82, \"gesdotol;\":0x2a84,\r\n  \"gesl;\":[0x22db,0xfe00], \"gesles;\":0x2a94,\r\n  \"gfr;\":[0xd835,0xdd24], \"gg;\":0x226b,\r\n  \"ggg;\":0x22d9, \"gimel;\":0x2137,\r\n  \"gjcy;\":0x453, \"gl;\":0x2277,\r\n  \"glE;\":0x2a92, \"gla;\":0x2aa5,\r\n  \"glj;\":0x2aa4, \"gnE;\":0x2269,\r\n  \"gnap;\":0x2a8a, \"gnapprox;\":0x2a8a,\r\n  \"gne;\":0x2a88, \"gneq;\":0x2a88,\r\n  \"gneqq;\":0x2269, \"gnsim;\":0x22e7,\r\n  \"gopf;\":[0xd835,0xdd58], \"grave;\":0x60,\r\n  \"gscr;\":0x210a, \"gsim;\":0x2273,\r\n  \"gsime;\":0x2a8e, \"gsiml;\":0x2a90,\r\n  \"gt\":0x3e, \"gt;\":0x3e,\r\n  \"gtcc;\":0x2aa7, \"gtcir;\":0x2a7a,\r\n  \"gtdot;\":0x22d7, \"gtlPar;\":0x2995,\r\n  \"gtquest;\":0x2a7c, \"gtrapprox;\":0x2a86,\r\n  \"gtrarr;\":0x2978, \"gtrdot;\":0x22d7,\r\n  \"gtreqless;\":0x22db, \"gtreqqless;\":0x2a8c,\r\n  \"gtrless;\":0x2277, \"gtrsim;\":0x2273,\r\n  \"gvertneqq;\":[0x2269,0xfe00], \"gvnE;\":[0x2269,0xfe00],\r\n  \"hArr;\":0x21d4, \"hairsp;\":0x200a,\r\n  \"half;\":0xbd, \"hamilt;\":0x210b,\r\n  \"hardcy;\":0x44a, \"harr;\":0x2194,\r\n  \"harrcir;\":0x2948, \"harrw;\":0x21ad,\r\n  \"hbar;\":0x210f, \"hcirc;\":0x125,\r\n  \"hearts;\":0x2665, \"heartsuit;\":0x2665,\r\n  \"hellip;\":0x2026, \"hercon;\":0x22b9,\r\n  \"hfr;\":[0xd835,0xdd25], \"hksearow;\":0x2925,\r\n  \"hkswarow;\":0x2926, \"hoarr;\":0x21ff,\r\n  \"homtht;\":0x223b, \"hookleftarrow;\":0x21a9,\r\n  \"hookrightarrow;\":0x21aa, \"hopf;\":[0xd835,0xdd59],\r\n  \"horbar;\":0x2015, \"hscr;\":[0xd835,0xdcbd],\r\n  \"hslash;\":0x210f, \"hstrok;\":0x127,\r\n  \"hybull;\":0x2043, \"hyphen;\":0x2010,\r\n  \"iacute\":0xed, \"iacute;\":0xed,\r\n  \"ic;\":0x2063, \"icirc\":0xee,\r\n  \"icirc;\":0xee, \"icy;\":0x438,\r\n  \"iecy;\":0x435, \"iexcl\":0xa1,\r\n  \"iexcl;\":0xa1, \"iff;\":0x21d4,\r\n  \"ifr;\":[0xd835,0xdd26], \"igrave\":0xec,\r\n  \"igrave;\":0xec, \"ii;\":0x2148,\r\n  \"iiiint;\":0x2a0c, \"iiint;\":0x222d,\r\n  \"iinfin;\":0x29dc, \"iiota;\":0x2129,\r\n  \"ijlig;\":0x133, \"imacr;\":0x12b,\r\n  \"image;\":0x2111, \"imagline;\":0x2110,\r\n  \"imagpart;\":0x2111, \"imath;\":0x131,\r\n  \"imof;\":0x22b7, \"imped;\":0x1b5,\r\n  \"in;\":0x2208, \"incare;\":0x2105,\r\n  \"infin;\":0x221e, \"infintie;\":0x29dd,\r\n  \"inodot;\":0x131, \"int;\":0x222b,\r\n  \"intcal;\":0x22ba, \"integers;\":0x2124,\r\n  \"intercal;\":0x22ba, \"intlarhk;\":0x2a17,\r\n  \"intprod;\":0x2a3c, \"iocy;\":0x451,\r\n  \"iogon;\":0x12f, \"iopf;\":[0xd835,0xdd5a],\r\n  \"iota;\":0x3b9, \"iprod;\":0x2a3c,\r\n  \"iquest\":0xbf, \"iquest;\":0xbf,\r\n  \"iscr;\":[0xd835,0xdcbe], \"isin;\":0x2208,\r\n  \"isinE;\":0x22f9, \"isindot;\":0x22f5,\r\n  \"isins;\":0x22f4, \"isinsv;\":0x22f3,\r\n  \"isinv;\":0x2208, \"it;\":0x2062,\r\n  \"itilde;\":0x129, \"iukcy;\":0x456,\r\n  \"iuml\":0xef, \"iuml;\":0xef,\r\n  \"jcirc;\":0x135, \"jcy;\":0x439,\r\n  \"jfr;\":[0xd835,0xdd27], \"jmath;\":0x237,\r\n  \"jopf;\":[0xd835,0xdd5b], \"jscr;\":[0xd835,0xdcbf],\r\n  \"jsercy;\":0x458, \"jukcy;\":0x454,\r\n  \"kappa;\":0x3ba, \"kappav;\":0x3f0,\r\n  \"kcedil;\":0x137, \"kcy;\":0x43a,\r\n  \"kfr;\":[0xd835,0xdd28], \"kgreen;\":0x138,\r\n  \"khcy;\":0x445, \"kjcy;\":0x45c,\r\n  \"kopf;\":[0xd835,0xdd5c], \"kscr;\":[0xd835,0xdcc0],\r\n  \"lAarr;\":0x21da, \"lArr;\":0x21d0,\r\n  \"lAtail;\":0x291b, \"lBarr;\":0x290e,\r\n  \"lE;\":0x2266, \"lEg;\":0x2a8b,\r\n  \"lHar;\":0x2962, \"lacute;\":0x13a,\r\n  \"laemptyv;\":0x29b4, \"lagran;\":0x2112,\r\n  \"lambda;\":0x3bb, \"lang;\":0x27e8,\r\n  \"langd;\":0x2991, \"langle;\":0x27e8,\r\n  \"lap;\":0x2a85, \"laquo\":0xab,\r\n  \"laquo;\":0xab, \"larr;\":0x2190,\r\n  \"larrb;\":0x21e4, \"larrbfs;\":0x291f,\r\n  \"larrfs;\":0x291d, \"larrhk;\":0x21a9,\r\n  \"larrlp;\":0x21ab, \"larrpl;\":0x2939,\r\n  \"larrsim;\":0x2973, \"larrtl;\":0x21a2,\r\n  \"lat;\":0x2aab, \"latail;\":0x2919,\r\n  \"late;\":0x2aad, \"lates;\":[0x2aad,0xfe00],\r\n  \"lbarr;\":0x290c, \"lbbrk;\":0x2772,\r\n  \"lbrace;\":0x7b, \"lbrack;\":0x5b,\r\n  \"lbrke;\":0x298b, \"lbrksld;\":0x298f,\r\n  \"lbrkslu;\":0x298d, \"lcaron;\":0x13e,\r\n  \"lcedil;\":0x13c, \"lceil;\":0x2308,\r\n  \"lcub;\":0x7b, \"lcy;\":0x43b,\r\n  \"ldca;\":0x2936, \"ldquo;\":0x201c,\r\n  \"ldquor;\":0x201e, \"ldrdhar;\":0x2967,\r\n  \"ldrushar;\":0x294b, \"ldsh;\":0x21b2,\r\n  \"le;\":0x2264, \"leftarrow;\":0x2190,\r\n  \"leftarrowtail;\":0x21a2, \"leftharpoondown;\":0x21bd,\r\n  \"leftharpoonup;\":0x21bc, \"leftleftarrows;\":0x21c7,\r\n  \"leftrightarrow;\":0x2194, \"leftrightarrows;\":0x21c6,\r\n  \"leftrightharpoons;\":0x21cb, \"leftrightsquigarrow;\":0x21ad,\r\n  \"leftthreetimes;\":0x22cb, \"leg;\":0x22da,\r\n  \"leq;\":0x2264, \"leqq;\":0x2266,\r\n  \"leqslant;\":0x2a7d, \"les;\":0x2a7d,\r\n  \"lescc;\":0x2aa8, \"lesdot;\":0x2a7f,\r\n  \"lesdoto;\":0x2a81, \"lesdotor;\":0x2a83,\r\n  \"lesg;\":[0x22da,0xfe00], \"lesges;\":0x2a93,\r\n  \"lessapprox;\":0x2a85, \"lessdot;\":0x22d6,\r\n  \"lesseqgtr;\":0x22da, \"lesseqqgtr;\":0x2a8b,\r\n  \"lessgtr;\":0x2276, \"lesssim;\":0x2272,\r\n  \"lfisht;\":0x297c, \"lfloor;\":0x230a,\r\n  \"lfr;\":[0xd835,0xdd29], \"lg;\":0x2276,\r\n  \"lgE;\":0x2a91, \"lhard;\":0x21bd,\r\n  \"lharu;\":0x21bc, \"lharul;\":0x296a,\r\n  \"lhblk;\":0x2584, \"ljcy;\":0x459,\r\n  \"ll;\":0x226a, \"llarr;\":0x21c7,\r\n  \"llcorner;\":0x231e, \"llhard;\":0x296b,\r\n  \"lltri;\":0x25fa, \"lmidot;\":0x140,\r\n  \"lmoust;\":0x23b0, \"lmoustache;\":0x23b0,\r\n  \"lnE;\":0x2268, \"lnap;\":0x2a89,\r\n  \"lnapprox;\":0x2a89, \"lne;\":0x2a87,\r\n  \"lneq;\":0x2a87, \"lneqq;\":0x2268,\r\n  \"lnsim;\":0x22e6, \"loang;\":0x27ec,\r\n  \"loarr;\":0x21fd, \"lobrk;\":0x27e6,\r\n  \"longleftarrow;\":0x27f5, \"longleftrightarrow;\":0x27f7,\r\n  \"longmapsto;\":0x27fc, \"longrightarrow;\":0x27f6,\r\n  \"looparrowleft;\":0x21ab, \"looparrowright;\":0x21ac,\r\n  \"lopar;\":0x2985, \"lopf;\":[0xd835,0xdd5d],\r\n  \"loplus;\":0x2a2d, \"lotimes;\":0x2a34,\r\n  \"lowast;\":0x2217, \"lowbar;\":0x5f,\r\n  \"loz;\":0x25ca, \"lozenge;\":0x25ca,\r\n  \"lozf;\":0x29eb, \"lpar;\":0x28,\r\n  \"lparlt;\":0x2993, \"lrarr;\":0x21c6,\r\n  \"lrcorner;\":0x231f, \"lrhar;\":0x21cb,\r\n  \"lrhard;\":0x296d, \"lrm;\":0x200e,\r\n  \"lrtri;\":0x22bf, \"lsaquo;\":0x2039,\r\n  \"lscr;\":[0xd835,0xdcc1], \"lsh;\":0x21b0,\r\n  \"lsim;\":0x2272, \"lsime;\":0x2a8d,\r\n  \"lsimg;\":0x2a8f, \"lsqb;\":0x5b,\r\n  \"lsquo;\":0x2018, \"lsquor;\":0x201a,\r\n  \"lstrok;\":0x142, \"lt\":0x3c,\r\n  \"lt;\":0x3c, \"ltcc;\":0x2aa6,\r\n  \"ltcir;\":0x2a79, \"ltdot;\":0x22d6,\r\n  \"lthree;\":0x22cb, \"ltimes;\":0x22c9,\r\n  \"ltlarr;\":0x2976, \"ltquest;\":0x2a7b,\r\n  \"ltrPar;\":0x2996, \"ltri;\":0x25c3,\r\n  \"ltrie;\":0x22b4, \"ltrif;\":0x25c2,\r\n  \"lurdshar;\":0x294a, \"luruhar;\":0x2966,\r\n  \"lvertneqq;\":[0x2268,0xfe00], \"lvnE;\":[0x2268,0xfe00],\r\n  \"mDDot;\":0x223a, \"macr\":0xaf,\r\n  \"macr;\":0xaf, \"male;\":0x2642,\r\n  \"malt;\":0x2720, \"maltese;\":0x2720,\r\n  \"map;\":0x21a6, \"mapsto;\":0x21a6,\r\n  \"mapstodown;\":0x21a7, \"mapstoleft;\":0x21a4,\r\n  \"mapstoup;\":0x21a5, \"marker;\":0x25ae,\r\n  \"mcomma;\":0x2a29, \"mcy;\":0x43c,\r\n  \"mdash;\":0x2014, \"measuredangle;\":0x2221,\r\n  \"mfr;\":[0xd835,0xdd2a], \"mho;\":0x2127,\r\n  \"micro\":0xb5, \"micro;\":0xb5,\r\n  \"mid;\":0x2223, \"midast;\":0x2a,\r\n  \"midcir;\":0x2af0, \"middot\":0xb7,\r\n  \"middot;\":0xb7, \"minus;\":0x2212,\r\n  \"minusb;\":0x229f, \"minusd;\":0x2238,\r\n  \"minusdu;\":0x2a2a, \"mlcp;\":0x2adb,\r\n  \"mldr;\":0x2026, \"mnplus;\":0x2213,\r\n  \"models;\":0x22a7, \"mopf;\":[0xd835,0xdd5e],\r\n  \"mp;\":0x2213, \"mscr;\":[0xd835,0xdcc2],\r\n  \"mstpos;\":0x223e, \"mu;\":0x3bc,\r\n  \"multimap;\":0x22b8, \"mumap;\":0x22b8,\r\n  \"nGg;\":[0x22d9,0x338], \"nGt;\":[0x226b,0x20d2],\r\n  \"nGtv;\":[0x226b,0x338], \"nLeftarrow;\":0x21cd,\r\n  \"nLeftrightarrow;\":0x21ce, \"nLl;\":[0x22d8,0x338],\r\n  \"nLt;\":[0x226a,0x20d2], \"nLtv;\":[0x226a,0x338],\r\n  \"nRightarrow;\":0x21cf, \"nVDash;\":0x22af,\r\n  \"nVdash;\":0x22ae, \"nabla;\":0x2207,\r\n  \"nacute;\":0x144, \"nang;\":[0x2220,0x20d2],\r\n  \"nap;\":0x2249, \"napE;\":[0x2a70,0x338],\r\n  \"napid;\":[0x224b,0x338], \"napos;\":0x149,\r\n  \"napprox;\":0x2249, \"natur;\":0x266e,\r\n  \"natural;\":0x266e, \"naturals;\":0x2115,\r\n  \"nbsp\":0xa0, \"nbsp;\":0xa0,\r\n  \"nbump;\":[0x224e,0x338], \"nbumpe;\":[0x224f,0x338],\r\n  \"ncap;\":0x2a43, \"ncaron;\":0x148,\r\n  \"ncedil;\":0x146, \"ncong;\":0x2247,\r\n  \"ncongdot;\":[0x2a6d,0x338], \"ncup;\":0x2a42,\r\n  \"ncy;\":0x43d, \"ndash;\":0x2013,\r\n  \"ne;\":0x2260, \"neArr;\":0x21d7,\r\n  \"nearhk;\":0x2924, \"nearr;\":0x2197,\r\n  \"nearrow;\":0x2197, \"nedot;\":[0x2250,0x338],\r\n  \"nequiv;\":0x2262, \"nesear;\":0x2928,\r\n  \"nesim;\":[0x2242,0x338], \"nexist;\":0x2204,\r\n  \"nexists;\":0x2204, \"nfr;\":[0xd835,0xdd2b],\r\n  \"ngE;\":[0x2267,0x338], \"nge;\":0x2271,\r\n  \"ngeq;\":0x2271, \"ngeqq;\":[0x2267,0x338],\r\n  \"ngeqslant;\":[0x2a7e,0x338], \"nges;\":[0x2a7e,0x338],\r\n  \"ngsim;\":0x2275, \"ngt;\":0x226f,\r\n  \"ngtr;\":0x226f, \"nhArr;\":0x21ce,\r\n  \"nharr;\":0x21ae, \"nhpar;\":0x2af2,\r\n  \"ni;\":0x220b, \"nis;\":0x22fc,\r\n  \"nisd;\":0x22fa, \"niv;\":0x220b,\r\n  \"njcy;\":0x45a, \"nlArr;\":0x21cd,\r\n  \"nlE;\":[0x2266,0x338], \"nlarr;\":0x219a,\r\n  \"nldr;\":0x2025, \"nle;\":0x2270,\r\n  \"nleftarrow;\":0x219a, \"nleftrightarrow;\":0x21ae,\r\n  \"nleq;\":0x2270, \"nleqq;\":[0x2266,0x338],\r\n  \"nleqslant;\":[0x2a7d,0x338], \"nles;\":[0x2a7d,0x338],\r\n  \"nless;\":0x226e, \"nlsim;\":0x2274,\r\n  \"nlt;\":0x226e, \"nltri;\":0x22ea,\r\n  \"nltrie;\":0x22ec, \"nmid;\":0x2224,\r\n  \"nopf;\":[0xd835,0xdd5f], \"not\":0xac,\r\n  \"not;\":0xac, \"notin;\":0x2209,\r\n  \"notinE;\":[0x22f9,0x338], \"notindot;\":[0x22f5,0x338],\r\n  \"notinva;\":0x2209, \"notinvb;\":0x22f7,\r\n  \"notinvc;\":0x22f6, \"notni;\":0x220c,\r\n  \"notniva;\":0x220c, \"notnivb;\":0x22fe,\r\n  \"notnivc;\":0x22fd, \"npar;\":0x2226,\r\n  \"nparallel;\":0x2226, \"nparsl;\":[0x2afd,0x20e5],\r\n  \"npart;\":[0x2202,0x338], \"npolint;\":0x2a14,\r\n  \"npr;\":0x2280, \"nprcue;\":0x22e0,\r\n  \"npre;\":[0x2aaf,0x338], \"nprec;\":0x2280,\r\n  \"npreceq;\":[0x2aaf,0x338], \"nrArr;\":0x21cf,\r\n  \"nrarr;\":0x219b, \"nrarrc;\":[0x2933,0x338],\r\n  \"nrarrw;\":[0x219d,0x338], \"nrightarrow;\":0x219b,\r\n  \"nrtri;\":0x22eb, \"nrtrie;\":0x22ed,\r\n  \"nsc;\":0x2281, \"nsccue;\":0x22e1,\r\n  \"nsce;\":[0x2ab0,0x338], \"nscr;\":[0xd835,0xdcc3],\r\n  \"nshortmid;\":0x2224, \"nshortparallel;\":0x2226,\r\n  \"nsim;\":0x2241, \"nsime;\":0x2244,\r\n  \"nsimeq;\":0x2244, \"nsmid;\":0x2224,\r\n  \"nspar;\":0x2226, \"nsqsube;\":0x22e2,\r\n  \"nsqsupe;\":0x22e3, \"nsub;\":0x2284,\r\n  \"nsubE;\":[0x2ac5,0x338], \"nsube;\":0x2288,\r\n  \"nsubset;\":[0x2282,0x20d2], \"nsubseteq;\":0x2288,\r\n  \"nsubseteqq;\":[0x2ac5,0x338], \"nsucc;\":0x2281,\r\n  \"nsucceq;\":[0x2ab0,0x338], \"nsup;\":0x2285,\r\n  \"nsupE;\":[0x2ac6,0x338], \"nsupe;\":0x2289,\r\n  \"nsupset;\":[0x2283,0x20d2], \"nsupseteq;\":0x2289,\r\n  \"nsupseteqq;\":[0x2ac6,0x338], \"ntgl;\":0x2279,\r\n  \"ntilde\":0xf1, \"ntilde;\":0xf1,\r\n  \"ntlg;\":0x2278, \"ntriangleleft;\":0x22ea,\r\n  \"ntrianglelefteq;\":0x22ec, \"ntriangleright;\":0x22eb,\r\n  \"ntrianglerighteq;\":0x22ed, \"nu;\":0x3bd,\r\n  \"num;\":0x23, \"numero;\":0x2116,\r\n  \"numsp;\":0x2007, \"nvDash;\":0x22ad,\r\n  \"nvHarr;\":0x2904, \"nvap;\":[0x224d,0x20d2],\r\n  \"nvdash;\":0x22ac, \"nvge;\":[0x2265,0x20d2],\r\n  \"nvgt;\":[0x3e,0x20d2], \"nvinfin;\":0x29de,\r\n  \"nvlArr;\":0x2902, \"nvle;\":[0x2264,0x20d2],\r\n  \"nvlt;\":[0x3c,0x20d2], \"nvltrie;\":[0x22b4,0x20d2],\r\n  \"nvrArr;\":0x2903, \"nvrtrie;\":[0x22b5,0x20d2],\r\n  \"nvsim;\":[0x223c,0x20d2], \"nwArr;\":0x21d6,\r\n  \"nwarhk;\":0x2923, \"nwarr;\":0x2196,\r\n  \"nwarrow;\":0x2196, \"nwnear;\":0x2927,\r\n  \"oS;\":0x24c8, \"oacute\":0xf3,\r\n  \"oacute;\":0xf3, \"oast;\":0x229b,\r\n  \"ocir;\":0x229a, \"ocirc\":0xf4,\r\n  \"ocirc;\":0xf4, \"ocy;\":0x43e,\r\n  \"odash;\":0x229d, \"odblac;\":0x151,\r\n  \"odiv;\":0x2a38, \"odot;\":0x2299,\r\n  \"odsold;\":0x29bc, \"oelig;\":0x153,\r\n  \"ofcir;\":0x29bf, \"ofr;\":[0xd835,0xdd2c],\r\n  \"ogon;\":0x2db, \"ograve\":0xf2,\r\n  \"ograve;\":0xf2, \"ogt;\":0x29c1,\r\n  \"ohbar;\":0x29b5, \"ohm;\":0x3a9,\r\n  \"oint;\":0x222e, \"olarr;\":0x21ba,\r\n  \"olcir;\":0x29be, \"olcross;\":0x29bb,\r\n  \"oline;\":0x203e, \"olt;\":0x29c0,\r\n  \"omacr;\":0x14d, \"omega;\":0x3c9,\r\n  \"omicron;\":0x3bf, \"omid;\":0x29b6,\r\n  \"ominus;\":0x2296, \"oopf;\":[0xd835,0xdd60],\r\n  \"opar;\":0x29b7, \"operp;\":0x29b9,\r\n  \"oplus;\":0x2295, \"or;\":0x2228,\r\n  \"orarr;\":0x21bb, \"ord;\":0x2a5d,\r\n  \"order;\":0x2134, \"orderof;\":0x2134,\r\n  \"ordf\":0xaa, \"ordf;\":0xaa,\r\n  \"ordm\":0xba, \"ordm;\":0xba,\r\n  \"origof;\":0x22b6, \"oror;\":0x2a56,\r\n  \"orslope;\":0x2a57, \"orv;\":0x2a5b,\r\n  \"oscr;\":0x2134, \"oslash\":0xf8,\r\n  \"oslash;\":0xf8, \"osol;\":0x2298,\r\n  \"otilde\":0xf5, \"otilde;\":0xf5,\r\n  \"otimes;\":0x2297, \"otimesas;\":0x2a36,\r\n  \"ouml\":0xf6, \"ouml;\":0xf6,\r\n  \"ovbar;\":0x233d, \"par;\":0x2225,\r\n  \"para\":0xb6, \"para;\":0xb6,\r\n  \"parallel;\":0x2225, \"parsim;\":0x2af3,\r\n  \"parsl;\":0x2afd, \"part;\":0x2202,\r\n  \"pcy;\":0x43f, \"percnt;\":0x25,\r\n  \"period;\":0x2e, \"permil;\":0x2030,\r\n  \"perp;\":0x22a5, \"pertenk;\":0x2031,\r\n  \"pfr;\":[0xd835,0xdd2d], \"phi;\":0x3c6,\r\n  \"phiv;\":0x3d5, \"phmmat;\":0x2133,\r\n  \"phone;\":0x260e, \"pi;\":0x3c0,\r\n  \"pitchfork;\":0x22d4, \"piv;\":0x3d6,\r\n  \"planck;\":0x210f, \"planckh;\":0x210e,\r\n  \"plankv;\":0x210f, \"plus;\":0x2b,\r\n  \"plusacir;\":0x2a23, \"plusb;\":0x229e,\r\n  \"pluscir;\":0x2a22, \"plusdo;\":0x2214,\r\n  \"plusdu;\":0x2a25, \"pluse;\":0x2a72,\r\n  \"plusmn\":0xb1, \"plusmn;\":0xb1,\r\n  \"plussim;\":0x2a26, \"plustwo;\":0x2a27,\r\n  \"pm;\":0xb1, \"pointint;\":0x2a15,\r\n  \"popf;\":[0xd835,0xdd61], \"pound\":0xa3,\r\n  \"pound;\":0xa3, \"pr;\":0x227a,\r\n  \"prE;\":0x2ab3, \"prap;\":0x2ab7,\r\n  \"prcue;\":0x227c, \"pre;\":0x2aaf,\r\n  \"prec;\":0x227a, \"precapprox;\":0x2ab7,\r\n  \"preccurlyeq;\":0x227c, \"preceq;\":0x2aaf,\r\n  \"precnapprox;\":0x2ab9, \"precneqq;\":0x2ab5,\r\n  \"precnsim;\":0x22e8, \"precsim;\":0x227e,\r\n  \"prime;\":0x2032, \"primes;\":0x2119,\r\n  \"prnE;\":0x2ab5, \"prnap;\":0x2ab9,\r\n  \"prnsim;\":0x22e8, \"prod;\":0x220f,\r\n  \"profalar;\":0x232e, \"profline;\":0x2312,\r\n  \"profsurf;\":0x2313, \"prop;\":0x221d,\r\n  \"propto;\":0x221d, \"prsim;\":0x227e,\r\n  \"prurel;\":0x22b0, \"pscr;\":[0xd835,0xdcc5],\r\n  \"psi;\":0x3c8, \"puncsp;\":0x2008,\r\n  \"qfr;\":[0xd835,0xdd2e], \"qint;\":0x2a0c,\r\n  \"qopf;\":[0xd835,0xdd62], \"qprime;\":0x2057,\r\n  \"qscr;\":[0xd835,0xdcc6], \"quaternions;\":0x210d,\r\n  \"quatint;\":0x2a16, \"quest;\":0x3f,\r\n  \"questeq;\":0x225f, \"quot\":0x22,\r\n  \"quot;\":0x22, \"rAarr;\":0x21db,\r\n  \"rArr;\":0x21d2, \"rAtail;\":0x291c,\r\n  \"rBarr;\":0x290f, \"rHar;\":0x2964,\r\n  \"race;\":[0x223d,0x331], \"racute;\":0x155,\r\n  \"radic;\":0x221a, \"raemptyv;\":0x29b3,\r\n  \"rang;\":0x27e9, \"rangd;\":0x2992,\r\n  \"range;\":0x29a5, \"rangle;\":0x27e9,\r\n  \"raquo\":0xbb, \"raquo;\":0xbb,\r\n  \"rarr;\":0x2192, \"rarrap;\":0x2975,\r\n  \"rarrb;\":0x21e5, \"rarrbfs;\":0x2920,\r\n  \"rarrc;\":0x2933, \"rarrfs;\":0x291e,\r\n  \"rarrhk;\":0x21aa, \"rarrlp;\":0x21ac,\r\n  \"rarrpl;\":0x2945, \"rarrsim;\":0x2974,\r\n  \"rarrtl;\":0x21a3, \"rarrw;\":0x219d,\r\n  \"ratail;\":0x291a, \"ratio;\":0x2236,\r\n  \"rationals;\":0x211a, \"rbarr;\":0x290d,\r\n  \"rbbrk;\":0x2773, \"rbrace;\":0x7d,\r\n  \"rbrack;\":0x5d, \"rbrke;\":0x298c,\r\n  \"rbrksld;\":0x298e, \"rbrkslu;\":0x2990,\r\n  \"rcaron;\":0x159, \"rcedil;\":0x157,\r\n  \"rceil;\":0x2309, \"rcub;\":0x7d,\r\n  \"rcy;\":0x440, \"rdca;\":0x2937,\r\n  \"rdldhar;\":0x2969, \"rdquo;\":0x201d,\r\n  \"rdquor;\":0x201d, \"rdsh;\":0x21b3,\r\n  \"real;\":0x211c, \"realine;\":0x211b,\r\n  \"realpart;\":0x211c, \"reals;\":0x211d,\r\n  \"rect;\":0x25ad, \"reg\":0xae,\r\n  \"reg;\":0xae, \"rfisht;\":0x297d,\r\n  \"rfloor;\":0x230b, \"rfr;\":[0xd835,0xdd2f],\r\n  \"rhard;\":0x21c1, \"rharu;\":0x21c0,\r\n  \"rharul;\":0x296c, \"rho;\":0x3c1,\r\n  \"rhov;\":0x3f1, \"rightarrow;\":0x2192,\r\n  \"rightarrowtail;\":0x21a3, \"rightharpoondown;\":0x21c1,\r\n  \"rightharpoonup;\":0x21c0, \"rightleftarrows;\":0x21c4,\r\n  \"rightleftharpoons;\":0x21cc, \"rightrightarrows;\":0x21c9,\r\n  \"rightsquigarrow;\":0x219d, \"rightthreetimes;\":0x22cc,\r\n  \"ring;\":0x2da, \"risingdotseq;\":0x2253,\r\n  \"rlarr;\":0x21c4, \"rlhar;\":0x21cc,\r\n  \"rlm;\":0x200f, \"rmoust;\":0x23b1,\r\n  \"rmoustache;\":0x23b1, \"rnmid;\":0x2aee,\r\n  \"roang;\":0x27ed, \"roarr;\":0x21fe,\r\n  \"robrk;\":0x27e7, \"ropar;\":0x2986,\r\n  \"ropf;\":[0xd835,0xdd63], \"roplus;\":0x2a2e,\r\n  \"rotimes;\":0x2a35, \"rpar;\":0x29,\r\n  \"rpargt;\":0x2994, \"rppolint;\":0x2a12,\r\n  \"rrarr;\":0x21c9, \"rsaquo;\":0x203a,\r\n  \"rscr;\":[0xd835,0xdcc7], \"rsh;\":0x21b1,\r\n  \"rsqb;\":0x5d, \"rsquo;\":0x2019,\r\n  \"rsquor;\":0x2019, \"rthree;\":0x22cc,\r\n  \"rtimes;\":0x22ca, \"rtri;\":0x25b9,\r\n  \"rtrie;\":0x22b5, \"rtrif;\":0x25b8,\r\n  \"rtriltri;\":0x29ce, \"ruluhar;\":0x2968,\r\n  \"rx;\":0x211e, \"sacute;\":0x15b,\r\n  \"sbquo;\":0x201a, \"sc;\":0x227b,\r\n  \"scE;\":0x2ab4, \"scap;\":0x2ab8,\r\n  \"scaron;\":0x161, \"sccue;\":0x227d,\r\n  \"sce;\":0x2ab0, \"scedil;\":0x15f,\r\n  \"scirc;\":0x15d, \"scnE;\":0x2ab6,\r\n  \"scnap;\":0x2aba, \"scnsim;\":0x22e9,\r\n  \"scpolint;\":0x2a13, \"scsim;\":0x227f,\r\n  \"scy;\":0x441, \"sdot;\":0x22c5,\r\n  \"sdotb;\":0x22a1, \"sdote;\":0x2a66,\r\n  \"seArr;\":0x21d8, \"searhk;\":0x2925,\r\n  \"searr;\":0x2198, \"searrow;\":0x2198,\r\n  \"sect\":0xa7, \"sect;\":0xa7,\r\n  \"semi;\":0x3b, \"seswar;\":0x2929,\r\n  \"setminus;\":0x2216, \"setmn;\":0x2216,\r\n  \"sext;\":0x2736, \"sfr;\":[0xd835,0xdd30],\r\n  \"sfrown;\":0x2322, \"sharp;\":0x266f,\r\n  \"shchcy;\":0x449, \"shcy;\":0x448,\r\n  \"shortmid;\":0x2223, \"shortparallel;\":0x2225,\r\n  \"shy\":0xad, \"shy;\":0xad,\r\n  \"sigma;\":0x3c3, \"sigmaf;\":0x3c2,\r\n  \"sigmav;\":0x3c2, \"sim;\":0x223c,\r\n  \"simdot;\":0x2a6a, \"sime;\":0x2243,\r\n  \"simeq;\":0x2243, \"simg;\":0x2a9e,\r\n  \"simgE;\":0x2aa0, \"siml;\":0x2a9d,\r\n  \"simlE;\":0x2a9f, \"simne;\":0x2246,\r\n  \"simplus;\":0x2a24, \"simrarr;\":0x2972,\r\n  \"slarr;\":0x2190, \"smallsetminus;\":0x2216,\r\n  \"smashp;\":0x2a33, \"smeparsl;\":0x29e4,\r\n  \"smid;\":0x2223, \"smile;\":0x2323,\r\n  \"smt;\":0x2aaa, \"smte;\":0x2aac,\r\n  \"smtes;\":[0x2aac,0xfe00], \"softcy;\":0x44c,\r\n  \"sol;\":0x2f, \"solb;\":0x29c4,\r\n  \"solbar;\":0x233f, \"sopf;\":[0xd835,0xdd64],\r\n  \"spades;\":0x2660, \"spadesuit;\":0x2660,\r\n  \"spar;\":0x2225, \"sqcap;\":0x2293,\r\n  \"sqcaps;\":[0x2293,0xfe00], \"sqcup;\":0x2294,\r\n  \"sqcups;\":[0x2294,0xfe00], \"sqsub;\":0x228f,\r\n  \"sqsube;\":0x2291, \"sqsubset;\":0x228f,\r\n  \"sqsubseteq;\":0x2291, \"sqsup;\":0x2290,\r\n  \"sqsupe;\":0x2292, \"sqsupset;\":0x2290,\r\n  \"sqsupseteq;\":0x2292, \"squ;\":0x25a1,\r\n  \"square;\":0x25a1, \"squarf;\":0x25aa,\r\n  \"squf;\":0x25aa, \"srarr;\":0x2192,\r\n  \"sscr;\":[0xd835,0xdcc8], \"ssetmn;\":0x2216,\r\n  \"ssmile;\":0x2323, \"sstarf;\":0x22c6,\r\n  \"star;\":0x2606, \"starf;\":0x2605,\r\n  \"straightepsilon;\":0x3f5, \"straightphi;\":0x3d5,\r\n  \"strns;\":0xaf, \"sub;\":0x2282,\r\n  \"subE;\":0x2ac5, \"subdot;\":0x2abd,\r\n  \"sube;\":0x2286, \"subedot;\":0x2ac3,\r\n  \"submult;\":0x2ac1, \"subnE;\":0x2acb,\r\n  \"subne;\":0x228a, \"subplus;\":0x2abf,\r\n  \"subrarr;\":0x2979, \"subset;\":0x2282,\r\n  \"subseteq;\":0x2286, \"subseteqq;\":0x2ac5,\r\n  \"subsetneq;\":0x228a, \"subsetneqq;\":0x2acb,\r\n  \"subsim;\":0x2ac7, \"subsub;\":0x2ad5,\r\n  \"subsup;\":0x2ad3, \"succ;\":0x227b,\r\n  \"succapprox;\":0x2ab8, \"succcurlyeq;\":0x227d,\r\n  \"succeq;\":0x2ab0, \"succnapprox;\":0x2aba,\r\n  \"succneqq;\":0x2ab6, \"succnsim;\":0x22e9,\r\n  \"succsim;\":0x227f, \"sum;\":0x2211,\r\n  \"sung;\":0x266a, \"sup1\":0xb9,\r\n  \"sup1;\":0xb9, \"sup2\":0xb2,\r\n  \"sup2;\":0xb2, \"sup3\":0xb3,\r\n  \"sup3;\":0xb3, \"sup;\":0x2283,\r\n  \"supE;\":0x2ac6, \"supdot;\":0x2abe,\r\n  \"supdsub;\":0x2ad8, \"supe;\":0x2287,\r\n  \"supedot;\":0x2ac4, \"suphsol;\":0x27c9,\r\n  \"suphsub;\":0x2ad7, \"suplarr;\":0x297b,\r\n  \"supmult;\":0x2ac2, \"supnE;\":0x2acc,\r\n  \"supne;\":0x228b, \"supplus;\":0x2ac0,\r\n  \"supset;\":0x2283, \"supseteq;\":0x2287,\r\n  \"supseteqq;\":0x2ac6, \"supsetneq;\":0x228b,\r\n  \"supsetneqq;\":0x2acc, \"supsim;\":0x2ac8,\r\n  \"supsub;\":0x2ad4, \"supsup;\":0x2ad6,\r\n  \"swArr;\":0x21d9, \"swarhk;\":0x2926,\r\n  \"swarr;\":0x2199, \"swarrow;\":0x2199,\r\n  \"swnwar;\":0x292a, \"szlig\":0xdf,\r\n  \"szlig;\":0xdf, \"target;\":0x2316,\r\n  \"tau;\":0x3c4, \"tbrk;\":0x23b4,\r\n  \"tcaron;\":0x165, \"tcedil;\":0x163,\r\n  \"tcy;\":0x442, \"tdot;\":0x20db,\r\n  \"telrec;\":0x2315, \"tfr;\":[0xd835,0xdd31],\r\n  \"there4;\":0x2234, \"therefore;\":0x2234,\r\n  \"theta;\":0x3b8, \"thetasym;\":0x3d1,\r\n  \"thetav;\":0x3d1, \"thickapprox;\":0x2248,\r\n  \"thicksim;\":0x223c, \"thinsp;\":0x2009,\r\n  \"thkap;\":0x2248, \"thksim;\":0x223c,\r\n  \"thorn\":0xfe, \"thorn;\":0xfe,\r\n  \"tilde;\":0x2dc, \"times\":0xd7,\r\n  \"times;\":0xd7, \"timesb;\":0x22a0,\r\n  \"timesbar;\":0x2a31, \"timesd;\":0x2a30,\r\n  \"tint;\":0x222d, \"toea;\":0x2928,\r\n  \"top;\":0x22a4, \"topbot;\":0x2336,\r\n  \"topcir;\":0x2af1, \"topf;\":[0xd835,0xdd65],\r\n  \"topfork;\":0x2ada, \"tosa;\":0x2929,\r\n  \"tprime;\":0x2034, \"trade;\":0x2122,\r\n  \"triangle;\":0x25b5, \"triangledown;\":0x25bf,\r\n  \"triangleleft;\":0x25c3, \"trianglelefteq;\":0x22b4,\r\n  \"triangleq;\":0x225c, \"triangleright;\":0x25b9,\r\n  \"trianglerighteq;\":0x22b5, \"tridot;\":0x25ec,\r\n  \"trie;\":0x225c, \"triminus;\":0x2a3a,\r\n  \"triplus;\":0x2a39, \"trisb;\":0x29cd,\r\n  \"tritime;\":0x2a3b, \"trpezium;\":0x23e2,\r\n  \"tscr;\":[0xd835,0xdcc9], \"tscy;\":0x446,\r\n  \"tshcy;\":0x45b, \"tstrok;\":0x167,\r\n  \"twixt;\":0x226c, \"twoheadleftarrow;\":0x219e,\r\n  \"twoheadrightarrow;\":0x21a0, \"uArr;\":0x21d1,\r\n  \"uHar;\":0x2963, \"uacute\":0xfa,\r\n  \"uacute;\":0xfa, \"uarr;\":0x2191,\r\n  \"ubrcy;\":0x45e, \"ubreve;\":0x16d,\r\n  \"ucirc\":0xfb, \"ucirc;\":0xfb,\r\n  \"ucy;\":0x443, \"udarr;\":0x21c5,\r\n  \"udblac;\":0x171, \"udhar;\":0x296e,\r\n  \"ufisht;\":0x297e, \"ufr;\":[0xd835,0xdd32],\r\n  \"ugrave\":0xf9, \"ugrave;\":0xf9,\r\n  \"uharl;\":0x21bf, \"uharr;\":0x21be,\r\n  \"uhblk;\":0x2580, \"ulcorn;\":0x231c,\r\n  \"ulcorner;\":0x231c, \"ulcrop;\":0x230f,\r\n  \"ultri;\":0x25f8, \"umacr;\":0x16b,\r\n  \"uml\":0xa8, \"uml;\":0xa8,\r\n  \"uogon;\":0x173, \"uopf;\":[0xd835,0xdd66],\r\n  \"uparrow;\":0x2191, \"updownarrow;\":0x2195,\r\n  \"upharpoonleft;\":0x21bf, \"upharpoonright;\":0x21be,\r\n  \"uplus;\":0x228e, \"upsi;\":0x3c5,\r\n  \"upsih;\":0x3d2, \"upsilon;\":0x3c5,\r\n  \"upuparrows;\":0x21c8, \"urcorn;\":0x231d,\r\n  \"urcorner;\":0x231d, \"urcrop;\":0x230e,\r\n  \"uring;\":0x16f, \"urtri;\":0x25f9,\r\n  \"uscr;\":[0xd835,0xdcca], \"utdot;\":0x22f0,\r\n  \"utilde;\":0x169, \"utri;\":0x25b5,\r\n  \"utrif;\":0x25b4, \"uuarr;\":0x21c8,\r\n  \"uuml\":0xfc, \"uuml;\":0xfc,\r\n  \"uwangle;\":0x29a7, \"vArr;\":0x21d5,\r\n  \"vBar;\":0x2ae8, \"vBarv;\":0x2ae9,\r\n  \"vDash;\":0x22a8, \"vangrt;\":0x299c,\r\n  \"varepsilon;\":0x3f5, \"varkappa;\":0x3f0,\r\n  \"varnothing;\":0x2205, \"varphi;\":0x3d5,\r\n  \"varpi;\":0x3d6, \"varpropto;\":0x221d,\r\n  \"varr;\":0x2195, \"varrho;\":0x3f1,\r\n  \"varsigma;\":0x3c2, \"varsubsetneq;\":[0x228a,0xfe00],\r\n  \"varsubsetneqq;\":[0x2acb,0xfe00], \"varsupsetneq;\":[0x228b,0xfe00],\r\n  \"varsupsetneqq;\":[0x2acc,0xfe00], \"vartheta;\":0x3d1,\r\n  \"vartriangleleft;\":0x22b2, \"vartriangleright;\":0x22b3,\r\n  \"vcy;\":0x432, \"vdash;\":0x22a2,\r\n  \"vee;\":0x2228, \"veebar;\":0x22bb,\r\n  \"veeeq;\":0x225a, \"vellip;\":0x22ee,\r\n  \"verbar;\":0x7c, \"vert;\":0x7c,\r\n  \"vfr;\":[0xd835,0xdd33], \"vltri;\":0x22b2,\r\n  \"vnsub;\":[0x2282,0x20d2], \"vnsup;\":[0x2283,0x20d2],\r\n  \"vopf;\":[0xd835,0xdd67], \"vprop;\":0x221d,\r\n  \"vrtri;\":0x22b3, \"vscr;\":[0xd835,0xdccb],\r\n  \"vsubnE;\":[0x2acb,0xfe00], \"vsubne;\":[0x228a,0xfe00],\r\n  \"vsupnE;\":[0x2acc,0xfe00], \"vsupne;\":[0x228b,0xfe00],\r\n  \"vzigzag;\":0x299a, \"wcirc;\":0x175,\r\n  \"wedbar;\":0x2a5f, \"wedge;\":0x2227,\r\n  \"wedgeq;\":0x2259, \"weierp;\":0x2118,\r\n  \"wfr;\":[0xd835,0xdd34], \"wopf;\":[0xd835,0xdd68],\r\n  \"wp;\":0x2118, \"wr;\":0x2240,\r\n  \"wreath;\":0x2240, \"wscr;\":[0xd835,0xdccc],\r\n  \"xcap;\":0x22c2, \"xcirc;\":0x25ef,\r\n  \"xcup;\":0x22c3, \"xdtri;\":0x25bd,\r\n  \"xfr;\":[0xd835,0xdd35], \"xhArr;\":0x27fa,\r\n  \"xharr;\":0x27f7, \"xi;\":0x3be,\r\n  \"xlArr;\":0x27f8, \"xlarr;\":0x27f5,\r\n  \"xmap;\":0x27fc, \"xnis;\":0x22fb,\r\n  \"xodot;\":0x2a00, \"xopf;\":[0xd835,0xdd69],\r\n  \"xoplus;\":0x2a01, \"xotime;\":0x2a02,\r\n  \"xrArr;\":0x27f9, \"xrarr;\":0x27f6,\r\n  \"xscr;\":[0xd835,0xdccd], \"xsqcup;\":0x2a06,\r\n  \"xuplus;\":0x2a04, \"xutri;\":0x25b3,\r\n  \"xvee;\":0x22c1, \"xwedge;\":0x22c0,\r\n  \"yacute\":0xfd, \"yacute;\":0xfd,\r\n  \"yacy;\":0x44f, \"ycirc;\":0x177,\r\n  \"ycy;\":0x44b, \"yen\":0xa5,\r\n  \"yen;\":0xa5, \"yfr;\":[0xd835,0xdd36],\r\n  \"yicy;\":0x457, \"yopf;\":[0xd835,0xdd6a],\r\n  \"yscr;\":[0xd835,0xdcce], \"yucy;\":0x44e,\r\n  \"yuml\":0xff, \"yuml;\":0xff,\r\n  \"zacute;\":0x17a, \"zcaron;\":0x17e,\r\n  \"zcy;\":0x437, \"zdot;\":0x17c,\r\n  \"zeetrf;\":0x2128, \"zeta;\":0x3b6,\r\n  \"zfr;\":[0xd835,0xdd37], \"zhcy;\":0x436,\r\n  \"zigrarr;\":0x21dd, \"zopf;\":[0xd835,0xdd6b],\r\n  \"zscr;\":[0xd835,0xdccf], \"zwj;\":0x200d,\r\n  \"zwnj;\":0x200c,\r\n};\r\n/*\r\n * This regexp is generated with test/tools/update-entities.js\r\n * It will always match at least one character -- but note that there\r\n * are no entities whose names are a single character long.\r\n */\r\nvar NAMEDCHARREF = /(A(?:Elig;?|MP;?|acute;?|breve;|c(?:irc;?|y;)|fr;|grave;?|lpha;|macr;|nd;|o(?:gon;|pf;)|pplyFunction;|ring;?|s(?:cr;|sign;)|tilde;?|uml;?)|B(?:a(?:ckslash;|r(?:v;|wed;))|cy;|e(?:cause;|rnoullis;|ta;)|fr;|opf;|reve;|scr;|umpeq;)|C(?:Hcy;|OPY;?|a(?:cute;|p(?:;|italDifferentialD;)|yleys;)|c(?:aron;|edil;?|irc;|onint;)|dot;|e(?:dilla;|nterDot;)|fr;|hi;|ircle(?:Dot;|Minus;|Plus;|Times;)|lo(?:ckwiseContourIntegral;|seCurly(?:DoubleQuote;|Quote;))|o(?:lon(?:;|e;)|n(?:gruent;|int;|tourIntegral;)|p(?:f;|roduct;)|unterClockwiseContourIntegral;)|ross;|scr;|up(?:;|Cap;))|D(?:D(?:;|otrahd;)|Jcy;|Scy;|Zcy;|a(?:gger;|rr;|shv;)|c(?:aron;|y;)|el(?:;|ta;)|fr;|i(?:a(?:critical(?:Acute;|Do(?:t;|ubleAcute;)|Grave;|Tilde;)|mond;)|fferentialD;)|o(?:pf;|t(?:;|Dot;|Equal;)|uble(?:ContourIntegral;|Do(?:t;|wnArrow;)|L(?:eft(?:Arrow;|RightArrow;|Tee;)|ong(?:Left(?:Arrow;|RightArrow;)|RightArrow;))|Right(?:Arrow;|Tee;)|Up(?:Arrow;|DownArrow;)|VerticalBar;)|wn(?:Arrow(?:;|Bar;|UpArrow;)|Breve;|Left(?:RightVector;|TeeVector;|Vector(?:;|Bar;))|Right(?:TeeVector;|Vector(?:;|Bar;))|Tee(?:;|Arrow;)|arrow;))|s(?:cr;|trok;))|E(?:NG;|TH;?|acute;?|c(?:aron;|irc;?|y;)|dot;|fr;|grave;?|lement;|m(?:acr;|pty(?:SmallSquare;|VerySmallSquare;))|o(?:gon;|pf;)|psilon;|qu(?:al(?:;|Tilde;)|ilibrium;)|s(?:cr;|im;)|ta;|uml;?|x(?:ists;|ponentialE;))|F(?:cy;|fr;|illed(?:SmallSquare;|VerySmallSquare;)|o(?:pf;|rAll;|uriertrf;)|scr;)|G(?:Jcy;|T;?|amma(?:;|d;)|breve;|c(?:edil;|irc;|y;)|dot;|fr;|g;|opf;|reater(?:Equal(?:;|Less;)|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;)|scr;|t;)|H(?:ARDcy;|a(?:cek;|t;)|circ;|fr;|ilbertSpace;|o(?:pf;|rizontalLine;)|s(?:cr;|trok;)|ump(?:DownHump;|Equal;))|I(?:Ecy;|Jlig;|Ocy;|acute;?|c(?:irc;?|y;)|dot;|fr;|grave;?|m(?:;|a(?:cr;|ginaryI;)|plies;)|n(?:t(?:;|e(?:gral;|rsection;))|visible(?:Comma;|Times;))|o(?:gon;|pf;|ta;)|scr;|tilde;|u(?:kcy;|ml;?))|J(?:c(?:irc;|y;)|fr;|opf;|s(?:cr;|ercy;)|ukcy;)|K(?:Hcy;|Jcy;|appa;|c(?:edil;|y;)|fr;|opf;|scr;)|L(?:Jcy;|T;?|a(?:cute;|mbda;|ng;|placetrf;|rr;)|c(?:aron;|edil;|y;)|e(?:ft(?:A(?:ngleBracket;|rrow(?:;|Bar;|RightArrow;))|Ceiling;|Do(?:ubleBracket;|wn(?:TeeVector;|Vector(?:;|Bar;)))|Floor;|Right(?:Arrow;|Vector;)|T(?:ee(?:;|Arrow;|Vector;)|riangle(?:;|Bar;|Equal;))|Up(?:DownVector;|TeeVector;|Vector(?:;|Bar;))|Vector(?:;|Bar;)|arrow;|rightarrow;)|ss(?:EqualGreater;|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;))|fr;|l(?:;|eftarrow;)|midot;|o(?:ng(?:Left(?:Arrow;|RightArrow;)|RightArrow;|left(?:arrow;|rightarrow;)|rightarrow;)|pf;|wer(?:LeftArrow;|RightArrow;))|s(?:cr;|h;|trok;)|t;)|M(?:ap;|cy;|e(?:diumSpace;|llintrf;)|fr;|inusPlus;|opf;|scr;|u;)|N(?:Jcy;|acute;|c(?:aron;|edil;|y;)|e(?:gative(?:MediumSpace;|Thi(?:ckSpace;|nSpace;)|VeryThinSpace;)|sted(?:GreaterGreater;|LessLess;)|wLine;)|fr;|o(?:Break;|nBreakingSpace;|pf;|t(?:;|C(?:ongruent;|upCap;)|DoubleVerticalBar;|E(?:lement;|qual(?:;|Tilde;)|xists;)|Greater(?:;|Equal;|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;)|Hump(?:DownHump;|Equal;)|Le(?:ftTriangle(?:;|Bar;|Equal;)|ss(?:;|Equal;|Greater;|Less;|SlantEqual;|Tilde;))|Nested(?:GreaterGreater;|LessLess;)|Precedes(?:;|Equal;|SlantEqual;)|R(?:everseElement;|ightTriangle(?:;|Bar;|Equal;))|S(?:quareSu(?:bset(?:;|Equal;)|perset(?:;|Equal;))|u(?:bset(?:;|Equal;)|cceeds(?:;|Equal;|SlantEqual;|Tilde;)|perset(?:;|Equal;)))|Tilde(?:;|Equal;|FullEqual;|Tilde;)|VerticalBar;))|scr;|tilde;?|u;)|O(?:Elig;|acute;?|c(?:irc;?|y;)|dblac;|fr;|grave;?|m(?:acr;|ega;|icron;)|opf;|penCurly(?:DoubleQuote;|Quote;)|r;|s(?:cr;|lash;?)|ti(?:lde;?|mes;)|uml;?|ver(?:B(?:ar;|rac(?:e;|ket;))|Parenthesis;))|P(?:artialD;|cy;|fr;|hi;|i;|lusMinus;|o(?:incareplane;|pf;)|r(?:;|ecedes(?:;|Equal;|SlantEqual;|Tilde;)|ime;|o(?:duct;|portion(?:;|al;)))|s(?:cr;|i;))|Q(?:UOT;?|fr;|opf;|scr;)|R(?:Barr;|EG;?|a(?:cute;|ng;|rr(?:;|tl;))|c(?:aron;|edil;|y;)|e(?:;|verse(?:E(?:lement;|quilibrium;)|UpEquilibrium;))|fr;|ho;|ight(?:A(?:ngleBracket;|rrow(?:;|Bar;|LeftArrow;))|Ceiling;|Do(?:ubleBracket;|wn(?:TeeVector;|Vector(?:;|Bar;)))|Floor;|T(?:ee(?:;|Arrow;|Vector;)|riangle(?:;|Bar;|Equal;))|Up(?:DownVector;|TeeVector;|Vector(?:;|Bar;))|Vector(?:;|Bar;)|arrow;)|o(?:pf;|undImplies;)|rightarrow;|s(?:cr;|h;)|uleDelayed;)|S(?:H(?:CHcy;|cy;)|OFTcy;|acute;|c(?:;|aron;|edil;|irc;|y;)|fr;|hort(?:DownArrow;|LeftArrow;|RightArrow;|UpArrow;)|igma;|mallCircle;|opf;|q(?:rt;|uare(?:;|Intersection;|Su(?:bset(?:;|Equal;)|perset(?:;|Equal;))|Union;))|scr;|tar;|u(?:b(?:;|set(?:;|Equal;))|c(?:ceeds(?:;|Equal;|SlantEqual;|Tilde;)|hThat;)|m;|p(?:;|erset(?:;|Equal;)|set;)))|T(?:HORN;?|RADE;|S(?:Hcy;|cy;)|a(?:b;|u;)|c(?:aron;|edil;|y;)|fr;|h(?:e(?:refore;|ta;)|i(?:ckSpace;|nSpace;))|ilde(?:;|Equal;|FullEqual;|Tilde;)|opf;|ripleDot;|s(?:cr;|trok;))|U(?:a(?:cute;?|rr(?:;|ocir;))|br(?:cy;|eve;)|c(?:irc;?|y;)|dblac;|fr;|grave;?|macr;|n(?:der(?:B(?:ar;|rac(?:e;|ket;))|Parenthesis;)|ion(?:;|Plus;))|o(?:gon;|pf;)|p(?:Arrow(?:;|Bar;|DownArrow;)|DownArrow;|Equilibrium;|Tee(?:;|Arrow;)|arrow;|downarrow;|per(?:LeftArrow;|RightArrow;)|si(?:;|lon;))|ring;|scr;|tilde;|uml;?)|V(?:Dash;|bar;|cy;|dash(?:;|l;)|e(?:e;|r(?:bar;|t(?:;|ical(?:Bar;|Line;|Separator;|Tilde;))|yThinSpace;))|fr;|opf;|scr;|vdash;)|W(?:circ;|edge;|fr;|opf;|scr;)|X(?:fr;|i;|opf;|scr;)|Y(?:Acy;|Icy;|Ucy;|acute;?|c(?:irc;|y;)|fr;|opf;|scr;|uml;)|Z(?:Hcy;|acute;|c(?:aron;|y;)|dot;|e(?:roWidthSpace;|ta;)|fr;|opf;|scr;)|a(?:acute;?|breve;|c(?:;|E;|d;|irc;?|ute;?|y;)|elig;?|f(?:;|r;)|grave;?|l(?:e(?:fsym;|ph;)|pha;)|m(?:a(?:cr;|lg;)|p;?)|n(?:d(?:;|and;|d;|slope;|v;)|g(?:;|e;|le;|msd(?:;|a(?:a;|b;|c;|d;|e;|f;|g;|h;))|rt(?:;|vb(?:;|d;))|s(?:ph;|t;)|zarr;))|o(?:gon;|pf;)|p(?:;|E;|acir;|e;|id;|os;|prox(?:;|eq;))|ring;?|s(?:cr;|t;|ymp(?:;|eq;))|tilde;?|uml;?|w(?:conint;|int;))|b(?:Not;|a(?:ck(?:cong;|epsilon;|prime;|sim(?:;|eq;))|r(?:vee;|wed(?:;|ge;)))|brk(?:;|tbrk;)|c(?:ong;|y;)|dquo;|e(?:caus(?:;|e;)|mptyv;|psi;|rnou;|t(?:a;|h;|ween;))|fr;|ig(?:c(?:ap;|irc;|up;)|o(?:dot;|plus;|times;)|s(?:qcup;|tar;)|triangle(?:down;|up;)|uplus;|vee;|wedge;)|karow;|l(?:a(?:ck(?:lozenge;|square;|triangle(?:;|down;|left;|right;))|nk;)|k(?:1(?:2;|4;)|34;)|ock;)|n(?:e(?:;|quiv;)|ot;)|o(?:pf;|t(?:;|tom;)|wtie;|x(?:D(?:L;|R;|l;|r;)|H(?:;|D;|U;|d;|u;)|U(?:L;|R;|l;|r;)|V(?:;|H;|L;|R;|h;|l;|r;)|box;|d(?:L;|R;|l;|r;)|h(?:;|D;|U;|d;|u;)|minus;|plus;|times;|u(?:L;|R;|l;|r;)|v(?:;|H;|L;|R;|h;|l;|r;)))|prime;|r(?:eve;|vbar;?)|s(?:cr;|emi;|im(?:;|e;)|ol(?:;|b;|hsub;))|u(?:ll(?:;|et;)|mp(?:;|E;|e(?:;|q;))))|c(?:a(?:cute;|p(?:;|and;|brcup;|c(?:ap;|up;)|dot;|s;)|r(?:et;|on;))|c(?:a(?:ps;|ron;)|edil;?|irc;|ups(?:;|sm;))|dot;|e(?:dil;?|mptyv;|nt(?:;|erdot;|))|fr;|h(?:cy;|eck(?:;|mark;)|i;)|ir(?:;|E;|c(?:;|eq;|le(?:arrow(?:left;|right;)|d(?:R;|S;|ast;|circ;|dash;)))|e;|fnint;|mid;|scir;)|lubs(?:;|uit;)|o(?:lon(?:;|e(?:;|q;))|m(?:ma(?:;|t;)|p(?:;|fn;|le(?:ment;|xes;)))|n(?:g(?:;|dot;)|int;)|p(?:f;|rod;|y(?:;|sr;|)))|r(?:arr;|oss;)|s(?:cr;|u(?:b(?:;|e;)|p(?:;|e;)))|tdot;|u(?:darr(?:l;|r;)|e(?:pr;|sc;)|larr(?:;|p;)|p(?:;|brcap;|c(?:ap;|up;)|dot;|or;|s;)|r(?:arr(?:;|m;)|ly(?:eq(?:prec;|succ;)|vee;|wedge;)|ren;?|vearrow(?:left;|right;))|vee;|wed;)|w(?:conint;|int;)|ylcty;)|d(?:Arr;|Har;|a(?:gger;|leth;|rr;|sh(?:;|v;))|b(?:karow;|lac;)|c(?:aron;|y;)|d(?:;|a(?:gger;|rr;)|otseq;)|e(?:g;?|lta;|mptyv;)|f(?:isht;|r;)|har(?:l;|r;)|i(?:am(?:;|ond(?:;|suit;)|s;)|e;|gamma;|sin;|v(?:;|ide(?:;|ontimes;|)|onx;))|jcy;|lc(?:orn;|rop;)|o(?:llar;|pf;|t(?:;|eq(?:;|dot;)|minus;|plus;|square;)|ublebarwedge;|wn(?:arrow;|downarrows;|harpoon(?:left;|right;)))|r(?:bkarow;|c(?:orn;|rop;))|s(?:c(?:r;|y;)|ol;|trok;)|t(?:dot;|ri(?:;|f;))|u(?:arr;|har;)|wangle;|z(?:cy;|igrarr;))|e(?:D(?:Dot;|ot;)|a(?:cute;?|ster;)|c(?:aron;|ir(?:;|c;?)|olon;|y;)|dot;|e;|f(?:Dot;|r;)|g(?:;|rave;?|s(?:;|dot;))|l(?:;|inters;|l;|s(?:;|dot;))|m(?:acr;|pty(?:;|set;|v;)|sp(?:1(?:3;|4;)|;))|n(?:g;|sp;)|o(?:gon;|pf;)|p(?:ar(?:;|sl;)|lus;|si(?:;|lon;|v;))|q(?:c(?:irc;|olon;)|s(?:im;|lant(?:gtr;|less;))|u(?:als;|est;|iv(?:;|DD;))|vparsl;)|r(?:Dot;|arr;)|s(?:cr;|dot;|im;)|t(?:a;|h;?)|u(?:ml;?|ro;)|x(?:cl;|ist;|p(?:ectation;|onentiale;)))|f(?:allingdotseq;|cy;|emale;|f(?:ilig;|l(?:ig;|lig;)|r;)|ilig;|jlig;|l(?:at;|lig;|tns;)|nof;|o(?:pf;|r(?:all;|k(?:;|v;)))|partint;|r(?:a(?:c(?:1(?:2;?|3;|4;?|5;|6;|8;)|2(?:3;|5;)|3(?:4;?|5;|8;)|45;|5(?:6;|8;)|78;)|sl;)|own;)|scr;)|g(?:E(?:;|l;)|a(?:cute;|mma(?:;|d;)|p;)|breve;|c(?:irc;|y;)|dot;|e(?:;|l;|q(?:;|q;|slant;)|s(?:;|cc;|dot(?:;|o(?:;|l;))|l(?:;|es;)))|fr;|g(?:;|g;)|imel;|jcy;|l(?:;|E;|a;|j;)|n(?:E;|ap(?:;|prox;)|e(?:;|q(?:;|q;))|sim;)|opf;|rave;|s(?:cr;|im(?:;|e;|l;))|t(?:;|c(?:c;|ir;)|dot;|lPar;|quest;|r(?:a(?:pprox;|rr;)|dot;|eq(?:less;|qless;)|less;|sim;)|)|v(?:ertneqq;|nE;))|h(?:Arr;|a(?:irsp;|lf;|milt;|r(?:dcy;|r(?:;|cir;|w;)))|bar;|circ;|e(?:arts(?:;|uit;)|llip;|rcon;)|fr;|ks(?:earow;|warow;)|o(?:arr;|mtht;|ok(?:leftarrow;|rightarrow;)|pf;|rbar;)|s(?:cr;|lash;|trok;)|y(?:bull;|phen;))|i(?:acute;?|c(?:;|irc;?|y;)|e(?:cy;|xcl;?)|f(?:f;|r;)|grave;?|i(?:;|i(?:int;|nt;)|nfin;|ota;)|jlig;|m(?:a(?:cr;|g(?:e;|line;|part;)|th;)|of;|ped;)|n(?:;|care;|fin(?:;|tie;)|odot;|t(?:;|cal;|e(?:gers;|rcal;)|larhk;|prod;))|o(?:cy;|gon;|pf;|ta;)|prod;|quest;?|s(?:cr;|in(?:;|E;|dot;|s(?:;|v;)|v;))|t(?:;|ilde;)|u(?:kcy;|ml;?))|j(?:c(?:irc;|y;)|fr;|math;|opf;|s(?:cr;|ercy;)|ukcy;)|k(?:appa(?:;|v;)|c(?:edil;|y;)|fr;|green;|hcy;|jcy;|opf;|scr;)|l(?:A(?:arr;|rr;|tail;)|Barr;|E(?:;|g;)|Har;|a(?:cute;|emptyv;|gran;|mbda;|ng(?:;|d;|le;)|p;|quo;?|rr(?:;|b(?:;|fs;)|fs;|hk;|lp;|pl;|sim;|tl;)|t(?:;|ail;|e(?:;|s;)))|b(?:arr;|brk;|r(?:ac(?:e;|k;)|k(?:e;|sl(?:d;|u;))))|c(?:aron;|e(?:dil;|il;)|ub;|y;)|d(?:ca;|quo(?:;|r;)|r(?:dhar;|ushar;)|sh;)|e(?:;|ft(?:arrow(?:;|tail;)|harpoon(?:down;|up;)|leftarrows;|right(?:arrow(?:;|s;)|harpoons;|squigarrow;)|threetimes;)|g;|q(?:;|q;|slant;)|s(?:;|cc;|dot(?:;|o(?:;|r;))|g(?:;|es;)|s(?:approx;|dot;|eq(?:gtr;|qgtr;)|gtr;|sim;)))|f(?:isht;|loor;|r;)|g(?:;|E;)|h(?:ar(?:d;|u(?:;|l;))|blk;)|jcy;|l(?:;|arr;|corner;|hard;|tri;)|m(?:idot;|oust(?:;|ache;))|n(?:E;|ap(?:;|prox;)|e(?:;|q(?:;|q;))|sim;)|o(?:a(?:ng;|rr;)|brk;|ng(?:left(?:arrow;|rightarrow;)|mapsto;|rightarrow;)|oparrow(?:left;|right;)|p(?:ar;|f;|lus;)|times;|w(?:ast;|bar;)|z(?:;|enge;|f;))|par(?:;|lt;)|r(?:arr;|corner;|har(?:;|d;)|m;|tri;)|s(?:aquo;|cr;|h;|im(?:;|e;|g;)|q(?:b;|uo(?:;|r;))|trok;)|t(?:;|c(?:c;|ir;)|dot;|hree;|imes;|larr;|quest;|r(?:Par;|i(?:;|e;|f;))|)|ur(?:dshar;|uhar;)|v(?:ertneqq;|nE;))|m(?:DDot;|a(?:cr;?|l(?:e;|t(?:;|ese;))|p(?:;|sto(?:;|down;|left;|up;))|rker;)|c(?:omma;|y;)|dash;|easuredangle;|fr;|ho;|i(?:cro;?|d(?:;|ast;|cir;|dot;?)|nus(?:;|b;|d(?:;|u;)))|l(?:cp;|dr;)|nplus;|o(?:dels;|pf;)|p;|s(?:cr;|tpos;)|u(?:;|ltimap;|map;))|n(?:G(?:g;|t(?:;|v;))|L(?:eft(?:arrow;|rightarrow;)|l;|t(?:;|v;))|Rightarrow;|V(?:Dash;|dash;)|a(?:bla;|cute;|ng;|p(?:;|E;|id;|os;|prox;)|tur(?:;|al(?:;|s;)))|b(?:sp;?|ump(?:;|e;))|c(?:a(?:p;|ron;)|edil;|ong(?:;|dot;)|up;|y;)|dash;|e(?:;|Arr;|ar(?:hk;|r(?:;|ow;))|dot;|quiv;|s(?:ear;|im;)|xist(?:;|s;))|fr;|g(?:E;|e(?:;|q(?:;|q;|slant;)|s;)|sim;|t(?:;|r;))|h(?:Arr;|arr;|par;)|i(?:;|s(?:;|d;)|v;)|jcy;|l(?:Arr;|E;|arr;|dr;|e(?:;|ft(?:arrow;|rightarrow;)|q(?:;|q;|slant;)|s(?:;|s;))|sim;|t(?:;|ri(?:;|e;)))|mid;|o(?:pf;|t(?:;|in(?:;|E;|dot;|v(?:a;|b;|c;))|ni(?:;|v(?:a;|b;|c;))|))|p(?:ar(?:;|allel;|sl;|t;)|olint;|r(?:;|cue;|e(?:;|c(?:;|eq;))))|r(?:Arr;|arr(?:;|c;|w;)|ightarrow;|tri(?:;|e;))|s(?:c(?:;|cue;|e;|r;)|hort(?:mid;|parallel;)|im(?:;|e(?:;|q;))|mid;|par;|qsu(?:be;|pe;)|u(?:b(?:;|E;|e;|set(?:;|eq(?:;|q;)))|cc(?:;|eq;)|p(?:;|E;|e;|set(?:;|eq(?:;|q;)))))|t(?:gl;|ilde;?|lg;|riangle(?:left(?:;|eq;)|right(?:;|eq;)))|u(?:;|m(?:;|ero;|sp;))|v(?:Dash;|Harr;|ap;|dash;|g(?:e;|t;)|infin;|l(?:Arr;|e;|t(?:;|rie;))|r(?:Arr;|trie;)|sim;)|w(?:Arr;|ar(?:hk;|r(?:;|ow;))|near;))|o(?:S;|a(?:cute;?|st;)|c(?:ir(?:;|c;?)|y;)|d(?:ash;|blac;|iv;|ot;|sold;)|elig;|f(?:cir;|r;)|g(?:on;|rave;?|t;)|h(?:bar;|m;)|int;|l(?:arr;|c(?:ir;|ross;)|ine;|t;)|m(?:acr;|ega;|i(?:cron;|d;|nus;))|opf;|p(?:ar;|erp;|lus;)|r(?:;|arr;|d(?:;|er(?:;|of;)|f;?|m;?)|igof;|or;|slope;|v;)|s(?:cr;|lash;?|ol;)|ti(?:lde;?|mes(?:;|as;))|uml;?|vbar;)|p(?:ar(?:;|a(?:;|llel;|)|s(?:im;|l;)|t;)|cy;|er(?:cnt;|iod;|mil;|p;|tenk;)|fr;|h(?:i(?:;|v;)|mmat;|one;)|i(?:;|tchfork;|v;)|l(?:an(?:ck(?:;|h;)|kv;)|us(?:;|acir;|b;|cir;|d(?:o;|u;)|e;|mn;?|sim;|two;))|m;|o(?:intint;|pf;|und;?)|r(?:;|E;|ap;|cue;|e(?:;|c(?:;|approx;|curlyeq;|eq;|n(?:approx;|eqq;|sim;)|sim;))|ime(?:;|s;)|n(?:E;|ap;|sim;)|o(?:d;|f(?:alar;|line;|surf;)|p(?:;|to;))|sim;|urel;)|s(?:cr;|i;)|uncsp;)|q(?:fr;|int;|opf;|prime;|scr;|u(?:at(?:ernions;|int;)|est(?:;|eq;)|ot;?))|r(?:A(?:arr;|rr;|tail;)|Barr;|Har;|a(?:c(?:e;|ute;)|dic;|emptyv;|ng(?:;|d;|e;|le;)|quo;?|rr(?:;|ap;|b(?:;|fs;)|c;|fs;|hk;|lp;|pl;|sim;|tl;|w;)|t(?:ail;|io(?:;|nals;)))|b(?:arr;|brk;|r(?:ac(?:e;|k;)|k(?:e;|sl(?:d;|u;))))|c(?:aron;|e(?:dil;|il;)|ub;|y;)|d(?:ca;|ldhar;|quo(?:;|r;)|sh;)|e(?:al(?:;|ine;|part;|s;)|ct;|g;?)|f(?:isht;|loor;|r;)|h(?:ar(?:d;|u(?:;|l;))|o(?:;|v;))|i(?:ght(?:arrow(?:;|tail;)|harpoon(?:down;|up;)|left(?:arrows;|harpoons;)|rightarrows;|squigarrow;|threetimes;)|ng;|singdotseq;)|l(?:arr;|har;|m;)|moust(?:;|ache;)|nmid;|o(?:a(?:ng;|rr;)|brk;|p(?:ar;|f;|lus;)|times;)|p(?:ar(?:;|gt;)|polint;)|rarr;|s(?:aquo;|cr;|h;|q(?:b;|uo(?:;|r;)))|t(?:hree;|imes;|ri(?:;|e;|f;|ltri;))|uluhar;|x;)|s(?:acute;|bquo;|c(?:;|E;|a(?:p;|ron;)|cue;|e(?:;|dil;)|irc;|n(?:E;|ap;|sim;)|polint;|sim;|y;)|dot(?:;|b;|e;)|e(?:Arr;|ar(?:hk;|r(?:;|ow;))|ct;?|mi;|swar;|tm(?:inus;|n;)|xt;)|fr(?:;|own;)|h(?:arp;|c(?:hcy;|y;)|ort(?:mid;|parallel;)|y;?)|i(?:gma(?:;|f;|v;)|m(?:;|dot;|e(?:;|q;)|g(?:;|E;)|l(?:;|E;)|ne;|plus;|rarr;))|larr;|m(?:a(?:llsetminus;|shp;)|eparsl;|i(?:d;|le;)|t(?:;|e(?:;|s;)))|o(?:ftcy;|l(?:;|b(?:;|ar;))|pf;)|pa(?:des(?:;|uit;)|r;)|q(?:c(?:ap(?:;|s;)|up(?:;|s;))|su(?:b(?:;|e;|set(?:;|eq;))|p(?:;|e;|set(?:;|eq;)))|u(?:;|ar(?:e;|f;)|f;))|rarr;|s(?:cr;|etmn;|mile;|tarf;)|t(?:ar(?:;|f;)|r(?:aight(?:epsilon;|phi;)|ns;))|u(?:b(?:;|E;|dot;|e(?:;|dot;)|mult;|n(?:E;|e;)|plus;|rarr;|s(?:et(?:;|eq(?:;|q;)|neq(?:;|q;))|im;|u(?:b;|p;)))|cc(?:;|approx;|curlyeq;|eq;|n(?:approx;|eqq;|sim;)|sim;)|m;|ng;|p(?:1;?|2;?|3;?|;|E;|d(?:ot;|sub;)|e(?:;|dot;)|hs(?:ol;|ub;)|larr;|mult;|n(?:E;|e;)|plus;|s(?:et(?:;|eq(?:;|q;)|neq(?:;|q;))|im;|u(?:b;|p;))))|w(?:Arr;|ar(?:hk;|r(?:;|ow;))|nwar;)|zlig;?)|t(?:a(?:rget;|u;)|brk;|c(?:aron;|edil;|y;)|dot;|elrec;|fr;|h(?:e(?:re(?:4;|fore;)|ta(?:;|sym;|v;))|i(?:ck(?:approx;|sim;)|nsp;)|k(?:ap;|sim;)|orn;?)|i(?:lde;|mes(?:;|b(?:;|ar;)|d;|)|nt;)|o(?:ea;|p(?:;|bot;|cir;|f(?:;|ork;))|sa;)|prime;|r(?:ade;|i(?:angle(?:;|down;|left(?:;|eq;)|q;|right(?:;|eq;))|dot;|e;|minus;|plus;|sb;|time;)|pezium;)|s(?:c(?:r;|y;)|hcy;|trok;)|w(?:ixt;|ohead(?:leftarrow;|rightarrow;)))|u(?:Arr;|Har;|a(?:cute;?|rr;)|br(?:cy;|eve;)|c(?:irc;?|y;)|d(?:arr;|blac;|har;)|f(?:isht;|r;)|grave;?|h(?:ar(?:l;|r;)|blk;)|l(?:c(?:orn(?:;|er;)|rop;)|tri;)|m(?:acr;|l;?)|o(?:gon;|pf;)|p(?:arrow;|downarrow;|harpoon(?:left;|right;)|lus;|si(?:;|h;|lon;)|uparrows;)|r(?:c(?:orn(?:;|er;)|rop;)|ing;|tri;)|scr;|t(?:dot;|ilde;|ri(?:;|f;))|u(?:arr;|ml;?)|wangle;)|v(?:Arr;|Bar(?:;|v;)|Dash;|a(?:ngrt;|r(?:epsilon;|kappa;|nothing;|p(?:hi;|i;|ropto;)|r(?:;|ho;)|s(?:igma;|u(?:bsetneq(?:;|q;)|psetneq(?:;|q;)))|t(?:heta;|riangle(?:left;|right;))))|cy;|dash;|e(?:e(?:;|bar;|eq;)|llip;|r(?:bar;|t;))|fr;|ltri;|nsu(?:b;|p;)|opf;|prop;|rtri;|s(?:cr;|u(?:bn(?:E;|e;)|pn(?:E;|e;)))|zigzag;)|w(?:circ;|e(?:d(?:bar;|ge(?:;|q;))|ierp;)|fr;|opf;|p;|r(?:;|eath;)|scr;)|x(?:c(?:ap;|irc;|up;)|dtri;|fr;|h(?:Arr;|arr;)|i;|l(?:Arr;|arr;)|map;|nis;|o(?:dot;|p(?:f;|lus;)|time;)|r(?:Arr;|arr;)|s(?:cr;|qcup;)|u(?:plus;|tri;)|vee;|wedge;)|y(?:ac(?:ute;?|y;)|c(?:irc;|y;)|en;?|fr;|icy;|opf;|scr;|u(?:cy;|ml;?))|z(?:acute;|c(?:aron;|y;)|dot;|e(?:etrf;|ta;)|fr;|hcy;|igrarr;|opf;|scr;|w(?:j;|nj;)))|[\\s\\S]/g;\r\n\r\nvar NAMEDCHARREF_MAXLEN = 32;\r\n\r\n// Regular expression constants used by the tokenizer and parser\r\n\r\n// Note that \\r is included in all of these regexps because it will need\r\n// to be converted to LF by the scanChars() function.\r\nvar DBLQUOTEATTRVAL = /[^\\r\"&\\u0000]+/g;\r\nvar SINGLEQUOTEATTRVAL = /[^\\r'&\\u0000]+/g;\r\nvar UNQUOTEDATTRVAL = /[^\\r\\t\\n\\f &>\\u0000]+/g;\r\nvar TAGNAME = /[^\\r\\t\\n\\f \\/>A-Z\\u0000]+/g;\r\nvar ATTRNAME = /[^\\r\\t\\n\\f \\/=>A-Z\\u0000]+/g;\r\n\r\nvar CDATATEXT = /[^\\]\\r\\u0000\\uffff]*/g;\r\nvar DATATEXT = /[^&<\\r\\u0000\\uffff]*/g;\r\nvar RAWTEXT = /[^<\\r\\u0000\\uffff]*/g;\r\nvar PLAINTEXT = /[^\\r\\u0000\\uffff]*/g;\r\n// Since we don't have the 'sticky tag', add '|.' to the end of SIMPLETAG\r\n// and SIMPLEATTR so that we are guaranteed to always match.  This prevents\r\n// us from scanning past the lastIndex set. (Note that the desired matches\r\n// are always greater than 1 char long, so longest-match will ensure that .\r\n// is not matched unless the desired match fails.)\r\nvar SIMPLETAG = /(?:(\\/)?([a-z]+)>)|[\\s\\S]/g;\r\nvar SIMPLEATTR = /(?:([-a-z]+)[ \\t\\n\\f]*=[ \\t\\n\\f]*('[^'&\\r\\u0000]*'|\"[^\"&\\r\\u0000]*\"|[^\\t\\n\\r\\f \"&'\\u0000>][^&> \\t\\n\\r\\f\\u0000]*[ \\t\\n\\f]))|[\\s\\S]/g;\r\n\r\nvar NONWS = /[^\\x09\\x0A\\x0C\\x0D\\x20]/;\r\nvar ALLNONWS = /[^\\x09\\x0A\\x0C\\x0D\\x20]/g; // like above, with g flag\r\nvar NONWSNONNUL = /[^\\x00\\x09\\x0A\\x0C\\x0D\\x20]/; // don't allow NUL either\r\nvar LEADINGWS = /^[\\x09\\x0A\\x0C\\x0D\\x20]+/;\r\nvar NULCHARS = /\\x00/g;\r\n\r\n/***\r\n * These are utility functions that don't use any of the parser's\r\n * internal state.\r\n */\r\nfunction buf2str(buf) {\r\n  var CHUNKSIZE=16384;\r\n  if (buf.length < CHUNKSIZE) {\r\n    return String.fromCharCode.apply(String, buf);\r\n  }\r\n  // special case for large strings, to avoid busting the stack.\r\n  var result = '';\r\n  for (var i = 0; i < buf.length; i += CHUNKSIZE) {\r\n    result += String.fromCharCode.apply(String, buf.slice(i, i+CHUNKSIZE));\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction str2buf(s) {\r\n  var result = [];\r\n  for (var i=0; i<s.length; i++) {\r\n    result[i] = s.charCodeAt(i);\r\n  }\r\n  return result;\r\n}\r\n\r\n// Determine whether the element is a member of the set.\r\n// The set is an object that maps namespaces to objects. The objects\r\n// then map local tagnames to the value true if that tag is part of the set\r\nfunction isA(elt, set) {\r\n  if (typeof set === 'string') {\r\n    // convenience case for testing a particular HTML element\r\n    return elt.namespaceURI === NAMESPACE.HTML &&\r\n      elt.localName === set;\r\n  }\r\n  var tagnames = set[elt.namespaceURI];\r\n  return tagnames && tagnames[elt.localName];\r\n}\r\n\r\nfunction isMathmlTextIntegrationPoint(n) {\r\n  return isA(n, mathmlTextIntegrationPointSet);\r\n}\r\n\r\nfunction isHTMLIntegrationPoint(n) {\r\n  if (isA(n, htmlIntegrationPointSet)) return true;\r\n  if (n.namespaceURI === NAMESPACE.MATHML &&\r\n    n.localName === \"annotation-xml\") {\r\n    var encoding = n.getAttribute(\"encoding\");\r\n    if (encoding) encoding = encoding.toLowerCase();\r\n    if (encoding === \"text/html\" ||\r\n      encoding === \"application/xhtml+xml\")\r\n      return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction adjustSVGTagName(name) {\r\n  if (name in svgTagNameAdjustments)\r\n    return svgTagNameAdjustments[name];\r\n  else\r\n    return name;\r\n}\r\n\r\nfunction adjustSVGAttributes(attrs) {\r\n  for(var i = 0, n = attrs.length; i < n; i++) {\r\n    if (attrs[i][0] in svgAttrAdjustments) {\r\n      attrs[i][0] = svgAttrAdjustments[attrs[i][0]];\r\n    }\r\n  }\r\n}\r\n\r\nfunction adjustMathMLAttributes(attrs) {\r\n  for(var i = 0, n = attrs.length; i < n; i++) {\r\n    if (attrs[i][0] === \"definitionurl\") {\r\n      attrs[i][0] = \"definitionURL\";\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nfunction adjustForeignAttributes(attrs) {\r\n  for(var i = 0, n = attrs.length; i < n; i++) {\r\n    if (attrs[i][0] in foreignAttributes) {\r\n      // Attributes with namespaces get a 3rd element:\r\n      // [Qname, value, namespace]\r\n      attrs[i].push(foreignAttributes[attrs[i][0]]);\r\n    }\r\n  }\r\n}\r\n\r\n// For each attribute in attrs, if elt doesn't have an attribute\r\n// by that name, add the attribute to elt\r\n// XXX: I'm ignoring namespaces for now\r\nfunction transferAttributes(attrs, elt) {\r\n  for(var i = 0, n = attrs.length; i < n; i++) {\r\n    var name = attrs[i][0], value = attrs[i][1];\r\n    if (elt.hasAttribute(name)) continue;\r\n    elt._setAttribute(name, value);\r\n  }\r\n}\r\n\r\n/***\r\n * The ElementStack class\r\n */\r\nHTMLParser.ElementStack = function ElementStack() {\r\n  this.elements = [];\r\n  this.top = null; // stack.top is the \"current node\" in the spec\r\n};\r\n\r\n/*\r\n// This is for debugging only\r\nHTMLParser.ElementStack.prototype.toString = function(e) {\r\n  return \"STACK: \" +\r\n  this.elements.map(function(e) {return e.localName;}).join(\"-\");\r\n}\r\n*/\r\n\r\nHTMLParser.ElementStack.prototype.push = function(e) {\r\n  this.elements.push(e);\r\n  this.top = e;\r\n};\r\n\r\nHTMLParser.ElementStack.prototype.pop = function(e) {\r\n  this.elements.pop();\r\n  this.top = this.elements[this.elements.length-1];\r\n};\r\n\r\n// Pop elements off the stack up to and including the first\r\n// element with the specified (HTML) tagname\r\nHTMLParser.ElementStack.prototype.popTag = function(tag) {\r\n  for(var i = this.elements.length-1; i > 0; i--) {\r\n    var e = this.elements[i];\r\n    if (isA(e, tag)) break;\r\n  }\r\n  this.elements.length = i;\r\n  this.top = this.elements[i-1];\r\n};\r\n\r\n// Pop elements off the stack up to and including the first\r\n// element that is an instance of the specified type\r\nHTMLParser.ElementStack.prototype.popElementType = function(type) {\r\n  for(var i = this.elements.length-1; i > 0; i--) {\r\n    if (this.elements[i] instanceof type) break;\r\n  }\r\n  this.elements.length = i;\r\n  this.top = this.elements[i-1];\r\n};\r\n\r\n// Pop elements off the stack up to and including the element e.\r\n// Note that this is very different from removeElement()\r\n// This requires that e is on the stack.\r\nHTMLParser.ElementStack.prototype.popElement = function(e) {\r\n  for(var i = this.elements.length-1; i > 0; i--) {\r\n    if (this.elements[i] === e) break;\r\n  }\r\n  this.elements.length = i;\r\n  this.top = this.elements[i-1];\r\n};\r\n\r\n// Remove a specific element from the stack.\r\n// Do nothing if the element is not on the stack\r\nHTMLParser.ElementStack.prototype.removeElement = function(e) {\r\n  if (this.top === e) this.pop();\r\n  else {\r\n    var idx = this.elements.lastIndexOf(e);\r\n    if (idx !== -1)\r\n      this.elements.splice(idx, 1);\r\n  }\r\n};\r\n\r\nHTMLParser.ElementStack.prototype.clearToContext = function(set) {\r\n  // Note that we don't loop to 0. Never pop the <html> elt off.\r\n  for(var i = this.elements.length-1; i > 0; i--) {\r\n    if (isA(this.elements[i], set)) break;\r\n  }\r\n  this.elements.length = i+1;\r\n  this.top = this.elements[i];\r\n};\r\n\r\nHTMLParser.ElementStack.prototype.contains = function(tag) {\r\n  return this.inSpecificScope(tag, Object.create(null));\r\n};\r\n\r\nHTMLParser.ElementStack.prototype.inSpecificScope = function(tag, set) {\r\n  for(var i = this.elements.length-1; i >= 0; i--) {\r\n    var elt = this.elements[i];\r\n    if (isA(elt, tag)) return true;\r\n    if (isA(elt, set)) return false;\r\n  }\r\n  return false;\r\n};\r\n\r\n// Like the above, but for a specific element, not a tagname\r\nHTMLParser.ElementStack.prototype.elementInSpecificScope = function(target, set) {\r\n  for(var i = this.elements.length-1; i >= 0; i--) {\r\n    var elt = this.elements[i];\r\n    if (elt === target) return true;\r\n    if (isA(elt, set)) return false;\r\n  }\r\n  return false;\r\n};\r\n\r\n// Like the above, but for an element interface, not a tagname\r\nHTMLParser.ElementStack.prototype.elementTypeInSpecificScope = function(target, set) {\r\n  for(var i = this.elements.length-1; i >= 0; i--) {\r\n    var elt = this.elements[i];\r\n    if (elt instanceof target) return true;\r\n    if (isA(elt, set)) return false;\r\n  }\r\n  return false;\r\n};\r\n\r\nHTMLParser.ElementStack.prototype.inScope = function(tag) {\r\n  return this.inSpecificScope(tag, inScopeSet);\r\n};\r\n\r\nHTMLParser.ElementStack.prototype.elementInScope = function(e) {\r\n  return this.elementInSpecificScope(e, inScopeSet);\r\n};\r\n\r\nHTMLParser.ElementStack.prototype.elementTypeInScope = function(type) {\r\n  return this.elementTypeInSpecificScope(type, inScopeSet);\r\n};\r\n\r\nHTMLParser.ElementStack.prototype.inButtonScope = function(tag) {\r\n  return this.inSpecificScope(tag, inButtonScopeSet);\r\n};\r\n\r\nHTMLParser.ElementStack.prototype.inListItemScope = function(tag) {\r\n  return this.inSpecificScope(tag, inListItemScopeSet);\r\n};\r\n\r\nHTMLParser.ElementStack.prototype.inTableScope = function(tag) {\r\n  return this.inSpecificScope(tag, inTableScopeSet);\r\n};\r\n\r\nHTMLParser.ElementStack.prototype.inSelectScope = function(tag) {\r\n  // Can't implement this one with inSpecificScope, since it involves\r\n  // a set defined by inverting another set. So implement manually.\r\n  for(var i = this.elements.length-1; i >= 0; i--) {\r\n    var elt = this.elements[i];\r\n    if (elt.namespaceURI !== NAMESPACE.HTML) return false;\r\n    var localname = elt.localName;\r\n    if (localname === tag) return true;\r\n    if (localname !== \"optgroup\" && localname !== \"option\")\r\n      return false;\r\n  }\r\n  return false;\r\n};\r\n\r\nHTMLParser.ElementStack.prototype.generateImpliedEndTags = function(butnot, thorough) {\r\n  var endTagSet = thorough ? thoroughImpliedEndTagsSet : impliedEndTagsSet;\r\n  for(var i = this.elements.length-1; i >= 0; i--) {\r\n    var e = this.elements[i];\r\n    if (butnot && isA(e, butnot)) break;\r\n    if (!isA(this.elements[i], endTagSet)) break;\r\n  }\r\n\r\n  this.elements.length = i+1;\r\n  this.top = this.elements[i];\r\n};\r\n\r\n/***\r\n * The ActiveFormattingElements class\r\n */\r\nHTMLParser.ActiveFormattingElements = function AFE() {\r\n  this.list = []; // elements\r\n  this.attrs = []; // attribute tokens for cloning\r\n};\r\n\r\nHTMLParser.ActiveFormattingElements.prototype.MARKER = { localName: \"|\" };\r\n\r\n/*\r\n// For debugging\r\nHTMLParser.ActiveFormattingElements.prototype.toString = function() {\r\n  return \"AFE: \" +\r\n  this.list.map(function(e) { return e.localName; }).join(\"-\");\r\n}\r\n*/\r\n\r\nHTMLParser.ActiveFormattingElements.prototype.insertMarker = function() {\r\n  this.list.push(this.MARKER);\r\n  this.attrs.push(this.MARKER);\r\n};\r\n\r\nHTMLParser.ActiveFormattingElements.prototype.push = function(elt, attrs) {\r\n  // Scan backwards: if there are already 3 copies of this element\r\n  // before we encounter a marker, then drop the last one\r\n  var count = 0;\r\n  for(var i = this.list.length-1; i >= 0; i--) {\r\n    if (this.list[i] === this.MARKER) break;\r\n    // equal() is defined below\r\n    if (equal(elt, this.list[i], this.attrs[i])) {\r\n      count++;\r\n      if (count === 3) {\r\n        this.list.splice(i, 1);\r\n        this.attrs.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Now push the element onto the list\r\n  this.list.push(elt);\r\n\r\n  // Copy the attributes and push those on, too\r\n  var attrcopy = [];\r\n  for(var ii = 0; ii < attrs.length; ii++) {\r\n    attrcopy[ii] = attrs[ii];\r\n  }\r\n\r\n  this.attrs.push(attrcopy);\r\n\r\n  // This function defines equality of two elements for the purposes\r\n  // of the AFE list.  Note that it compares the new elements\r\n  // attributes to the saved array of attributes associated with\r\n  // the old element because a script could have changed the\r\n  // old element's set of attributes\r\n  function equal(newelt, oldelt, oldattrs) {\r\n    if (newelt.localName !== oldelt.localName) return false;\r\n    if (newelt._numattrs !== oldattrs.length) return false;\r\n    for(var i = 0, n = oldattrs.length; i < n; i++) {\r\n      var oldname = oldattrs[i][0];\r\n      var oldval = oldattrs[i][1];\r\n      if (!newelt.hasAttribute(oldname)) return false;\r\n      if (newelt.getAttribute(oldname) !== oldval) return false;\r\n    }\r\n    return true;\r\n  }\r\n};\r\n\r\nHTMLParser.ActiveFormattingElements.prototype.clearToMarker = function() {\r\n  for(var i = this.list.length-1; i >= 0; i--) {\r\n    if (this.list[i] === this.MARKER) break;\r\n  }\r\n  if (i < 0) i = 0;\r\n  this.list.length = i;\r\n  this.attrs.length = i;\r\n};\r\n\r\n// Find and return the last element with the specified tag between the\r\n// end of the list and the last marker on the list.\r\n// Used when parsing <a> in_body_mode()\r\nHTMLParser.ActiveFormattingElements.prototype.findElementByTag = function(tag) {\r\n  for(var i = this.list.length-1; i >= 0; i--) {\r\n    var elt = this.list[i];\r\n    if (elt === this.MARKER) break;\r\n    if (elt.localName === tag) return elt;\r\n  }\r\n  return null;\r\n};\r\n\r\nHTMLParser.ActiveFormattingElements.prototype.indexOf = function(e) {\r\n  return this.list.lastIndexOf(e);\r\n};\r\n\r\n// Find the element e in the list and remove it\r\n// Used when parsing <a> in_body()\r\nHTMLParser.ActiveFormattingElements.prototype.remove = function(e) {\r\n  var idx = this.list.lastIndexOf(e);\r\n  if (idx !== -1) {\r\n    this.list.splice(idx, 1);\r\n    this.attrs.splice(idx, 1);\r\n  }\r\n};\r\n\r\n// Find element a in the list and replace it with element b\r\n// XXX: Do I need to handle attributes here?\r\nHTMLParser.ActiveFormattingElements.prototype.replace = function(a, b, attrs) {\r\n  var idx = this.list.lastIndexOf(a);\r\n  if (idx !== -1) {\r\n    this.list[idx] = b;\r\n    this.attrs[idx] = attrs;\r\n  }\r\n};\r\n\r\n// Find a in the list and insert b after it\r\n// This is only used for insert a bookmark object, so the\r\n// attrs array doesn't really matter\r\nHTMLParser.ActiveFormattingElements.prototype.insertAfter = function(a,b) {\r\n  var idx = this.list.lastIndexOf(a);\r\n  if (idx !== -1) {\r\n    this.list.splice(idx, 0, b);\r\n    this.attrs.splice(idx, 0, b);\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\n/***\r\n * This is the parser factory function. It is the return value of\r\n * the outer closure that it is defined within.  Most of the parser\r\n * implementation details are inside this function.\r\n */\r\nfunction HTMLParser(address, fragmentContext, options) {\r\n  /***\r\n   * These are the parser's state variables\r\n   */\r\n  // Scanner state\r\n  var chars = null;\r\n  var numchars = 0; // Length of chars\r\n  var nextchar = 0; // Index of next char\r\n  var input_complete = false; // Becomes true when end() called.\r\n  var scanner_skip_newline = false; // If previous char was CR\r\n  var reentrant_invocations = 0;\r\n  var saved_scanner_state = [];\r\n  var leftovers = \"\";\r\n  var first_batch = true;\r\n  var paused = 0; // Becomes non-zero while loading scripts\r\n\r\n\r\n  // Tokenizer state\r\n  var tokenizer = data_state; // Current tokenizer state\r\n  var return_state;\r\n  var character_reference_code;\r\n  var tagnamebuf = \"\";\r\n  var lasttagname = \"\"; // holds the target end tag for text states\r\n  var tempbuf = [];\r\n  var attrnamebuf = \"\";\r\n  var attrvaluebuf = \"\";\r\n  var commentbuf = [];\r\n  var doctypenamebuf = [];\r\n  var doctypepublicbuf = [];\r\n  var doctypesystembuf = [];\r\n  var attributes = [];\r\n  var is_end_tag = false;\r\n\r\n  // Tree builder state\r\n  var parser = initial_mode; // Current insertion mode\r\n  var originalInsertionMode = null; // A saved insertion mode\r\n  var templateInsertionModes = []; // Stack of template insertion modes.\r\n  var stack = new HTMLParser.ElementStack(); // Stack of open elements\r\n  var afe = new HTMLParser.ActiveFormattingElements(); // mis-nested tags\r\n  var fragment = (fragmentContext!==undefined); // For innerHTML, etc.\r\n  var head_element_pointer = null;\r\n  var form_element_pointer = null;\r\n  var scripting_enabled = true;\r\n  if (fragmentContext) {\r\n\tscripting_enabled = fragmentContext.ownerDocument._scripting_enabled;\r\n  }\r\n  if (options && options.scripting_enabled === false)\r\n    scripting_enabled = false;\r\n  var frameset_ok = true;\r\n  var force_quirks = false;\r\n  var pending_table_text;\r\n  var text_integration_mode; // XXX a spec bug workaround?\r\n\r\n  // A single run of characters, buffered up to be sent to\r\n  // the parser as a single string.\r\n  var textrun = [];\r\n  var textIncludesNUL = false;\r\n  var ignore_linefeed = false;\r\n\r\n  /***\r\n   * This is the parser object that will be the return value of this\r\n   * factory function, which is some 5000 lines below.\r\n   * Note that the variable \"parser\" is the current state of the\r\n   * parser's state machine.  This variable \"htmlparser\" is the\r\n   * return value and defines the public API of the parser\r\n   */\r\n  var htmlparser = {\r\n    document: function() {\r\n      return doc;\r\n    },\r\n\r\n    // Convenience function for internal use. Can only be called once,\r\n    // as it removes the nodes from `doc` to add them to fragment.\r\n    _asDocumentFragment: function() {\r\n      var frag = doc.createDocumentFragment();\r\n      var root = doc.firstChild;\r\n      while(root.hasChildNodes()) {\r\n        frag.appendChild(root.firstChild);\r\n      }\r\n      return frag;\r\n    },\r\n\r\n    // Internal function used from HTMLScriptElement to pause the\r\n    // parser while a script is being loaded from the network\r\n    pause: function() {\r\n      // print(\"pausing parser\");\r\n      paused++;\r\n    },\r\n\r\n    // Called when a script finishes loading\r\n    resume: function() {\r\n      // print(\"resuming parser\");\r\n      paused--;\r\n      // XXX: added this to force a resumption.\r\n      // Is this the right thing to do?\r\n      this.parse(\"\");\r\n    },\r\n\r\n    // Parse the HTML text s.\r\n    // The second argument should be true if there is no more\r\n    // text to be parsed, and should be false or omitted otherwise.\r\n    // The second argument must not be set for recursive invocations\r\n    // from document.write()\r\n    parse: function(s, end, shouldPauseFunc) {\r\n      var moreToDo;\r\n\r\n      // If we're paused, remember the text to parse, but\r\n      // don't parse it now.\r\n      // (Don't invoke shouldPauseFunc because we haven't handled 'end' yet.)\r\n      if (paused > 0) {\r\n        leftovers += s;\r\n        return true; // more to do\r\n      }\r\n\r\n\r\n      if (reentrant_invocations === 0) {\r\n        // A normal, top-level invocation\r\n        if (leftovers) {\r\n          s = leftovers + s;\r\n          leftovers = \"\";\r\n        }\r\n\r\n        // Add a special marker character to the end of\r\n        // the buffer.  If the scanner is at the end of\r\n        // the buffer and input_complete is set, then this\r\n        // character will transform into an EOF token.\r\n        // Having an actual character that represents EOF\r\n        // in the character buffer makes lookahead regexp\r\n        // matching work more easily, and this is\r\n        // important for character references.\r\n        if (end) {\r\n          s += \"\\uFFFF\";\r\n          input_complete = true; // Makes scanChars() send EOF\r\n        }\r\n\r\n        chars = s;\r\n        numchars = s.length;\r\n        nextchar = 0;\r\n\r\n        if (first_batch) {\r\n          // We skip a leading Byte Order Mark (\\uFEFF)\r\n          // on first batch of text we're given\r\n          first_batch = false;\r\n          if (chars.charCodeAt(0) === 0xFEFF) nextchar = 1;\r\n        }\r\n\r\n        reentrant_invocations++;\r\n        moreToDo = scanChars(shouldPauseFunc);\r\n        leftovers = chars.substring(nextchar, numchars);\r\n        reentrant_invocations--;\r\n      }\r\n      else {\r\n        // This is the re-entrant case, which we have to\r\n        // handle a little differently.\r\n        reentrant_invocations++;\r\n\r\n        // Save current scanner state\r\n        saved_scanner_state.push(chars, numchars, nextchar);\r\n\r\n        // Set new scanner state\r\n        chars = s;\r\n        numchars = s.length;\r\n        nextchar = 0;\r\n\r\n        // Now scan as many of these new chars as we can\r\n        scanChars();\r\n        moreToDo = false;\r\n\r\n        leftovers = chars.substring(nextchar, numchars);\r\n\r\n        // restore old scanner state\r\n        nextchar = saved_scanner_state.pop();\r\n        numchars = saved_scanner_state.pop();\r\n        chars = saved_scanner_state.pop();\r\n\r\n        // If there were leftover chars from this invocation\r\n        // insert them into the pending invocation's buffer\r\n        // and trim already processed chars at the same time\r\n        if (leftovers) {\r\n          chars = leftovers + chars.substring(nextchar);\r\n          numchars = chars.length;\r\n          nextchar = 0;\r\n          leftovers = \"\";\r\n        }\r\n\r\n        // Decrement the counter\r\n        reentrant_invocations--;\r\n      }\r\n      return moreToDo;\r\n    }\r\n  };\r\n\r\n\r\n  // This is the document we'll be building up\r\n  var doc = new Document(true, address);\r\n\r\n  // The document needs to know about the parser, for document.write().\r\n  // This _parser property will be deleted when we're done parsing.\r\n  doc._parser = htmlparser;\r\n\r\n  // XXX I think that any document we use this parser on should support\r\n  // scripts. But I may need to configure that through a parser parameter\r\n  // Only documents with windows (\"browsing contexts\" to be precise)\r\n  // allow scripting.\r\n  doc._scripting_enabled = scripting_enabled;\r\n\r\n\r\n  /***\r\n   * The actual code of the HTMLParser() factory function begins here.\r\n   */\r\n\r\n  if (fragmentContext) { // for innerHTML parsing\r\n    if (fragmentContext.ownerDocument._quirks)\r\n      doc._quirks = true;\r\n    if (fragmentContext.ownerDocument._limitedQuirks)\r\n      doc._limitedQuirks = true;\r\n\r\n    // Set the initial tokenizer state\r\n    if (fragmentContext.namespaceURI === NAMESPACE.HTML) {\r\n      switch(fragmentContext.localName) {\r\n      case \"title\":\r\n      case \"textarea\":\r\n        tokenizer = rcdata_state;\r\n        break;\r\n      case \"style\":\r\n      case \"xmp\":\r\n      case \"iframe\":\r\n      case \"noembed\":\r\n      case \"noframes\":\r\n      case \"script\":\r\n      case \"plaintext\":\r\n        tokenizer = plaintext_state;\r\n        break;\r\n      }\r\n    }\r\n\r\n    var root = doc.createElement(\"html\");\r\n    doc._appendChild(root);\r\n    stack.push(root);\r\n    if (fragmentContext instanceof impl.HTMLTemplateElement) {\r\n      templateInsertionModes.push(in_template_mode);\r\n    }\r\n    resetInsertionMode();\r\n\r\n    for(var e = fragmentContext; e !== null; e = e.parentElement) {\r\n      if (e instanceof impl.HTMLFormElement) {\r\n        form_element_pointer = e;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /***\r\n   * Scanner functions\r\n   */\r\n  // Loop through the characters in chars, and pass them one at a time\r\n  // to the tokenizer FSM. Return when no more characters can be processed\r\n  // (This may leave 1 or more characters in the buffer: like a CR\r\n  // waiting to see if the next char is LF, or for states that require\r\n  // lookahead...)\r\n  function scanChars(shouldPauseFunc) {\r\n    var codepoint, s, pattern, eof;\r\n\r\n    while(nextchar < numchars) {\r\n\r\n      // If we just tokenized a </script> tag, then the paused flag\r\n      // may have been set to tell us to stop tokenizing while\r\n      // the script is loading\r\n      if (paused > 0 || (shouldPauseFunc && shouldPauseFunc())) {\r\n        return true;\r\n      }\r\n\r\n\r\n      switch(typeof tokenizer.lookahead) {\r\n      case 'undefined':\r\n        codepoint = chars.charCodeAt(nextchar++);\r\n        if (scanner_skip_newline) {\r\n          scanner_skip_newline = false;\r\n          if (codepoint === 0x000A) {\r\n            nextchar++;\r\n            continue;\r\n          }\r\n        }\r\n        switch(codepoint) {\r\n        case 0x000D:\r\n          // CR always turns into LF, but if the next character\r\n          // is LF, then that second LF is skipped.\r\n          if (nextchar < numchars) {\r\n            if (chars.charCodeAt(nextchar) === 0x000A)\r\n              nextchar++;\r\n          }\r\n          else {\r\n            // We don't know the next char right now, so we\r\n            // can't check if it is a LF.  So set a flag\r\n            scanner_skip_newline = true;\r\n          }\r\n\r\n          // In either case, emit a LF\r\n          tokenizer(0x000A);\r\n\r\n          break;\r\n        case 0xFFFF:\r\n          if (input_complete && nextchar === numchars) {\r\n            tokenizer(EOF); // codepoint will be 0xFFFF here\r\n            break;\r\n          }\r\n          /* falls through */\r\n        default:\r\n          tokenizer(codepoint);\r\n          break;\r\n        }\r\n        break;\r\n\r\n      case 'number':\r\n        codepoint = chars.charCodeAt(nextchar);\r\n\r\n        // The only tokenizer states that require fixed lookahead\r\n        // only consume alphanum characters, so we don't have\r\n        // to worry about CR and LF in this case\r\n\r\n        // tokenizer wants n chars of lookahead\r\n        var n = tokenizer.lookahead;\r\n        var needsString = true;\r\n        if (n < 0) {\r\n          needsString = false;\r\n          n = -n;\r\n        }\r\n\r\n        if (n < numchars - nextchar) {\r\n          // If we can look ahead that far\r\n          s = needsString ? chars.substring(nextchar, nextchar+n) : null;\r\n          eof = false;\r\n        }\r\n        else { // if we don't have that many characters\r\n          if (input_complete) { // If no more are coming\r\n            // Just return what we have\r\n            s = needsString ? chars.substring(nextchar, numchars) : null;\r\n            eof = true;\r\n            if (codepoint === 0xFFFF && nextchar === numchars-1)\r\n              codepoint = EOF;\r\n          }\r\n          else {\r\n            // Return now and wait for more chars later\r\n            return true;\r\n          }\r\n        }\r\n        tokenizer(codepoint, s, eof);\r\n        break;\r\n      case 'string':\r\n        codepoint = chars.charCodeAt(nextchar);\r\n\r\n        // tokenizer wants characters up to a matching string\r\n        pattern = tokenizer.lookahead;\r\n        var pos = chars.indexOf(pattern, nextchar);\r\n        if (pos !== -1) {\r\n          s = chars.substring(nextchar, pos + pattern.length);\r\n          eof = false;\r\n        }\r\n        else {  // No match\r\n          // If more characters coming, wait for them\r\n          if (!input_complete) return true;\r\n\r\n          // Otherwise, we've got to return what we've got\r\n          s = chars.substring(nextchar, numchars);\r\n          if (codepoint === 0xFFFF && nextchar === numchars-1)\r\n            codepoint = EOF;\r\n          eof = true;\r\n        }\r\n\r\n        // The tokenizer states that require this kind of\r\n        // lookahead have to be careful to handle CR characters\r\n        // correctly\r\n        tokenizer(codepoint, s, eof);\r\n        break;\r\n      }\r\n    }\r\n    return false; // no more characters to scan!\r\n  }\r\n\r\n\r\n  /***\r\n   * Tokenizer utility functions\r\n   */\r\n  function addAttribute(name,value) {\r\n    // Make sure there isn't already an attribute with this name\r\n    // If there is, ignore this one.\r\n    for(var i = 0; i < attributes.length; i++) {\r\n      if (attributes[i][0] === name) return;\r\n    }\r\n\r\n    if (value !== undefined) {\r\n      attributes.push([name, value]);\r\n    }\r\n    else {\r\n      attributes.push([name]);\r\n    }\r\n  }\r\n\r\n  // Shortcut for simple attributes\r\n  function handleSimpleAttribute() {\r\n    SIMPLEATTR.lastIndex = nextchar-1;\r\n    var matched = SIMPLEATTR.exec(chars);\r\n    if (!matched) throw new Error(\"should never happen\");\r\n    var name = matched[1];\r\n    if (!name) return false;\r\n    var value = matched[2];\r\n    var len = value.length;\r\n    switch(value[0]) {\r\n    case '\"':\r\n    case \"'\":\r\n      value = value.substring(1, len-1);\r\n      nextchar += (matched[0].length-1);\r\n      tokenizer = after_attribute_value_quoted_state;\r\n      break;\r\n    default:\r\n      tokenizer = before_attribute_name_state;\r\n      nextchar += (matched[0].length-1);\r\n      value = value.substring(0, len-1);\r\n      break;\r\n    }\r\n\r\n    // Make sure there isn't already an attribute with this name\r\n    // If there is, ignore this one.\r\n    for(var i = 0; i < attributes.length; i++) {\r\n      if (attributes[i][0] === name) return true;\r\n    }\r\n\r\n    attributes.push([name, value]);\r\n    return true;\r\n  }\r\n\r\n  function beginTagName() {\r\n    is_end_tag = false;\r\n    tagnamebuf = \"\";\r\n    attributes.length = 0;\r\n  }\r\n  function beginEndTagName() {\r\n    is_end_tag = true;\r\n    tagnamebuf = \"\";\r\n    attributes.length = 0;\r\n  }\r\n\r\n  function beginTempBuf() { tempbuf.length = 0; }\r\n  function beginAttrName() { attrnamebuf = \"\"; }\r\n  function beginAttrValue() { attrvaluebuf = \"\"; }\r\n  function beginComment() { commentbuf.length = 0; }\r\n  function beginDoctype() {\r\n    doctypenamebuf.length = 0;\r\n    doctypepublicbuf = null;\r\n    doctypesystembuf = null;\r\n  }\r\n  function beginDoctypePublicId() { doctypepublicbuf = []; }\r\n  function beginDoctypeSystemId() { doctypesystembuf = []; }\r\n  function forcequirks() { force_quirks = true; }\r\n  function cdataAllowed() {\r\n    return stack.top &&\r\n      stack.top.namespaceURI !== \"http://www.w3.org/1999/xhtml\";\r\n  }\r\n\r\n  // Return true if the codepoints in the specified buffer match the\r\n  // characters of lasttagname\r\n  function appropriateEndTag(buf) {\r\n    return lasttagname === buf;\r\n  }\r\n\r\n  function flushText() {\r\n    if (textrun.length > 0) {\r\n      var s = buf2str(textrun);\r\n      textrun.length = 0;\r\n\r\n      if (ignore_linefeed) {\r\n        ignore_linefeed = false;\r\n        if (s[0] === \"\\n\") s = s.substring(1);\r\n        if (s.length === 0) return;\r\n      }\r\n\r\n      insertToken(TEXT, s);\r\n      textIncludesNUL = false;\r\n    }\r\n    ignore_linefeed = false;\r\n  }\r\n\r\n  // Consume chars matched by the pattern and return them as a string. Starts\r\n  // matching at the current position, so users should drop the current char\r\n  // otherwise.\r\n  function getMatchingChars(pattern) {\r\n    pattern.lastIndex = nextchar - 1;\r\n    var match = pattern.exec(chars);\r\n    if (match && match.index === nextchar - 1) {\r\n      match = match[0];\r\n      nextchar += match.length - 1;\r\n      /* Careful!  Make sure we haven't matched the EOF character! */\r\n      if (input_complete && nextchar === numchars) {\r\n        // Oops, backup one.\r\n        match = match.slice(0, -1);\r\n        nextchar--;\r\n      }\r\n      return match;\r\n    } else {\r\n      throw new Error(\"should never happen\");\r\n    }\r\n  }\r\n\r\n  // emit a string of chars that match a regexp\r\n  // Returns false if no chars matched.\r\n  function emitCharsWhile(pattern) {\r\n    pattern.lastIndex = nextchar-1;\r\n    var match = pattern.exec(chars)[0];\r\n    if (!match) return false;\r\n    emitCharString(match);\r\n    nextchar += match.length - 1;\r\n    return true;\r\n  }\r\n\r\n  // This is used by CDATA sections\r\n  function emitCharString(s) {\r\n    if (textrun.length > 0) flushText();\r\n\r\n    if (ignore_linefeed) {\r\n      ignore_linefeed = false;\r\n      if (s[0] === \"\\n\") s = s.substring(1);\r\n      if (s.length === 0) return;\r\n    }\r\n\r\n    insertToken(TEXT, s);\r\n  }\r\n\r\n  function emitTag() {\r\n    if (is_end_tag) insertToken(ENDTAG, tagnamebuf);\r\n    else {\r\n      // Remember the last open tag we emitted\r\n      var tagname = tagnamebuf;\r\n      tagnamebuf = \"\";\r\n      lasttagname = tagname;\r\n      insertToken(TAG, tagname, attributes);\r\n    }\r\n  }\r\n\r\n\r\n  // A shortcut: look ahead and if this is a open or close tag\r\n  // in lowercase with no spaces and no attributes, just emit it now.\r\n  function emitSimpleTag() {\r\n    if (nextchar === numchars) { return false; /* not even 1 char left */ }\r\n    SIMPLETAG.lastIndex = nextchar;\r\n    var matched = SIMPLETAG.exec(chars);\r\n    if (!matched) throw new Error(\"should never happen\");\r\n    var tagname = matched[2];\r\n    if (!tagname) return false;\r\n    var endtag = matched[1];\r\n    if (endtag) {\r\n      nextchar += (tagname.length+2);\r\n      insertToken(ENDTAG, tagname);\r\n    }\r\n    else {\r\n      nextchar += (tagname.length+1);\r\n      lasttagname = tagname;\r\n      insertToken(TAG, tagname, NOATTRS);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function emitSelfClosingTag() {\r\n    if (is_end_tag) insertToken(ENDTAG, tagnamebuf, null, true);\r\n    else {\r\n      insertToken(TAG, tagnamebuf, attributes, true);\r\n    }\r\n  }\r\n\r\n  function emitDoctype() {\r\n    insertToken(DOCTYPE,\r\n          buf2str(doctypenamebuf),\r\n          doctypepublicbuf ? buf2str(doctypepublicbuf) : undefined,\r\n          doctypesystembuf ? buf2str(doctypesystembuf) : undefined);\r\n  }\r\n\r\n  function emitEOF() {\r\n    flushText();\r\n    parser(EOF); // EOF never goes to insertForeignContent()\r\n    doc.modclock = 1; // Start tracking modifications\r\n  }\r\n\r\n  // Insert a token, either using the current parser insertion mode\r\n  // (for HTML stuff) or using the insertForeignToken() method.\r\n  var insertToken = htmlparser.insertToken = function insertToken(t, value, arg3, arg4) {\r\n    flushText();\r\n    var current = stack.top;\r\n\r\n    if (!current || current.namespaceURI === NAMESPACE.HTML) {\r\n      // This is the common case\r\n      parser(t, value, arg3, arg4);\r\n    }\r\n    else {\r\n      // Otherwise we may need to insert this token as foreign content\r\n      if (t !== TAG && t !== TEXT) {\r\n        insertForeignToken(t, value, arg3, arg4);\r\n      }\r\n      else {\r\n        // But in some cases we treat it as regular content\r\n        if ((isMathmlTextIntegrationPoint(current) &&\r\n           (t === TEXT ||\r\n            (t === TAG &&\r\n             value !== \"mglyph\" && value !== \"malignmark\"))) ||\r\n          (t === TAG &&\r\n           value === \"svg\" &&\r\n           current.namespaceURI === NAMESPACE.MATHML &&\r\n           current.localName === \"annotation-xml\") ||\r\n          isHTMLIntegrationPoint(current)) {\r\n\r\n          // XXX: the text_integration_mode stuff is an\r\n          // attempted bug workaround of mine\r\n          text_integration_mode = true;\r\n          parser(t, value, arg3, arg4);\r\n          text_integration_mode = false;\r\n        }\r\n        // Otherwise it is foreign content\r\n        else {\r\n          insertForeignToken(t, value, arg3, arg4);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  /***\r\n   * Tree building utility functions\r\n   */\r\n  function insertComment(data) {\r\n    var parent = stack.top;\r\n    if (foster_parent_mode && isA(parent, tablesectionrowSet)) {\r\n      fosterParent(function(doc) { return doc.createComment(data); });\r\n    } else {\r\n      // \"If the adjusted insertion location is inside a template element,\r\n      // let it instead be inside the template element's template contents\"\r\n      if (parent instanceof impl.HTMLTemplateElement) {\r\n        parent = parent.content;\r\n      }\r\n      parent._appendChild(parent.ownerDocument.createComment(data));\r\n    }\r\n  }\r\n\r\n  function insertText(s) {\r\n    var parent = stack.top;\r\n    if (foster_parent_mode && isA(parent, tablesectionrowSet)) {\r\n      fosterParent(function(doc) { return doc.createTextNode(s); });\r\n    } else {\r\n      // \"If the adjusted insertion location is inside a template element,\r\n      // let it instead be inside the template element's template contents\"\r\n      if (parent instanceof impl.HTMLTemplateElement) {\r\n        parent = parent.content;\r\n      }\r\n      // \"If there is a Text node immediately before the adjusted insertion\r\n      // location, then append data to that Text node's data.\"\r\n      var lastChild = parent.lastChild;\r\n      if (lastChild && lastChild.nodeType === Node.TEXT_NODE) {\r\n        lastChild.appendData(s);\r\n      } else {\r\n        parent._appendChild(parent.ownerDocument.createTextNode(s));\r\n      }\r\n    }\r\n  }\r\n\r\n  function createHTMLElt(doc, name, attrs) {\r\n    // Create the element this way, rather than with\r\n    // doc.createElement because createElement() does error\r\n    // checking on the element name that we need to avoid here.\r\n    var elt = html.createElement(doc, name, null);\r\n\r\n    if (attrs) {\r\n      for(var i = 0, n = attrs.length; i < n; i++) {\r\n        // Use the _ version to avoid testing the validity\r\n        // of the attribute name\r\n        elt._setAttribute(attrs[i][0], attrs[i][1]);\r\n      }\r\n    }\r\n    // XXX\r\n    // If the element is a resettable form element,\r\n    // run its reset algorithm now\r\n    // XXX\r\n    // handle case where form-element-pointer is not null\r\n    return elt;\r\n  }\r\n\r\n  // The in_table insertion mode turns on this flag, and that makes\r\n  // insertHTMLElement use the foster parenting algorithm for elements\r\n  // tags inside a table\r\n  var foster_parent_mode = false;\r\n\r\n  function insertHTMLElement(name, attrs) {\r\n    var elt = insertElement(function(doc) {\r\n      return createHTMLElt(doc, name, attrs);\r\n    });\r\n\r\n    // XXX\r\n    // If this is a form element, set its form attribute property here\r\n    if (isA(elt, formassociatedSet)) {\r\n      elt._form = form_element_pointer;\r\n    }\r\n\r\n    return elt;\r\n  }\r\n\r\n  // Insert the element into the open element or foster parent it\r\n  function insertElement(eltFunc) {\r\n    var elt;\r\n    if (foster_parent_mode && isA(stack.top, tablesectionrowSet)) {\r\n      elt = fosterParent(eltFunc);\r\n    }\r\n    else if (stack.top instanceof impl.HTMLTemplateElement) {\r\n      // \"If the adjusted insertion location is inside a template element,\r\n      // let it instead be inside the template element's template contents\"\r\n      elt = eltFunc(stack.top.content.ownerDocument);\r\n      stack.top.content._appendChild(elt);\r\n    } else {\r\n      elt = eltFunc(stack.top.ownerDocument);\r\n      stack.top._appendChild(elt);\r\n    }\r\n\r\n    stack.push(elt);\r\n    return elt;\r\n  }\r\n\r\n  function insertForeignElement(name, attrs, ns) {\r\n    return insertElement(function(doc) {\r\n      // We need to prevent createElementNS from trying to parse `name` as a\r\n      // `qname`, so use an internal Document#_createElementNS() interface.\r\n      var elt = doc._createElementNS(name, ns, null);\r\n      if (attrs) {\r\n        for(var i = 0, n = attrs.length; i < n; i++) {\r\n          var attr = attrs[i];\r\n          if (attr.length === 2)\r\n            elt._setAttribute(attr[0], attr[1]);\r\n          else {\r\n            elt._setAttributeNS(attr[2], attr[0], attr[1]);\r\n          }\r\n        }\r\n      }\r\n      return elt;\r\n    });\r\n  }\r\n\r\n  function lastElementOfType(type) {\r\n    for(var i = stack.elements.length-1; i >= 0; i--) {\r\n      if (stack.elements[i] instanceof type) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  function fosterParent(eltFunc) {\r\n    var parent, before, lastTable = -1, lastTemplate = -1, elt;\r\n\r\n    lastTable = lastElementOfType(impl.HTMLTableElement);\r\n    lastTemplate = lastElementOfType(impl.HTMLTemplateElement);\r\n\r\n    if (lastTemplate >= 0 && (lastTable < 0 || lastTemplate > lastTable)) {\r\n      parent = stack.elements[lastTemplate];\r\n    } else if (lastTable >= 0) {\r\n      parent = stack.elements[lastTable].parentNode;\r\n      if (parent) {\r\n        before = stack.elements[lastTable];\r\n      } else {\r\n        parent = stack.elements[lastTable - 1];\r\n      }\r\n    }\r\n    if (!parent) parent = stack.elements[0]; // the `html` element.\r\n\r\n    // \"If the adjusted insertion location is inside a template element,\r\n    // let it instead be inside the template element's template contents\"\r\n    if (parent instanceof impl.HTMLTemplateElement) {\r\n      parent = parent.content;\r\n    }\r\n    // Create element in the appropriate document.\r\n    elt = eltFunc(parent.ownerDocument);\r\n\r\n    if (elt.nodeType === Node.TEXT_NODE) {\r\n      var prev;\r\n      if (before) prev = before.previousSibling;\r\n      else prev = parent.lastChild;\r\n      if (prev && prev.nodeType === Node.TEXT_NODE) {\r\n        prev.appendData(elt.data);\r\n        return elt;\r\n      }\r\n    }\r\n    if (before)\r\n      parent.insertBefore(elt, before);\r\n    else\r\n      parent._appendChild(elt);\r\n    return elt;\r\n  }\r\n\r\n\r\n  function resetInsertionMode() {\r\n    var last = false;\r\n    for(var i = stack.elements.length-1; i >= 0; i--) {\r\n      var node = stack.elements[i];\r\n      if (i === 0) {\r\n        last = true;\r\n        if (fragment) {\r\n          node = fragmentContext;\r\n        }\r\n      }\r\n      if (node.namespaceURI === NAMESPACE.HTML) {\r\n        var tag = node.localName;\r\n        switch(tag) {\r\n        case \"select\":\r\n          for(var j = i; j > 0; ) {\r\n            var ancestor = stack.elements[--j];\r\n            if (ancestor instanceof impl.HTMLTemplateElement) {\r\n              break;\r\n            } else if (ancestor instanceof impl.HTMLTableElement) {\r\n              parser = in_select_in_table_mode;\r\n              return;\r\n            }\r\n          }\r\n          parser = in_select_mode;\r\n          return;\r\n        case \"tr\":\r\n          parser = in_row_mode;\r\n          return;\r\n        case \"tbody\":\r\n        case \"tfoot\":\r\n        case \"thead\":\r\n          parser = in_table_body_mode;\r\n          return;\r\n        case \"caption\":\r\n          parser = in_caption_mode;\r\n          return;\r\n        case \"colgroup\":\r\n          parser = in_column_group_mode;\r\n          return;\r\n        case \"table\":\r\n          parser = in_table_mode;\r\n          return;\r\n        case \"template\":\r\n          parser = templateInsertionModes[templateInsertionModes.length-1];\r\n          return;\r\n        case \"body\":\r\n          parser = in_body_mode;\r\n          return;\r\n        case \"frameset\":\r\n          parser = in_frameset_mode;\r\n          return;\r\n        case \"html\":\r\n          if (head_element_pointer === null) {\r\n            parser = before_head_mode;\r\n          } else {\r\n            parser = after_head_mode;\r\n          }\r\n          return;\r\n        default:\r\n          if (!last) {\r\n            if (tag === \"head\") {\r\n              parser = in_head_mode;\r\n              return;\r\n            }\r\n            if (tag === \"td\" || tag === \"th\") {\r\n              parser = in_cell_mode;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (last) {\r\n        parser = in_body_mode;\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  function parseRawText(name, attrs) {\r\n    insertHTMLElement(name, attrs);\r\n    tokenizer = rawtext_state;\r\n    originalInsertionMode = parser;\r\n    parser = text_mode;\r\n  }\r\n\r\n  function parseRCDATA(name, attrs) {\r\n    insertHTMLElement(name, attrs);\r\n    tokenizer = rcdata_state;\r\n    originalInsertionMode = parser;\r\n    parser = text_mode;\r\n  }\r\n\r\n  // Make a copy of element i on the list of active formatting\r\n  // elements, using its original attributes, not current\r\n  // attributes (which may have been modified by a script)\r\n  function afeclone(doc, i) {\r\n    return {\r\n      elt: createHTMLElt(doc, afe.list[i].localName, afe.attrs[i]),\r\n      attrs: afe.attrs[i],\r\n    };\r\n  }\r\n\r\n\r\n  function afereconstruct() {\r\n    if (afe.list.length === 0) return;\r\n    var entry = afe.list[afe.list.length-1];\r\n    // If the last is a marker , do nothing\r\n    if (entry === afe.MARKER) return;\r\n    // Or if it is an open element, do nothing\r\n    if (stack.elements.lastIndexOf(entry) !== -1) return;\r\n\r\n    // Loop backward through the list until we find a marker or an\r\n    // open element, and then move forward one from there.\r\n    for(var i = afe.list.length-2; i >= 0; i--) {\r\n      entry = afe.list[i];\r\n      if (entry === afe.MARKER) break;\r\n      if (stack.elements.lastIndexOf(entry) !== -1) break;\r\n    }\r\n\r\n    // Now loop forward, starting from the element after the current\r\n    // one, recreating formatting elements and pushing them back onto\r\n    // the list of open elements\r\n    for(i = i+1; i < afe.list.length; i++) {\r\n      var newelt = insertElement(function(doc) { return afeclone(doc, i).elt; });\r\n      afe.list[i] = newelt;\r\n    }\r\n  }\r\n\r\n  // Used by the adoptionAgency() function\r\n  var BOOKMARK = {localName:\"BM\"};\r\n\r\n  function adoptionAgency(tag) {\r\n    // If the current node is an HTML element whose tag name is subject,\r\n    // and the current node is not in the list of active formatting\r\n    // elements, then pop the current node off the stack of open\r\n    // elements and abort these steps.\r\n    if (isA(stack.top, tag) && afe.indexOf(stack.top) === -1) {\r\n      stack.pop();\r\n      return true; // no more handling required\r\n    }\r\n\r\n    // Let outer loop counter be zero.\r\n    var outer = 0;\r\n\r\n    // Outer loop: If outer loop counter is greater than or\r\n    // equal to eight, then abort these steps.\r\n    while(outer < 8) {\r\n      // Increment outer loop counter by one.\r\n      outer++;\r\n\r\n      // Let the formatting element be the last element in the list\r\n      // of active formatting elements that: is between the end of\r\n      // the list and the last scope marker in the list, if any, or\r\n      // the start of the list otherwise, and has the same tag name\r\n      // as the token.\r\n      var fmtelt = afe.findElementByTag(tag);\r\n\r\n      // If there is no such node, then abort these steps and instead\r\n      // act as described in the \"any other end tag\" entry below.\r\n      if (!fmtelt) {\r\n        return false; // false means handle by the default case\r\n      }\r\n\r\n      // Otherwise, if there is such a node, but that node is not in\r\n      // the stack of open elements, then this is a parse error;\r\n      // remove the element from the list, and abort these steps.\r\n      var index = stack.elements.lastIndexOf(fmtelt);\r\n      if (index === -1) {\r\n        afe.remove(fmtelt);\r\n        return true;   // true means no more handling required\r\n      }\r\n\r\n      // Otherwise, if there is such a node, and that node is also in\r\n      // the stack of open elements, but the element is not in scope,\r\n      // then this is a parse error; ignore the token, and abort\r\n      // these steps.\r\n      if (!stack.elementInScope(fmtelt)) {\r\n        return true;\r\n      }\r\n\r\n      // Let the furthest block be the topmost node in the stack of\r\n      // open elements that is lower in the stack than the formatting\r\n      // element, and is an element in the special category. There\r\n      // might not be one.\r\n      var furthestblock = null, furthestblockindex;\r\n      for(var i = index+1; i < stack.elements.length; i++) {\r\n        if (isA(stack.elements[i], specialSet)) {\r\n          furthestblock = stack.elements[i];\r\n          furthestblockindex = i;\r\n          break;\r\n        }\r\n      }\r\n\r\n      // If there is no furthest block, then the UA must skip the\r\n      // subsequent steps and instead just pop all the nodes from the\r\n      // bottom of the stack of open elements, from the current node\r\n      // up to and including the formatting element, and remove the\r\n      // formatting element from the list of active formatting\r\n      // elements.\r\n      if (!furthestblock) {\r\n        stack.popElement(fmtelt);\r\n        afe.remove(fmtelt);\r\n        return true;\r\n      }\r\n      else {\r\n        // Let the common ancestor be the element immediately above\r\n        // the formatting element in the stack of open elements.\r\n        var ancestor = stack.elements[index-1];\r\n\r\n        // Let a bookmark note the position of the formatting\r\n        // element in the list of active formatting elements\r\n        // relative to the elements on either side of it in the\r\n        // list.\r\n        afe.insertAfter(fmtelt, BOOKMARK);\r\n\r\n        // Let node and last node be the furthest block.\r\n        var node = furthestblock;\r\n        var lastnode = furthestblock;\r\n        var nodeindex = furthestblockindex;\r\n        var nodeafeindex;\r\n\r\n        // Let inner loop counter be zero.\r\n        var inner = 0;\r\n\r\n        while (true) {\r\n\r\n          // Increment inner loop counter by one.\r\n          inner++;\r\n\r\n          // Let node be the element immediately above node in\r\n          // the stack of open elements, or if node is no longer\r\n          // in the stack of open elements (e.g. because it got\r\n          // removed by this algorithm), the element that was\r\n          // immediately above node in the stack of open elements\r\n          // before node was removed.\r\n          node = stack.elements[--nodeindex];\r\n\r\n          // If node is the formatting element, then go\r\n          // to the next step in the overall algorithm.\r\n          if (node === fmtelt) break;\r\n\r\n          // If the inner loop counter is greater than three and node\r\n          // is in the list of active formatting elements, then remove\r\n          // node from the list of active formatting elements.\r\n          nodeafeindex = afe.indexOf(node);\r\n          if (inner > 3 && nodeafeindex !== -1) {\r\n            afe.remove(node);\r\n            nodeafeindex = -1;\r\n          }\r\n\r\n          // If node is not in the list of active formatting\r\n          // elements, then remove node from the stack of open\r\n          // elements and then go back to the step labeled inner\r\n          // loop.\r\n          if (nodeafeindex === -1) {\r\n            stack.removeElement(node);\r\n            continue;\r\n          }\r\n\r\n          // Create an element for the token for which the\r\n          // element node was created with common ancestor as\r\n          // the intended parent, replace the entry for node\r\n          // in the list of active formatting elements with an\r\n          // entry for the new element, replace the entry for\r\n          // node in the stack of open elements with an entry for\r\n          // the new element, and let node be the new element.\r\n          var newelt = afeclone(ancestor.ownerDocument, nodeafeindex);\r\n          afe.replace(node, newelt.elt, newelt.attrs);\r\n          stack.elements[nodeindex] = newelt.elt;\r\n          node = newelt.elt;\r\n\r\n          // If last node is the furthest block, then move the\r\n          // aforementioned bookmark to be immediately after the\r\n          // new node in the list of active formatting elements.\r\n          if (lastnode === furthestblock) {\r\n            afe.remove(BOOKMARK);\r\n            afe.insertAfter(newelt.elt, BOOKMARK);\r\n          }\r\n\r\n          // Insert last node into node, first removing it from\r\n          // its previous parent node if any.\r\n          node._appendChild(lastnode);\r\n\r\n          // Let last node be node.\r\n          lastnode = node;\r\n        }\r\n\r\n        // If the common ancestor node is a table, tbody, tfoot,\r\n        // thead, or tr element, then, foster parent whatever last\r\n        // node ended up being in the previous step, first removing\r\n        // it from its previous parent node if any.\r\n        if (foster_parent_mode && isA(ancestor, tablesectionrowSet)) {\r\n          fosterParent(function() { return lastnode; });\r\n        }\r\n        // Otherwise, append whatever last node ended up being in\r\n        // the previous step to the common ancestor node, first\r\n        // removing it from its previous parent node if any.\r\n        else if (ancestor instanceof impl.HTMLTemplateElement) {\r\n          ancestor.content._appendChild(lastnode);\r\n        } else {\r\n          ancestor._appendChild(lastnode);\r\n        }\r\n\r\n        // Create an element for the token for which the\r\n        // formatting element was created, with furthest block\r\n        // as the intended parent.\r\n        var newelt2 = afeclone(furthestblock.ownerDocument, afe.indexOf(fmtelt));\r\n\r\n        // Take all of the child nodes of the furthest block and\r\n        // append them to the element created in the last step.\r\n        while(furthestblock.hasChildNodes()) {\r\n          newelt2.elt._appendChild(furthestblock.firstChild);\r\n        }\r\n\r\n        // Append that new element to the furthest block.\r\n        furthestblock._appendChild(newelt2.elt);\r\n\r\n        // Remove the formatting element from the list of active\r\n        // formatting elements, and insert the new element into the\r\n        // list of active formatting elements at the position of\r\n        // the aforementioned bookmark.\r\n        afe.remove(fmtelt);\r\n        afe.replace(BOOKMARK, newelt2.elt, newelt2.attrs);\r\n\r\n        // Remove the formatting element from the stack of open\r\n        // elements, and insert the new element into the stack of\r\n        // open elements immediately below the position of the\r\n        // furthest block in that stack.\r\n        stack.removeElement(fmtelt);\r\n        var pos = stack.elements.lastIndexOf(furthestblock);\r\n        stack.elements.splice(pos+1, 0, newelt2.elt);\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  // We do this when we get /script in in_text_mode\r\n  function handleScriptEnd() {\r\n    // XXX:\r\n    // This is just a stub implementation right now and doesn't run scripts.\r\n    // Getting this method right involves the event loop, URL resolution\r\n    // script fetching etc. For now I just want to be able to parse\r\n    // documents and test the parser.\r\n\r\n    //var script = stack.top;\r\n    stack.pop();\r\n    parser = originalInsertionMode;\r\n    //script._prepare();\r\n    return;\r\n\r\n    // XXX: here is what this method is supposed to do\r\n\r\n    // Provide a stable state.\r\n\r\n    // Let script be the current node (which will be a script\r\n    // element).\r\n\r\n    // Pop the current node off the stack of open elements.\r\n\r\n    // Switch the insertion mode to the original insertion mode.\r\n\r\n    // Let the old insertion point have the same value as the current\r\n    // insertion point. Let the insertion point be just before the\r\n    // next input character.\r\n\r\n    // Increment the parser's script nesting level by one.\r\n\r\n    // Prepare the script. This might cause some script to execute,\r\n    // which might cause new characters to be inserted into the\r\n    // tokenizer, and might cause the tokenizer to output more tokens,\r\n    // resulting in a reentrant invocation of the parser.\r\n\r\n    // Decrement the parser's script nesting level by one. If the\r\n    // parser's script nesting level is zero, then set the parser\r\n    // pause flag to false.\r\n\r\n    // Let the insertion point have the value of the old insertion\r\n    // point. (In other words, restore the insertion point to its\r\n    // previous value. This value might be the \"undefined\" value.)\r\n\r\n    // At this stage, if there is a pending parsing-blocking script,\r\n    // then:\r\n\r\n    // If the script nesting level is not zero:\r\n\r\n    //   Set the parser pause flag to true, and abort the processing\r\n    //   of any nested invocations of the tokenizer, yielding\r\n    //   control back to the caller. (Tokenization will resume when\r\n    //   the caller returns to the \"outer\" tree construction stage.)\r\n\r\n    //   The tree construction stage of this particular parser is\r\n    //   being called reentrantly, say from a call to\r\n    //   document.write().\r\n\r\n    // Otherwise:\r\n\r\n    //     Run these steps:\r\n\r\n    //       Let the script be the pending parsing-blocking\r\n    //       script. There is no longer a pending\r\n    //       parsing-blocking script.\r\n\r\n    //       Block the tokenizer for this instance of the HTML\r\n    //       parser, such that the event loop will not run tasks\r\n    //       that invoke the tokenizer.\r\n\r\n    //       If the parser's Document has a style sheet that is\r\n    //       blocking scripts or the script's \"ready to be\r\n    //       parser-executed\" flag is not set: spin the event\r\n    //       loop until the parser's Document has no style sheet\r\n    //       that is blocking scripts and the script's \"ready to\r\n    //       be parser-executed\" flag is set.\r\n\r\n    //       Unblock the tokenizer for this instance of the HTML\r\n    //       parser, such that tasks that invoke the tokenizer\r\n    //       can again be run.\r\n\r\n    //       Let the insertion point be just before the next\r\n    //       input character.\r\n\r\n    //       Increment the parser's script nesting level by one\r\n    //       (it should be zero before this step, so this sets\r\n    //       it to one).\r\n\r\n    //       Execute the script.\r\n\r\n    //       Decrement the parser's script nesting level by\r\n    //       one. If the parser's script nesting level is zero\r\n    //       (which it always should be at this point), then set\r\n    //       the parser pause flag to false.\r\n\r\n    //       Let the insertion point be undefined again.\r\n\r\n    //       If there is once again a pending parsing-blocking\r\n    //       script, then repeat these steps from step 1.\r\n\r\n\r\n  }\r\n\r\n  function stopParsing() {\r\n    // XXX This is just a temporary implementation to get the parser working.\r\n    // A full implementation involves scripts and events and the event loop.\r\n\r\n    // Remove the link from document to parser.\r\n    // This is instead of \"set the insertion point to undefined\".\r\n    // It means that document.write() can't write into the doc anymore.\r\n    delete doc._parser;\r\n\r\n    stack.elements.length = 0; // pop everything off\r\n\r\n    // If there is a window object associated with the document\r\n    // then trigger an load event on it\r\n    if (doc.defaultView) {\r\n      doc.defaultView.dispatchEvent(new impl.Event(\"load\",{}));\r\n    }\r\n\r\n  }\r\n\r\n  /****\r\n   * Tokenizer states\r\n   */\r\n\r\n  /**\r\n   * This file was partially mechanically generated from\r\n   * http://www.whatwg.org/specs/web-apps/current-work/multipage/tokenization.html\r\n   *\r\n   * After mechanical conversion, it was further converted from\r\n   * prose to JS by hand, but the intent is that it is a very\r\n   * faithful rendering of the HTML tokenization spec in\r\n   * JavaScript.\r\n   *\r\n   * It is not a goal of this tokenizer to detect or report\r\n   * parse errors.\r\n   *\r\n   * XXX The tokenizer is supposed to work with straight UTF32\r\n   * codepoints. But I don't think it has any dependencies on\r\n   * any character outside of the BMP so I think it is safe to\r\n   * pass it UTF16 characters. I don't think it will ever change\r\n   * state in the middle of a surrogate pair.\r\n   */\r\n\r\n  /*\r\n   * Each state is represented by a function.  For most states, the\r\n   * scanner simply passes the next character (as an integer\r\n   * codepoint) to the current state function and automatically\r\n   * consumes the character.  If the state function can't process\r\n   * the character it can call pushback() to push it back to the\r\n   * scanner.\r\n   *\r\n   * Some states require lookahead, though.  If a state function has\r\n   * a lookahead property, then it is invoked differently.  In this\r\n   * case, the scanner invokes the function with 3 arguments: 1) the\r\n   * next codepoint 2) a string of lookahead text 3) a boolean that\r\n   * is true if the lookahead goes all the way to the EOF. (XXX\r\n   * actually maybe this third is not necessary... the lookahead\r\n   * could just include \\uFFFF?)\r\n   *\r\n   * If the lookahead property of a state function is an integer, it\r\n   * specifies the number of characters required. If it is a string,\r\n   * then the scanner will scan for that string and return all\r\n   * characters up to and including that sequence, or up to EOF.  If\r\n   * the lookahead property is a regexp, then the scanner will match\r\n   * the regexp at the current point and return the matching string.\r\n   *\r\n   * States that require lookahead are responsible for explicitly\r\n   * consuming the characters they process. They do this by\r\n   * incrementing nextchar by the number of processed characters.\r\n   */\r\n  function reconsume(c, new_state) {\r\n    tokenizer = new_state;\r\n    nextchar--; // pushback\r\n  }\r\n\r\n  function data_state(c) {\r\n    switch(c) {\r\n    case 0x0026: // AMPERSAND\r\n      return_state = data_state;\r\n      tokenizer = character_reference_state;\r\n      break;\r\n    case 0x003C: // LESS-THAN SIGN\r\n      if (emitSimpleTag()) // Shortcut for <p>, <dl>, </div> etc.\r\n        break;\r\n      tokenizer = tag_open_state;\r\n      break;\r\n    case 0x0000: // NULL\r\n      // Usually null characters emitted by the tokenizer will be\r\n      // ignored by the tree builder, but sometimes they'll be\r\n      // converted to \\uFFFD.  I don't want to have the search every\r\n      // string emitted to replace NULs, so I'll set a flag\r\n      // if I've emitted a NUL.\r\n      textrun.push(c);\r\n      textIncludesNUL = true;\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      // Instead of just pushing a single character and then\r\n      // coming back to the very same place, lookahead and\r\n      // emit everything we can at once.\r\n      /*jshint -W030 */\r\n      emitCharsWhile(DATATEXT) || textrun.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function rcdata_state(c) {\r\n    // Save the open tag so we can find a matching close tag\r\n    switch(c) {\r\n    case 0x0026: // AMPERSAND\r\n      return_state = rcdata_state;\r\n      tokenizer = character_reference_state;\r\n      break;\r\n    case 0x003C: // LESS-THAN SIGN\r\n      tokenizer = rcdata_less_than_sign_state;\r\n      break;\r\n    case 0x0000: // NULL\r\n      textrun.push(0xFFFD); // REPLACEMENT CHARACTER\r\n      textIncludesNUL = true;\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      textrun.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function rawtext_state(c) {\r\n    switch(c) {\r\n    case 0x003C: // LESS-THAN SIGN\r\n      tokenizer = rawtext_less_than_sign_state;\r\n      break;\r\n    case 0x0000: // NULL\r\n      textrun.push(0xFFFD); // REPLACEMENT CHARACTER\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      /*jshint -W030 */\r\n      emitCharsWhile(RAWTEXT) || textrun.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function script_data_state(c) {\r\n    switch(c) {\r\n    case 0x003C: // LESS-THAN SIGN\r\n      tokenizer = script_data_less_than_sign_state;\r\n      break;\r\n    case 0x0000: // NULL\r\n      textrun.push(0xFFFD); // REPLACEMENT CHARACTER\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      /*jshint -W030 */\r\n      emitCharsWhile(RAWTEXT) || textrun.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function plaintext_state(c) {\r\n    switch(c) {\r\n    case 0x0000: // NULL\r\n      textrun.push(0xFFFD); // REPLACEMENT CHARACTER\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      /*jshint -W030 */\r\n      emitCharsWhile(PLAINTEXT) || textrun.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function tag_open_state(c) {\r\n    switch(c) {\r\n    case 0x0021: // EXCLAMATION MARK\r\n      tokenizer = markup_declaration_open_state;\r\n      break;\r\n    case 0x002F: // SOLIDUS\r\n      tokenizer = end_tag_open_state;\r\n      break;\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n    case 0x0061:  // [a-z]\r\n    case 0x0062:case 0x0063:case 0x0064:case 0x0065:case 0x0066:\r\n    case 0x0067:case 0x0068:case 0x0069:case 0x006A:case 0x006B:\r\n    case 0x006C:case 0x006D:case 0x006E:case 0x006F:case 0x0070:\r\n    case 0x0071:case 0x0072:case 0x0073:case 0x0074:case 0x0075:\r\n    case 0x0076:case 0x0077:case 0x0078:case 0x0079:case 0x007A:\r\n      beginTagName();\r\n      reconsume(c, tag_name_state);\r\n      break;\r\n    case 0x003F: // QUESTION MARK\r\n      reconsume(c, bogus_comment_state);\r\n      break;\r\n    default:\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      reconsume(c, data_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function end_tag_open_state(c) {\r\n    switch(c) {\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n    case 0x0061:  // [a-z]\r\n    case 0x0062:case 0x0063:case 0x0064:case 0x0065:case 0x0066:\r\n    case 0x0067:case 0x0068:case 0x0069:case 0x006A:case 0x006B:\r\n    case 0x006C:case 0x006D:case 0x006E:case 0x006F:case 0x0070:\r\n    case 0x0071:case 0x0072:case 0x0073:case 0x0074:case 0x0075:\r\n    case 0x0076:case 0x0077:case 0x0078:case 0x0079:case 0x007A:\r\n      beginEndTagName();\r\n      reconsume(c, tag_name_state);\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = data_state;\r\n      break;\r\n    case -1: // EOF\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      textrun.push(0x002F); // SOLIDUS\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      reconsume(c, bogus_comment_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function tag_name_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      tokenizer = before_attribute_name_state;\r\n      break;\r\n    case 0x002F: // SOLIDUS\r\n      tokenizer = self_closing_start_tag_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = data_state;\r\n      emitTag();\r\n      break;\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n      tagnamebuf += String.fromCharCode(c + 0x0020);\r\n      break;\r\n    case 0x0000: // NULL\r\n      tagnamebuf += String.fromCharCode(0xFFFD /* REPLACEMENT CHARACTER */);\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      tagnamebuf += getMatchingChars(TAGNAME);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function rcdata_less_than_sign_state(c) {\r\n    /* identical to the RAWTEXT less-than sign state, except s/RAWTEXT/RCDATA/g */\r\n    if (c === 0x002F) {  // SOLIDUS\r\n      beginTempBuf();\r\n      tokenizer = rcdata_end_tag_open_state;\r\n    }\r\n    else {\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      reconsume(c, rcdata_state);\r\n    }\r\n  }\r\n\r\n  function rcdata_end_tag_open_state(c) {\r\n    /* identical to the RAWTEXT (and Script data) end tag open state, except s/RAWTEXT/RCDATA/g */\r\n    switch(c) {\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n    case 0x0061:  // [a-z]\r\n    case 0x0062:case 0x0063:case 0x0064:case 0x0065:case 0x0066:\r\n    case 0x0067:case 0x0068:case 0x0069:case 0x006A:case 0x006B:\r\n    case 0x006C:case 0x006D:case 0x006E:case 0x006F:case 0x0070:\r\n    case 0x0071:case 0x0072:case 0x0073:case 0x0074:case 0x0075:\r\n    case 0x0076:case 0x0077:case 0x0078:case 0x0079:case 0x007A:\r\n      beginEndTagName();\r\n      reconsume(c, rcdata_end_tag_name_state);\r\n      break;\r\n    default:\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      textrun.push(0x002F); // SOLIDUS\r\n      reconsume(c, rcdata_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function rcdata_end_tag_name_state(c) {\r\n    /* identical to the RAWTEXT (and Script data) end tag name state, except s/RAWTEXT/RCDATA/g */\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      if (appropriateEndTag(tagnamebuf)) {\r\n        tokenizer = before_attribute_name_state;\r\n        return;\r\n      }\r\n      break;\r\n    case 0x002F: // SOLIDUS\r\n      if (appropriateEndTag(tagnamebuf)) {\r\n        tokenizer = self_closing_start_tag_state;\r\n        return;\r\n      }\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      if (appropriateEndTag(tagnamebuf)) {\r\n        tokenizer = data_state;\r\n        emitTag();\r\n        return;\r\n      }\r\n      break;\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n\r\n      tagnamebuf += String.fromCharCode(c + 0x0020);\r\n      tempbuf.push(c);\r\n      return;\r\n    case 0x0061:  // [a-z]\r\n    case 0x0062:case 0x0063:case 0x0064:case 0x0065:case 0x0066:\r\n    case 0x0067:case 0x0068:case 0x0069:case 0x006A:case 0x006B:\r\n    case 0x006C:case 0x006D:case 0x006E:case 0x006F:case 0x0070:\r\n    case 0x0071:case 0x0072:case 0x0073:case 0x0074:case 0x0075:\r\n    case 0x0076:case 0x0077:case 0x0078:case 0x0079:case 0x007A:\r\n\r\n      tagnamebuf += String.fromCharCode(c);\r\n      tempbuf.push(c);\r\n      return;\r\n    default:\r\n      break;\r\n    }\r\n\r\n    // If we don't return in one of the cases above, then this was not\r\n    // an appropriately matching close tag, so back out by emitting all\r\n    // the characters as text\r\n    textrun.push(0x003C); // LESS-THAN SIGN\r\n    textrun.push(0x002F); // SOLIDUS\r\n    pushAll(textrun, tempbuf);\r\n    reconsume(c, rcdata_state);\r\n  }\r\n\r\n  function rawtext_less_than_sign_state(c) {\r\n    /* identical to the RCDATA less-than sign state, except s/RCDATA/RAWTEXT/g\r\n     */\r\n    if (c === 0x002F) { // SOLIDUS\r\n      beginTempBuf();\r\n      tokenizer = rawtext_end_tag_open_state;\r\n    }\r\n    else {\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      reconsume(c, rawtext_state);\r\n    }\r\n  }\r\n\r\n  function rawtext_end_tag_open_state(c) {\r\n    /* identical to the RCDATA (and Script data) end tag open state, except s/RCDATA/RAWTEXT/g */\r\n    switch(c) {\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n    case 0x0061:  // [a-z]\r\n    case 0x0062:case 0x0063:case 0x0064:case 0x0065:case 0x0066:\r\n    case 0x0067:case 0x0068:case 0x0069:case 0x006A:case 0x006B:\r\n    case 0x006C:case 0x006D:case 0x006E:case 0x006F:case 0x0070:\r\n    case 0x0071:case 0x0072:case 0x0073:case 0x0074:case 0x0075:\r\n    case 0x0076:case 0x0077:case 0x0078:case 0x0079:case 0x007A:\r\n      beginEndTagName();\r\n      reconsume(c, rawtext_end_tag_name_state);\r\n      break;\r\n    default:\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      textrun.push(0x002F); // SOLIDUS\r\n      reconsume(c, rawtext_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function rawtext_end_tag_name_state(c) {\r\n    /* identical to the RCDATA (and Script data) end tag name state, except s/RCDATA/RAWTEXT/g */\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      if (appropriateEndTag(tagnamebuf)) {\r\n        tokenizer = before_attribute_name_state;\r\n        return;\r\n      }\r\n      break;\r\n    case 0x002F: // SOLIDUS\r\n      if (appropriateEndTag(tagnamebuf)) {\r\n        tokenizer = self_closing_start_tag_state;\r\n        return;\r\n      }\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      if (appropriateEndTag(tagnamebuf)) {\r\n        tokenizer = data_state;\r\n        emitTag();\r\n        return;\r\n      }\r\n      break;\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n      tagnamebuf += String.fromCharCode(c + 0x0020);\r\n      tempbuf.push(c);\r\n      return;\r\n    case 0x0061:  // [a-z]\r\n    case 0x0062:case 0x0063:case 0x0064:case 0x0065:case 0x0066:\r\n    case 0x0067:case 0x0068:case 0x0069:case 0x006A:case 0x006B:\r\n    case 0x006C:case 0x006D:case 0x006E:case 0x006F:case 0x0070:\r\n    case 0x0071:case 0x0072:case 0x0073:case 0x0074:case 0x0075:\r\n    case 0x0076:case 0x0077:case 0x0078:case 0x0079:case 0x007A:\r\n      tagnamebuf += String.fromCharCode(c);\r\n      tempbuf.push(c);\r\n      return;\r\n    default:\r\n      break;\r\n    }\r\n\r\n    // If we don't return in one of the cases above, then this was not\r\n    // an appropriately matching close tag, so back out by emitting all\r\n    // the characters as text\r\n    textrun.push(0x003C); // LESS-THAN SIGN\r\n    textrun.push(0x002F); // SOLIDUS\r\n    pushAll(textrun,tempbuf);\r\n    reconsume(c, rawtext_state);\r\n  }\r\n\r\n  function script_data_less_than_sign_state(c) {\r\n    switch(c) {\r\n    case 0x002F: // SOLIDUS\r\n      beginTempBuf();\r\n      tokenizer = script_data_end_tag_open_state;\r\n      break;\r\n    case 0x0021: // EXCLAMATION MARK\r\n      tokenizer = script_data_escape_start_state;\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      textrun.push(0x0021); // EXCLAMATION MARK\r\n      break;\r\n    default:\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      reconsume(c, script_data_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function script_data_end_tag_open_state(c) {\r\n    /* identical to the RCDATA (and RAWTEXT) end tag open state, except s/RCDATA/Script data/g */\r\n    switch(c) {\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n    case 0x0061:  // [a-z]\r\n    case 0x0062:case 0x0063:case 0x0064:case 0x0065:case 0x0066:\r\n    case 0x0067:case 0x0068:case 0x0069:case 0x006A:case 0x006B:\r\n    case 0x006C:case 0x006D:case 0x006E:case 0x006F:case 0x0070:\r\n    case 0x0071:case 0x0072:case 0x0073:case 0x0074:case 0x0075:\r\n    case 0x0076:case 0x0077:case 0x0078:case 0x0079:case 0x007A:\r\n      beginEndTagName();\r\n      reconsume(c, script_data_end_tag_name_state);\r\n      break;\r\n    default:\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      textrun.push(0x002F); // SOLIDUS\r\n      reconsume(c, script_data_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function script_data_end_tag_name_state(c) {\r\n    /* identical to the RCDATA (and RAWTEXT) end tag name state, except s/RCDATA/Script data/g */\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      if (appropriateEndTag(tagnamebuf)) {\r\n        tokenizer = before_attribute_name_state;\r\n        return;\r\n      }\r\n      break;\r\n    case 0x002F: // SOLIDUS\r\n      if (appropriateEndTag(tagnamebuf)) {\r\n        tokenizer = self_closing_start_tag_state;\r\n        return;\r\n      }\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      if (appropriateEndTag(tagnamebuf)) {\r\n        tokenizer = data_state;\r\n        emitTag();\r\n        return;\r\n      }\r\n      break;\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n\r\n      tagnamebuf += String.fromCharCode(c + 0x0020);\r\n      tempbuf.push(c);\r\n      return;\r\n    case 0x0061:  // [a-z]\r\n    case 0x0062:case 0x0063:case 0x0064:case 0x0065:case 0x0066:\r\n    case 0x0067:case 0x0068:case 0x0069:case 0x006A:case 0x006B:\r\n    case 0x006C:case 0x006D:case 0x006E:case 0x006F:case 0x0070:\r\n    case 0x0071:case 0x0072:case 0x0073:case 0x0074:case 0x0075:\r\n    case 0x0076:case 0x0077:case 0x0078:case 0x0079:case 0x007A:\r\n\r\n      tagnamebuf += String.fromCharCode(c);\r\n      tempbuf.push(c);\r\n      return;\r\n    default:\r\n      break;\r\n    }\r\n\r\n    // If we don't return in one of the cases above, then this was not\r\n    // an appropriately matching close tag, so back out by emitting all\r\n    // the characters as text\r\n    textrun.push(0x003C); // LESS-THAN SIGN\r\n    textrun.push(0x002F); // SOLIDUS\r\n    pushAll(textrun,tempbuf);\r\n    reconsume(c, script_data_state);\r\n  }\r\n\r\n  function script_data_escape_start_state(c) {\r\n    if (c === 0x002D) { // HYPHEN-MINUS\r\n      tokenizer = script_data_escape_start_dash_state;\r\n      textrun.push(0x002D); // HYPHEN-MINUS\r\n    }\r\n    else {\r\n      reconsume(c, script_data_state);\r\n    }\r\n  }\r\n\r\n  function script_data_escape_start_dash_state(c) {\r\n    if (c === 0x002D) { // HYPHEN-MINUS\r\n      tokenizer = script_data_escaped_dash_dash_state;\r\n      textrun.push(0x002D); // HYPHEN-MINUS\r\n    }\r\n    else {\r\n      reconsume(c, script_data_state);\r\n    }\r\n  }\r\n\r\n  function script_data_escaped_state(c) {\r\n    switch(c) {\r\n    case 0x002D: // HYPHEN-MINUS\r\n      tokenizer = script_data_escaped_dash_state;\r\n      textrun.push(0x002D); // HYPHEN-MINUS\r\n      break;\r\n    case 0x003C: // LESS-THAN SIGN\r\n      tokenizer = script_data_escaped_less_than_sign_state;\r\n      break;\r\n    case 0x0000: // NULL\r\n      textrun.push(0xFFFD); // REPLACEMENT CHARACTER\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      textrun.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function script_data_escaped_dash_state(c) {\r\n    switch(c) {\r\n    case 0x002D: // HYPHEN-MINUS\r\n      tokenizer = script_data_escaped_dash_dash_state;\r\n      textrun.push(0x002D); // HYPHEN-MINUS\r\n      break;\r\n    case 0x003C: // LESS-THAN SIGN\r\n      tokenizer = script_data_escaped_less_than_sign_state;\r\n      break;\r\n    case 0x0000: // NULL\r\n      tokenizer = script_data_escaped_state;\r\n      textrun.push(0xFFFD); // REPLACEMENT CHARACTER\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      tokenizer = script_data_escaped_state;\r\n      textrun.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function script_data_escaped_dash_dash_state(c) {\r\n    switch(c) {\r\n    case 0x002D: // HYPHEN-MINUS\r\n      textrun.push(0x002D); // HYPHEN-MINUS\r\n      break;\r\n    case 0x003C: // LESS-THAN SIGN\r\n      tokenizer = script_data_escaped_less_than_sign_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = script_data_state;\r\n      textrun.push(0x003E); // GREATER-THAN SIGN\r\n      break;\r\n    case 0x0000: // NULL\r\n      tokenizer = script_data_escaped_state;\r\n      textrun.push(0xFFFD); // REPLACEMENT CHARACTER\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      tokenizer = script_data_escaped_state;\r\n      textrun.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function script_data_escaped_less_than_sign_state(c) {\r\n    switch(c) {\r\n    case 0x002F: // SOLIDUS\r\n      beginTempBuf();\r\n      tokenizer = script_data_escaped_end_tag_open_state;\r\n      break;\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n    case 0x0061:  // [a-z]\r\n    case 0x0062:case 0x0063:case 0x0064:case 0x0065:case 0x0066:\r\n    case 0x0067:case 0x0068:case 0x0069:case 0x006A:case 0x006B:\r\n    case 0x006C:case 0x006D:case 0x006E:case 0x006F:case 0x0070:\r\n    case 0x0071:case 0x0072:case 0x0073:case 0x0074:case 0x0075:\r\n    case 0x0076:case 0x0077:case 0x0078:case 0x0079:case 0x007A:\r\n      beginTempBuf();\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      reconsume(c, script_data_double_escape_start_state);\r\n      break;\r\n    default:\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      reconsume(c, script_data_escaped_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function script_data_escaped_end_tag_open_state(c) {\r\n    switch(c) {\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n    case 0x0061:  // [a-z]\r\n    case 0x0062:case 0x0063:case 0x0064:case 0x0065:case 0x0066:\r\n    case 0x0067:case 0x0068:case 0x0069:case 0x006A:case 0x006B:\r\n    case 0x006C:case 0x006D:case 0x006E:case 0x006F:case 0x0070:\r\n    case 0x0071:case 0x0072:case 0x0073:case 0x0074:case 0x0075:\r\n    case 0x0076:case 0x0077:case 0x0078:case 0x0079:case 0x007A:\r\n      beginEndTagName();\r\n      reconsume(c, script_data_escaped_end_tag_name_state);\r\n      break;\r\n    default:\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      textrun.push(0x002F); // SOLIDUS\r\n      reconsume(c, script_data_escaped_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function script_data_escaped_end_tag_name_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      if (appropriateEndTag(tagnamebuf)) {\r\n        tokenizer = before_attribute_name_state;\r\n        return;\r\n      }\r\n      break;\r\n    case 0x002F: // SOLIDUS\r\n      if (appropriateEndTag(tagnamebuf)) {\r\n        tokenizer = self_closing_start_tag_state;\r\n        return;\r\n      }\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      if (appropriateEndTag(tagnamebuf)) {\r\n        tokenizer = data_state;\r\n        emitTag();\r\n        return;\r\n      }\r\n      break;\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n      tagnamebuf += String.fromCharCode(c + 0x0020);\r\n      tempbuf.push(c);\r\n      return;\r\n    case 0x0061:  // [a-z]\r\n    case 0x0062:case 0x0063:case 0x0064:case 0x0065:case 0x0066:\r\n    case 0x0067:case 0x0068:case 0x0069:case 0x006A:case 0x006B:\r\n    case 0x006C:case 0x006D:case 0x006E:case 0x006F:case 0x0070:\r\n    case 0x0071:case 0x0072:case 0x0073:case 0x0074:case 0x0075:\r\n    case 0x0076:case 0x0077:case 0x0078:case 0x0079:case 0x007A:\r\n      tagnamebuf += String.fromCharCode(c);\r\n      tempbuf.push(c);\r\n      return;\r\n    default:\r\n      break;\r\n    }\r\n\r\n    // We get here in the default case, and if the closing tagname\r\n    // is not an appropriate tagname.\r\n    textrun.push(0x003C); // LESS-THAN SIGN\r\n    textrun.push(0x002F); // SOLIDUS\r\n    pushAll(textrun,tempbuf);\r\n    reconsume(c, script_data_escaped_state);\r\n  }\r\n\r\n  function script_data_double_escape_start_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n    case 0x002F: // SOLIDUS\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      if (buf2str(tempbuf) === \"script\") {\r\n        tokenizer = script_data_double_escaped_state;\r\n      }\r\n      else {\r\n        tokenizer = script_data_escaped_state;\r\n      }\r\n      textrun.push(c);\r\n      break;\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n      tempbuf.push(c + 0x0020);\r\n      textrun.push(c);\r\n      break;\r\n    case 0x0061:  // [a-z]\r\n    case 0x0062:case 0x0063:case 0x0064:case 0x0065:case 0x0066:\r\n    case 0x0067:case 0x0068:case 0x0069:case 0x006A:case 0x006B:\r\n    case 0x006C:case 0x006D:case 0x006E:case 0x006F:case 0x0070:\r\n    case 0x0071:case 0x0072:case 0x0073:case 0x0074:case 0x0075:\r\n    case 0x0076:case 0x0077:case 0x0078:case 0x0079:case 0x007A:\r\n      tempbuf.push(c);\r\n      textrun.push(c);\r\n      break;\r\n    default:\r\n      reconsume(c, script_data_escaped_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function script_data_double_escaped_state(c) {\r\n    switch(c) {\r\n    case 0x002D: // HYPHEN-MINUS\r\n      tokenizer = script_data_double_escaped_dash_state;\r\n      textrun.push(0x002D); // HYPHEN-MINUS\r\n      break;\r\n    case 0x003C: // LESS-THAN SIGN\r\n      tokenizer = script_data_double_escaped_less_than_sign_state;\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      break;\r\n    case 0x0000: // NULL\r\n      textrun.push(0xFFFD); // REPLACEMENT CHARACTER\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      textrun.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function script_data_double_escaped_dash_state(c) {\r\n    switch(c) {\r\n    case 0x002D: // HYPHEN-MINUS\r\n      tokenizer = script_data_double_escaped_dash_dash_state;\r\n      textrun.push(0x002D); // HYPHEN-MINUS\r\n      break;\r\n    case 0x003C: // LESS-THAN SIGN\r\n      tokenizer = script_data_double_escaped_less_than_sign_state;\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      break;\r\n    case 0x0000: // NULL\r\n      tokenizer = script_data_double_escaped_state;\r\n      textrun.push(0xFFFD); // REPLACEMENT CHARACTER\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      tokenizer = script_data_double_escaped_state;\r\n      textrun.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function script_data_double_escaped_dash_dash_state(c) {\r\n    switch(c) {\r\n    case 0x002D: // HYPHEN-MINUS\r\n      textrun.push(0x002D); // HYPHEN-MINUS\r\n      break;\r\n    case 0x003C: // LESS-THAN SIGN\r\n      tokenizer = script_data_double_escaped_less_than_sign_state;\r\n      textrun.push(0x003C); // LESS-THAN SIGN\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = script_data_state;\r\n      textrun.push(0x003E); // GREATER-THAN SIGN\r\n      break;\r\n    case 0x0000: // NULL\r\n      tokenizer = script_data_double_escaped_state;\r\n      textrun.push(0xFFFD); // REPLACEMENT CHARACTER\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      tokenizer = script_data_double_escaped_state;\r\n      textrun.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function script_data_double_escaped_less_than_sign_state(c) {\r\n    if (c === 0x002F) { // SOLIDUS\r\n      beginTempBuf();\r\n      tokenizer = script_data_double_escape_end_state;\r\n      textrun.push(0x002F); // SOLIDUS\r\n    }\r\n    else {\r\n      reconsume(c, script_data_double_escaped_state);\r\n    }\r\n  }\r\n\r\n  function script_data_double_escape_end_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n    case 0x002F: // SOLIDUS\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      if (buf2str(tempbuf) === \"script\") {\r\n        tokenizer = script_data_escaped_state;\r\n      }\r\n      else {\r\n        tokenizer = script_data_double_escaped_state;\r\n      }\r\n      textrun.push(c);\r\n      break;\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n      tempbuf.push(c + 0x0020);\r\n      textrun.push(c);\r\n      break;\r\n    case 0x0061:  // [a-z]\r\n    case 0x0062:case 0x0063:case 0x0064:case 0x0065:case 0x0066:\r\n    case 0x0067:case 0x0068:case 0x0069:case 0x006A:case 0x006B:\r\n    case 0x006C:case 0x006D:case 0x006E:case 0x006F:case 0x0070:\r\n    case 0x0071:case 0x0072:case 0x0073:case 0x0074:case 0x0075:\r\n    case 0x0076:case 0x0077:case 0x0078:case 0x0079:case 0x007A:\r\n      tempbuf.push(c);\r\n      textrun.push(c);\r\n      break;\r\n    default:\r\n      reconsume(c, script_data_double_escaped_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function before_attribute_name_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      /* Ignore the character. */\r\n      break;\r\n    // For SOLIDUS, GREATER-THAN SIGN, and EOF, spec says \"reconsume in\r\n    // the after attribute name state\", but in our implementation that\r\n    // state always has an active attribute in attrnamebuf.  Just clone\r\n    // the rules here, without the addAttribute business.\r\n    case 0x002F: // SOLIDUS\r\n      tokenizer = self_closing_start_tag_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = data_state;\r\n      emitTag();\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    case 0x003D: // EQUALS SIGN\r\n      beginAttrName();\r\n      attrnamebuf += String.fromCharCode(c);\r\n      tokenizer = attribute_name_state;\r\n      break;\r\n    default:\r\n      if (handleSimpleAttribute()) break;\r\n      beginAttrName();\r\n      reconsume(c, attribute_name_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // beginAttrName() must have been called before this point\r\n  // There is an active attribute in attrnamebuf (but not attrvaluebuf)\r\n  function attribute_name_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n    case 0x002F: // SOLIDUS\r\n    case 0x003E: // GREATER-THAN SIGN\r\n    case -1: // EOF\r\n      reconsume(c, after_attribute_name_state);\r\n      break;\r\n    case 0x003D: // EQUALS SIGN\r\n      tokenizer = before_attribute_value_state;\r\n      break;\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n      attrnamebuf += String.fromCharCode(c + 0x0020);\r\n      break;\r\n    case 0x0000: // NULL\r\n      attrnamebuf += String.fromCharCode(0xFFFD /* REPLACEMENT CHARACTER */);\r\n      break;\r\n    case 0x0022: // QUOTATION MARK\r\n    case 0x0027: // APOSTROPHE\r\n    case 0x003C: // LESS-THAN SIGN\r\n      /* falls through */\r\n    default:\r\n      attrnamebuf += getMatchingChars(ATTRNAME);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // There is an active attribute in attrnamebuf, but not yet in attrvaluebuf.\r\n  function after_attribute_name_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      /* Ignore the character. */\r\n      break;\r\n    case 0x002F: // SOLIDUS\r\n      // Keep in sync with before_attribute_name_state.\r\n      addAttribute(attrnamebuf);\r\n      tokenizer = self_closing_start_tag_state;\r\n      break;\r\n    case 0x003D: // EQUALS SIGN\r\n      tokenizer = before_attribute_value_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      // Keep in sync with before_attribute_name_state.\r\n      tokenizer = data_state;\r\n      addAttribute(attrnamebuf);\r\n      emitTag();\r\n      break;\r\n    case -1: // EOF\r\n      // Keep in sync with before_attribute_name_state.\r\n      addAttribute(attrnamebuf);\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      addAttribute(attrnamebuf);\r\n      beginAttrName();\r\n      reconsume(c, attribute_name_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function before_attribute_value_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      /* Ignore the character. */\r\n      break;\r\n    case 0x0022: // QUOTATION MARK\r\n      beginAttrValue();\r\n      tokenizer = attribute_value_double_quoted_state;\r\n      break;\r\n    case 0x0027: // APOSTROPHE\r\n      beginAttrValue();\r\n      tokenizer = attribute_value_single_quoted_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      /* falls through */\r\n    default:\r\n      beginAttrValue();\r\n      reconsume(c, attribute_value_unquoted_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function attribute_value_double_quoted_state(c) {\r\n    switch(c) {\r\n    case 0x0022: // QUOTATION MARK\r\n      addAttribute(attrnamebuf, attrvaluebuf);\r\n      tokenizer = after_attribute_value_quoted_state;\r\n      break;\r\n    case 0x0026: // AMPERSAND\r\n      return_state = attribute_value_double_quoted_state;\r\n      tokenizer = character_reference_state;\r\n      break;\r\n    case 0x0000: // NULL\r\n      attrvaluebuf += String.fromCharCode(0xFFFD /* REPLACEMENT CHARACTER */);\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    case 0x000A: // LF\r\n      // this could be a converted \\r, so don't use getMatchingChars\r\n      attrvaluebuf += String.fromCharCode(c);\r\n      break;\r\n    default:\r\n      attrvaluebuf += getMatchingChars(DBLQUOTEATTRVAL);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function attribute_value_single_quoted_state(c) {\r\n    switch(c) {\r\n    case 0x0027: // APOSTROPHE\r\n      addAttribute(attrnamebuf, attrvaluebuf);\r\n      tokenizer = after_attribute_value_quoted_state;\r\n      break;\r\n    case 0x0026: // AMPERSAND\r\n      return_state = attribute_value_single_quoted_state;\r\n      tokenizer = character_reference_state;\r\n      break;\r\n    case 0x0000: // NULL\r\n      attrvaluebuf += String.fromCharCode(0xFFFD /* REPLACEMENT CHARACTER */);\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    case 0x000A: // LF\r\n      // this could be a converted \\r, so don't use getMatchingChars\r\n      attrvaluebuf += String.fromCharCode(c);\r\n      break;\r\n    default:\r\n      attrvaluebuf += getMatchingChars(SINGLEQUOTEATTRVAL);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function attribute_value_unquoted_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      addAttribute(attrnamebuf, attrvaluebuf);\r\n      tokenizer = before_attribute_name_state;\r\n      break;\r\n    case 0x0026: // AMPERSAND\r\n      return_state = attribute_value_unquoted_state;\r\n      tokenizer = character_reference_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      addAttribute(attrnamebuf, attrvaluebuf);\r\n      tokenizer = data_state;\r\n      emitTag();\r\n      break;\r\n    case 0x0000: // NULL\r\n      attrvaluebuf += String.fromCharCode(0xFFFD /* REPLACEMENT CHARACTER */);\r\n      break;\r\n    case -1: // EOF\r\n      nextchar--; // pushback\r\n      tokenizer = data_state;\r\n      break;\r\n    case 0x0022: // QUOTATION MARK\r\n    case 0x0027: // APOSTROPHE\r\n    case 0x003C: // LESS-THAN SIGN\r\n    case 0x003D: // EQUALS SIGN\r\n    case 0x0060: // GRAVE ACCENT\r\n      /* falls through */\r\n    default:\r\n      attrvaluebuf += getMatchingChars(UNQUOTEDATTRVAL);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function after_attribute_value_quoted_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      tokenizer = before_attribute_name_state;\r\n      break;\r\n    case 0x002F: // SOLIDUS\r\n      tokenizer = self_closing_start_tag_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = data_state;\r\n      emitTag();\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      reconsume(c, before_attribute_name_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function self_closing_start_tag_state(c) {\r\n    switch(c) {\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      // Set the <i>self-closing flag</i> of the current tag token.\r\n      tokenizer = data_state;\r\n      emitSelfClosingTag(true);\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      reconsume(c, before_attribute_name_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function bogus_comment_state(c, lookahead, eof) {\r\n    var len = lookahead.length;\r\n\r\n    if (eof) {\r\n      nextchar += len-1; // don't consume the eof\r\n    }\r\n    else {\r\n      nextchar += len;\r\n    }\r\n\r\n    var comment = lookahead.substring(0, len-1);\r\n\r\n    comment = comment.replace(/\\u0000/g,\"\\uFFFD\");\r\n    comment = comment.replace(/\\u000D\\u000A/g,\"\\u000A\");\r\n    comment = comment.replace(/\\u000D/g,\"\\u000A\");\r\n\r\n    insertToken(COMMENT, comment);\r\n    tokenizer = data_state;\r\n  }\r\n  bogus_comment_state.lookahead = \">\";\r\n\r\n  function markup_declaration_open_state(c, lookahead, eof) {\r\n    if (lookahead[0] === \"-\" && lookahead[1] === \"-\") {\r\n      nextchar += 2;\r\n      beginComment();\r\n      tokenizer = comment_start_state;\r\n      return;\r\n    }\r\n\r\n    if (lookahead.toUpperCase() === \"DOCTYPE\") {\r\n      nextchar += 7;\r\n      tokenizer = doctype_state;\r\n    }\r\n    else if (lookahead === \"[CDATA[\" && cdataAllowed()) {\r\n      nextchar += 7;\r\n      tokenizer = cdata_section_state;\r\n    }\r\n    else {\r\n      tokenizer = bogus_comment_state;\r\n    }\r\n  }\r\n  markup_declaration_open_state.lookahead = 7;\r\n\r\n  function comment_start_state(c) {\r\n    beginComment();\r\n    switch(c) {\r\n    case 0x002D: // HYPHEN-MINUS\r\n      tokenizer = comment_start_dash_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = data_state;\r\n      insertToken(COMMENT, buf2str(commentbuf));\r\n      break; /* see comment in comment end state */\r\n    default:\r\n      reconsume(c, comment_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function comment_start_dash_state(c) {\r\n    switch(c) {\r\n    case 0x002D: // HYPHEN-MINUS\r\n      tokenizer = comment_end_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = data_state;\r\n      insertToken(COMMENT, buf2str(commentbuf));\r\n      break;\r\n    case -1: // EOF\r\n      insertToken(COMMENT, buf2str(commentbuf));\r\n      emitEOF();\r\n      break; /* see comment in comment end state */\r\n    default:\r\n      commentbuf.push(0x002D /* HYPHEN-MINUS */);\r\n      reconsume(c, comment_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function comment_state(c) {\r\n    switch(c) {\r\n    case 0x003C: // LESS-THAN SIGN\r\n      commentbuf.push(c);\r\n      tokenizer = comment_less_than_sign_state;\r\n      break;\r\n    case 0x002D: // HYPHEN-MINUS\r\n      tokenizer = comment_end_dash_state;\r\n      break;\r\n    case 0x0000: // NULL\r\n      commentbuf.push(0xFFFD /* REPLACEMENT CHARACTER */);\r\n      break;\r\n    case -1: // EOF\r\n      insertToken(COMMENT, buf2str(commentbuf));\r\n      emitEOF();\r\n      break; /* see comment in comment end state */\r\n    default:\r\n      commentbuf.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function comment_less_than_sign_state(c) {\r\n    switch(c) {\r\n    case 0x0021: // EXCLAMATION MARK\r\n      commentbuf.push(c);\r\n      tokenizer = comment_less_than_sign_bang_state;\r\n      break;\r\n    case 0x003C: // LESS-THAN SIGN\r\n      commentbuf.push(c);\r\n      break;\r\n    default:\r\n      reconsume(c, comment_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function comment_less_than_sign_bang_state(c) {\r\n    switch(c) {\r\n    case 0x002D: // HYPHEN-MINUS\r\n      tokenizer = comment_less_than_sign_bang_dash_state;\r\n      break;\r\n    default:\r\n      reconsume(c, comment_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function comment_less_than_sign_bang_dash_state(c) {\r\n    switch(c) {\r\n    case 0x002D: // HYPHEN-MINUS\r\n      tokenizer = comment_less_than_sign_bang_dash_dash_state;\r\n      break;\r\n    default:\r\n      reconsume(c, comment_end_dash_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function comment_less_than_sign_bang_dash_dash_state(c) {\r\n    switch(c) {\r\n    case 0x003E: // GREATER-THAN SIGN\r\n    case -1: // EOF\r\n      reconsume(c, comment_end_state);\r\n      break;\r\n    default:\r\n      // parse error\r\n      reconsume(c, comment_end_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function comment_end_dash_state(c) {\r\n    switch(c) {\r\n    case 0x002D: // HYPHEN-MINUS\r\n      tokenizer = comment_end_state;\r\n      break;\r\n    case -1: // EOF\r\n      insertToken(COMMENT, buf2str(commentbuf));\r\n      emitEOF();\r\n      break; /* see comment in comment end state */\r\n    default:\r\n      commentbuf.push(0x002D /* HYPHEN-MINUS */);\r\n      reconsume(c, comment_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function comment_end_state(c) {\r\n    switch(c) {\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = data_state;\r\n      insertToken(COMMENT, buf2str(commentbuf));\r\n      break;\r\n    case 0x0021: // EXCLAMATION MARK\r\n      tokenizer = comment_end_bang_state;\r\n      break;\r\n    case 0x002D: // HYPHEN-MINUS\r\n      commentbuf.push(0x002D);\r\n      break;\r\n    case -1: // EOF\r\n      insertToken(COMMENT, buf2str(commentbuf));\r\n      emitEOF();\r\n      break; /* For security reasons: otherwise, hostile user could put a script in a comment e.g. in a blog comment and then DOS the server so that the end tag isn't read, and then the commented script tag would be treated as live code */\r\n    default:\r\n      commentbuf.push(0x002D);\r\n      commentbuf.push(0x002D);\r\n      reconsume(c, comment_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function comment_end_bang_state(c) {\r\n    switch(c) {\r\n    case 0x002D: // HYPHEN-MINUS\r\n      commentbuf.push(0x002D);\r\n      commentbuf.push(0x002D);\r\n      commentbuf.push(0x0021);\r\n      tokenizer = comment_end_dash_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = data_state;\r\n      insertToken(COMMENT, buf2str(commentbuf));\r\n      break;\r\n    case -1: // EOF\r\n      insertToken(COMMENT, buf2str(commentbuf));\r\n      emitEOF();\r\n      break; /* see comment in comment end state */\r\n    default:\r\n      commentbuf.push(0x002D);\r\n      commentbuf.push(0x002D);\r\n      commentbuf.push(0x0021);\r\n      reconsume(c, comment_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function doctype_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      tokenizer = before_doctype_name_state;\r\n      break;\r\n    case -1: // EOF\r\n      beginDoctype();\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      reconsume(c, before_doctype_name_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function before_doctype_name_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      /* Ignore the character. */\r\n      break;\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n      beginDoctype();\r\n      doctypenamebuf.push(c + 0x0020);\r\n      tokenizer = doctype_name_state;\r\n      break;\r\n    case 0x0000: // NULL\r\n      beginDoctype();\r\n      doctypenamebuf.push(0xFFFD);\r\n      tokenizer = doctype_name_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      beginDoctype();\r\n      forcequirks();\r\n      tokenizer = data_state;\r\n      emitDoctype();\r\n      break;\r\n    case -1: // EOF\r\n      beginDoctype();\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      beginDoctype();\r\n      doctypenamebuf.push(c);\r\n      tokenizer = doctype_name_state;\r\n      break;\r\n    }\r\n  }\r\n\r\n  function doctype_name_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      tokenizer = after_doctype_name_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = data_state;\r\n      emitDoctype();\r\n      break;\r\n    case 0x0041:  // [A-Z]\r\n    case 0x0042:case 0x0043:case 0x0044:case 0x0045:case 0x0046:\r\n    case 0x0047:case 0x0048:case 0x0049:case 0x004A:case 0x004B:\r\n    case 0x004C:case 0x004D:case 0x004E:case 0x004F:case 0x0050:\r\n    case 0x0051:case 0x0052:case 0x0053:case 0x0054:case 0x0055:\r\n    case 0x0056:case 0x0057:case 0x0058:case 0x0059:case 0x005A:\r\n      doctypenamebuf.push(c + 0x0020);\r\n      break;\r\n    case 0x0000: // NULL\r\n      doctypenamebuf.push(0xFFFD /* REPLACEMENT CHARACTER */);\r\n      break;\r\n    case -1: // EOF\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      doctypenamebuf.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function after_doctype_name_state(c, lookahead, eof) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      /* Ignore the character. */\r\n      nextchar += 1;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = data_state;\r\n      nextchar += 1;\r\n      emitDoctype();\r\n      break;\r\n    case -1: // EOF\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      lookahead = lookahead.toUpperCase();\r\n      if (lookahead === \"PUBLIC\") {\r\n        nextchar += 6;\r\n        tokenizer = after_doctype_public_keyword_state;\r\n      }\r\n      else if (lookahead === \"SYSTEM\") {\r\n        nextchar += 6;\r\n        tokenizer = after_doctype_system_keyword_state;\r\n      }\r\n      else {\r\n        forcequirks();\r\n        tokenizer = bogus_doctype_state;\r\n      }\r\n      break;\r\n    }\r\n  }\r\n  after_doctype_name_state.lookahead = 6;\r\n\r\n  function after_doctype_public_keyword_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      tokenizer = before_doctype_public_identifier_state;\r\n      break;\r\n    case 0x0022: // QUOTATION MARK\r\n      beginDoctypePublicId();\r\n      tokenizer = doctype_public_identifier_double_quoted_state;\r\n      break;\r\n    case 0x0027: // APOSTROPHE\r\n      beginDoctypePublicId();\r\n      tokenizer = doctype_public_identifier_single_quoted_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      forcequirks();\r\n      tokenizer = data_state;\r\n      emitDoctype();\r\n      break;\r\n    case -1: // EOF\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      forcequirks();\r\n      tokenizer = bogus_doctype_state;\r\n      break;\r\n    }\r\n  }\r\n\r\n  function before_doctype_public_identifier_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      /* Ignore the character. */\r\n      break;\r\n    case 0x0022: // QUOTATION MARK\r\n      beginDoctypePublicId();\r\n      tokenizer = doctype_public_identifier_double_quoted_state;\r\n      break;\r\n    case 0x0027: // APOSTROPHE\r\n      beginDoctypePublicId();\r\n      tokenizer = doctype_public_identifier_single_quoted_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      forcequirks();\r\n      tokenizer = data_state;\r\n      emitDoctype();\r\n      break;\r\n    case -1: // EOF\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      forcequirks();\r\n      tokenizer = bogus_doctype_state;\r\n      break;\r\n    }\r\n  }\r\n\r\n  function doctype_public_identifier_double_quoted_state(c) {\r\n    switch(c) {\r\n    case 0x0022: // QUOTATION MARK\r\n      tokenizer = after_doctype_public_identifier_state;\r\n      break;\r\n    case 0x0000: // NULL\r\n      doctypepublicbuf.push(0xFFFD /* REPLACEMENT CHARACTER */);\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      forcequirks();\r\n      tokenizer = data_state;\r\n      emitDoctype();\r\n      break;\r\n    case -1: // EOF\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      doctypepublicbuf.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function doctype_public_identifier_single_quoted_state(c) {\r\n    switch(c) {\r\n    case 0x0027: // APOSTROPHE\r\n      tokenizer = after_doctype_public_identifier_state;\r\n      break;\r\n    case 0x0000: // NULL\r\n      doctypepublicbuf.push(0xFFFD /* REPLACEMENT CHARACTER */);\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      forcequirks();\r\n      tokenizer = data_state;\r\n      emitDoctype();\r\n      break;\r\n    case -1: // EOF\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      doctypepublicbuf.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function after_doctype_public_identifier_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      tokenizer = between_doctype_public_and_system_identifiers_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = data_state;\r\n      emitDoctype();\r\n      break;\r\n    case 0x0022: // QUOTATION MARK\r\n      beginDoctypeSystemId();\r\n      tokenizer = doctype_system_identifier_double_quoted_state;\r\n      break;\r\n    case 0x0027: // APOSTROPHE\r\n      beginDoctypeSystemId();\r\n      tokenizer = doctype_system_identifier_single_quoted_state;\r\n      break;\r\n    case -1: // EOF\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      forcequirks();\r\n      tokenizer = bogus_doctype_state;\r\n      break;\r\n    }\r\n  }\r\n\r\n  function between_doctype_public_and_system_identifiers_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE Ignore the character.\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = data_state;\r\n      emitDoctype();\r\n      break;\r\n    case 0x0022: // QUOTATION MARK\r\n      beginDoctypeSystemId();\r\n      tokenizer = doctype_system_identifier_double_quoted_state;\r\n      break;\r\n    case 0x0027: // APOSTROPHE\r\n      beginDoctypeSystemId();\r\n      tokenizer = doctype_system_identifier_single_quoted_state;\r\n      break;\r\n    case -1: // EOF\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      forcequirks();\r\n      tokenizer = bogus_doctype_state;\r\n      break;\r\n    }\r\n  }\r\n\r\n  function after_doctype_system_keyword_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      tokenizer = before_doctype_system_identifier_state;\r\n      break;\r\n    case 0x0022: // QUOTATION MARK\r\n      beginDoctypeSystemId();\r\n      tokenizer = doctype_system_identifier_double_quoted_state;\r\n      break;\r\n    case 0x0027: // APOSTROPHE\r\n      beginDoctypeSystemId();\r\n      tokenizer = doctype_system_identifier_single_quoted_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      forcequirks();\r\n      tokenizer = data_state;\r\n      emitDoctype();\r\n      break;\r\n    case -1: // EOF\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      forcequirks();\r\n      tokenizer = bogus_doctype_state;\r\n      break;\r\n    }\r\n  }\r\n\r\n  function before_doctype_system_identifier_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE Ignore the character.\r\n      break;\r\n    case 0x0022: // QUOTATION MARK\r\n      beginDoctypeSystemId();\r\n      tokenizer = doctype_system_identifier_double_quoted_state;\r\n      break;\r\n    case 0x0027: // APOSTROPHE\r\n      beginDoctypeSystemId();\r\n      tokenizer = doctype_system_identifier_single_quoted_state;\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      forcequirks();\r\n      tokenizer = data_state;\r\n      emitDoctype();\r\n      break;\r\n    case -1: // EOF\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      forcequirks();\r\n      tokenizer = bogus_doctype_state;\r\n      break;\r\n    }\r\n  }\r\n\r\n  function doctype_system_identifier_double_quoted_state(c) {\r\n    switch(c) {\r\n    case 0x0022: // QUOTATION MARK\r\n      tokenizer = after_doctype_system_identifier_state;\r\n      break;\r\n    case 0x0000: // NULL\r\n      doctypesystembuf.push(0xFFFD /* REPLACEMENT CHARACTER */);\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      forcequirks();\r\n      tokenizer = data_state;\r\n      emitDoctype();\r\n      break;\r\n    case -1: // EOF\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      doctypesystembuf.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function doctype_system_identifier_single_quoted_state(c) {\r\n    switch(c) {\r\n    case 0x0027: // APOSTROPHE\r\n      tokenizer = after_doctype_system_identifier_state;\r\n      break;\r\n    case 0x0000: // NULL\r\n      doctypesystembuf.push(0xFFFD /* REPLACEMENT CHARACTER */);\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      forcequirks();\r\n      tokenizer = data_state;\r\n      emitDoctype();\r\n      break;\r\n    case -1: // EOF\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      doctypesystembuf.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function after_doctype_system_identifier_state(c) {\r\n    switch(c) {\r\n    case 0x0009: // CHARACTER TABULATION (tab)\r\n    case 0x000A: // LINE FEED (LF)\r\n    case 0x000C: // FORM FEED (FF)\r\n    case 0x0020: // SPACE\r\n      /* Ignore the character. */\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = data_state;\r\n      emitDoctype();\r\n      break;\r\n    case -1: // EOF\r\n      forcequirks();\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      tokenizer = bogus_doctype_state;\r\n      /* This does *not* set the DOCTYPE token's force-quirks flag. */\r\n      break;\r\n    }\r\n  }\r\n\r\n  function bogus_doctype_state(c) {\r\n    switch(c) {\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      tokenizer = data_state;\r\n      emitDoctype();\r\n      break;\r\n    case -1: // EOF\r\n      emitDoctype();\r\n      emitEOF();\r\n      break;\r\n    default:\r\n      /* Ignore the character. */\r\n      break;\r\n    }\r\n  }\r\n\r\n  function cdata_section_state(c) {\r\n    switch(c) {\r\n    case 0x005D: // RIGHT SQUARE BRACKET\r\n      tokenizer = cdata_section_bracket_state;\r\n      break;\r\n    case -1: // EOF\r\n      emitEOF();\r\n      break;\r\n    case 0x0000: // NULL\r\n      textIncludesNUL = true;\r\n      /* fall through */\r\n    default:\r\n      // Instead of just pushing a single character and then\r\n      // coming back to the very same place, lookahead and\r\n      // emit everything we can at once.\r\n      /*jshint -W030 */\r\n      emitCharsWhile(CDATATEXT) || textrun.push(c);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function cdata_section_bracket_state(c) {\r\n    switch(c) {\r\n    case 0x005D: // RIGHT SQUARE BRACKET\r\n      tokenizer = cdata_section_end_state;\r\n      break;\r\n    default:\r\n      textrun.push(0x005D);\r\n      reconsume(c, cdata_section_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function cdata_section_end_state(c) {\r\n    switch(c) {\r\n    case 0x005D: // RIGHT SQUARE BRACKET\r\n      textrun.push(0x005D);\r\n      break;\r\n    case 0x003E: // GREATER-THAN SIGN\r\n      flushText();\r\n      tokenizer = data_state;\r\n      break;\r\n    default:\r\n      textrun.push(0x005D);\r\n      textrun.push(0x005D);\r\n      reconsume(c, cdata_section_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function character_reference_state(c) {\r\n    beginTempBuf();\r\n    tempbuf.push(0x0026);\r\n    switch(c) {\r\n    case 0x0009: // TAB\r\n    case 0x000A: // LINE FEED\r\n    case 0x000C: // FORM FEED\r\n    case 0x0020: // SPACE\r\n    case 0x003C: // LESS-THAN SIGN\r\n    case 0x0026: // AMPERSAND\r\n    case -1: // EOF\r\n      reconsume(c, character_reference_end_state);\r\n      break;\r\n    case 0x0023: // NUMBER SIGN\r\n      tempbuf.push(c);\r\n      tokenizer = numeric_character_reference_state;\r\n      break;\r\n    default:\r\n      reconsume(c, named_character_reference_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function named_character_reference_state(c) {\r\n    NAMEDCHARREF.lastIndex = nextchar; // w/ lookahead no char has been consumed\r\n    var matched = NAMEDCHARREF.exec(chars);\r\n    if (!matched) throw new Error(\"should never happen\");\r\n    var name = matched[1];\r\n    if (!name) {\r\n      // If no match can be made, switch to the character reference end state\r\n      tokenizer = character_reference_end_state;\r\n      return;\r\n    }\r\n\r\n    // Consume the matched characters and append them to temporary buffer\r\n    nextchar += name.length;\r\n    pushAll(tempbuf, str2buf(name));\r\n\r\n    switch(return_state) {\r\n    case attribute_value_double_quoted_state:\r\n    case attribute_value_single_quoted_state:\r\n    case attribute_value_unquoted_state:\r\n      // If the character reference was consumed as part of an attribute...\r\n      if (name[name.length-1] !== ';') { // ...and the last char is not ;\r\n        if (/[=A-Za-z0-9]/.test(chars[nextchar])) {\r\n          tokenizer = character_reference_end_state;\r\n          return;\r\n        }\r\n      }\r\n      break;\r\n    default:\r\n      break;\r\n    }\r\n\r\n    beginTempBuf();\r\n    var rv = namedCharRefs[name];\r\n    if (typeof rv === 'number') {\r\n      tempbuf.push(rv);\r\n    } else {\r\n      pushAll(tempbuf, rv);\r\n    }\r\n    tokenizer = character_reference_end_state;\r\n  }\r\n  // We might need to pause tokenization until we have enough characters\r\n  // in the buffer for longest possible character reference.\r\n  named_character_reference_state.lookahead = -NAMEDCHARREF_MAXLEN;\r\n\r\n  function numeric_character_reference_state(c) {\r\n    character_reference_code = 0;\r\n    switch(c) {\r\n    case 0x0078: // x\r\n    case 0x0058: // X\r\n      tempbuf.push(c);\r\n      tokenizer = hexadecimal_character_reference_start_state;\r\n      break;\r\n    default:\r\n      reconsume(c, decimal_character_reference_start_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function hexadecimal_character_reference_start_state(c) {\r\n    switch(c) {\r\n    case 0x0030: case 0x0031: case 0x0032: case 0x0033: case 0x0034:\r\n    case 0x0035: case 0x0036: case 0x0037: case 0x0038: case 0x0039: // [0-9]\r\n    case 0x0041: case 0x0042: case 0x0043: case 0x0044: case 0x0045:\r\n    case 0x0046: // [A-F]\r\n    case 0x0061: case 0x0062: case 0x0063: case 0x0064: case 0x0065:\r\n    case 0x0066: // [a-f]\r\n      reconsume(c, hexadecimal_character_reference_state);\r\n      break;\r\n    default:\r\n      reconsume(c, character_reference_end_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function decimal_character_reference_start_state(c) {\r\n    switch(c) {\r\n    case 0x0030: case 0x0031: case 0x0032: case 0x0033: case 0x0034:\r\n    case 0x0035: case 0x0036: case 0x0037: case 0x0038: case 0x0039: // [0-9]\r\n      reconsume(c, decimal_character_reference_state);\r\n      break;\r\n    default:\r\n      reconsume(c, character_reference_end_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function hexadecimal_character_reference_state(c) {\r\n    switch(c) {\r\n    case 0x0041: case 0x0042: case 0x0043: case 0x0044: case 0x0045:\r\n    case 0x0046: // [A-F]\r\n      character_reference_code *= 16;\r\n      character_reference_code += (c - 0x0037);\r\n      break;\r\n    case 0x0061: case 0x0062: case 0x0063: case 0x0064: case 0x0065:\r\n    case 0x0066: // [a-f]\r\n      character_reference_code *= 16;\r\n      character_reference_code += (c - 0x0057);\r\n      break;\r\n    case 0x0030: case 0x0031: case 0x0032: case 0x0033: case 0x0034:\r\n    case 0x0035: case 0x0036: case 0x0037: case 0x0038: case 0x0039: // [0-9]\r\n      character_reference_code *= 16;\r\n      character_reference_code += (c - 0x0030);\r\n      break;\r\n    case 0x003B: // SEMICOLON\r\n      tokenizer = numeric_character_reference_end_state;\r\n      break;\r\n    default:\r\n      reconsume(c, numeric_character_reference_end_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function decimal_character_reference_state(c) {\r\n    switch(c) {\r\n    case 0x0030: case 0x0031: case 0x0032: case 0x0033: case 0x0034:\r\n    case 0x0035: case 0x0036: case 0x0037: case 0x0038: case 0x0039: // [0-9]\r\n      character_reference_code *= 10;\r\n      character_reference_code += (c - 0x0030);\r\n      break;\r\n    case 0x003B: // SEMICOLON\r\n      tokenizer = numeric_character_reference_end_state;\r\n      break;\r\n    default:\r\n      reconsume(c, numeric_character_reference_end_state);\r\n      break;\r\n    }\r\n  }\r\n\r\n  function numeric_character_reference_end_state(c) {\r\n    if (character_reference_code in numericCharRefReplacements) {\r\n      character_reference_code = numericCharRefReplacements[character_reference_code];\r\n    } else if (character_reference_code > 0x10FFFF || (character_reference_code >= 0xD800 && character_reference_code < 0xE000)) {\r\n      character_reference_code = 0xFFFD;\r\n    }\r\n\r\n    beginTempBuf();\r\n    if (character_reference_code <= 0xFFFF) {\r\n      tempbuf.push(character_reference_code);\r\n    } else {\r\n      character_reference_code = character_reference_code - 0x10000;\r\n      /* jshint bitwise: false */\r\n      tempbuf.push(0xD800 + (character_reference_code >> 10));\r\n      tempbuf.push(0xDC00 + (character_reference_code & 0x03FF));\r\n    }\r\n    reconsume(c, character_reference_end_state);\r\n  }\r\n\r\n  function character_reference_end_state(c) {\r\n    switch(return_state) {\r\n    case attribute_value_double_quoted_state:\r\n    case attribute_value_single_quoted_state:\r\n    case attribute_value_unquoted_state:\r\n      // append each character to the current attribute's value\r\n      attrvaluebuf += buf2str(tempbuf);\r\n      break;\r\n    default:\r\n      pushAll(textrun, tempbuf);\r\n      break;\r\n    }\r\n    reconsume(c, return_state);\r\n  }\r\n\r\n  /***\r\n   * The tree builder insertion modes\r\n   */\r\n\r\n  // 11.2.5.4.1 The \"initial\" insertion mode\r\n  function initial_mode(t, value, arg3, arg4) {\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      value = value.replace(LEADINGWS, \"\"); // Ignore spaces\r\n      if (value.length === 0) return; // Are we done?\r\n      break; // Handle anything non-space text below\r\n    case 4: // COMMENT\r\n      doc._appendChild(doc.createComment(value));\r\n      return;\r\n    case 5: // DOCTYPE\r\n      var name = value;\r\n      var publicid = arg3;\r\n      var systemid = arg4;\r\n      // Use the constructor directly instead of\r\n      // implementation.createDocumentType because the create\r\n      // function throws errors on invalid characters, and\r\n      // we don't want the parser to throw them.\r\n      doc.appendChild(new DocumentType(doc, name, publicid, systemid));\r\n\r\n      // Note that there is no public API for setting quirks mode We can\r\n      // do this here because we have access to implementation details\r\n      if (force_quirks ||\r\n        name.toLowerCase() !== \"html\" ||\r\n        quirkyPublicIds.test(publicid) ||\r\n        (systemid && systemid.toLowerCase() === quirkySystemId) ||\r\n        (systemid === undefined &&\r\n         conditionallyQuirkyPublicIds.test(publicid)))\r\n        doc._quirks = true;\r\n      else if (limitedQuirkyPublicIds.test(publicid) ||\r\n           (systemid !== undefined &&\r\n            conditionallyQuirkyPublicIds.test(publicid)))\r\n        doc._limitedQuirks = true;\r\n      parser = before_html_mode;\r\n      return;\r\n    }\r\n\r\n    // tags or non-whitespace text\r\n    doc._quirks = true;\r\n    parser = before_html_mode;\r\n    parser(t,value,arg3,arg4);\r\n  }\r\n\r\n  // 11.2.5.4.2 The \"before html\" insertion mode\r\n  function before_html_mode(t,value,arg3,arg4) {\r\n    var elt;\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      value = value.replace(LEADINGWS, \"\"); // Ignore spaces\r\n      if (value.length === 0) return; // Are we done?\r\n      break; // Handle anything non-space text below\r\n    case 5: // DOCTYPE\r\n      /* ignore the token */\r\n      return;\r\n    case 4: // COMMENT\r\n      doc._appendChild(doc.createComment(value));\r\n      return;\r\n    case 2: // TAG\r\n      if (value === \"html\") {\r\n        elt = createHTMLElt(doc, value, arg3);\r\n        stack.push(elt);\r\n        doc.appendChild(elt);\r\n        // XXX: handle application cache here\r\n        parser = before_head_mode;\r\n        return;\r\n      }\r\n      break;\r\n    case 3: // ENDTAG\r\n      switch(value) {\r\n      case \"html\":\r\n      case \"head\":\r\n      case \"body\":\r\n      case \"br\":\r\n        break;  // fall through on these\r\n      default:\r\n        return; // ignore most end tags\r\n      }\r\n    }\r\n\r\n    // Anything that didn't get handled above is handled like this:\r\n    elt = createHTMLElt(doc, \"html\", null);\r\n    stack.push(elt);\r\n    doc.appendChild(elt);\r\n    // XXX: handle application cache here\r\n    parser = before_head_mode;\r\n    parser(t,value,arg3,arg4);\r\n  }\r\n\r\n  // 11.2.5.4.3 The \"before head\" insertion mode\r\n  function before_head_mode(t,value,arg3,arg4) {\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      value = value.replace(LEADINGWS, \"\");  // Ignore spaces\r\n      if (value.length === 0) return; // Are we done?\r\n      break;  // Handle anything non-space text below\r\n    case 5: // DOCTYPE\r\n      /* ignore the token */\r\n      return;\r\n    case 4: // COMMENT\r\n      insertComment(value);\r\n      return;\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"html\":\r\n        in_body_mode(t,value,arg3,arg4);\r\n        return;\r\n      case \"head\":\r\n        var elt = insertHTMLElement(value, arg3);\r\n        head_element_pointer = elt;\r\n        parser = in_head_mode;\r\n        return;\r\n      }\r\n      break;\r\n    case 3: // ENDTAG\r\n      switch(value) {\r\n      case \"html\":\r\n      case \"head\":\r\n      case \"body\":\r\n      case \"br\":\r\n        break;\r\n      default:\r\n        return; // ignore most end tags\r\n      }\r\n    }\r\n\r\n    // If not handled explicitly above\r\n    before_head_mode(TAG, \"head\", null); // create a head tag\r\n    parser(t, value, arg3, arg4); // then try again with this token\r\n  }\r\n\r\n  function in_head_mode(t, value, arg3, arg4) {\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      var ws = value.match(LEADINGWS);\r\n      if (ws) {\r\n        insertText(ws[0]);\r\n        value = value.substring(ws[0].length);\r\n      }\r\n      if (value.length === 0) return;\r\n      break; // Handle non-whitespace below\r\n    case 4: // COMMENT\r\n      insertComment(value);\r\n      return;\r\n    case 5: // DOCTYPE\r\n      return;\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"html\":\r\n        in_body_mode(t, value, arg3, arg4);\r\n        return;\r\n      case \"meta\":\r\n        // XXX:\r\n        // May need to change the encoding based on this tag\r\n        /* falls through */\r\n      case \"base\":\r\n      case \"basefont\":\r\n      case \"bgsound\":\r\n      case \"link\":\r\n        insertHTMLElement(value, arg3);\r\n        stack.pop();\r\n        return;\r\n      case \"title\":\r\n        parseRCDATA(value, arg3);\r\n        return;\r\n      case \"noscript\":\r\n        if (!scripting_enabled) {\r\n          insertHTMLElement(value, arg3);\r\n          parser = in_head_noscript_mode;\r\n          return;\r\n        }\r\n        // Otherwise, if scripting is enabled...\r\n        /* falls through */\r\n      case \"noframes\":\r\n      case \"style\":\r\n        parseRawText(value,arg3);\r\n        return;\r\n      case \"script\":\r\n        insertElement(function(doc) {\r\n          var elt = createHTMLElt(doc, value, arg3);\r\n          elt._parser_inserted = true;\r\n          elt._force_async = false;\r\n          if (fragment) elt._already_started = true;\r\n          flushText();\r\n          return elt;\r\n        });\r\n        tokenizer = script_data_state;\r\n        originalInsertionMode = parser;\r\n        parser = text_mode;\r\n        return;\r\n      case \"template\":\r\n        insertHTMLElement(value, arg3);\r\n        afe.insertMarker();\r\n        frameset_ok = false;\r\n        parser = in_template_mode;\r\n        templateInsertionModes.push(parser);\r\n        return;\r\n      case \"head\":\r\n        return; // ignore it\r\n      }\r\n      break;\r\n    case 3: // ENDTAG\r\n      switch(value) {\r\n      case \"head\":\r\n        stack.pop();\r\n        parser = after_head_mode;\r\n        return;\r\n      case \"body\":\r\n      case \"html\":\r\n      case \"br\":\r\n        break; // handle these at the bottom of the function\r\n      case \"template\":\r\n        if (!stack.contains(\"template\")) {\r\n          return;\r\n        }\r\n        stack.generateImpliedEndTags(null, \"thorough\");\r\n        stack.popTag(\"template\");\r\n        afe.clearToMarker();\r\n        templateInsertionModes.pop();\r\n        resetInsertionMode();\r\n        return;\r\n      default:\r\n        // ignore any other end tag\r\n        return;\r\n      }\r\n      break;\r\n    }\r\n\r\n    // If not handled above\r\n    in_head_mode(ENDTAG, \"head\", null);   // synthetic </head>\r\n    parser(t, value, arg3, arg4);   // Then redo this one\r\n  }\r\n\r\n  // 13.2.5.4.5 The \"in head noscript\" insertion mode\r\n  function in_head_noscript_mode(t, value, arg3, arg4) {\r\n    switch(t) {\r\n    case 5: // DOCTYPE\r\n      return;\r\n    case 4: // COMMENT\r\n      in_head_mode(t, value);\r\n      return;\r\n    case 1: // TEXT\r\n      var ws = value.match(LEADINGWS);\r\n      if (ws) {\r\n        in_head_mode(t, ws[0]);\r\n        value = value.substring(ws[0].length);\r\n      }\r\n      if (value.length === 0) return; // no more text\r\n      break; // Handle non-whitespace below\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"html\":\r\n        in_body_mode(t, value, arg3, arg4);\r\n        return;\r\n      case \"basefont\":\r\n      case \"bgsound\":\r\n      case \"link\":\r\n      case \"meta\":\r\n      case \"noframes\":\r\n      case \"style\":\r\n        in_head_mode(t, value, arg3);\r\n        return;\r\n      case \"head\":\r\n      case \"noscript\":\r\n        return;\r\n      }\r\n      break;\r\n    case 3: // ENDTAG\r\n      switch(value) {\r\n      case \"noscript\":\r\n        stack.pop();\r\n        parser = in_head_mode;\r\n        return;\r\n      case \"br\":\r\n        break;  // goes to the outer default\r\n      default:\r\n        return; // ignore other end tags\r\n      }\r\n      break;\r\n    }\r\n\r\n    // If not handled above\r\n    in_head_noscript_mode(ENDTAG, \"noscript\", null);\r\n    parser(t, value, arg3, arg4);\r\n  }\r\n\r\n  function after_head_mode(t, value, arg3, arg4) {\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      var ws = value.match(LEADINGWS);\r\n      if (ws) {\r\n        insertText(ws[0]);\r\n        value = value.substring(ws[0].length);\r\n      }\r\n      if (value.length === 0) return;\r\n      break; // Handle non-whitespace below\r\n    case 4: // COMMENT\r\n      insertComment(value);\r\n      return;\r\n    case 5: // DOCTYPE\r\n      return;\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"html\":\r\n        in_body_mode(t, value, arg3, arg4);\r\n        return;\r\n      case \"body\":\r\n        insertHTMLElement(value, arg3);\r\n        frameset_ok = false;\r\n        parser = in_body_mode;\r\n        return;\r\n      case \"frameset\":\r\n        insertHTMLElement(value, arg3);\r\n        parser = in_frameset_mode;\r\n        return;\r\n      case \"base\":\r\n      case \"basefont\":\r\n      case \"bgsound\":\r\n      case \"link\":\r\n      case \"meta\":\r\n      case \"noframes\":\r\n      case \"script\":\r\n      case \"style\":\r\n      case \"template\":\r\n      case \"title\":\r\n        stack.push(head_element_pointer);\r\n        in_head_mode(TAG, value, arg3);\r\n        stack.removeElement(head_element_pointer);\r\n        return;\r\n      case \"head\":\r\n        return;\r\n      }\r\n      break;\r\n    case 3: // ENDTAG\r\n      switch(value) {\r\n      case \"template\":\r\n        return in_head_mode(t, value, arg3, arg4);\r\n      case \"body\":\r\n      case \"html\":\r\n      case \"br\":\r\n        break;\r\n      default:\r\n        return;  // ignore any other end tag\r\n      }\r\n      break;\r\n    }\r\n\r\n    after_head_mode(TAG, \"body\", null);\r\n    frameset_ok = true;\r\n    parser(t, value, arg3, arg4);\r\n  }\r\n\r\n  // 13.2.5.4.7 The \"in body\" insertion mode\r\n  function in_body_mode(t,value,arg3,arg4) {\r\n    var body, i, node, elt;\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      if (textIncludesNUL) {\r\n        value = value.replace(NULCHARS, \"\");\r\n        if (value.length === 0) return;\r\n      }\r\n      // If any non-space characters\r\n      if (frameset_ok && NONWS.test(value))\r\n        frameset_ok = false;\r\n      afereconstruct();\r\n      insertText(value);\r\n      return;\r\n    case 5: // DOCTYPE\r\n      return;\r\n    case 4: // COMMENT\r\n      insertComment(value);\r\n      return;\r\n    case -1: // EOF\r\n      if (templateInsertionModes.length) {\r\n        return in_template_mode(t);\r\n      }\r\n      stopParsing();\r\n      return;\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"html\":\r\n        if (stack.contains(\"template\")) {\r\n          return;\r\n        }\r\n        transferAttributes(arg3, stack.elements[0]);\r\n        return;\r\n      case \"base\":\r\n      case \"basefont\":\r\n      case \"bgsound\":\r\n      case \"link\":\r\n      case \"meta\":\r\n      case \"noframes\":\r\n      case \"script\":\r\n      case \"style\":\r\n      case \"template\":\r\n      case \"title\":\r\n        in_head_mode(TAG, value, arg3);\r\n        return;\r\n      case \"body\":\r\n        body = stack.elements[1];\r\n        if (!body || !(body instanceof impl.HTMLBodyElement) ||\r\n            stack.contains(\"template\"))\r\n          return;\r\n        frameset_ok = false;\r\n        transferAttributes(arg3, body);\r\n        return;\r\n      case \"frameset\":\r\n        if (!frameset_ok) return;\r\n        body = stack.elements[1];\r\n        if (!body || !(body instanceof impl.HTMLBodyElement))\r\n          return;\r\n        if (body.parentNode) body.parentNode.removeChild(body);\r\n        while(!(stack.top instanceof impl.HTMLHtmlElement))\r\n          stack.pop();\r\n        insertHTMLElement(value, arg3);\r\n        parser = in_frameset_mode;\r\n        return;\r\n\r\n      case \"address\":\r\n      case \"article\":\r\n      case \"aside\":\r\n      case \"blockquote\":\r\n      case \"center\":\r\n      case \"details\":\r\n      case \"dialog\":\r\n      case \"dir\":\r\n      case \"div\":\r\n      case \"dl\":\r\n      case \"fieldset\":\r\n      case \"figcaption\":\r\n      case \"figure\":\r\n      case \"footer\":\r\n      case \"header\":\r\n      case \"hgroup\":\r\n      case \"main\":\r\n      case \"nav\":\r\n      case \"ol\":\r\n      case \"p\":\r\n      case \"section\":\r\n      case \"summary\":\r\n      case \"ul\":\r\n        if (stack.inButtonScope(\"p\")) in_body_mode(ENDTAG, \"p\");\r\n        insertHTMLElement(value, arg3);\r\n        return;\r\n\r\n      case \"menu\":\r\n        if (stack.inButtonScope(\"p\")) in_body_mode(ENDTAG, \"p\");\r\n        if (isA(stack.top, 'menuitem')) {\r\n          stack.pop();\r\n        }\r\n        insertHTMLElement(value, arg3);\r\n        return;\r\n\r\n      case \"h1\":\r\n      case \"h2\":\r\n      case \"h3\":\r\n      case \"h4\":\r\n      case \"h5\":\r\n      case \"h6\":\r\n        if (stack.inButtonScope(\"p\")) in_body_mode(ENDTAG, \"p\");\r\n        if (stack.top instanceof impl.HTMLHeadingElement)\r\n          stack.pop();\r\n        insertHTMLElement(value, arg3);\r\n        return;\r\n\r\n      case \"pre\":\r\n      case \"listing\":\r\n        if (stack.inButtonScope(\"p\")) in_body_mode(ENDTAG, \"p\");\r\n        insertHTMLElement(value, arg3);\r\n        ignore_linefeed = true;\r\n        frameset_ok = false;\r\n        return;\r\n\r\n      case \"form\":\r\n        if (form_element_pointer && !stack.contains(\"template\")) return;\r\n        if (stack.inButtonScope(\"p\")) in_body_mode(ENDTAG, \"p\");\r\n        elt = insertHTMLElement(value, arg3);\r\n        if (!stack.contains(\"template\"))\r\n          form_element_pointer = elt;\r\n        return;\r\n\r\n      case \"li\":\r\n        frameset_ok = false;\r\n        for(i = stack.elements.length-1; i >= 0; i--) {\r\n          node = stack.elements[i];\r\n          if (node instanceof impl.HTMLLIElement) {\r\n            in_body_mode(ENDTAG, \"li\");\r\n            break;\r\n          }\r\n          if (isA(node, specialSet) && !isA(node, addressdivpSet))\r\n            break;\r\n        }\r\n        if (stack.inButtonScope(\"p\")) in_body_mode(ENDTAG, \"p\");\r\n        insertHTMLElement(value, arg3);\r\n        return;\r\n\r\n      case \"dd\":\r\n      case \"dt\":\r\n        frameset_ok = false;\r\n        for(i = stack.elements.length-1; i >= 0; i--) {\r\n          node = stack.elements[i];\r\n          if (isA(node, dddtSet)) {\r\n            in_body_mode(ENDTAG, node.localName);\r\n            break;\r\n          }\r\n          if (isA(node, specialSet) && !isA(node, addressdivpSet))\r\n            break;\r\n        }\r\n        if (stack.inButtonScope(\"p\")) in_body_mode(ENDTAG, \"p\");\r\n        insertHTMLElement(value, arg3);\r\n        return;\r\n\r\n      case \"plaintext\":\r\n        if (stack.inButtonScope(\"p\")) in_body_mode(ENDTAG, \"p\");\r\n        insertHTMLElement(value, arg3);\r\n        tokenizer = plaintext_state;\r\n        return;\r\n\r\n      case \"button\":\r\n        if (stack.inScope(\"button\")) {\r\n          in_body_mode(ENDTAG, \"button\");\r\n          parser(t, value, arg3, arg4);\r\n        }\r\n        else {\r\n          afereconstruct();\r\n          insertHTMLElement(value, arg3);\r\n          frameset_ok = false;\r\n        }\r\n        return;\r\n\r\n      case \"a\":\r\n        var activeElement = afe.findElementByTag(\"a\");\r\n        if (activeElement) {\r\n          in_body_mode(ENDTAG, value);\r\n          afe.remove(activeElement);\r\n          stack.removeElement(activeElement);\r\n        }\r\n        /* falls through */\r\n      case \"b\":\r\n      case \"big\":\r\n      case \"code\":\r\n      case \"em\":\r\n      case \"font\":\r\n      case \"i\":\r\n      case \"s\":\r\n      case \"small\":\r\n      case \"strike\":\r\n      case \"strong\":\r\n      case \"tt\":\r\n      case \"u\":\r\n        afereconstruct();\r\n        afe.push(insertHTMLElement(value,arg3), arg3);\r\n        return;\r\n\r\n      case \"nobr\":\r\n        afereconstruct();\r\n\r\n        if (stack.inScope(value)) {\r\n          in_body_mode(ENDTAG, value);\r\n          afereconstruct();\r\n        }\r\n        afe.push(insertHTMLElement(value,arg3), arg3);\r\n        return;\r\n\r\n      case \"applet\":\r\n      case \"marquee\":\r\n      case \"object\":\r\n        afereconstruct();\r\n        insertHTMLElement(value,arg3);\r\n        afe.insertMarker();\r\n        frameset_ok = false;\r\n        return;\r\n\r\n      case \"table\":\r\n        if (!doc._quirks && stack.inButtonScope(\"p\")) {\r\n          in_body_mode(ENDTAG, \"p\");\r\n        }\r\n        insertHTMLElement(value,arg3);\r\n        frameset_ok = false;\r\n        parser = in_table_mode;\r\n        return;\r\n\r\n      case \"area\":\r\n      case \"br\":\r\n      case \"embed\":\r\n      case \"img\":\r\n      case \"keygen\":\r\n      case \"wbr\":\r\n        afereconstruct();\r\n        insertHTMLElement(value,arg3);\r\n        stack.pop();\r\n        frameset_ok = false;\r\n        return;\r\n\r\n      case \"input\":\r\n        afereconstruct();\r\n        elt = insertHTMLElement(value,arg3);\r\n        stack.pop();\r\n        var type = elt.getAttribute(\"type\");\r\n        if (!type || type.toLowerCase() !== \"hidden\")\r\n          frameset_ok = false;\r\n        return;\r\n\r\n      case \"param\":\r\n      case \"source\":\r\n      case \"track\":\r\n        insertHTMLElement(value,arg3);\r\n        stack.pop();\r\n        return;\r\n\r\n      case \"hr\":\r\n        if (stack.inButtonScope(\"p\")) in_body_mode(ENDTAG, \"p\");\r\n        if (isA(stack.top, 'menuitem')) {\r\n          stack.pop();\r\n        }\r\n        insertHTMLElement(value,arg3);\r\n        stack.pop();\r\n        frameset_ok = false;\r\n        return;\r\n\r\n      case \"image\":\r\n        in_body_mode(TAG, \"img\", arg3, arg4);\r\n        return;\r\n\r\n      case \"textarea\":\r\n        insertHTMLElement(value,arg3);\r\n        ignore_linefeed = true;\r\n        frameset_ok = false;\r\n        tokenizer = rcdata_state;\r\n        originalInsertionMode = parser;\r\n        parser = text_mode;\r\n        return;\r\n\r\n      case \"xmp\":\r\n        if (stack.inButtonScope(\"p\")) in_body_mode(ENDTAG, \"p\");\r\n        afereconstruct();\r\n        frameset_ok = false;\r\n        parseRawText(value, arg3);\r\n        return;\r\n\r\n      case \"iframe\":\r\n        frameset_ok = false;\r\n        parseRawText(value, arg3);\r\n        return;\r\n\r\n      case \"noembed\":\r\n        parseRawText(value,arg3);\r\n        return;\r\n\r\n      case \"select\":\r\n        afereconstruct();\r\n        insertHTMLElement(value,arg3);\r\n        frameset_ok = false;\r\n        if (parser === in_table_mode ||\r\n          parser === in_caption_mode ||\r\n          parser === in_table_body_mode ||\r\n          parser === in_row_mode ||\r\n          parser === in_cell_mode)\r\n          parser = in_select_in_table_mode;\r\n        else\r\n          parser = in_select_mode;\r\n        return;\r\n\r\n      case \"optgroup\":\r\n      case \"option\":\r\n        if (stack.top instanceof impl.HTMLOptionElement) {\r\n          in_body_mode(ENDTAG, \"option\");\r\n        }\r\n        afereconstruct();\r\n        insertHTMLElement(value,arg3);\r\n        return;\r\n\r\n      case \"menuitem\":\r\n        if (isA(stack.top, 'menuitem')) {\r\n          stack.pop();\r\n        }\r\n        afereconstruct();\r\n        insertHTMLElement(value, arg3);\r\n        return;\r\n\r\n      case \"rb\":\r\n      case \"rtc\":\r\n        if (stack.inScope(\"ruby\")) {\r\n          stack.generateImpliedEndTags();\r\n        }\r\n        insertHTMLElement(value,arg3);\r\n        return;\r\n\r\n      case \"rp\":\r\n      case \"rt\":\r\n        if (stack.inScope(\"ruby\")) {\r\n          stack.generateImpliedEndTags(\"rtc\");\r\n        }\r\n        insertHTMLElement(value,arg3);\r\n        return;\r\n\r\n      case \"math\":\r\n        afereconstruct();\r\n        adjustMathMLAttributes(arg3);\r\n        adjustForeignAttributes(arg3);\r\n        insertForeignElement(value, arg3, NAMESPACE.MATHML);\r\n        if (arg4) // self-closing flag\r\n          stack.pop();\r\n        return;\r\n\r\n      case \"svg\":\r\n        afereconstruct();\r\n        adjustSVGAttributes(arg3);\r\n        adjustForeignAttributes(arg3);\r\n        insertForeignElement(value, arg3, NAMESPACE.SVG);\r\n        if (arg4) // self-closing flag\r\n          stack.pop();\r\n        return;\r\n\r\n      case \"caption\":\r\n      case \"col\":\r\n      case \"colgroup\":\r\n      case \"frame\":\r\n      case \"head\":\r\n      case \"tbody\":\r\n      case \"td\":\r\n      case \"tfoot\":\r\n      case \"th\":\r\n      case \"thead\":\r\n      case \"tr\":\r\n        // Ignore table tags if we're not in_table mode\r\n        return;\r\n      }\r\n\r\n      // Handle any other start tag here\r\n      // (and also noscript tags when scripting is disabled)\r\n      afereconstruct();\r\n      insertHTMLElement(value,arg3);\r\n      return;\r\n\r\n    case 3: // ENDTAG\r\n      switch(value) {\r\n      case \"template\":\r\n        in_head_mode(ENDTAG, value, arg3);\r\n        return;\r\n      case \"body\":\r\n        if (!stack.inScope(\"body\")) return;\r\n        parser = after_body_mode;\r\n        return;\r\n      case \"html\":\r\n        if (!stack.inScope(\"body\")) return;\r\n        parser = after_body_mode;\r\n        parser(t, value, arg3);\r\n        return;\r\n\r\n      case \"address\":\r\n      case \"article\":\r\n      case \"aside\":\r\n      case \"blockquote\":\r\n      case \"button\":\r\n      case \"center\":\r\n      case \"details\":\r\n      case \"dialog\":\r\n      case \"dir\":\r\n      case \"div\":\r\n      case \"dl\":\r\n      case \"fieldset\":\r\n      case \"figcaption\":\r\n      case \"figure\":\r\n      case \"footer\":\r\n      case \"header\":\r\n      case \"hgroup\":\r\n      case \"listing\":\r\n      case \"main\":\r\n      case \"menu\":\r\n      case \"nav\":\r\n      case \"ol\":\r\n      case \"pre\":\r\n      case \"section\":\r\n      case \"summary\":\r\n      case \"ul\":\r\n        // Ignore if there is not a matching open tag\r\n        if (!stack.inScope(value)) return;\r\n        stack.generateImpliedEndTags();\r\n        stack.popTag(value);\r\n        return;\r\n\r\n      case \"form\":\r\n        if (!stack.contains(\"template\")) {\r\n          var openform = form_element_pointer;\r\n          form_element_pointer = null;\r\n          if (!openform || !stack.elementInScope(openform)) return;\r\n          stack.generateImpliedEndTags();\r\n          stack.removeElement(openform);\r\n        } else {\r\n          if (!stack.inScope(\"form\")) return;\r\n          stack.generateImpliedEndTags();\r\n          stack.popTag(\"form\");\r\n        }\r\n        return;\r\n\r\n      case \"p\":\r\n        if (!stack.inButtonScope(value)) {\r\n          in_body_mode(TAG, value, null);\r\n          parser(t, value, arg3, arg4);\r\n        }\r\n        else {\r\n          stack.generateImpliedEndTags(value);\r\n          stack.popTag(value);\r\n        }\r\n        return;\r\n\r\n      case \"li\":\r\n        if (!stack.inListItemScope(value)) return;\r\n        stack.generateImpliedEndTags(value);\r\n        stack.popTag(value);\r\n        return;\r\n\r\n      case \"dd\":\r\n      case \"dt\":\r\n        if (!stack.inScope(value)) return;\r\n        stack.generateImpliedEndTags(value);\r\n        stack.popTag(value);\r\n        return;\r\n\r\n      case \"h1\":\r\n      case \"h2\":\r\n      case \"h3\":\r\n      case \"h4\":\r\n      case \"h5\":\r\n      case \"h6\":\r\n        if (!stack.elementTypeInScope(impl.HTMLHeadingElement)) return;\r\n        stack.generateImpliedEndTags();\r\n        stack.popElementType(impl.HTMLHeadingElement);\r\n        return;\r\n\r\n      case \"sarcasm\":\r\n        // Take a deep breath, and then:\r\n        break;\r\n\r\n      case \"a\":\r\n      case \"b\":\r\n      case \"big\":\r\n      case \"code\":\r\n      case \"em\":\r\n      case \"font\":\r\n      case \"i\":\r\n      case \"nobr\":\r\n      case \"s\":\r\n      case \"small\":\r\n      case \"strike\":\r\n      case \"strong\":\r\n      case \"tt\":\r\n      case \"u\":\r\n        var result = adoptionAgency(value);\r\n        if (result) return;  // If we did something we're done\r\n        break;         // Go to the \"any other end tag\" case\r\n\r\n      case \"applet\":\r\n      case \"marquee\":\r\n      case \"object\":\r\n        if (!stack.inScope(value)) return;\r\n        stack.generateImpliedEndTags();\r\n        stack.popTag(value);\r\n        afe.clearToMarker();\r\n        return;\r\n\r\n      case \"br\":\r\n        in_body_mode(TAG, value, null);  // Turn </br> into <br>\r\n        return;\r\n      }\r\n\r\n      // Any other end tag goes here\r\n      for(i = stack.elements.length-1; i >= 0; i--) {\r\n        node = stack.elements[i];\r\n        if (isA(node, value)) {\r\n          stack.generateImpliedEndTags(value);\r\n          stack.popElement(node);\r\n          break;\r\n        }\r\n        else if (isA(node, specialSet)) {\r\n          return;\r\n        }\r\n      }\r\n\r\n      return;\r\n    }\r\n  }\r\n\r\n  function text_mode(t, value, arg3, arg4) {\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      insertText(value);\r\n      return;\r\n    case -1: // EOF\r\n      if (stack.top instanceof impl.HTMLScriptElement)\r\n        stack.top._already_started = true;\r\n      stack.pop();\r\n      parser = originalInsertionMode;\r\n      parser(t);\r\n      return;\r\n    case 3: // ENDTAG\r\n      if (value === \"script\") {\r\n        handleScriptEnd();\r\n      }\r\n      else {\r\n        stack.pop();\r\n        parser = originalInsertionMode;\r\n      }\r\n      return;\r\n    default:\r\n      // We should never get any other token types\r\n      return;\r\n    }\r\n  }\r\n\r\n  function in_table_mode(t, value, arg3, arg4) {\r\n    function getTypeAttr(attrs) {\r\n      for(var i = 0, n = attrs.length; i < n; i++) {\r\n        if (attrs[i][0] === \"type\")\r\n          return attrs[i][1].toLowerCase();\r\n      }\r\n      return null;\r\n    }\r\n\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      // XXX the text_integration_mode stuff is\r\n      // just a hack I made up\r\n      if (text_integration_mode) {\r\n        in_body_mode(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n      else if (isA(stack.top, tablesectionrowSet)) {\r\n        pending_table_text = [];\r\n        originalInsertionMode = parser;\r\n        parser = in_table_text_mode;\r\n        parser(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n      break;\r\n    case 4: // COMMENT\r\n      insertComment(value);\r\n      return;\r\n    case 5: // DOCTYPE\r\n      return;\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"caption\":\r\n        stack.clearToContext(tableContextSet);\r\n        afe.insertMarker();\r\n        insertHTMLElement(value,arg3);\r\n        parser = in_caption_mode;\r\n        return;\r\n      case \"colgroup\":\r\n        stack.clearToContext(tableContextSet);\r\n        insertHTMLElement(value,arg3);\r\n        parser = in_column_group_mode;\r\n        return;\r\n      case \"col\":\r\n        in_table_mode(TAG, \"colgroup\", null);\r\n        parser(t, value, arg3, arg4);\r\n        return;\r\n      case \"tbody\":\r\n      case \"tfoot\":\r\n      case \"thead\":\r\n        stack.clearToContext(tableContextSet);\r\n        insertHTMLElement(value,arg3);\r\n        parser = in_table_body_mode;\r\n        return;\r\n      case \"td\":\r\n      case \"th\":\r\n      case \"tr\":\r\n        in_table_mode(TAG, \"tbody\", null);\r\n        parser(t, value, arg3, arg4);\r\n        return;\r\n\r\n      case \"table\":\r\n        if (!stack.inTableScope(value)) {\r\n          return; // Ignore the token\r\n        }\r\n        in_table_mode(ENDTAG, value);\r\n        parser(t, value, arg3, arg4);\r\n        return;\r\n\r\n      case \"style\":\r\n      case \"script\":\r\n      case \"template\":\r\n        in_head_mode(t, value, arg3, arg4);\r\n        return;\r\n\r\n      case \"input\":\r\n        var type = getTypeAttr(arg3);\r\n        if (type !== \"hidden\") break;  // to the anything else case\r\n        insertHTMLElement(value,arg3);\r\n        stack.pop();\r\n        return;\r\n\r\n      case \"form\":\r\n        if (form_element_pointer || stack.contains(\"template\")) return;\r\n        form_element_pointer = insertHTMLElement(value, arg3);\r\n        stack.popElement(form_element_pointer);\r\n        return;\r\n      }\r\n      break;\r\n    case 3: // ENDTAG\r\n      switch(value) {\r\n      case \"table\":\r\n        if (!stack.inTableScope(value)) return;\r\n        stack.popTag(value);\r\n        resetInsertionMode();\r\n        return;\r\n      case \"body\":\r\n      case \"caption\":\r\n      case \"col\":\r\n      case \"colgroup\":\r\n      case \"html\":\r\n      case \"tbody\":\r\n      case \"td\":\r\n      case \"tfoot\":\r\n      case \"th\":\r\n      case \"thead\":\r\n      case \"tr\":\r\n        return;\r\n      case \"template\":\r\n        in_head_mode(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n\r\n      break;\r\n    case -1: // EOF\r\n      in_body_mode(t, value, arg3, arg4);\r\n      return;\r\n    }\r\n\r\n    // This is the anything else case\r\n    foster_parent_mode = true;\r\n    in_body_mode(t, value, arg3, arg4);\r\n    foster_parent_mode = false;\r\n  }\r\n\r\n  function in_table_text_mode(t, value, arg3, arg4) {\r\n    if (t === TEXT) {\r\n      if (textIncludesNUL) {\r\n        value = value.replace(NULCHARS, \"\");\r\n        if (value.length === 0) return;\r\n      }\r\n      pending_table_text.push(value);\r\n    }\r\n    else {\r\n      var s = pending_table_text.join(\"\");\r\n      pending_table_text.length = 0;\r\n      if (NONWS.test(s)) { // If any non-whitespace characters\r\n        // This must be the same code as the \"anything else\"\r\n        // case of the in_table mode above.\r\n        foster_parent_mode = true;\r\n        in_body_mode(TEXT, s);\r\n        foster_parent_mode = false;\r\n      }\r\n      else {\r\n        insertText(s);\r\n      }\r\n      parser = originalInsertionMode;\r\n      parser(t, value, arg3, arg4);\r\n    }\r\n  }\r\n\r\n\r\n  function in_caption_mode(t, value, arg3, arg4) {\r\n    function end_caption() {\r\n      if (!stack.inTableScope(\"caption\")) return false;\r\n      stack.generateImpliedEndTags();\r\n      stack.popTag(\"caption\");\r\n      afe.clearToMarker();\r\n      parser = in_table_mode;\r\n      return true;\r\n    }\r\n\r\n    switch(t) {\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"caption\":\r\n      case \"col\":\r\n      case \"colgroup\":\r\n      case \"tbody\":\r\n      case \"td\":\r\n      case \"tfoot\":\r\n      case \"th\":\r\n      case \"thead\":\r\n      case \"tr\":\r\n        if (end_caption()) parser(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n      break;\r\n    case 3: // ENDTAG\r\n      switch(value) {\r\n      case \"caption\":\r\n        end_caption();\r\n        return;\r\n      case \"table\":\r\n        if (end_caption()) parser(t, value, arg3, arg4);\r\n        return;\r\n      case \"body\":\r\n      case \"col\":\r\n      case \"colgroup\":\r\n      case \"html\":\r\n      case \"tbody\":\r\n      case \"td\":\r\n      case \"tfoot\":\r\n      case \"th\":\r\n      case \"thead\":\r\n      case \"tr\":\r\n        return;\r\n      }\r\n      break;\r\n    }\r\n\r\n    // The Anything Else case\r\n    in_body_mode(t, value, arg3, arg4);\r\n  }\r\n\r\n  function in_column_group_mode(t, value, arg3, arg4) {\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      var ws = value.match(LEADINGWS);\r\n      if (ws) {\r\n        insertText(ws[0]);\r\n        value = value.substring(ws[0].length);\r\n      }\r\n      if (value.length === 0) return;\r\n      break; // Handle non-whitespace below\r\n\r\n    case 4: // COMMENT\r\n      insertComment(value);\r\n      return;\r\n    case 5: // DOCTYPE\r\n      return;\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"html\":\r\n        in_body_mode(t, value, arg3, arg4);\r\n        return;\r\n      case \"col\":\r\n        insertHTMLElement(value, arg3);\r\n        stack.pop();\r\n        return;\r\n      case \"template\":\r\n        in_head_mode(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n      break;\r\n    case 3: // ENDTAG\r\n      switch(value) {\r\n      case \"colgroup\":\r\n        if (!isA(stack.top, 'colgroup')) {\r\n          return; // Ignore the token.\r\n        }\r\n        stack.pop();\r\n        parser = in_table_mode;\r\n        return;\r\n      case \"col\":\r\n        return;\r\n      case \"template\":\r\n        in_head_mode(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n      break;\r\n    case -1: // EOF\r\n      in_body_mode(t, value, arg3, arg4);\r\n      return;\r\n    }\r\n\r\n    // Anything else\r\n    if (!isA(stack.top, 'colgroup')) {\r\n      return; // Ignore the token.\r\n    }\r\n    in_column_group_mode(ENDTAG, \"colgroup\");\r\n    parser(t, value, arg3, arg4);\r\n  }\r\n\r\n  function in_table_body_mode(t, value, arg3, arg4) {\r\n    function endsect() {\r\n      if (!stack.inTableScope(\"tbody\") &&\r\n        !stack.inTableScope(\"thead\") &&\r\n        !stack.inTableScope(\"tfoot\"))\r\n        return;\r\n      stack.clearToContext(tableBodyContextSet);\r\n      in_table_body_mode(ENDTAG, stack.top.localName, null);\r\n      parser(t, value, arg3, arg4);\r\n    }\r\n\r\n    switch(t) {\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"tr\":\r\n        stack.clearToContext(tableBodyContextSet);\r\n        insertHTMLElement(value, arg3);\r\n        parser = in_row_mode;\r\n        return;\r\n      case \"th\":\r\n      case \"td\":\r\n        in_table_body_mode(TAG, \"tr\", null);\r\n        parser(t, value, arg3, arg4);\r\n        return;\r\n      case \"caption\":\r\n      case \"col\":\r\n      case \"colgroup\":\r\n      case \"tbody\":\r\n      case \"tfoot\":\r\n      case \"thead\":\r\n        endsect();\r\n        return;\r\n      }\r\n      break;\r\n    case 3: // ENDTAG\r\n      switch(value) {\r\n      case \"table\":\r\n        endsect();\r\n        return;\r\n      case \"tbody\":\r\n      case \"tfoot\":\r\n      case \"thead\":\r\n        if (stack.inTableScope(value)) {\r\n          stack.clearToContext(tableBodyContextSet);\r\n          stack.pop();\r\n          parser = in_table_mode;\r\n        }\r\n        return;\r\n      case \"body\":\r\n      case \"caption\":\r\n      case \"col\":\r\n      case \"colgroup\":\r\n      case \"html\":\r\n      case \"td\":\r\n      case \"th\":\r\n      case \"tr\":\r\n        return;\r\n      }\r\n      break;\r\n    }\r\n\r\n    // Anything else:\r\n    in_table_mode(t, value, arg3, arg4);\r\n  }\r\n\r\n  function in_row_mode(t, value, arg3, arg4) {\r\n    function endrow() {\r\n      if (!stack.inTableScope(\"tr\")) return false;\r\n      stack.clearToContext(tableRowContextSet);\r\n      stack.pop();\r\n      parser = in_table_body_mode;\r\n      return true;\r\n    }\r\n\r\n    switch(t) {\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"th\":\r\n      case \"td\":\r\n        stack.clearToContext(tableRowContextSet);\r\n        insertHTMLElement(value, arg3);\r\n        parser = in_cell_mode;\r\n        afe.insertMarker();\r\n        return;\r\n      case \"caption\":\r\n      case \"col\":\r\n      case \"colgroup\":\r\n      case \"tbody\":\r\n      case \"tfoot\":\r\n      case \"thead\":\r\n      case \"tr\":\r\n        if (endrow()) parser(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n      break;\r\n    case 3: // ENDTAG\r\n      switch(value) {\r\n      case \"tr\":\r\n        endrow();\r\n        return;\r\n      case \"table\":\r\n        if (endrow()) parser(t, value, arg3, arg4);\r\n        return;\r\n      case \"tbody\":\r\n      case \"tfoot\":\r\n      case \"thead\":\r\n        if (stack.inTableScope(value)) {\r\n          if (endrow()) parser(t, value, arg3, arg4);\r\n        }\r\n        return;\r\n      case \"body\":\r\n      case \"caption\":\r\n      case \"col\":\r\n      case \"colgroup\":\r\n      case \"html\":\r\n      case \"td\":\r\n      case \"th\":\r\n        return;\r\n      }\r\n      break;\r\n    }\r\n\r\n    // anything else\r\n    in_table_mode(t, value, arg3, arg4);\r\n  }\r\n\r\n  function in_cell_mode(t, value, arg3, arg4) {\r\n    switch(t) {\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"caption\":\r\n      case \"col\":\r\n      case \"colgroup\":\r\n      case \"tbody\":\r\n      case \"td\":\r\n      case \"tfoot\":\r\n      case \"th\":\r\n      case \"thead\":\r\n      case \"tr\":\r\n        if (stack.inTableScope(\"td\")) {\r\n          in_cell_mode(ENDTAG, \"td\");\r\n          parser(t, value, arg3, arg4);\r\n        }\r\n        else if (stack.inTableScope(\"th\")) {\r\n          in_cell_mode(ENDTAG, \"th\");\r\n          parser(t, value, arg3, arg4);\r\n        }\r\n        return;\r\n      }\r\n      break;\r\n    case 3: // ENDTAG\r\n      switch(value) {\r\n      case \"td\":\r\n      case \"th\":\r\n        if (!stack.inTableScope(value)) return;\r\n        stack.generateImpliedEndTags();\r\n        stack.popTag(value);\r\n        afe.clearToMarker();\r\n        parser = in_row_mode;\r\n        return;\r\n\r\n      case \"body\":\r\n      case \"caption\":\r\n      case \"col\":\r\n      case \"colgroup\":\r\n      case \"html\":\r\n        return;\r\n\r\n      case \"table\":\r\n      case \"tbody\":\r\n      case \"tfoot\":\r\n      case \"thead\":\r\n      case \"tr\":\r\n        if (!stack.inTableScope(value)) return;\r\n        in_cell_mode(ENDTAG, stack.inTableScope(\"td\") ? \"td\" : \"th\");\r\n        parser(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n      break;\r\n    }\r\n\r\n    // anything else\r\n    in_body_mode(t, value, arg3, arg4);\r\n  }\r\n\r\n  function in_select_mode(t, value, arg3, arg4) {\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      if (textIncludesNUL) {\r\n        value = value.replace(NULCHARS, \"\");\r\n        if (value.length === 0) return;\r\n      }\r\n      insertText(value);\r\n      return;\r\n    case 4: // COMMENT\r\n      insertComment(value);\r\n      return;\r\n    case 5: // DOCTYPE\r\n      return;\r\n    case -1: // EOF\r\n      in_body_mode(t, value, arg3, arg4);\r\n      return;\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"html\":\r\n        in_body_mode(t, value, arg3, arg4);\r\n        return;\r\n      case \"option\":\r\n        if (stack.top instanceof impl.HTMLOptionElement)\r\n          in_select_mode(ENDTAG, value);\r\n        insertHTMLElement(value, arg3);\r\n        return;\r\n      case \"optgroup\":\r\n        if (stack.top instanceof impl.HTMLOptionElement)\r\n          in_select_mode(ENDTAG, \"option\");\r\n        if (stack.top instanceof impl.HTMLOptGroupElement)\r\n          in_select_mode(ENDTAG, value);\r\n        insertHTMLElement(value, arg3);\r\n        return;\r\n      case \"select\":\r\n        in_select_mode(ENDTAG, value); // treat it as a close tag\r\n        return;\r\n\r\n      case \"input\":\r\n      case \"keygen\":\r\n      case \"textarea\":\r\n        if (!stack.inSelectScope(\"select\")) return;\r\n        in_select_mode(ENDTAG, \"select\");\r\n        parser(t, value, arg3, arg4);\r\n        return;\r\n\r\n      case \"script\":\r\n      case \"template\":\r\n        in_head_mode(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n      break;\r\n    case 3: // ENDTAG\r\n      switch(value) {\r\n      case \"optgroup\":\r\n        if (stack.top instanceof impl.HTMLOptionElement &&\r\n          stack.elements[stack.elements.length-2] instanceof\r\n          impl.HTMLOptGroupElement) {\r\n          in_select_mode(ENDTAG, \"option\");\r\n        }\r\n        if (stack.top instanceof impl.HTMLOptGroupElement)\r\n          stack.pop();\r\n\r\n        return;\r\n\r\n      case \"option\":\r\n        if (stack.top instanceof impl.HTMLOptionElement)\r\n          stack.pop();\r\n        return;\r\n\r\n      case \"select\":\r\n        if (!stack.inSelectScope(value)) return;\r\n        stack.popTag(value);\r\n        resetInsertionMode();\r\n        return;\r\n\r\n      case \"template\":\r\n        in_head_mode(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n\r\n      break;\r\n    }\r\n\r\n    // anything else: just ignore the token\r\n  }\r\n\r\n  function in_select_in_table_mode(t, value, arg3, arg4) {\r\n    switch(value) {\r\n    case \"caption\":\r\n    case \"table\":\r\n    case \"tbody\":\r\n    case \"tfoot\":\r\n    case \"thead\":\r\n    case \"tr\":\r\n    case \"td\":\r\n    case \"th\":\r\n      switch(t) {\r\n      case 2: // TAG\r\n        in_select_in_table_mode(ENDTAG, \"select\");\r\n        parser(t, value, arg3, arg4);\r\n        return;\r\n      case 3: // ENDTAG\r\n        if (stack.inTableScope(value)) {\r\n          in_select_in_table_mode(ENDTAG, \"select\");\r\n          parser(t, value, arg3, arg4);\r\n        }\r\n        return;\r\n      }\r\n    }\r\n\r\n    // anything else\r\n    in_select_mode(t, value, arg3, arg4);\r\n  }\r\n\r\n  function in_template_mode(t, value, arg3, arg4) {\r\n    function switchModeAndReprocess(mode) {\r\n      parser = mode;\r\n      templateInsertionModes[templateInsertionModes.length-1] = parser;\r\n      parser(t, value, arg3, arg4);\r\n    }\r\n    switch(t) {\r\n    case 1: // TEXT\r\n    case 4: // COMMENT\r\n    case 5: // DOCTYPE\r\n      in_body_mode(t, value, arg3, arg4);\r\n      return;\r\n    case -1: // EOF\r\n      if (!stack.contains(\"template\")) {\r\n        stopParsing();\r\n      } else {\r\n        stack.popTag(\"template\");\r\n        afe.clearToMarker();\r\n        templateInsertionModes.pop();\r\n        resetInsertionMode();\r\n        parser(t, value, arg3, arg4);\r\n      }\r\n      return;\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"base\":\r\n      case \"basefont\":\r\n      case \"bgsound\":\r\n      case \"link\":\r\n      case \"meta\":\r\n      case \"noframes\":\r\n      case \"script\":\r\n      case \"style\":\r\n      case \"template\":\r\n      case \"title\":\r\n        in_head_mode(t, value, arg3, arg4);\r\n        return;\r\n      case \"caption\":\r\n      case \"colgroup\":\r\n      case \"tbody\":\r\n      case \"tfoot\":\r\n      case \"thead\":\r\n        switchModeAndReprocess(in_table_mode);\r\n        return;\r\n      case \"col\":\r\n        switchModeAndReprocess(in_column_group_mode);\r\n        return;\r\n      case \"tr\":\r\n        switchModeAndReprocess(in_table_body_mode);\r\n        return;\r\n      case \"td\":\r\n      case \"th\":\r\n        switchModeAndReprocess(in_row_mode);\r\n        return;\r\n      }\r\n      switchModeAndReprocess(in_body_mode);\r\n      return;\r\n    case 3: // ENDTAG\r\n      switch(value) {\r\n      case \"template\":\r\n        in_head_mode(t, value, arg3, arg4);\r\n        return;\r\n      default:\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  function after_body_mode(t, value, arg3, arg4) {\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      // If any non-space chars, handle below\r\n      if (NONWS.test(value)) break;\r\n      in_body_mode(t, value);\r\n      return;\r\n    case 4: // COMMENT\r\n      // Append it to the <html> element\r\n      stack.elements[0]._appendChild(doc.createComment(value));\r\n      return;\r\n    case 5: // DOCTYPE\r\n      return;\r\n    case -1: // EOF\r\n      stopParsing();\r\n      return;\r\n    case 2: // TAG\r\n      if (value === \"html\") {\r\n        in_body_mode(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n      break; // for any other tags\r\n    case 3: // ENDTAG\r\n      if (value === \"html\") {\r\n        if (fragment) return;\r\n        parser = after_after_body_mode;\r\n        return;\r\n      }\r\n      break; // for any other tags\r\n    }\r\n\r\n    // anything else\r\n    parser = in_body_mode;\r\n    parser(t, value, arg3, arg4);\r\n  }\r\n\r\n  function in_frameset_mode(t, value, arg3, arg4) {\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      // Ignore any non-space characters\r\n      value = value.replace(ALLNONWS, \"\");\r\n      if (value.length > 0) insertText(value);\r\n      return;\r\n    case 4: // COMMENT\r\n      insertComment(value);\r\n      return;\r\n    case 5: // DOCTYPE\r\n      return;\r\n    case -1: // EOF\r\n      stopParsing();\r\n      return;\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"html\":\r\n        in_body_mode(t, value, arg3, arg4);\r\n        return;\r\n      case \"frameset\":\r\n        insertHTMLElement(value, arg3);\r\n        return;\r\n      case \"frame\":\r\n        insertHTMLElement(value, arg3);\r\n        stack.pop();\r\n        return;\r\n      case \"noframes\":\r\n        in_head_mode(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n      break;\r\n    case 3: // ENDTAG\r\n      if (value === \"frameset\") {\r\n        if (fragment && stack.top instanceof impl.HTMLHtmlElement)\r\n          return;\r\n        stack.pop();\r\n        if (!fragment &&\r\n          !(stack.top instanceof impl.HTMLFrameSetElement))\r\n          parser = after_frameset_mode;\r\n        return;\r\n      }\r\n      break;\r\n    }\r\n\r\n    // ignore anything else\r\n  }\r\n\r\n  function after_frameset_mode(t, value, arg3, arg4) {\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      // Ignore any non-space characters\r\n      value = value.replace(ALLNONWS, \"\");\r\n      if (value.length > 0) insertText(value);\r\n      return;\r\n    case 4: // COMMENT\r\n      insertComment(value);\r\n      return;\r\n    case 5: // DOCTYPE\r\n      return;\r\n    case -1: // EOF\r\n      stopParsing();\r\n      return;\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"html\":\r\n        in_body_mode(t, value, arg3, arg4);\r\n        return;\r\n      case \"noframes\":\r\n        in_head_mode(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n      break;\r\n    case 3: // ENDTAG\r\n      if (value === \"html\") {\r\n        parser = after_after_frameset_mode;\r\n        return;\r\n      }\r\n      break;\r\n    }\r\n\r\n    // ignore anything else\r\n  }\r\n\r\n  function after_after_body_mode(t, value, arg3, arg4) {\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      // If any non-space chars, handle below\r\n      if (NONWS.test(value)) break;\r\n      in_body_mode(t, value, arg3, arg4);\r\n      return;\r\n    case 4: // COMMENT\r\n      doc._appendChild(doc.createComment(value));\r\n      return;\r\n    case 5: // DOCTYPE\r\n      in_body_mode(t, value, arg3, arg4);\r\n      return;\r\n    case -1: // EOF\r\n      stopParsing();\r\n      return;\r\n    case 2: // TAG\r\n      if (value === \"html\") {\r\n        in_body_mode(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n      break;\r\n    }\r\n\r\n    // anything else\r\n    parser = in_body_mode;\r\n    parser(t, value, arg3, arg4);\r\n  }\r\n\r\n  function after_after_frameset_mode(t, value, arg3, arg4) {\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      // Ignore any non-space characters\r\n      value = value.replace(ALLNONWS, \"\");\r\n      if (value.length > 0)\r\n        in_body_mode(t, value, arg3, arg4);\r\n      return;\r\n    case 4: // COMMENT\r\n      doc._appendChild(doc.createComment(value));\r\n      return;\r\n    case 5: // DOCTYPE\r\n      in_body_mode(t, value, arg3, arg4);\r\n      return;\r\n    case -1: // EOF\r\n      stopParsing();\r\n      return;\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"html\":\r\n        in_body_mode(t, value, arg3, arg4);\r\n        return;\r\n      case \"noframes\":\r\n        in_head_mode(t, value, arg3, arg4);\r\n        return;\r\n      }\r\n      break;\r\n    }\r\n\r\n    // ignore anything else\r\n  }\r\n\r\n\r\n  // 13.2.5.5 The rules for parsing tokens in foreign content\r\n  //\r\n  // This is like one of the insertion modes above, but is\r\n  // invoked somewhat differently when the current token is not HTML.\r\n  // See the insertToken() function.\r\n  function insertForeignToken(t, value, arg3, arg4) {\r\n    // A <font> tag is an HTML font tag if it has a color, font, or size\r\n    // attribute.  Otherwise we assume it is foreign content\r\n    function isHTMLFont(attrs) {\r\n      for(var i = 0, n = attrs.length; i < n; i++) {\r\n        switch(attrs[i][0]) {\r\n        case \"color\":\r\n        case \"face\":\r\n        case \"size\":\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    var current;\r\n\r\n    switch(t) {\r\n    case 1: // TEXT\r\n      // If any non-space, non-nul characters\r\n      if (frameset_ok && NONWSNONNUL.test(value))\r\n        frameset_ok = false;\r\n      if (textIncludesNUL) {\r\n        value = value.replace(NULCHARS, \"\\uFFFD\");\r\n      }\r\n      insertText(value);\r\n      return;\r\n    case 4: // COMMENT\r\n      insertComment(value);\r\n      return;\r\n    case 5: // DOCTYPE\r\n      // ignore it\r\n      return;\r\n    case 2: // TAG\r\n      switch(value) {\r\n      case \"font\":\r\n        if (!isHTMLFont(arg3)) break;\r\n        /* falls through */\r\n      case \"b\":\r\n      case \"big\":\r\n      case \"blockquote\":\r\n      case \"body\":\r\n      case \"br\":\r\n      case \"center\":\r\n      case \"code\":\r\n      case \"dd\":\r\n      case \"div\":\r\n      case \"dl\":\r\n      case \"dt\":\r\n      case \"em\":\r\n      case \"embed\":\r\n      case \"h1\":\r\n      case \"h2\":\r\n      case \"h3\":\r\n      case \"h4\":\r\n      case \"h5\":\r\n      case \"h6\":\r\n      case \"head\":\r\n      case \"hr\":\r\n      case \"i\":\r\n      case \"img\":\r\n      case \"li\":\r\n      case \"listing\":\r\n      case \"menu\":\r\n      case \"meta\":\r\n      case \"nobr\":\r\n      case \"ol\":\r\n      case \"p\":\r\n      case \"pre\":\r\n      case \"ruby\":\r\n      case \"s\":\r\n      case \"small\":\r\n      case \"span\":\r\n      case \"strong\":\r\n      case \"strike\":\r\n      case \"sub\":\r\n      case \"sup\":\r\n      case \"table\":\r\n      case \"tt\":\r\n      case \"u\":\r\n      case \"ul\":\r\n      case \"var\":\r\n        if (fragment) {\r\n          break;\r\n        }\r\n        do {\r\n          stack.pop();\r\n          current = stack.top;\r\n        } while(current.namespaceURI !== NAMESPACE.HTML &&\r\n            !isMathmlTextIntegrationPoint(current) &&\r\n            !isHTMLIntegrationPoint(current));\r\n\r\n        insertToken(t, value, arg3, arg4);  // reprocess\r\n        return;\r\n      }\r\n\r\n      // Any other start tag case goes here\r\n      current = (stack.elements.length===1 && fragment) ? fragmentContext :\r\n        stack.top;\r\n      if (current.namespaceURI === NAMESPACE.MATHML) {\r\n        adjustMathMLAttributes(arg3);\r\n      }\r\n      else if (current.namespaceURI === NAMESPACE.SVG) {\r\n        value = adjustSVGTagName(value);\r\n        adjustSVGAttributes(arg3);\r\n      }\r\n      adjustForeignAttributes(arg3);\r\n\r\n      insertForeignElement(value, arg3, current.namespaceURI);\r\n      if (arg4) { // the self-closing flag\r\n        if (value === 'script' && current.namespaceURI === NAMESPACE.SVG) {\r\n          // XXX deal with SVG scripts here\r\n        }\r\n        stack.pop();\r\n      }\r\n      return;\r\n\r\n    case 3: // ENDTAG\r\n      current = stack.top;\r\n      if (value === \"script\" &&\r\n        current.namespaceURI === NAMESPACE.SVG &&\r\n        current.localName === \"script\") {\r\n\r\n        stack.pop();\r\n\r\n        // XXX\r\n        // Deal with SVG scripts here\r\n      }\r\n      else {\r\n        // The any other end tag case\r\n        var i = stack.elements.length-1;\r\n        var node = stack.elements[i];\r\n        for(;;) {\r\n          if (node.localName.toLowerCase() === value) {\r\n            stack.popElement(node);\r\n            break;\r\n          }\r\n          node = stack.elements[--i];\r\n          // If non-html, keep looping\r\n          if (node.namespaceURI !== NAMESPACE.HTML)\r\n            continue;\r\n          // Otherwise process the end tag as html\r\n          parser(t, value, arg3, arg4);\r\n          break;\r\n        }\r\n      }\r\n      return;\r\n    }\r\n  }\r\n\r\n  /***\r\n   * Finally, this is the end of the HTMLParser() factory function.\r\n   * It returns the htmlparser object with the append() and end() methods.\r\n   */\r\n\r\n  // Sneak another method into the htmlparser object to allow us to run\r\n  // tokenizer tests.  This can be commented out in production code.\r\n  // This is a hook for testing the tokenizer. It has to be here\r\n  // because the tokenizer details are all hidden away within the closure.\r\n  // It should return an array of tokens generated while parsing the\r\n  // input string.\r\n  htmlparser.testTokenizer = function(input, initialState, lastStartTag, charbychar) {\r\n    var tokens = [];\r\n\r\n    switch(initialState) {\r\n    case \"PCDATA state\":\r\n      tokenizer = data_state;\r\n      break;\r\n    case \"RCDATA state\":\r\n      tokenizer = rcdata_state;\r\n      break;\r\n    case \"RAWTEXT state\":\r\n      tokenizer = rawtext_state;\r\n      break;\r\n    case \"PLAINTEXT state\":\r\n      tokenizer = plaintext_state;\r\n      break;\r\n    }\r\n\r\n    if (lastStartTag) {\r\n      lasttagname = lastStartTag;\r\n    }\r\n\r\n    insertToken = function(t, value, arg3, arg4) {\r\n      flushText();\r\n      switch(t) {\r\n      case 1: // TEXT\r\n        if (tokens.length > 0 &&\r\n          tokens[tokens.length-1][0] === \"Character\") {\r\n          tokens[tokens.length-1][1] += value;\r\n        }\r\n        else tokens.push([\"Character\", value]);\r\n        break;\r\n      case 4: // COMMENT\r\n        tokens.push([\"Comment\", value]);\r\n        break;\r\n      case 5: // DOCTYPE\r\n        tokens.push([\"DOCTYPE\", value,\r\n               arg3 === undefined ? null : arg3,\r\n               arg4 === undefined ? null : arg4,\r\n               !force_quirks]);\r\n        break;\r\n      case 2: // TAG\r\n        var attrs = Object.create(null);\r\n        for(var i = 0; i < arg3.length; i++) {\r\n          // XXX: does attribute order matter?\r\n          var a = arg3[i];\r\n          if (a.length === 1) {\r\n            attrs[a[0]] = \"\";\r\n          }\r\n          else {\r\n            attrs[a[0]] = a[1];\r\n          }\r\n        }\r\n        var token = [\"StartTag\", value, attrs];\r\n        if (arg4) token.push(true);\r\n        tokens.push(token);\r\n        break;\r\n      case 3: // ENDTAG\r\n        tokens.push([\"EndTag\", value]);\r\n        break;\r\n      case -1: // EOF\r\n        break;\r\n      }\r\n    };\r\n\r\n    if (!charbychar) {\r\n      this.parse(input, true);\r\n    }\r\n    else {\r\n      for(var i = 0; i < input.length; i++) {\r\n        this.parse(input[i]);\r\n      }\r\n      this.parse(\"\", true);\r\n    }\r\n    return tokens;\r\n  };\r\n\r\n  // Return the parser object from the HTMLParser() factory function\r\n  return htmlparser;\r\n}\r\n","\"use strict\";\r\nmodule.exports = Leaf;\r\n\r\nvar Node = require('./Node');\r\nvar NodeList = require('./NodeList');\r\nvar utils = require('./utils');\r\nvar HierarchyRequestError = utils.HierarchyRequestError;\r\nvar NotFoundError = utils.NotFoundError;\r\n\r\n// This class defines common functionality for node subtypes that\r\n// can never have children\r\nfunction Leaf() {\r\n  Node.call(this);\r\n}\r\n\r\nLeaf.prototype = Object.create(Node.prototype, {\r\n  hasChildNodes: { value: function() { return false; }},\r\n  firstChild: { value: null },\r\n  lastChild: { value: null },\r\n  insertBefore: { value: function(node, child) {\r\n    if (!node.nodeType) throw new TypeError('not a node');\r\n    HierarchyRequestError();\r\n  }},\r\n  replaceChild: { value: function(node, child) {\r\n    if (!node.nodeType) throw new TypeError('not a node');\r\n    HierarchyRequestError();\r\n  }},\r\n  removeChild: { value: function(node) {\r\n    if (!node.nodeType) throw new TypeError('not a node');\r\n    NotFoundError();\r\n  }},\r\n  removeChildren: { value: function() { /* no op */ }},\r\n  childNodes: { get: function() {\r\n    if (!this._childNodes) this._childNodes = new NodeList();\r\n    return this._childNodes;\r\n  }}\r\n});\r\n","\"use strict\";\r\nvar utils = require('./utils');\r\n\r\nvar LinkedList = module.exports = {\r\n    // basic validity tests on a circular linked list a\r\n    valid: function(a) {\r\n        utils.assert(a, \"list falsy\");\r\n        utils.assert(a._previousSibling, \"previous falsy\");\r\n        utils.assert(a._nextSibling, \"next falsy\");\r\n        // xxx check that list is actually circular\r\n        return true;\r\n    },\r\n    // insert a before b\r\n    insertBefore: function(a, b) {\r\n        utils.assert(LinkedList.valid(a) && LinkedList.valid(b));\r\n        var a_first = a, a_last = a._previousSibling;\r\n        var b_first = b, b_last = b._previousSibling;\r\n        a_first._previousSibling = b_last;\r\n        a_last._nextSibling = b_first;\r\n        b_last._nextSibling = a_first;\r\n        b_first._previousSibling = a_last;\r\n        utils.assert(LinkedList.valid(a) && LinkedList.valid(b));\r\n    },\r\n    // replace a single node a with a list b (which could be null)\r\n    replace: function(a, b) {\r\n        utils.assert(LinkedList.valid(a) && (b===null || LinkedList.valid(b)));\r\n        if (b!==null) {\r\n            LinkedList.insertBefore(b, a);\r\n        }\r\n        LinkedList.remove(a);\r\n        utils.assert(LinkedList.valid(a) && (b===null || LinkedList.valid(b)));\r\n    },\r\n    // remove single node a from its list\r\n    remove: function(a) {\r\n        utils.assert(LinkedList.valid(a));\r\n        var prev = a._previousSibling;\r\n        if (prev === a) { return; }\r\n        var next = a._nextSibling;\r\n        prev._nextSibling = next;\r\n        next._previousSibling = prev;\r\n        a._previousSibling = a._nextSibling = a;\r\n        utils.assert(LinkedList.valid(a));\r\n    }\r\n};\r\n","\"use strict\";\r\nvar URL = require('./URL');\r\nvar URLUtils = require('./URLUtils');\r\n\r\nmodule.exports = Location;\r\n\r\nfunction Location(window, href) {\r\n  this._window = window;\r\n  this._href = href;\r\n}\r\n\r\nLocation.prototype = Object.create(URLUtils.prototype, {\r\n  constructor: { value: Location },\r\n\r\n  // Special behavior when href is set\r\n  href: {\r\n    get: function() { return this._href; },\r\n    set: function(v) { this.assign(v); }\r\n  },\r\n\r\n  assign: { value: function(url) {\r\n    // Resolve the new url against the current one\r\n    // XXX:\r\n    // This is not actually correct. It should be resolved against\r\n    // the URL of the document of the script. For now, though, I only\r\n    // support a single window and there is only one base url.\r\n    // So this is good enough for now.\r\n    var current = new URL(this._href);\r\n    var newurl = current.resolve(url);\r\n\r\n    // Save the new url\r\n    this._href = newurl;\r\n\r\n    // Start loading the new document!\r\n    // XXX\r\n    // This is just something hacked together.\r\n    // The real algorithm is: http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#navigate\r\n  }},\r\n\r\n  replace: { value: function(url) {\r\n    // XXX\r\n    // Since we aren't tracking history yet, replace is the same as assign\r\n    this.assign(url);\r\n  }},\r\n\r\n  reload: { value: function() {\r\n    // XXX:\r\n    // Actually, the spec is a lot more complicated than this\r\n    this.assign(this.href);\r\n  }},\r\n\r\n  toString: { value: function() {\r\n    return this.href;\r\n  }}\r\n\r\n});\r\n","\"use strict\";\r\nvar UIEvent = require('./UIEvent');\r\n\r\nmodule.exports = MouseEvent;\r\n\r\nfunction MouseEvent() {\r\n  // Just use the superclass constructor to initialize\r\n  UIEvent.call(this);\r\n\r\n  this.screenX = this.screenY = this.clientX = this.clientY = 0;\r\n  this.ctrlKey = this.altKey = this.shiftKey = this.metaKey = false;\r\n  this.button = 0;\r\n  this.buttons = 1;\r\n  this.relatedTarget = null;\r\n}\r\nMouseEvent.prototype = Object.create(UIEvent.prototype, {\r\n  constructor: { value: MouseEvent },\r\n  initMouseEvent: { value: function(type, bubbles, cancelable,\r\n    view, detail,\r\n    screenX, screenY, clientX, clientY,\r\n    ctrlKey, altKey, shiftKey, metaKey,\r\n    button, relatedTarget) {\r\n\r\n    this.initEvent(type, bubbles, cancelable, view, detail);\r\n    this.screenX = screenX;\r\n    this.screenY = screenY;\r\n    this.clientX = clientX;\r\n    this.clientY = clientY;\r\n    this.ctrlKey = ctrlKey;\r\n    this.altKey = altKey;\r\n    this.shiftKey = shiftKey;\r\n    this.metaKey = metaKey;\r\n    this.button = button;\r\n    switch(button) {\r\n    case 0: this.buttons = 1; break;\r\n    case 1: this.buttons = 4; break;\r\n    case 2: this.buttons = 2; break;\r\n    default: this.buttons = 0; break;\r\n    }\r\n    this.relatedTarget = relatedTarget;\r\n  }},\r\n\r\n  getModifierState: { value: function(key) {\r\n    switch(key) {\r\n    case \"Alt\": return this.altKey;\r\n    case \"Control\": return this.ctrlKey;\r\n    case \"Shift\": return this.shiftKey;\r\n    case \"Meta\": return this.metaKey;\r\n    default: return false;\r\n    }\r\n  }}\r\n});\r\n","\"use strict\";\r\nmodule.exports = {\r\n  VALUE: 1, // The value of a Text, Comment or PI node changed\r\n  ATTR: 2, // A new attribute was added or an attribute value and/or prefix changed\r\n  REMOVE_ATTR: 3, // An attribute was removed\r\n  REMOVE: 4, // A node was removed\r\n  MOVE: 5, // A node was moved\r\n  INSERT: 6 // A node (or a subtree of nodes) was inserted\r\n};","\"use strict\";\r\nmodule.exports = NamedNodeMap;\r\n\r\nvar utils = require('./utils');\r\n\r\n/* This is a hacky implementation of NamedNodeMap, intended primarily to\r\n * satisfy clients (like dompurify and the web-platform-tests) which check\r\n * to ensure that Node#attributes instanceof NamedNodeMap. */\r\n\r\nfunction NamedNodeMap(element) {\r\n  this.element = element;\r\n}\r\nObject.defineProperties(NamedNodeMap.prototype, {\r\n  length: { get: utils.shouldOverride },\r\n  item: { value: utils.shouldOverride },\r\n\r\n  getNamedItem: { value: function getNamedItem(qualifiedName) {\r\n    return this.element.getAttributeNode(qualifiedName);\r\n  } },\r\n  getNamedItemNS: { value: function getNamedItemNS(namespace, localName) {\r\n    return this.element.getAttributeNodeNS(namespace, localName);\r\n  } },\r\n  setNamedItem: { value: utils.nyi },\r\n  setNamedItemNS: { value: utils.nyi },\r\n  removeNamedItem: { value: function removeNamedItem(qualifiedName) {\r\n    var attr = this.element.getAttributeNode(qualifiedName);\r\n    if (attr) {\r\n      this.element.removeAttribute(qualifiedName);\r\n      return attr;\r\n    }\r\n    utils.NotFoundError();\r\n  } },\r\n  removeNamedItemNS: { value: function removeNamedItemNS(ns, lname) {\r\n    var attr = this.element.getAttributeNodeNS(ns, lname);\r\n    if (attr) {\r\n      this.element.removeAttributeNS(ns, lname);\r\n      return attr;\r\n    }\r\n    utils.NotFoundError();\r\n  } },\r\n});\r\n","\"use strict\";\r\n\r\n// https://html.spec.whatwg.org/multipage/webappapis.html#navigatorid\r\nvar NavigatorID = Object.create(null, {\r\n  appCodeName: { value: \"Mozilla\" },\r\n  appName: { value: \"Netscape\" },\r\n  appVersion: { value: \"4.0\" },\r\n  platform: { value: \"\" },\r\n  product: { value: \"Gecko\" },\r\n  productSub: { value: \"20100101\" },\r\n  userAgent: { value: \"\" },\r\n  vendor: { value: \"\" },\r\n  vendorSub: { value: \"\" },\r\n  taintEnabled: { value: function() { return false; } }\r\n});\r\n\r\nmodule.exports = NavigatorID;\r\n","\"use strict\";\r\nmodule.exports = Node;\r\n\r\nvar EventTarget = require('./EventTarget');\r\nvar LinkedList = require('./LinkedList');\r\nvar NodeUtils = require('./NodeUtils');\r\nvar utils = require('./utils');\r\n\r\n// All nodes have a nodeType and an ownerDocument.\r\n// Once inserted, they also have a parentNode.\r\n// This is an abstract class; all nodes in a document are instances\r\n// of a subtype, so all the properties are defined by more specific\r\n// constructors.\r\nfunction Node() {\r\n  EventTarget.call(this);\r\n  this.parentNode = null;\r\n  this._nextSibling = this._previousSibling = this;\r\n  this._index = undefined;\r\n}\r\n\r\nvar ELEMENT_NODE                = Node.ELEMENT_NODE = 1;\r\nvar ATTRIBUTE_NODE              = Node.ATTRIBUTE_NODE = 2;\r\nvar TEXT_NODE                   = Node.TEXT_NODE = 3;\r\nvar CDATA_SECTION_NODE          = Node.CDATA_SECTION_NODE = 4;\r\nvar ENTITY_REFERENCE_NODE       = Node.ENTITY_REFERENCE_NODE = 5;\r\nvar ENTITY_NODE                 = Node.ENTITY_NODE = 6;\r\nvar PROCESSING_INSTRUCTION_NODE = Node.PROCESSING_INSTRUCTION_NODE = 7;\r\nvar COMMENT_NODE                = Node.COMMENT_NODE = 8;\r\nvar DOCUMENT_NODE               = Node.DOCUMENT_NODE = 9;\r\nvar DOCUMENT_TYPE_NODE          = Node.DOCUMENT_TYPE_NODE = 10;\r\nvar DOCUMENT_FRAGMENT_NODE      = Node.DOCUMENT_FRAGMENT_NODE = 11;\r\nvar NOTATION_NODE               = Node.NOTATION_NODE = 12;\r\n\r\nvar DOCUMENT_POSITION_DISCONNECTED            = Node.DOCUMENT_POSITION_DISCONNECTED = 0x01;\r\nvar DOCUMENT_POSITION_PRECEDING               = Node.DOCUMENT_POSITION_PRECEDING = 0x02;\r\nvar DOCUMENT_POSITION_FOLLOWING               = Node.DOCUMENT_POSITION_FOLLOWING = 0x04;\r\nvar DOCUMENT_POSITION_CONTAINS                = Node.DOCUMENT_POSITION_CONTAINS = 0x08;\r\nvar DOCUMENT_POSITION_CONTAINED_BY            = Node.DOCUMENT_POSITION_CONTAINED_BY = 0x10;\r\nvar DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC = Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC = 0x20;\r\n\r\nNode.prototype = Object.create(EventTarget.prototype, {\r\n\r\n  // Node that are not inserted into the tree inherit a null parent\r\n\r\n  // XXX: the baseURI attribute is defined by dom core, but\r\n  // a correct implementation of it requires HTML features, so\r\n  // we'll come back to this later.\r\n  baseURI: { get: utils.nyi },\r\n\r\n  parentElement: { get: function() {\r\n    return (this.parentNode && this.parentNode.nodeType===ELEMENT_NODE) ? this.parentNode : null;\r\n  }},\r\n\r\n  hasChildNodes: { value: utils.shouldOverride },\r\n\r\n  firstChild: { get: utils.shouldOverride },\r\n\r\n  lastChild: { get: utils.shouldOverride },\r\n\r\n  isConnected: {\r\n    get: function () {\r\n      let node = this;\r\n      while (node != null) {\r\n        if (node.nodeType === Node.DOCUMENT_NODE) {\r\n          return true;\r\n        }\r\n\r\n        node = node.parentNode;\r\n        if (node != null && node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\r\n          node = node.host;\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n  },\r\n\r\n  previousSibling: { get: function() {\r\n    var parent = this.parentNode;\r\n    if (!parent) return null;\r\n    if (this === parent.firstChild) return null;\r\n    return this._previousSibling;\r\n  }},\r\n\r\n  nextSibling: { get: function() {\r\n    var parent = this.parentNode, next = this._nextSibling;\r\n    if (!parent) return null;\r\n    if (next === parent.firstChild) return null;\r\n    return next;\r\n  }},\r\n\r\n  textContent: {\r\n    // Should override for DocumentFragment/Element/Attr/Text/PI/Comment\r\n    get: function() { return null; },\r\n    set: function(v) { /* do nothing */ },\r\n  },\r\n\r\n  innerText: {\r\n    // Should override for DocumentFragment/Element/Attr/Text/PI/Comment\r\n    get: function() { return null; },\r\n    set: function(v) { /* do nothing */ },\r\n  },\r\n\r\n  _countChildrenOfType: { value: function(type) {\r\n    var sum = 0;\r\n    for (var kid = this.firstChild; kid !== null; kid = kid.nextSibling) {\r\n      if (kid.nodeType === type) sum++;\r\n    }\r\n    return sum;\r\n  }},\r\n\r\n  _ensureInsertValid: { value: function _ensureInsertValid(node, child, isPreinsert) {\r\n    var parent = this, i, kid;\r\n    if (!node.nodeType) throw new TypeError('not a node');\r\n    // 1. If parent is not a Document, DocumentFragment, or Element\r\n    // node, throw a HierarchyRequestError.\r\n    switch (parent.nodeType) {\r\n    case DOCUMENT_NODE:\r\n    case DOCUMENT_FRAGMENT_NODE:\r\n    case ELEMENT_NODE:\r\n      break;\r\n    default: utils.HierarchyRequestError();\r\n    }\r\n    // 2. If node is a host-including inclusive ancestor of parent,\r\n    // throw a HierarchyRequestError.\r\n    if (node.isAncestor(parent)) utils.HierarchyRequestError();\r\n    // 3. If child is not null and its parent is not parent, then\r\n    // throw a NotFoundError. (replaceChild omits the 'child is not null'\r\n    // and throws a TypeError here if child is null.)\r\n    if (child !== null || !isPreinsert) {\r\n      if (child.parentNode !== parent) utils.NotFoundError();\r\n    }\r\n    // 4. If node is not a DocumentFragment, DocumentType, Element,\r\n    // Text, ProcessingInstruction, or Comment node, throw a\r\n    // HierarchyRequestError.\r\n    switch (node.nodeType) {\r\n    case DOCUMENT_FRAGMENT_NODE:\r\n    case DOCUMENT_TYPE_NODE:\r\n    case ELEMENT_NODE:\r\n    case TEXT_NODE:\r\n    case PROCESSING_INSTRUCTION_NODE:\r\n    case COMMENT_NODE:\r\n      break;\r\n    default: utils.HierarchyRequestError();\r\n    }\r\n    // 5. If either node is a Text node and parent is a document, or\r\n    // node is a doctype and parent is not a document, throw a\r\n    // HierarchyRequestError.\r\n    // 6. If parent is a document, and any of the statements below, switched\r\n    // on node, are true, throw a HierarchyRequestError.\r\n    if (parent.nodeType === DOCUMENT_NODE) {\r\n      switch (node.nodeType) {\r\n      case TEXT_NODE:\r\n        utils.HierarchyRequestError();\r\n        break;\r\n      case DOCUMENT_FRAGMENT_NODE:\r\n        // 6a1. If node has more than one element child or has a Text\r\n        // node child.\r\n        if (node._countChildrenOfType(TEXT_NODE) > 0)\r\n          utils.HierarchyRequestError();\r\n        switch (node._countChildrenOfType(ELEMENT_NODE)) {\r\n        case 0:\r\n          break;\r\n        case 1:\r\n          // 6a2. Otherwise, if node has one element child and either\r\n          // parent has an element child, child is a doctype, or child\r\n          // is not null and a doctype is following child. [preinsert]\r\n          // 6a2. Otherwise, if node has one element child and either\r\n          // parent has an element child that is not child or a\r\n          // doctype is following child. [replaceWith]\r\n          if (child !== null /* always true here for replaceWith */) {\r\n            if (isPreinsert && child.nodeType === DOCUMENT_TYPE_NODE)\r\n              utils.HierarchyRequestError();\r\n            for (kid = child.nextSibling; kid !== null; kid = kid.nextSibling) {\r\n              if (kid.nodeType === DOCUMENT_TYPE_NODE)\r\n                utils.HierarchyRequestError();\r\n            }\r\n          }\r\n          i = parent._countChildrenOfType(ELEMENT_NODE);\r\n          if (isPreinsert) {\r\n            // \"parent has an element child\"\r\n            if (i > 0)\r\n              utils.HierarchyRequestError();\r\n          } else {\r\n            // \"parent has an element child that is not child\"\r\n            if (i > 1 || (i === 1 && child.nodeType !== ELEMENT_NODE))\r\n              utils.HierarchyRequestError();\r\n          }\r\n          break;\r\n        default: // 6a1, continued. (more than one Element child)\r\n          utils.HierarchyRequestError();\r\n        }\r\n        break;\r\n      case ELEMENT_NODE:\r\n        // 6b. parent has an element child, child is a doctype, or\r\n        // child is not null and a doctype is following child. [preinsert]\r\n        // 6b. parent has an element child that is not child or a\r\n        // doctype is following child. [replaceWith]\r\n        if (child !== null /* always true here for replaceWith */) {\r\n          if (isPreinsert && child.nodeType === DOCUMENT_TYPE_NODE)\r\n            utils.HierarchyRequestError();\r\n          for (kid = child.nextSibling; kid !== null; kid = kid.nextSibling) {\r\n            if (kid.nodeType === DOCUMENT_TYPE_NODE)\r\n              utils.HierarchyRequestError();\r\n          }\r\n        }\r\n        i = parent._countChildrenOfType(ELEMENT_NODE);\r\n        if (isPreinsert) {\r\n          // \"parent has an element child\"\r\n          if (i > 0)\r\n            utils.HierarchyRequestError();\r\n        } else {\r\n          // \"parent has an element child that is not child\"\r\n          if (i > 1 || (i === 1 && child.nodeType !== ELEMENT_NODE))\r\n            utils.HierarchyRequestError();\r\n        }\r\n        break;\r\n      case DOCUMENT_TYPE_NODE:\r\n        // 6c. parent has a doctype child, child is non-null and an\r\n        // element is preceding child, or child is null and parent has\r\n        // an element child. [preinsert]\r\n        // 6c. parent has a doctype child that is not child, or an\r\n        // element is preceding child. [replaceWith]\r\n        if (child === null) {\r\n          if (parent._countChildrenOfType(ELEMENT_NODE))\r\n            utils.HierarchyRequestError();\r\n        } else {\r\n          // child is always non-null for [replaceWith] case\r\n          for (kid = parent.firstChild; kid !== null; kid = kid.nextSibling) {\r\n            if (kid === child) break;\r\n            if (kid.nodeType === ELEMENT_NODE)\r\n              utils.HierarchyRequestError();\r\n          }\r\n        }\r\n        i = parent._countChildrenOfType(DOCUMENT_TYPE_NODE);\r\n        if (isPreinsert) {\r\n          // \"parent has an doctype child\"\r\n          if (i > 0)\r\n            utils.HierarchyRequestError();\r\n        } else {\r\n          // \"parent has an doctype child that is not child\"\r\n          if (i > 1 || (i === 1 && child.nodeType !== DOCUMENT_TYPE_NODE))\r\n            utils.HierarchyRequestError();\r\n        }\r\n        break;\r\n      }\r\n    } else {\r\n      // 5, continued: (parent is not a document)\r\n      if (node.nodeType === DOCUMENT_TYPE_NODE) utils.HierarchyRequestError();\r\n    }\r\n  }},\r\n\r\n  insertBefore: { value: function insertBefore(node, child) {\r\n    var parent = this;\r\n    // 1. Ensure pre-insertion validity\r\n    parent._ensureInsertValid(node, child, true);\r\n    // 2. Let reference child be child.\r\n    var refChild = child;\r\n    // 3. If reference child is node, set it to node's next sibling\r\n    if (refChild === node) { refChild = node.nextSibling; }\r\n    // 4. Adopt node into parent's node document.\r\n    parent.doc.adoptNode(node);\r\n    // 5. Insert node into parent before reference child.\r\n    node._insertOrReplace(parent, refChild, false);\r\n    // 6. Return node\r\n    return node;\r\n  }},\r\n\r\n\r\n  appendChild: { value: function(child) {\r\n    // This invokes _appendChild after doing validity checks.\r\n    return this.insertBefore(child, null);\r\n  }},\r\n\r\n  _appendChild: { value: function(child) {\r\n    child._insertOrReplace(this, null, false);\r\n  }},\r\n\r\n  removeChild: { value: function removeChild(child) {\r\n    var parent = this;\r\n    if (!child.nodeType) throw new TypeError('not a node');\r\n    if (child.parentNode !== parent) utils.NotFoundError();\r\n    child.remove();\r\n    return child;\r\n  }},\r\n\r\n  // To replace a `child` with `node` within a `parent` (this)\r\n  replaceChild: { value: function replaceChild(node, child) {\r\n    var parent = this;\r\n    // Ensure validity (slight differences from pre-insertion check)\r\n    parent._ensureInsertValid(node, child, false);\r\n    // Adopt node into parent's node document.\r\n    if (node.doc !== parent.doc) {\r\n      // XXX adoptNode has side-effect of removing node from its parent\r\n      // and generating a mutation event, thus causing the _insertOrReplace\r\n      // to generate two deletes and an insert instead of a 'move'\r\n      // event.  It looks like the new MutationObserver stuff avoids\r\n      // this problem, but for now let's only adopt (ie, remove `node`\r\n      // from its parent) here if we need to.\r\n      parent.doc.adoptNode(node);\r\n    }\r\n    // Do the replace.\r\n    node._insertOrReplace(parent, child, true);\r\n    return child;\r\n  }},\r\n\r\n  // See: http://ejohn.org/blog/comparing-document-position/\r\n  contains: { value: function contains(node) {\r\n    if (node === null) { return false; }\r\n    if (this === node) { return true; /* inclusive descendant */ }\r\n    /* jshint bitwise: false */\r\n    return (this.compareDocumentPosition(node) &\r\n            DOCUMENT_POSITION_CONTAINED_BY) !== 0;\r\n  }},\r\n\r\n  compareDocumentPosition: { value: function compareDocumentPosition(that){\r\n    // Basic algorithm for finding the relative position of two nodes.\r\n    // Make a list the ancestors of each node, starting with the\r\n    // document element and proceeding down to the nodes themselves.\r\n    // Then, loop through the lists, looking for the first element\r\n    // that differs.  The order of those two elements give the\r\n    // order of their descendant nodes.  Or, if one list is a prefix\r\n    // of the other one, then that node contains the other.\r\n\r\n    if (this === that) return 0;\r\n\r\n    // If they're not owned by the same document or if one is rooted\r\n    // and one is not, then they're disconnected.\r\n    if (this.doc !== that.doc ||\r\n      this.rooted !== that.rooted)\r\n      return (DOCUMENT_POSITION_DISCONNECTED +\r\n          DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC);\r\n\r\n    // Get arrays of ancestors for this and that\r\n    var these = [], those = [];\r\n    for(var n = this; n !== null; n = n.parentNode) these.push(n);\r\n    for(n = that; n !== null; n = n.parentNode) those.push(n);\r\n    these.reverse();  // So we start with the outermost\r\n    those.reverse();\r\n\r\n    if (these[0] !== those[0]) // No common ancestor\r\n      return (DOCUMENT_POSITION_DISCONNECTED +\r\n          DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC);\r\n\r\n    n = Math.min(these.length, those.length);\r\n    for(var i = 1; i < n; i++) {\r\n      if (these[i] !== those[i]) {\r\n        // We found two different ancestors, so compare\r\n        // their positions\r\n        if (these[i].index < those[i].index)\r\n          return DOCUMENT_POSITION_FOLLOWING;\r\n        else\r\n          return DOCUMENT_POSITION_PRECEDING;\r\n      }\r\n    }\r\n\r\n    // If we get to here, then one of the nodes (the one with the\r\n    // shorter list of ancestors) contains the other one.\r\n    if (these.length < those.length)\r\n      return (DOCUMENT_POSITION_FOLLOWING +\r\n          DOCUMENT_POSITION_CONTAINED_BY);\r\n    else\r\n      return (DOCUMENT_POSITION_PRECEDING +\r\n          DOCUMENT_POSITION_CONTAINS);\r\n  }},\r\n\r\n  isSameNode: {value : function isSameNode(node) {\r\n    return this === node;\r\n  }},\r\n\r\n\r\n  // This method implements the generic parts of node equality testing\r\n  // and defers to the (non-recursive) type-specific isEqual() method\r\n  // defined by subclasses\r\n  isEqualNode: { value: function isEqualNode(node) {\r\n    if (!node) return false;\r\n    if (node.nodeType !== this.nodeType) return false;\r\n\r\n    // Check type-specific properties for equality\r\n    if (!this.isEqual(node)) return false;\r\n\r\n    // Now check children for number and equality\r\n    for (var c1 = this.firstChild, c2 = node.firstChild;\r\n         c1 && c2;\r\n         c1 = c1.nextSibling, c2 = c2.nextSibling) {\r\n      if (!c1.isEqualNode(c2)) return false;\r\n    }\r\n    return c1 === null && c2 === null;\r\n  }},\r\n\r\n  // This method delegates shallow cloning to a clone() method\r\n  // that each concrete subclass must implement\r\n  cloneNode: { value: function(deep) {\r\n    // Clone this node\r\n    var clone = this.clone();\r\n\r\n    // Handle the recursive case if necessary\r\n    if (deep) {\r\n      for (var kid = this.firstChild; kid !== null; kid = kid.nextSibling) {\r\n        clone._appendChild(kid.cloneNode(true));\r\n      }\r\n    }\r\n\r\n    return clone;\r\n  }},\r\n\r\n  lookupPrefix: { value: function lookupPrefix(ns) {\r\n    var e;\r\n    if (ns === '' || ns === null || ns === undefined) return null;\r\n    switch(this.nodeType) {\r\n    case ELEMENT_NODE:\r\n      return this._lookupNamespacePrefix(ns, this);\r\n    case DOCUMENT_NODE:\r\n      e = this.documentElement;\r\n      return e ? e.lookupPrefix(ns) : null;\r\n    case ENTITY_NODE:\r\n    case NOTATION_NODE:\r\n    case DOCUMENT_FRAGMENT_NODE:\r\n    case DOCUMENT_TYPE_NODE:\r\n      return null;\r\n    case ATTRIBUTE_NODE:\r\n      e = this.ownerElement;\r\n      return e ? e.lookupPrefix(ns) : null;\r\n    default:\r\n      e = this.parentElement;\r\n      return e ? e.lookupPrefix(ns) : null;\r\n    }\r\n  }},\r\n\r\n\r\n  lookupNamespaceURI: {value: function lookupNamespaceURI(prefix) {\r\n    if (prefix === '' || prefix === undefined) { prefix = null; }\r\n    var e;\r\n    switch(this.nodeType) {\r\n    case ELEMENT_NODE:\r\n      return utils.shouldOverride();\r\n    case DOCUMENT_NODE:\r\n      e = this.documentElement;\r\n      return e ? e.lookupNamespaceURI(prefix) : null;\r\n    case ENTITY_NODE:\r\n    case NOTATION_NODE:\r\n    case DOCUMENT_TYPE_NODE:\r\n    case DOCUMENT_FRAGMENT_NODE:\r\n      return null;\r\n    case ATTRIBUTE_NODE:\r\n      e = this.ownerElement;\r\n      return e ? e.lookupNamespaceURI(prefix) : null;\r\n    default:\r\n      e = this.parentElement;\r\n      return e ? e.lookupNamespaceURI(prefix) : null;\r\n    }\r\n  }},\r\n\r\n  isDefaultNamespace: { value: function isDefaultNamespace(ns) {\r\n    if (ns === '' || ns === undefined) { ns = null; }\r\n    var defaultNamespace = this.lookupNamespaceURI(null);\r\n    return (defaultNamespace === ns);\r\n  }},\r\n\r\n  // Utility methods for nodes.  Not part of the DOM\r\n\r\n  // Return the index of this node in its parent.\r\n  // Throw if no parent, or if this node is not a child of its parent\r\n  index: { get: function() {\r\n    var parent = this.parentNode;\r\n    if (this === parent.firstChild) return 0; // fast case\r\n    var kids = parent.childNodes;\r\n    if (this._index === undefined || kids[this._index] !== this) {\r\n      // Ensure that we don't have an O(N^2) blowup if none of the\r\n      // kids have defined indices yet and we're traversing via\r\n      // nextSibling or previousSibling\r\n      for (var i=0; i<kids.length; i++) {\r\n        kids[i]._index = i;\r\n      }\r\n      utils.assert(kids[this._index] === this);\r\n    }\r\n    return this._index;\r\n  }},\r\n\r\n  // Return true if this node is equal to or is an ancestor of that node\r\n  // Note that nodes are considered to be ancestors of themselves\r\n  isAncestor: { value: function(that) {\r\n    // If they belong to different documents, then they're unrelated.\r\n    if (this.doc !== that.doc) return false;\r\n    // If one is rooted and one isn't then they're not related\r\n    if (this.rooted !== that.rooted) return false;\r\n\r\n    // Otherwise check by traversing the parentNode chain\r\n    for(var e = that; e; e = e.parentNode) {\r\n      if (e === this) return true;\r\n    }\r\n    return false;\r\n  }},\r\n\r\n  // DOMINO Changed the behavior to conform with the specs. See:\r\n  // https://groups.google.com/d/topic/mozilla.dev.platform/77sIYcpdDmc/discussion\r\n  ensureSameDoc: { value: function(that) {\r\n    if (that.ownerDocument === null) {\r\n      that.ownerDocument = this.doc;\r\n    }\r\n    else if(that.ownerDocument !== this.doc) {\r\n      utils.WrongDocumentError();\r\n    }\r\n  }},\r\n\r\n  removeChildren: { value: utils.shouldOverride },\r\n\r\n  // Insert this node as a child of parent before the specified child,\r\n  // or insert as the last child of parent if specified child is null,\r\n  // or replace the specified child with this node, firing mutation events as\r\n  // necessary\r\n  _insertOrReplace: { value: function _insertOrReplace(parent, before, isReplace) {\r\n    var child = this, before_index, i;\r\n\r\n    if (child.nodeType === DOCUMENT_FRAGMENT_NODE && child.rooted) {\r\n      utils.HierarchyRequestError();\r\n    }\r\n\r\n    /* Ensure index of `before` is cached before we (possibly) remove it. */\r\n    if (parent._childNodes) {\r\n      before_index = (before === null) ? parent._childNodes.length :\r\n        before.index; /* ensure _index is cached */\r\n\r\n      // If we are already a child of the specified parent, then\r\n      // the index may have to be adjusted.\r\n      if (child.parentNode === parent) {\r\n        var child_index = child.index;\r\n        // If the child is before the spot it is to be inserted at,\r\n        // then when it is removed, the index of that spot will be\r\n        // reduced.\r\n        if (child_index < before_index) {\r\n          before_index--;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Delete the old child\r\n    if (isReplace) {\r\n      if (before.rooted) before.doc.mutateRemove(before);\r\n      before.parentNode = null;\r\n    }\r\n\r\n    var n = before;\r\n    if (n === null) { n = parent.firstChild; }\r\n\r\n    // If both the child and the parent are rooted, then we want to\r\n    // transplant the child without uprooting and rerooting it.\r\n    var bothRooted = child.rooted && parent.rooted;\r\n    if (child.nodeType === DOCUMENT_FRAGMENT_NODE) {\r\n      var spliceArgs = [0, isReplace ? 1 : 0], next;\r\n      for (var kid = child.firstChild; kid !== null; kid = next) {\r\n        next = kid.nextSibling;\r\n        spliceArgs.push(kid);\r\n        kid.parentNode = parent;\r\n      }\r\n      var len = spliceArgs.length;\r\n      // Add all nodes to the new parent, overwriting the old child\r\n      if (isReplace) {\r\n        LinkedList.replace(n, len > 2 ? spliceArgs[2] : null);\r\n      } else if (len > 2 && n !== null) {\r\n        LinkedList.insertBefore(spliceArgs[2], n);\r\n      }\r\n      if (parent._childNodes) {\r\n        spliceArgs[0] = (before === null) ?\r\n          parent._childNodes.length : before._index;\r\n        parent._childNodes.splice.apply(parent._childNodes, spliceArgs);\r\n        for (i=2; i<len; i++) {\r\n          spliceArgs[i]._index = spliceArgs[0] + (i - 2);\r\n        }\r\n      } else if (parent._firstChild === before) {\r\n        if (len > 2) {\r\n          parent._firstChild = spliceArgs[2];\r\n        } else if (isReplace) {\r\n          parent._firstChild = null;\r\n        }\r\n      }\r\n      // Remove all nodes from the document fragment\r\n      if (child._childNodes) {\r\n        child._childNodes.length = 0;\r\n      } else {\r\n        child._firstChild = null;\r\n      }\r\n      // Call the mutation handlers\r\n      // Use spliceArgs since the original array has been destroyed. The\r\n      // liveness guarantee requires us to clone the array so that\r\n      // references to the childNodes of the DocumentFragment will be empty\r\n      // when the insertion handlers are called.\r\n      if (parent.rooted) {\r\n        parent.modify();\r\n        for (i = 2; i < len; i++) {\r\n          parent.doc.mutateInsert(spliceArgs[i]);\r\n        }\r\n      }\r\n    } else {\r\n      if (before === child) { return; }\r\n      if (bothRooted) {\r\n        // Remove the child from its current position in the tree\r\n        // without calling remove(), since we don't want to uproot it.\r\n        child._remove();\r\n      } else if (child.parentNode) {\r\n        child.remove();\r\n      }\r\n\r\n      // Insert it as a child of its new parent\r\n      child.parentNode = parent;\r\n      if (isReplace) {\r\n        LinkedList.replace(n, child);\r\n        if (parent._childNodes) {\r\n          child._index = before_index;\r\n          parent._childNodes[before_index] = child;\r\n        } else if (parent._firstChild === before) {\r\n          parent._firstChild = child;\r\n        }\r\n      } else {\r\n        if (n !== null) {\r\n          LinkedList.insertBefore(child, n);\r\n        }\r\n        if (parent._childNodes) {\r\n          child._index = before_index;\r\n          parent._childNodes.splice(before_index, 0, child);\r\n        } else if (parent._firstChild === before) {\r\n          parent._firstChild = child;\r\n        }\r\n      }\r\n      if (bothRooted) {\r\n        parent.modify();\r\n        // Generate a move mutation event\r\n        parent.doc.mutateMove(child);\r\n      } else if (parent.rooted) {\r\n        parent.modify();\r\n        parent.doc.mutateInsert(child);\r\n      }\r\n    }\r\n  }},\r\n\r\n\r\n  // Return the lastModTime value for this node. (For use as a\r\n  // cache invalidation mechanism. If the node does not already\r\n  // have one, initialize it from the owner document's modclock\r\n  // property. (Note that modclock does not return the actual\r\n  // time; it is simply a counter incremented on each document\r\n  // modification)\r\n  lastModTime: { get: function() {\r\n    if (!this._lastModTime) {\r\n      this._lastModTime = this.doc.modclock;\r\n    }\r\n    return this._lastModTime;\r\n  }},\r\n\r\n  // Increment the owner document's modclock and use the new\r\n  // value to update the lastModTime value for this node and\r\n  // all of its ancestors. Nodes that have never had their\r\n  // lastModTime value queried do not need to have a\r\n  // lastModTime property set on them since there is no\r\n  // previously queried value to ever compare the new value\r\n  // against, so only update nodes that already have a\r\n  // _lastModTime property.\r\n  modify: { value: function() {\r\n    if (this.doc.modclock) { // Skip while doc.modclock == 0\r\n      var time = ++this.doc.modclock;\r\n      for(var n = this; n; n = n.parentElement) {\r\n        if (n._lastModTime) {\r\n          n._lastModTime = time;\r\n        }\r\n      }\r\n    }\r\n  }},\r\n\r\n  // This attribute is not part of the DOM but is quite helpful.\r\n  // It returns the document with which a node is associated.  Usually\r\n  // this is the ownerDocument. But ownerDocument is null for the\r\n  // document object itself, so this is a handy way to get the document\r\n  // regardless of the node type\r\n  doc: { get: function() {\r\n    return this.ownerDocument || this;\r\n  }},\r\n\r\n\r\n  // If the node has a nid (node id), then it is rooted in a document\r\n  rooted: { get: function() {\r\n    return !!this._nid;\r\n  }},\r\n\r\n  normalize: { value: function() {\r\n    var next;\r\n    for (var child=this.firstChild; child !== null; child=next) {\r\n      next = child.nextSibling;\r\n\r\n      if (child.normalize) {\r\n        child.normalize();\r\n      }\r\n\r\n      if (child.nodeType !== Node.TEXT_NODE) {\r\n        continue;\r\n      }\r\n\r\n      if (child.nodeValue === \"\") {\r\n        this.removeChild(child);\r\n        continue;\r\n      }\r\n\r\n      var prevChild = child.previousSibling;\r\n      if (prevChild === null) {\r\n        continue;\r\n      } else if (prevChild.nodeType === Node.TEXT_NODE) {\r\n        // merge this with previous and remove the child\r\n        prevChild.appendData(child.nodeValue);\r\n        this.removeChild(child);\r\n      }\r\n    }\r\n  }},\r\n\r\n  // Convert the children of a node to an HTML string.\r\n  // This is used by the innerHTML getter\r\n  // The serialization spec is at:\r\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/the-end.html#serializing-html-fragments\r\n  //\r\n  // The serialization logic is intentionally implemented in a separate\r\n  // `NodeUtils` helper instead of the more obvious choice of a private\r\n  // `_serializeOne()` method on the `Node.prototype` in order to avoid\r\n  // the megamorphic `this._serializeOne` property access, which reduces\r\n  // performance unnecessarily. If you need specialized behavior for a\r\n  // certain subclass, you'll need to implement that in `NodeUtils`.\r\n  // See https://github.com/fgnass/domino/pull/142 for more information.\r\n  serialize: { value: function() {\r\n    if (this._innerHTML) {\r\n      return this._innerHTML;\r\n    }\r\n    var s = '';\r\n    for (var kid = this.firstChild; kid !== null; kid = kid.nextSibling) {\r\n      s += NodeUtils.serializeOne(kid, this);\r\n    }\r\n    return s;\r\n  }},\r\n\r\n  // Non-standard, but often useful for debugging.\r\n  outerHTML: {\r\n    get: function() {\r\n      return NodeUtils.serializeOne(this, { nodeType: 0 });\r\n    },\r\n    set: utils.nyi,\r\n  },\r\n\r\n  // mirror node type properties in the prototype, so they are present\r\n  // in instances of Node (and subclasses)\r\n  ELEMENT_NODE:                { value: ELEMENT_NODE },\r\n  ATTRIBUTE_NODE:              { value: ATTRIBUTE_NODE },\r\n  TEXT_NODE:                   { value: TEXT_NODE },\r\n  CDATA_SECTION_NODE:          { value: CDATA_SECTION_NODE },\r\n  ENTITY_REFERENCE_NODE:       { value: ENTITY_REFERENCE_NODE },\r\n  ENTITY_NODE:                 { value: ENTITY_NODE },\r\n  PROCESSING_INSTRUCTION_NODE: { value: PROCESSING_INSTRUCTION_NODE },\r\n  COMMENT_NODE:                { value: COMMENT_NODE },\r\n  DOCUMENT_NODE:               { value: DOCUMENT_NODE },\r\n  DOCUMENT_TYPE_NODE:          { value: DOCUMENT_TYPE_NODE },\r\n  DOCUMENT_FRAGMENT_NODE:      { value: DOCUMENT_FRAGMENT_NODE },\r\n  NOTATION_NODE:               { value: NOTATION_NODE },\r\n\r\n  DOCUMENT_POSITION_DISCONNECTED: { value: DOCUMENT_POSITION_DISCONNECTED },\r\n  DOCUMENT_POSITION_PRECEDING:    { value: DOCUMENT_POSITION_PRECEDING },\r\n  DOCUMENT_POSITION_FOLLOWING:    { value: DOCUMENT_POSITION_FOLLOWING },\r\n  DOCUMENT_POSITION_CONTAINS:     { value: DOCUMENT_POSITION_CONTAINS },\r\n  DOCUMENT_POSITION_CONTAINED_BY: { value: DOCUMENT_POSITION_CONTAINED_BY },\r\n  DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC: { value: DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC },\r\n});\r\n","\"use strict\";\r\nvar NodeFilter = {\r\n  // Constants for acceptNode()\r\n  FILTER_ACCEPT: 1,\r\n  FILTER_REJECT: 2,\r\n  FILTER_SKIP: 3,\r\n\r\n  // Constants for whatToShow\r\n  SHOW_ALL: 0xFFFFFFFF,\r\n  SHOW_ELEMENT: 0x1,\r\n  SHOW_ATTRIBUTE: 0x2, // historical\r\n  SHOW_TEXT: 0x4,\r\n  SHOW_CDATA_SECTION: 0x8, // historical\r\n  SHOW_ENTITY_REFERENCE: 0x10, // historical\r\n  SHOW_ENTITY: 0x20, // historical\r\n  SHOW_PROCESSING_INSTRUCTION: 0x40,\r\n  SHOW_COMMENT: 0x80,\r\n  SHOW_DOCUMENT: 0x100,\r\n  SHOW_DOCUMENT_TYPE: 0x200,\r\n  SHOW_DOCUMENT_FRAGMENT: 0x400,\r\n  SHOW_NOTATION: 0x800 // historical\r\n};\r\n\r\nmodule.exports = (NodeFilter.constructor = NodeFilter.prototype = NodeFilter);\r\n","\"use strict\";\r\nmodule.exports = NodeIterator;\r\n\r\nvar NodeFilter = require('./NodeFilter');\r\nvar NodeTraversal = require('./NodeTraversal');\r\nvar utils = require('./utils');\r\n\r\n/* Private methods and helpers */\r\n\r\n/**\r\n * @based on WebKit's NodeIterator::moveToNext and NodeIterator::moveToPrevious\r\n * https://trac.webkit.org/browser/trunk/Source/WebCore/dom/NodeIterator.cpp?rev=186279#L51\r\n */\r\nfunction move(node, stayWithin, directionIsNext) {\r\n  if (directionIsNext) {\r\n    return NodeTraversal.next(node, stayWithin);\r\n  } else {\r\n    if (node === stayWithin) {\r\n      return null;\r\n    }\r\n    return NodeTraversal.previous(node, null);\r\n  }\r\n}\r\n\r\nfunction isInclusiveAncestor(node, possibleChild) {\r\n  for ( ; possibleChild; possibleChild = possibleChild.parentNode) {\r\n    if (node === possibleChild) { return true; }\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * @spec http://www.w3.org/TR/dom/#concept-nodeiterator-traverse\r\n * @method\r\n * @access private\r\n * @param {NodeIterator} ni\r\n * @param {string} direction One of 'next' or 'previous'.\r\n * @return {Node|null}\r\n */\r\nfunction traverse(ni, directionIsNext) {\r\n  var node, beforeNode;\r\n  node = ni._referenceNode;\r\n  beforeNode = ni._pointerBeforeReferenceNode;\r\n  while (true) {\r\n    if (beforeNode === directionIsNext) {\r\n      beforeNode = !beforeNode;\r\n    } else {\r\n      node = move(node, ni._root, directionIsNext);\r\n      if (node === null) {\r\n        return null;\r\n      }\r\n    }\r\n    var result = ni._internalFilter(node);\r\n    if (result === NodeFilter.FILTER_ACCEPT) {\r\n      break;\r\n    }\r\n  }\r\n  ni._referenceNode = node;\r\n  ni._pointerBeforeReferenceNode = beforeNode;\r\n  return node;\r\n}\r\n\r\n/* Public API */\r\n\r\n/**\r\n * Implemented version: http://www.w3.org/TR/2015/WD-dom-20150618/#nodeiterator\r\n * Latest version: http://www.w3.org/TR/dom/#nodeiterator\r\n *\r\n * @constructor\r\n * @param {Node} root\r\n * @param {number} whatToShow [optional]\r\n * @param {Function|NodeFilter} filter [optional]\r\n * @throws Error\r\n */\r\nfunction NodeIterator(root, whatToShow, filter) {\r\n  if (!root || !root.nodeType) {\r\n    utils.NotSupportedError();\r\n  }\r\n\r\n  // Read-only properties\r\n  this._root = root;\r\n  this._referenceNode = root;\r\n  this._pointerBeforeReferenceNode = true;\r\n  this._whatToShow = Number(whatToShow) || 0;\r\n  this._filter = filter || null;\r\n  this._active = false;\r\n  // Record active node iterators in the document, in order to perform\r\n  // \"node iterator pre-removal steps\".\r\n  root.doc._attachNodeIterator(this);\r\n}\r\n\r\nObject.defineProperties(NodeIterator.prototype, {\r\n  root: { get: function root() {\r\n    return this._root;\r\n  } },\r\n  referenceNode: { get: function referenceNode() {\r\n    return this._referenceNode;\r\n  } },\r\n  pointerBeforeReferenceNode: { get: function pointerBeforeReferenceNode() {\r\n    return this._pointerBeforeReferenceNode;\r\n  } },\r\n  whatToShow: { get: function whatToShow() {\r\n    return this._whatToShow;\r\n  } },\r\n  filter: { get: function filter() {\r\n    return this._filter;\r\n  } },\r\n\r\n  /**\r\n   * @method\r\n   * @param {Node} node\r\n   * @return {Number} Constant NodeFilter.FILTER_ACCEPT,\r\n   *  NodeFilter.FILTER_REJECT or NodeFilter.FILTER_SKIP.\r\n   */\r\n  _internalFilter: { value: function _internalFilter(node) {\r\n    /* jshint bitwise: false */\r\n    var result, filter;\r\n    if (this._active) {\r\n      utils.InvalidStateError();\r\n    }\r\n\r\n    // Maps nodeType to whatToShow\r\n    if (!(((1 << (node.nodeType - 1)) & this._whatToShow))) {\r\n      return NodeFilter.FILTER_SKIP;\r\n    }\r\n\r\n    filter = this._filter;\r\n    if (filter === null) {\r\n      result = NodeFilter.FILTER_ACCEPT;\r\n    } else {\r\n      this._active = true;\r\n      try {\r\n        if (typeof filter === 'function') {\r\n          result = filter(node);\r\n        } else {\r\n          result = filter.acceptNode(node);\r\n        }\r\n      } finally {\r\n        this._active = false;\r\n      }\r\n    }\r\n\r\n    // Note that coercing to a number means that\r\n    //  `true` becomes `1` (which is NodeFilter.FILTER_ACCEPT)\r\n    //  `false` becomes `0` (neither accept, reject, or skip)\r\n    return (+result);\r\n  } },\r\n\r\n  /**\r\n   * @spec https://dom.spec.whatwg.org/#nodeiterator-pre-removing-steps\r\n   * @method\r\n   * @return void\r\n   */\r\n  _preremove: { value: function _preremove(toBeRemovedNode) {\r\n    if (isInclusiveAncestor(toBeRemovedNode, this._root)) { return; }\r\n    if (!isInclusiveAncestor(toBeRemovedNode, this._referenceNode)) { return; }\r\n    if (this._pointerBeforeReferenceNode) {\r\n      var next = toBeRemovedNode;\r\n      while (next.lastChild) {\r\n        next = next.lastChild;\r\n      }\r\n      next = NodeTraversal.next(next, this.root);\r\n      if (next) {\r\n        this._referenceNode = next;\r\n        return;\r\n      }\r\n      this._pointerBeforeReferenceNode = false;\r\n      // fall through\r\n    }\r\n    if (toBeRemovedNode.previousSibling === null) {\r\n      this._referenceNode = toBeRemovedNode.parentNode;\r\n    } else {\r\n      this._referenceNode = toBeRemovedNode.previousSibling;\r\n      var lastChild;\r\n      for (lastChild = this._referenceNode.lastChild;\r\n           lastChild;\r\n           lastChild = this._referenceNode.lastChild) {\r\n        this._referenceNode = lastChild;\r\n      }\r\n    }\r\n  } },\r\n\r\n  /**\r\n   * @spec http://www.w3.org/TR/dom/#dom-nodeiterator-nextnode\r\n   * @method\r\n   * @return {Node|null}\r\n   */\r\n  nextNode: { value: function nextNode() {\r\n    return traverse(this, true);\r\n  } },\r\n\r\n  /**\r\n   * @spec http://www.w3.org/TR/dom/#dom-nodeiterator-previousnode\r\n   * @method\r\n   * @return {Node|null}\r\n   */\r\n  previousNode: { value: function previousNode() {\r\n    return traverse(this, false);\r\n  } },\r\n\r\n  /**\r\n   * @spec http://www.w3.org/TR/dom/#dom-nodeiterator-detach\r\n   * @method\r\n   * @return void\r\n   */\r\n  detach: { value: function detach() {\r\n    /* \"The detach() method must do nothing.\r\n     * Its functionality (disabling a NodeIterator object) was removed,\r\n     * but the method itself is preserved for compatibility.\r\n     */\r\n  } },\r\n\r\n  /** For compatibility with web-platform-tests. */\r\n  toString: { value: function toString() {\r\n    return \"[object NodeIterator]\";\r\n  } },\r\n});\r\n","\"use strict\";\r\n\r\n// No support for subclassing array, return an actual Array object.\r\nfunction item(i) {\r\n    /* jshint validthis: true */\r\n    return this[i] || null;\r\n}\r\n\r\nfunction NodeList(a) {\r\n    if (!a) a = [];\r\n    a.item = item;\r\n    return a;\r\n}\r\n\r\nmodule.exports = NodeList;\r\n","/* jshint esversion: 6 */\r\n\"use strict\";\r\n\r\nmodule.exports = class NodeList extends Array {\r\n    constructor(a) {\r\n        super((a && a.length) || 0);\r\n        if (a) {\r\n            for (var idx in a) { this[idx] = a[idx]; }\r\n        }\r\n    }\r\n    item(i) { return this[i] || null; }\r\n};\r\n","\"use strict\";\r\n\r\nvar NodeList;\r\n\r\ntry {\r\n    // Attempt to use ES6-style Array subclass if possible.\r\n    NodeList = require('./NodeList.es6.js');\r\n} catch (e) {\r\n    // No support for subclassing array, return an actual Array object.\r\n    NodeList = require('./NodeList.es5.js');\r\n}\r\n\r\nmodule.exports = NodeList;\r\n","\"use strict\";\r\n/* exported NodeTraversal */\r\nvar NodeTraversal = module.exports = {\r\n  nextSkippingChildren: nextSkippingChildren,\r\n  nextAncestorSibling: nextAncestorSibling,\r\n  next: next,\r\n  previous: previous,\r\n  deepLastChild: deepLastChild\r\n};\r\n\r\n/**\r\n * @based on WebKit's NodeTraversal::nextSkippingChildren\r\n * https://trac.webkit.org/browser/trunk/Source/WebCore/dom/NodeTraversal.h?rev=179143#L109\r\n */\r\nfunction nextSkippingChildren(node, stayWithin) {\r\n  if (node === stayWithin) {\r\n    return null;\r\n  }\r\n  if (node.nextSibling !== null) {\r\n    return node.nextSibling;\r\n  }\r\n  return nextAncestorSibling(node, stayWithin);\r\n}\r\n\r\n/**\r\n * @based on WebKit's NodeTraversal::nextAncestorSibling\r\n * https://trac.webkit.org/browser/trunk/Source/WebCore/dom/NodeTraversal.cpp?rev=179143#L93\r\n */\r\nfunction nextAncestorSibling(node, stayWithin) {\r\n  for (node = node.parentNode; node !== null; node = node.parentNode) {\r\n    if (node === stayWithin) {\r\n      return null;\r\n    }\r\n    if (node.nextSibling !== null) {\r\n      return node.nextSibling;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * @based on WebKit's NodeTraversal::next\r\n * https://trac.webkit.org/browser/trunk/Source/WebCore/dom/NodeTraversal.h?rev=179143#L99\r\n */\r\nfunction next(node, stayWithin) {\r\n  var n;\r\n  n = node.firstChild;\r\n  if (n !== null) {\r\n    return n;\r\n  }\r\n  if (node === stayWithin) {\r\n    return null;\r\n  }\r\n  n = node.nextSibling;\r\n  if (n !== null) {\r\n    return n;\r\n  }\r\n  return nextAncestorSibling(node, stayWithin);\r\n}\r\n\r\n/**\r\n * @based on WebKit's NodeTraversal::deepLastChild\r\n * https://trac.webkit.org/browser/trunk/Source/WebCore/dom/NodeTraversal.cpp?rev=179143#L116\r\n */\r\nfunction deepLastChild(node) {\r\n  while (node.lastChild) {\r\n    node = node.lastChild;\r\n  }\r\n  return node;\r\n}\r\n\r\n/**\r\n * @based on WebKit's NodeTraversal::previous\r\n * https://trac.webkit.org/browser/trunk/Source/WebCore/dom/NodeTraversal.h?rev=179143#L121\r\n */\r\nfunction previous(node, stayWithin) {\r\n  var p;\r\n  p = node.previousSibling;\r\n  if (p !== null) {\r\n    return deepLastChild(p);\r\n  }\r\n  p = node.parentNode;\r\n  if (p === stayWithin) {\r\n    return null;\r\n  }\r\n  return p;\r\n}\r\n","\"use strict\";\r\nmodule.exports = {\r\n  // NOTE: The `serializeOne()` function used to live on the `Node.prototype`\r\n  // as a private method `Node#_serializeOne(child)`, however that requires\r\n  // a megamorphic property access `this._serializeOne` just to get to the\r\n  // method, and this is being done on lots of different `Node` subclasses,\r\n  // which puts a lot of pressure on V8's megamorphic stub cache. So by\r\n  // moving the helper off of the `Node.prototype` and into a separate\r\n  // function in this helper module, we get a monomorphic property access\r\n  // `NodeUtils.serializeOne` to get to the function and reduce pressure\r\n  // on the megamorphic stub cache.\r\n  // See https://github.com/fgnass/domino/pull/142 for more information.\r\n  serializeOne: serializeOne,\r\n\r\n  // Export util functions so that we can run extra test for them.\r\n  // Note: we prefix function names with `ɵ`, similar to what we do\r\n  // with internal functions in Angular packages.\r\n  ɵescapeMatchingClosingTag: escapeMatchingClosingTag,\r\n  ɵescapeClosingCommentTag: escapeClosingCommentTag,\r\n  ɵescapeProcessingInstructionContent: escapeProcessingInstructionContent\r\n};\r\n\r\nvar utils = require('./utils');\r\nvar NAMESPACE = utils.NAMESPACE;\r\n\r\nvar hasRawContent = {\r\n  STYLE: true,\r\n  SCRIPT: true,\r\n  XMP: true,\r\n  IFRAME: true,\r\n  NOEMBED: true,\r\n  NOFRAMES: true,\r\n  PLAINTEXT: true\r\n};\r\n\r\nvar emptyElements = {\r\n  area: true,\r\n  base: true,\r\n  basefont: true,\r\n  bgsound: true,\r\n  br: true,\r\n  col: true,\r\n  embed: true,\r\n  frame: true,\r\n  hr: true,\r\n  img: true,\r\n  input: true,\r\n  keygen: true,\r\n  link: true,\r\n  meta: true,\r\n  param: true,\r\n  source: true,\r\n  track: true,\r\n  wbr: true\r\n};\r\n\r\nvar extraNewLine = {\r\n  /* Removed in https://github.com/whatwg/html/issues/944\r\n  pre: true,\r\n  textarea: true,\r\n  listing: true\r\n  */\r\n};\r\n\r\nconst ESCAPE_REGEXP = /[&<>\\u00A0]/g;\r\nconst ESCAPE_ATTR_REGEXP = /[&\"<>\\u00A0]/g;\r\n\r\nfunction escape(s) {\r\n  if (!ESCAPE_REGEXP.test(s)) {\r\n    // nothing to do, fast path\r\n    return s;\r\n  }\r\n\r\n  return s.replace(ESCAPE_REGEXP, (c) => {\r\n    switch (c) {\r\n      case \"&\":\r\n        return \"&amp;\";\r\n      case \"<\":\r\n        return \"&lt;\";\r\n      case \">\":\r\n        return \"&gt;\";\r\n      case \"\\u00A0\":\r\n        return \"&nbsp;\";\r\n    }\r\n  });\r\n}\r\n\r\nfunction escapeAttr(s) {\r\n  if (!ESCAPE_ATTR_REGEXP.test(s)) {\r\n    // nothing to do, fast path\r\n    return s;\r\n  }\r\n\r\n  return s.replace(ESCAPE_ATTR_REGEXP, (c) => {\r\n    switch (c) {\r\n      case \"<\":\r\n        return \"&lt;\";\r\n      case \">\":\r\n        return \"&gt;\";\r\n      case \"&\":\r\n        return \"&amp;\";\r\n      case '\"':\r\n        return \"&quot;\";\r\n      case \"\\u00A0\":\r\n        return \"&nbsp;\";\r\n    }\r\n  });\r\n}\r\n\r\nfunction attrname(a) {\r\n  var ns = a.namespaceURI;\r\n  if (!ns)\r\n    return a.localName;\r\n  if (ns === NAMESPACE.XML)\r\n    return 'xml:' + a.localName;\r\n  if (ns === NAMESPACE.XLINK)\r\n    return 'xlink:' + a.localName;\r\n\r\n  if (ns === NAMESPACE.XMLNS) {\r\n    if (a.localName === 'xmlns') return 'xmlns';\r\n    else return 'xmlns:' + a.localName;\r\n  }\r\n  return a.name;\r\n}\r\n\r\n/**\r\n * Escapes matching closing tag in a raw text.\r\n *\r\n * For example, given `<style>#text(</style><script></script>)</style>`,\r\n * the parent tag would by \"style\" and the raw text is\r\n * \"</style><script></script>\". If we come across a matching closing tag\r\n * (in out case `</style>`) - replace `<` with `&lt;` to avoid unexpected\r\n * and unsafe behavior after de-serialization.\r\n */\r\nfunction escapeMatchingClosingTag(rawText, parentTag) {\r\n  const parentClosingTag = '</' + parentTag;\r\n  if (!rawText.toLowerCase().includes(parentClosingTag)) {\r\n    return rawText; // fast path\r\n  }\r\n  const result = [...rawText];\r\n  const matches = rawText.matchAll(new RegExp(parentClosingTag, 'ig'));\r\n  for (const match of matches) {\r\n    result[match.index] = '&lt;';\r\n  }\r\n  return result.join('');\r\n}\r\n\r\nconst CLOSING_COMMENT_REGEXP = /--!?>/;\r\n\r\n/**\r\n * Escapes closing comment tag in a comment content.\r\n *\r\n * For example, given `#comment('-->')`, the content of a comment would be\r\n * updated to `--&gt;` to avoid unexpected and unsafe behavior after\r\n * de-serialization.\r\n */\r\nfunction escapeClosingCommentTag(rawContent) {\r\n  if (!CLOSING_COMMENT_REGEXP.test(rawContent)) {\r\n    return rawContent; // fast path\r\n  }\r\n  return rawContent.replace(/(--\\!?)>/g, '$1&gt;');\r\n}\r\n\r\n/**\r\n * Escapes processing instruction content by replacing `>` with `&gt`.\r\n */\r\nfunction escapeProcessingInstructionContent(rawContent) {\r\n  return rawContent.includes('>')\r\n    ? rawContent.replaceAll('>', '&gt;')\r\n    : rawContent;\r\n}\r\n\r\nfunction serializeOne(kid, parent) {\r\n  var s = '';\r\n  switch(kid.nodeType) {\r\n    case 1: //ELEMENT_NODE\r\n      var ns = kid.namespaceURI;\r\n      var html = ns === NAMESPACE.HTML;\r\n      var tagname = (html || ns === NAMESPACE.SVG || ns === NAMESPACE.MATHML) ? kid.localName : kid.tagName;\r\n\r\n      s += '<' + tagname;\r\n\r\n      for(var j = 0, k = kid._numattrs; j < k; j++) {\r\n        var a = kid._attr(j);\r\n        s += ' ' + attrname(a);\r\n        if (a.value !== undefined) s += '=\"' + escapeAttr(a.value) + '\"';\r\n      }\r\n      s += '>';\r\n\r\n      if (!(html && emptyElements[tagname])) {\r\n        var ss = kid.serialize();\r\n        // If an element can have raw content, this content may\r\n        // potentially require escaping to avoid XSS.\r\n        if (hasRawContent[tagname.toUpperCase()]) {\r\n          ss = escapeMatchingClosingTag(ss, tagname);\r\n        }\r\n        if (html && extraNewLine[tagname] && ss.charAt(0)==='\\n') s += '\\n';\r\n        // Serialize children and add end tag for all others\r\n        s += ss;\r\n        s += '</' + tagname + '>';\r\n      }\r\n      break;\r\n    case 3: //TEXT_NODE\r\n    case 4: //CDATA_SECTION_NODE\r\n      var parenttag;\r\n      if (parent.nodeType === 1 /*ELEMENT_NODE*/ &&\r\n        parent.namespaceURI === NAMESPACE.HTML)\r\n        parenttag = parent.tagName;\r\n      else\r\n        parenttag = '';\r\n\r\n      if (hasRawContent[parenttag] ||\r\n          (parenttag==='NOSCRIPT' && parent.ownerDocument._scripting_enabled)) {\r\n        s += kid.data;\r\n      } else {\r\n        s += escape(kid.data);\r\n      }\r\n      break;\r\n    case 8: //COMMENT_NODE\r\n      s += '<!--' + escapeClosingCommentTag(kid.data) + '-->';\r\n      break;\r\n    case 7: //PROCESSING_INSTRUCTION_NODE\r\n      const content = escapeProcessingInstructionContent(kid.data);\r\n      s += '<?' + kid.target + ' ' + content + '?>';\r\n      break;\r\n    case 10: //DOCUMENT_TYPE_NODE\r\n      s += '<!DOCTYPE ' + kid.name;\r\n\r\n      if (false) {\r\n        // Latest HTML serialization spec omits the public/system ID\r\n        if (kid.publicID) {\r\n          s += ' PUBLIC \"' + kid.publicId + '\"';\r\n        }\r\n\r\n        if (kid.systemId) {\r\n          s += ' \"' + kid.systemId + '\"';\r\n        }\r\n      }\r\n\r\n      s += '>';\r\n      break;\r\n    default:\r\n      utils.InvalidStateError();\r\n  }\r\n  return s;\r\n}\r\n","\"use strict\";\r\nvar Node = require('./Node');\r\n\r\nvar NonDocumentTypeChildNode = {\r\n\r\n  nextElementSibling: { get: function() {\r\n    if (this.parentNode) {\r\n      for (var kid = this.nextSibling; kid !== null; kid = kid.nextSibling) {\r\n        if (kid.nodeType === Node.ELEMENT_NODE) return kid;\r\n      }\r\n    }\r\n    return null;\r\n  }},\r\n\r\n  previousElementSibling: { get: function() {\r\n    if (this.parentNode) {\r\n      for (var kid = this.previousSibling; kid !== null; kid = kid.previousSibling) {\r\n        if (kid.nodeType === Node.ELEMENT_NODE) return kid;\r\n      }\r\n    }\r\n    return null;\r\n  }}\r\n\r\n};\r\n\r\nmodule.exports = NonDocumentTypeChildNode;\r\n","\"use strict\";\r\nmodule.exports = ProcessingInstruction;\r\n\r\nvar Node = require('./Node');\r\nvar CharacterData = require('./CharacterData');\r\n\r\nfunction ProcessingInstruction(doc, target, data) {\r\n  CharacterData.call(this);\r\n  this.nodeType = Node.PROCESSING_INSTRUCTION_NODE;\r\n  this.ownerDocument = doc;\r\n  this.target = target;\r\n  this._data = data;\r\n}\r\n\r\nvar nodeValue = {\r\n  get: function() { return this._data; },\r\n  set: function(v) {\r\n    if (v === null || v === undefined) { v = ''; } else { v = String(v); }\r\n    this._data = v;\r\n    if (this.rooted) this.ownerDocument.mutateValue(this);\r\n  }\r\n};\r\n\r\nProcessingInstruction.prototype = Object.create(CharacterData.prototype, {\r\n  nodeName: { get: function() { return this.target; }},\r\n  nodeValue: nodeValue,\r\n  textContent: nodeValue,\r\n  innerText: nodeValue,\r\n  data: {\r\n    get: nodeValue.get,\r\n    set: function(v) {\r\n      nodeValue.set.call(this, v===null ? '' : String(v));\r\n    },\r\n  },\r\n\r\n  // Utility methods\r\n  clone: { value: function clone() {\r\n      return new ProcessingInstruction(this.ownerDocument, this.target, this._data);\r\n  }},\r\n  isEqual: { value: function isEqual(n) {\r\n      return this.target === n.target && this._data === n._data;\r\n  }}\r\n\r\n});\r\n","\"use strict\";\r\nmodule.exports = Text;\r\n\r\nvar utils = require('./utils');\r\nvar Node = require('./Node');\r\nvar CharacterData = require('./CharacterData');\r\n\r\nfunction Text(doc, data) {\r\n  CharacterData.call(this);\r\n  this.nodeType = Node.TEXT_NODE;\r\n  this.ownerDocument = doc;\r\n  this._data = data;\r\n  this._index = undefined;\r\n}\r\n\r\nvar nodeValue = {\r\n  get: function() { return this._data; },\r\n  set: function(v) {\r\n    if (v === null || v === undefined) { v = ''; } else { v = String(v); }\r\n    if (v === this._data) return;\r\n    this._data = v;\r\n    if (this.rooted)\r\n      this.ownerDocument.mutateValue(this);\r\n    if (this.parentNode &&\r\n      this.parentNode._textchangehook)\r\n      this.parentNode._textchangehook(this);\r\n  }\r\n};\r\n\r\nText.prototype = Object.create(CharacterData.prototype, {\r\n  nodeName: { value: \"#text\" },\r\n  // These three attributes are all the same.\r\n  // The data attribute has a [TreatNullAs=EmptyString] but we'll\r\n  // implement that at the interface level\r\n  nodeValue: nodeValue,\r\n  textContent: nodeValue,\r\n  innerText: nodeValue,\r\n  data: {\r\n    get: nodeValue.get,\r\n    set: function(v) {\r\n      nodeValue.set.call(this, v===null ? '' : String(v));\r\n    },\r\n  },\r\n\r\n  splitText: { value: function splitText(offset) {\r\n    if (offset > this._data.length || offset < 0) utils.IndexSizeError();\r\n\r\n    var newdata = this._data.substring(offset),\r\n      newnode = this.ownerDocument.createTextNode(newdata);\r\n    this.data = this.data.substring(0, offset);\r\n\r\n    var parent = this.parentNode;\r\n    if (parent !== null)\r\n      parent.insertBefore(newnode, this.nextSibling);\r\n\r\n    return newnode;\r\n  }},\r\n\r\n  wholeText: { get: function wholeText() {\r\n    var result = this.textContent;\r\n    for (var next = this.nextSibling; next; next = next.nextSibling) {\r\n      if (next.nodeType !== Node.TEXT_NODE) { break; }\r\n      result += next.textContent;\r\n    }\r\n    return result;\r\n  }},\r\n  // Obsolete, removed from spec.\r\n  replaceWholeText: { value: utils.nyi },\r\n\r\n  // Utility methods\r\n  clone: { value: function clone() {\r\n    return new Text(this.ownerDocument, this._data);\r\n  }},\r\n\r\n});\r\n","\"use strict\";\r\nmodule.exports = TreeWalker;\r\n\r\nvar Node = require('./Node');\r\nvar NodeFilter = require('./NodeFilter');\r\nvar NodeTraversal = require('./NodeTraversal');\r\nvar utils = require('./utils');\r\n\r\nvar mapChild = {\r\n  first: 'firstChild',\r\n  last: 'lastChild',\r\n  next: 'firstChild',\r\n  previous: 'lastChild'\r\n};\r\n\r\nvar mapSibling = {\r\n  first: 'nextSibling',\r\n  last: 'previousSibling',\r\n  next: 'nextSibling',\r\n  previous: 'previousSibling'\r\n};\r\n\r\n/* Private methods and helpers */\r\n\r\n/**\r\n * @spec https://dom.spec.whatwg.org/#concept-traverse-children\r\n * @method\r\n * @access private\r\n * @param {TreeWalker} tw\r\n * @param {string} type One of 'first' or 'last'.\r\n * @return {Node|null}\r\n */\r\nfunction traverseChildren(tw, type) {\r\n  var child, node, parent, result, sibling;\r\n  node = tw._currentNode[mapChild[type]];\r\n  while (node !== null) {\r\n    result = tw._internalFilter(node);\r\n    if (result === NodeFilter.FILTER_ACCEPT) {\r\n      tw._currentNode = node;\r\n      return node;\r\n    }\r\n    if (result === NodeFilter.FILTER_SKIP) {\r\n      child = node[mapChild[type]];\r\n      if (child !== null) {\r\n        node = child;\r\n        continue;\r\n      }\r\n    }\r\n    while (node !== null) {\r\n      sibling = node[mapSibling[type]];\r\n      if (sibling !== null) {\r\n        node = sibling;\r\n        break;\r\n      }\r\n      parent = node.parentNode;\r\n      if (parent === null || parent === tw.root || parent === tw._currentNode) {\r\n        return null;\r\n      } else {\r\n        node = parent;\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * @spec https://dom.spec.whatwg.org/#concept-traverse-siblings\r\n * @method\r\n * @access private\r\n * @param {TreeWalker} tw\r\n * @param {TreeWalker} type One of 'next' or 'previous'.\r\n * @return {Node|nul}\r\n */\r\nfunction traverseSiblings(tw, type) {\r\n  var node, result, sibling;\r\n  node = tw._currentNode;\r\n  if (node === tw.root) {\r\n    return null;\r\n  }\r\n  while (true) {\r\n    sibling = node[mapSibling[type]];\r\n    while (sibling !== null) {\r\n      node = sibling;\r\n      result = tw._internalFilter(node);\r\n      if (result === NodeFilter.FILTER_ACCEPT) {\r\n        tw._currentNode = node;\r\n        return node;\r\n      }\r\n      sibling = node[mapChild[type]];\r\n      if (result === NodeFilter.FILTER_REJECT || sibling === null) {\r\n        sibling = node[mapSibling[type]];\r\n      }\r\n    }\r\n    node = node.parentNode;\r\n    if (node === null || node === tw.root) {\r\n      return null;\r\n    }\r\n    if (tw._internalFilter(node) === NodeFilter.FILTER_ACCEPT) {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n/* Public API */\r\n\r\n/**\r\n * Latest version: https://dom.spec.whatwg.org/#treewalker\r\n *\r\n * @constructor\r\n * @param {Node} root\r\n * @param {number} whatToShow [optional]\r\n * @param {Function|NodeFilter} filter [optional]\r\n * @throws Error\r\n */\r\nfunction TreeWalker(root, whatToShow, filter) {\r\n  if (!root || !root.nodeType) {\r\n    utils.NotSupportedError();\r\n  }\r\n\r\n  // Read-only properties\r\n  this._root = root;\r\n  this._whatToShow = Number(whatToShow) || 0;\r\n  this._filter = filter || null;\r\n  this._active = false;\r\n  // Read-write property\r\n  this._currentNode = root;\r\n}\r\n\r\nObject.defineProperties(TreeWalker.prototype, {\r\n  root: { get: function() { return this._root; } },\r\n  whatToShow: { get: function() { return this._whatToShow; } },\r\n  filter: { get: function() { return this._filter; } },\r\n\r\n  currentNode: {\r\n    get: function currentNode() {\r\n      return this._currentNode;\r\n    },\r\n    set: function setCurrentNode(v) {\r\n      if (!(v instanceof Node)) {\r\n        throw new TypeError(\"Not a Node\"); // `null` is also not a node\r\n      }\r\n      this._currentNode = v;\r\n    },\r\n  },\r\n\r\n  /**\r\n   * @method\r\n   * @param {Node} node\r\n   * @return {Number} Constant NodeFilter.FILTER_ACCEPT,\r\n   *  NodeFilter.FILTER_REJECT or NodeFilter.FILTER_SKIP.\r\n   */\r\n  _internalFilter: { value: function _internalFilter(node) {\r\n    /* jshint bitwise: false */\r\n    var result, filter;\r\n    if (this._active) {\r\n      utils.InvalidStateError();\r\n    }\r\n\r\n    // Maps nodeType to whatToShow\r\n    if (!(((1 << (node.nodeType - 1)) & this._whatToShow))) {\r\n      return NodeFilter.FILTER_SKIP;\r\n    }\r\n\r\n    filter = this._filter;\r\n    if (filter === null) {\r\n      result = NodeFilter.FILTER_ACCEPT;\r\n    } else {\r\n      this._active = true;\r\n      try {\r\n        if (typeof filter === 'function') {\r\n          result = filter(node);\r\n        } else {\r\n          result = filter.acceptNode(node);\r\n        }\r\n      } finally {\r\n        this._active = false;\r\n      }\r\n    }\r\n\r\n    // Note that coercing to a number means that\r\n    //  `true` becomes `1` (which is NodeFilter.FILTER_ACCEPT)\r\n    //  `false` becomes `0` (neither accept, reject, or skip)\r\n    return (+result);\r\n  }},\r\n\r\n  /**\r\n   * @spec https://dom.spec.whatwg.org/#dom-treewalker-parentnode\r\n   * @based on WebKit's TreeWalker::parentNode\r\n   * https://trac.webkit.org/browser/webkit/trunk/Source/WebCore/dom/TreeWalker.cpp?rev=220453#L50\r\n   * @method\r\n   * @return {Node|null}\r\n   */\r\n  parentNode: { value: function parentNode() {\r\n    var node = this._currentNode;\r\n    while (node !== this.root) {\r\n      node = node.parentNode;\r\n      if (node === null) {\r\n        return null;\r\n      }\r\n      if (this._internalFilter(node) === NodeFilter.FILTER_ACCEPT) {\r\n        this._currentNode = node;\r\n        return node;\r\n      }\r\n    }\r\n    return null;\r\n  }},\r\n\r\n  /**\r\n   * @spec https://dom.spec.whatwg.org/#dom-treewalker-firstchild\r\n   * @method\r\n   * @return {Node|null}\r\n   */\r\n  firstChild: { value: function firstChild() {\r\n    return traverseChildren(this, 'first');\r\n  }},\r\n\r\n  /**\r\n   * @spec https://dom.spec.whatwg.org/#dom-treewalker-lastchild\r\n   * @method\r\n   * @return {Node|null}\r\n   */\r\n  lastChild: { value: function lastChild() {\r\n    return traverseChildren(this, 'last');\r\n  }},\r\n\r\n  /**\r\n   * @spec http://www.w3.org/TR/dom/#dom-treewalker-previoussibling\r\n   * @method\r\n   * @return {Node|null}\r\n   */\r\n  previousSibling: { value: function previousSibling() {\r\n    return traverseSiblings(this, 'previous');\r\n  }},\r\n\r\n  /**\r\n   * @spec http://www.w3.org/TR/dom/#dom-treewalker-nextsibling\r\n   * @method\r\n   * @return {Node|null}\r\n   */\r\n  nextSibling: { value: function nextSibling() {\r\n    return traverseSiblings(this, 'next');\r\n  }},\r\n\r\n  /**\r\n   * @spec https://dom.spec.whatwg.org/#dom-treewalker-previousnode\r\n   * @based on WebKit's TreeWalker::previousNode\r\n   * https://trac.webkit.org/browser/webkit/trunk/Source/WebCore/dom/TreeWalker.cpp?rev=220453#L181\r\n   * @method\r\n   * @return {Node|null}\r\n   */\r\n  previousNode: { value: function previousNode() {\r\n    var node, result, previousSibling, lastChild;\r\n    node = this._currentNode;\r\n    while (node !== this._root) {\r\n      for (previousSibling = node.previousSibling;\r\n           previousSibling;\r\n           previousSibling = node.previousSibling) {\r\n        node = previousSibling;\r\n        result = this._internalFilter(node);\r\n        if (result === NodeFilter.FILTER_REJECT) {\r\n          continue;\r\n        }\r\n        for (lastChild = node.lastChild;\r\n             lastChild;\r\n             lastChild = node.lastChild) {\r\n          node = lastChild;\r\n          result = this._internalFilter(node);\r\n          if (result === NodeFilter.FILTER_REJECT) {\r\n            break;\r\n          }\r\n        }\r\n        if (result === NodeFilter.FILTER_ACCEPT) {\r\n          this._currentNode = node;\r\n          return node;\r\n        }\r\n      }\r\n      if (node === this.root || node.parentNode === null) {\r\n        return null;\r\n      }\r\n      node = node.parentNode;\r\n      if (this._internalFilter(node) === NodeFilter.FILTER_ACCEPT) {\r\n        this._currentNode = node;\r\n        return node;\r\n      }\r\n    }\r\n    return null;\r\n  }},\r\n\r\n  /**\r\n   * @spec https://dom.spec.whatwg.org/#dom-treewalker-nextnode\r\n   * @based on WebKit's TreeWalker::nextNode\r\n   * https://trac.webkit.org/browser/webkit/trunk/Source/WebCore/dom/TreeWalker.cpp?rev=220453#L228\r\n   * @method\r\n   * @return {Node|null}\r\n   */\r\n  nextNode: { value: function nextNode() {\r\n    var node, result, firstChild, nextSibling;\r\n    node = this._currentNode;\r\n    result = NodeFilter.FILTER_ACCEPT;\r\n\r\n    CHILDREN:\r\n    while (true) {\r\n      for (firstChild = node.firstChild;\r\n           firstChild;\r\n           firstChild = node.firstChild) {\r\n        node = firstChild;\r\n        result = this._internalFilter(node);\r\n        if (result === NodeFilter.FILTER_ACCEPT) {\r\n          this._currentNode = node;\r\n          return node;\r\n        } else if (result === NodeFilter.FILTER_REJECT) {\r\n          break;\r\n        }\r\n      }\r\n      for (nextSibling = NodeTraversal.nextSkippingChildren(node, this.root);\r\n           nextSibling;\r\n           nextSibling = NodeTraversal.nextSkippingChildren(node, this.root)) {\r\n        node = nextSibling;\r\n        result = this._internalFilter(node);\r\n        if (result === NodeFilter.FILTER_ACCEPT) {\r\n          this._currentNode = node;\r\n          return node;\r\n        } else if (result === NodeFilter.FILTER_SKIP) {\r\n          continue CHILDREN;\r\n        }\r\n      }\r\n      return null;\r\n    }\r\n  }},\r\n\r\n  /** For compatibility with web-platform-tests. */\r\n  toString: { value: function toString() {\r\n    return \"[object TreeWalker]\";\r\n  }},\r\n});\r\n","\"use strict\";\r\nvar Event = require('./Event');\r\n\r\nmodule.exports = UIEvent;\r\n\r\nfunction UIEvent() {\r\n  // Just use the superclass constructor to initialize\r\n  Event.call(this);\r\n  this.view = null; // FF uses the current window\r\n  this.detail = 0;\r\n}\r\nUIEvent.prototype = Object.create(Event.prototype, {\r\n  constructor: { value: UIEvent },\r\n  initUIEvent: { value: function(type, bubbles, cancelable, view, detail) {\r\n    this.initEvent(type, bubbles, cancelable);\r\n    this.view = view;\r\n    this.detail = detail;\r\n  }}\r\n});\r\n","\"use strict\";\r\nmodule.exports = URL;\r\n\r\nfunction URL(url) {\r\n  if (!url) return Object.create(URL.prototype);\r\n  // Can't use String.trim() since it defines whitespace differently than HTML\r\n  this.url = url.replace(/^[ \\t\\n\\r\\f]+|[ \\t\\n\\r\\f]+$/g, \"\");\r\n\r\n  // See http://tools.ietf.org/html/rfc3986#appendix-B\r\n  // and https://url.spec.whatwg.org/#parsing\r\n  var match = URL.pattern.exec(this.url);\r\n  if (match) {\r\n    if (match[2]) this.scheme = match[2];\r\n    if (match[4]) {\r\n      // parse username/password\r\n      var userinfo = match[4].match(URL.userinfoPattern);\r\n      if (userinfo) {\r\n        this.username = userinfo[1];\r\n        this.password = userinfo[3];\r\n        match[4] = match[4].substring(userinfo[0].length);\r\n      }\r\n      if (match[4].match(URL.portPattern)) {\r\n        var pos = match[4].lastIndexOf(':');\r\n        this.host = match[4].substring(0, pos);\r\n        this.port = match[4].substring(pos+1);\r\n      }\r\n      else {\r\n        this.host = match[4];\r\n      }\r\n    }\r\n    if (match[5]) this.path = match[5];\r\n    if (match[6]) this.query = match[7];\r\n    if (match[8]) this.fragment = match[9];\r\n  }\r\n}\r\n\r\nURL.pattern = /^(([^:\\/?#]+):)?(\\/\\/([^\\/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/;\r\nURL.userinfoPattern = /^([^@:]*)(:([^@]*))?@/;\r\nURL.portPattern = /:\\d+$/;\r\nURL.authorityPattern = /^[^:\\/?#]+:\\/\\//;\r\nURL.hierarchyPattern = /^[^:\\/?#]+:\\//;\r\n\r\n// Return a percentEncoded version of s.\r\n// S should be a single-character string\r\n// XXX: needs to do utf-8 encoding?\r\nURL.percentEncode = function percentEncode(s) {\r\n  var c = s.charCodeAt(0);\r\n  if (c < 256) return \"%\" + c.toString(16);\r\n  else throw Error(\"can't percent-encode codepoints > 255 yet\");\r\n};\r\n\r\nURL.prototype = {\r\n  constructor: URL,\r\n\r\n  // XXX: not sure if this is the precise definition of absolute\r\n  isAbsolute: function() { return !!this.scheme; },\r\n  isAuthorityBased: function() {\r\n    return URL.authorityPattern.test(this.url);\r\n  },\r\n  isHierarchical: function() {\r\n    return URL.hierarchyPattern.test(this.url);\r\n  },\r\n\r\n  toString: function() {\r\n    var s = \"\";\r\n    if (this.scheme !== undefined) s += this.scheme + \":\";\r\n    if (this.isAbsolute()) {\r\n      s += '//';\r\n      if (this.username || this.password) {\r\n        s += this.username || '';\r\n        if (this.password) {\r\n          s += ':' + this.password;\r\n        }\r\n        s += '@';\r\n      }\r\n      if (this.host) {\r\n        s += this.host;\r\n      }\r\n    }\r\n    if (this.port !== undefined) s += \":\" + this.port;\r\n    if (this.path !== undefined) s += this.path;\r\n    if (this.query !== undefined) s += \"?\" + this.query;\r\n    if (this.fragment !== undefined) s += \"#\" + this.fragment;\r\n    return s;\r\n  },\r\n\r\n  // See: http://tools.ietf.org/html/rfc3986#section-5.2\r\n  // and https://url.spec.whatwg.org/#constructors\r\n  resolve: function(relative) {\r\n    var base = this;           // The base url we're resolving against\r\n    var r = new URL(relative); // The relative reference url to resolve\r\n    var t = new URL();         // The absolute target url we will return\r\n\r\n    if (r.scheme !== undefined) {\r\n      t.scheme = r.scheme;\r\n      t.username = r.username;\r\n      t.password = r.password;\r\n      t.host = r.host;\r\n      t.port = r.port;\r\n      t.path = remove_dot_segments(r.path);\r\n      t.query = r.query;\r\n    }\r\n    else {\r\n      t.scheme = base.scheme;\r\n      if (r.host !== undefined) {\r\n        t.username = r.username;\r\n        t.password = r.password;\r\n        t.host = r.host;\r\n        t.port = r.port;\r\n        t.path = remove_dot_segments(r.path);\r\n        t.query = r.query;\r\n      }\r\n      else {\r\n        t.username = base.username;\r\n        t.password = base.password;\r\n        t.host = base.host;\r\n        t.port = base.port;\r\n        if (!r.path) { // undefined or empty\r\n          t.path = base.path;\r\n          if (r.query !== undefined)\r\n            t.query = r.query;\r\n          else\r\n            t.query = base.query;\r\n        }\r\n        else {\r\n          if (r.path.charAt(0) === \"/\") {\r\n            t.path = remove_dot_segments(r.path);\r\n          }\r\n          else {\r\n            t.path = merge(base.path, r.path);\r\n            t.path = remove_dot_segments(t.path);\r\n          }\r\n          t.query = r.query;\r\n        }\r\n      }\r\n    }\r\n    t.fragment = r.fragment;\r\n\r\n    return t.toString();\r\n\r\n\r\n    function merge(basepath, refpath) {\r\n      if (base.host !== undefined && !base.path)\r\n        return \"/\" + refpath;\r\n\r\n      var lastslash = basepath.lastIndexOf(\"/\");\r\n      if (lastslash === -1)\r\n        return refpath;\r\n      else\r\n        return basepath.substring(0, lastslash+1) + refpath;\r\n    }\r\n\r\n    function remove_dot_segments(path) {\r\n      if (!path) return path; // For \"\" or undefined\r\n\r\n      var output = \"\";\r\n      while(path.length > 0) {\r\n        if (path === \".\" || path === \"..\") {\r\n          path = \"\";\r\n          break;\r\n        }\r\n\r\n        var twochars = path.substring(0,2);\r\n        var threechars = path.substring(0,3);\r\n        var fourchars = path.substring(0,4);\r\n        if (threechars === \"../\") {\r\n          path = path.substring(3);\r\n        }\r\n        else if (twochars === \"./\") {\r\n          path = path.substring(2);\r\n        }\r\n        else if (threechars === \"/./\") {\r\n          path = \"/\" + path.substring(3);\r\n        }\r\n        else if (twochars === \"/.\" && path.length === 2) {\r\n          path = \"/\";\r\n        }\r\n        else if (fourchars === \"/../\" ||\r\n             (threechars === \"/..\" && path.length === 3)) {\r\n          path = \"/\" + path.substring(4);\r\n\r\n          output = output.replace(/\\/?[^\\/]*$/, \"\");\r\n        }\r\n        else {\r\n          var segment = path.match(/(\\/?([^\\/]*))/)[0];\r\n          output += segment;\r\n          path = path.substring(segment.length);\r\n        }\r\n      }\r\n\r\n      return output;\r\n    }\r\n  },\r\n};\r\n","\"use strict\";\r\nvar URL = require('./URL');\r\n\r\nmodule.exports = URLUtils;\r\n\r\n// Allow the `x == null` pattern.  This is eslint's \"null: 'ignore'\" option,\r\n// but jshint doesn't support this.\r\n/* jshint eqeqeq: false */\r\n\r\n// This is an abstract superclass for Location, HTMLAnchorElement and\r\n// other types that have the standard complement of \"URL decomposition\r\n// IDL attributes\".  This is now standardized as URLUtils, see:\r\n// https://url.spec.whatwg.org/#urlutils\r\n// Subclasses must define a getter/setter on href.\r\n// The getter and setter methods parse and rebuild the URL on each\r\n// invocation; there is no attempt to cache the value and be more efficient\r\nfunction URLUtils() {}\r\nURLUtils.prototype = Object.create(Object.prototype, {\r\n\r\n  _url: { get: function() {\r\n    // XXX: this should do the \"Reinitialize url\" steps, and \"null\" should\r\n    // be a valid return value.\r\n    return new URL(this.href);\r\n  } },\r\n\r\n  protocol: {\r\n    get: function() {\r\n      var url = this._url;\r\n      if (url && url.scheme) return url.scheme + \":\";\r\n      else return \":\";\r\n    },\r\n    set: function(v) {\r\n      var output = this.href;\r\n      var url = new URL(output);\r\n      if (url.isAbsolute()) {\r\n        v = v.replace(/:+$/, \"\");\r\n        v = v.replace(/[^-+\\.a-zA-Z0-9]/g, URL.percentEncode);\r\n        if (v.length > 0) {\r\n          url.scheme = v;\r\n          output = url.toString();\r\n        }\r\n      }\r\n      this.href = output;\r\n    },\r\n  },\r\n\r\n  host: {\r\n    get: function() {\r\n      var url = this._url;\r\n      if (url.isAbsolute() && url.isAuthorityBased())\r\n        return url.host + (url.port ? (\":\" + url.port) : \"\");\r\n      else\r\n        return \"\";\r\n    },\r\n    set: function(v) {\r\n      var output = this.href;\r\n      var url = new URL(output);\r\n      if (url.isAbsolute() && url.isAuthorityBased()) {\r\n        v = v.replace(/[^-+\\._~!$&'()*,;:=a-zA-Z0-9]/g, URL.percentEncode);\r\n        if (v.length > 0) {\r\n          url.host = v;\r\n          delete url.port;\r\n          output = url.toString();\r\n        }\r\n      }\r\n      this.href = output;\r\n    },\r\n  },\r\n\r\n  hostname: {\r\n    get: function() {\r\n      var url = this._url;\r\n      if (url.isAbsolute() && url.isAuthorityBased())\r\n        return url.host;\r\n      else\r\n        return \"\";\r\n    },\r\n    set: function(v) {\r\n      var output = this.href;\r\n      var url = new URL(output);\r\n      if (url.isAbsolute() && url.isAuthorityBased()) {\r\n        v = v.replace(/^\\/+/, \"\");\r\n        v = v.replace(/[^-+\\._~!$&'()*,;:=a-zA-Z0-9]/g, URL.percentEncode);\r\n        if (v.length > 0) {\r\n          url.host = v;\r\n          output = url.toString();\r\n        }\r\n      }\r\n      this.href = output;\r\n    },\r\n  },\r\n\r\n  port: {\r\n    get: function() {\r\n      var url = this._url;\r\n      if (url.isAbsolute() && url.isAuthorityBased() && url.port!==undefined)\r\n        return url.port;\r\n      else\r\n        return \"\";\r\n    },\r\n    set: function(v) {\r\n      var output = this.href;\r\n      var url = new URL(output);\r\n      if (url.isAbsolute() && url.isAuthorityBased()) {\r\n        v = '' + v;\r\n        v = v.replace(/[^0-9].*$/, \"\");\r\n        v = v.replace(/^0+/, \"\");\r\n        if (v.length === 0) v = \"0\";\r\n        if (parseInt(v, 10) <= 65535) {\r\n          url.port = v;\r\n          output = url.toString();\r\n        }\r\n      }\r\n      this.href = output;\r\n    },\r\n  },\r\n\r\n  pathname: {\r\n    get: function() {\r\n      var url = this._url;\r\n      if (url.isAbsolute() && url.isHierarchical())\r\n        return url.path;\r\n      else\r\n        return \"\";\r\n    },\r\n    set: function(v) {\r\n      var output = this.href;\r\n      var url = new URL(output);\r\n      if (url.isAbsolute() && url.isHierarchical()) {\r\n        if (v.charAt(0) !== \"/\")\r\n          v = \"/\" + v;\r\n        v = v.replace(/[^-+\\._~!$&'()*,;:=@\\/a-zA-Z0-9]/g, URL.percentEncode);\r\n        url.path = v;\r\n        output = url.toString();\r\n      }\r\n      this.href = output;\r\n    },\r\n  },\r\n\r\n  search: {\r\n    get: function() {\r\n      var url = this._url;\r\n      if (url.isAbsolute() && url.isHierarchical() && url.query!==undefined)\r\n        return \"?\" + url.query;\r\n      else\r\n        return \"\";\r\n    },\r\n    set: function(v) {\r\n      var output = this.href;\r\n      var url = new URL(output);\r\n      if (url.isAbsolute() && url.isHierarchical()) {\r\n        if (v.charAt(0) === \"?\") v = v.substring(1);\r\n        v = v.replace(/[^-+\\._~!$&'()*,;:=@\\/?a-zA-Z0-9]/g, URL.percentEncode);\r\n        url.query = v;\r\n        output = url.toString();\r\n      }\r\n      this.href = output;\r\n    },\r\n  },\r\n\r\n  hash: {\r\n    get: function() {\r\n      var url = this._url;\r\n      if (url == null || url.fragment == null || url.fragment === '') {\r\n        return \"\";\r\n      } else {\r\n        return \"#\" + url.fragment;\r\n      }\r\n    },\r\n    set: function(v) {\r\n      var output = this.href;\r\n      var url = new URL(output);\r\n\r\n      if (v.charAt(0) === \"#\") v = v.substring(1);\r\n      v = v.replace(/[^-+\\._~!$&'()*,;:=@\\/?a-zA-Z0-9]/g, URL.percentEncode);\r\n      url.fragment = v;\r\n      output = url.toString();\r\n\r\n      this.href = output;\r\n    },\r\n  },\r\n\r\n  username: {\r\n    get: function() {\r\n      var url = this._url;\r\n      return url.username || '';\r\n    },\r\n    set: function(v) {\r\n      var output = this.href;\r\n      var url = new URL(output);\r\n      if (url.isAbsolute()) {\r\n        v = v.replace(/[\\x00-\\x1F\\x7F-\\uFFFF \"#<>?`\\/@\\\\:]/g, URL.percentEncode);\r\n        url.username = v;\r\n        output = url.toString();\r\n      }\r\n      this.href = output;\r\n    },\r\n  },\r\n\r\n  password: {\r\n    get: function() {\r\n      var url = this._url;\r\n      return url.password || '';\r\n    },\r\n    set: function(v) {\r\n      var output = this.href;\r\n      var url = new URL(output);\r\n      if (url.isAbsolute()) {\r\n        if (v==='') {\r\n          url.password = null;\r\n        } else {\r\n          v = v.replace(/[\\x00-\\x1F\\x7F-\\uFFFF \"#<>?`\\/@\\\\]/g, URL.percentEncode);\r\n          url.password = v;\r\n        }\r\n        output = url.toString();\r\n      }\r\n      this.href = output;\r\n    },\r\n  },\r\n\r\n  origin: { get: function() {\r\n    var url = this._url;\r\n    if (url == null) { return ''; }\r\n    var originForPort = function(defaultPort) {\r\n      var origin = [url.scheme, url.host, +url.port || defaultPort];\r\n      // XXX should be \"unicode serialization\"\r\n      return origin[0] + '://' + origin[1] +\r\n        (origin[2] === defaultPort ? '' : (':' + origin[2]));\r\n    };\r\n    switch (url.scheme) {\r\n    case 'ftp':\r\n      return originForPort(21);\r\n    case 'gopher':\r\n      return originForPort(70);\r\n    case 'http':\r\n    case 'ws':\r\n      return originForPort(80);\r\n    case 'https':\r\n    case 'wss':\r\n      return originForPort(443);\r\n    default:\r\n      // this is what chrome does\r\n      return url.scheme + '://';\r\n    }\r\n  } },\r\n\r\n  /*\r\n  searchParams: {\r\n    get: function() {\r\n      var url = this._url;\r\n      // XXX\r\n    },\r\n    set: function(v) {\r\n      var output = this.href;\r\n      var url = new URL(output);\r\n      // XXX\r\n      this.href = output;\r\n    },\r\n  },\r\n  */\r\n});\r\n\r\nURLUtils._inherit = function(proto) {\r\n  // copy getters/setters from URLUtils to o.\r\n  Object.getOwnPropertyNames(URLUtils.prototype).forEach(function(p) {\r\n    if (p==='constructor' || p==='href') { return; }\r\n    var desc = Object.getOwnPropertyDescriptor(URLUtils.prototype, p);\r\n    Object.defineProperty(proto, p, desc);\r\n  });\r\n};\r\n","\"use strict\";\r\nvar DOMImplementation = require('./DOMImplementation');\r\nvar EventTarget = require('./EventTarget');\r\nvar Location = require('./Location');\r\nvar utils = require('./utils');\r\n\r\nmodule.exports = Window;\r\n\r\nfunction Window(document) {\r\n  this.document = document || new DOMImplementation(null).createHTMLDocument(\"\");\r\n  this.document._scripting_enabled = true;\r\n  this.document.defaultView = this;\r\n  this.location = new Location(this, this.document._address || 'about:blank');\r\n}\r\n\r\nWindow.prototype = Object.create(EventTarget.prototype, {\r\n  console: { value: console },\r\n  history: { value: {\r\n    back: utils.nyi,\r\n    forward: utils.nyi,\r\n    go: utils.nyi\r\n  }},\r\n  navigator: { value: require(\"./NavigatorID\") },\r\n\r\n  // Self-referential properties\r\n  window: { get: function() { return this; }},\r\n  self: { get: function() { return this; }},\r\n  frames: { get: function() { return this; }},\r\n\r\n  // Self-referential properties for a top-level window\r\n  parent: { get: function() { return this; }},\r\n  top: { get: function() { return this; }},\r\n\r\n  // We don't support any other windows for now\r\n  length: { value: 0 },           // no frames\r\n  frameElement: { value: null },  // not part of a frame\r\n  opener: { value: null },        // not opened by another window\r\n\r\n  // The onload event handler.\r\n  // XXX: need to support a bunch of other event types, too,\r\n  // and have them interoperate with document.body.\r\n\r\n  onload: {\r\n    get: function() {\r\n      return this._getEventHandler(\"load\");\r\n    },\r\n    set: function(v) {\r\n      this._setEventHandler(\"load\", v);\r\n    }\r\n  },\r\n\r\n  // XXX This is a completely broken implementation\r\n  getComputedStyle: { value: function getComputedStyle(elt) {\r\n    return elt.style;\r\n  }}\r\n\r\n});\r\n\r\nutils.expose(require('./WindowTimers'), Window);\r\nutils.expose(require('./impl'), Window);\r\n","\"use strict\";\r\n\r\n// https://html.spec.whatwg.org/multipage/webappapis.html#windowtimers\r\nvar WindowTimers = {\r\n  setTimeout: setTimeout,\r\n  clearTimeout: clearTimeout,\r\n  setInterval: setInterval,\r\n  clearInterval: clearInterval\r\n};\r\n\r\nmodule.exports = WindowTimers;\r\n","\"use strict\";\r\nvar utils = require('./utils');\r\n\r\nexports.property = function(attr) {\r\n  if (Array.isArray(attr.type)) {\r\n    var valid = Object.create(null);\r\n    attr.type.forEach(function(val) {\r\n      valid[val.value || val] = val.alias || val;\r\n    });\r\n    var missingValueDefault = attr.missing;\r\n    if (missingValueDefault===undefined) { missingValueDefault = null; }\r\n    var invalidValueDefault = attr.invalid;\r\n    if (invalidValueDefault===undefined) { invalidValueDefault = missingValueDefault; }\r\n    return {\r\n      get: function() {\r\n        var v = this._getattr(attr.name);\r\n        if (v === null) return missingValueDefault;\r\n\r\n        v = valid[v.toLowerCase()];\r\n        if (v !== undefined) return v;\r\n        if (invalidValueDefault !== null) return invalidValueDefault;\r\n        return v;\r\n      },\r\n      set: function(v) {\r\n        this._setattr(attr.name, v);\r\n      }\r\n    };\r\n  }\r\n  else if (attr.type === Boolean) {\r\n    return {\r\n      get: function() {\r\n        return this.hasAttribute(attr.name);\r\n      },\r\n      set: function(v) {\r\n        if (v) {\r\n          this._setattr(attr.name, '');\r\n        }\r\n        else {\r\n          this.removeAttribute(attr.name);\r\n        }\r\n      }\r\n    };\r\n  }\r\n  else if (attr.type === Number ||\r\n           attr.type === \"long\" ||\r\n           attr.type === \"unsigned long\" ||\r\n           attr.type === \"limited unsigned long with fallback\") {\r\n    return numberPropDesc(attr);\r\n  }\r\n  else if (!attr.type || attr.type === String) {\r\n    return {\r\n      get: function() { return this._getattr(attr.name) || ''; },\r\n      set: function(v) {\r\n        if (attr.treatNullAsEmptyString && v === null) { v = ''; }\r\n        this._setattr(attr.name, v);\r\n      }\r\n    };\r\n  }\r\n  else if (typeof attr.type === 'function') {\r\n    return attr.type(attr.name, attr);\r\n  }\r\n  throw new Error('Invalid attribute definition');\r\n};\r\n\r\n// See http://www.whatwg.org/specs/web-apps/current-work/#reflect\r\n//\r\n// defval is the default value. If it is a function, then that function\r\n// will be invoked as a method of the element to obtain the default.\r\n// If no default is specified for a given attribute, then the default\r\n// depends on the type of the attribute, but since this function handles\r\n// 4 integer cases, you must specify the default value in each call\r\n//\r\n// min and max define a valid range for getting the attribute.\r\n//\r\n// setmin defines a minimum value when setting.  If the value is less\r\n// than that, then throw INDEX_SIZE_ERR.\r\n//\r\n// Conveniently, JavaScript's parseInt function appears to be\r\n// compatible with HTML's 'rules for parsing integers'\r\nfunction numberPropDesc(a) {\r\n  var def;\r\n  if(typeof a.default === 'function') {\r\n    def = a.default;\r\n  }\r\n  else if(typeof a.default === 'number') {\r\n    def = function() { return a.default; };\r\n  }\r\n  else {\r\n    def = function() { utils.assert(false, typeof a.default); };\r\n  }\r\n  var unsigned_long = (a.type === 'unsigned long');\r\n  var signed_long = (a.type === 'long');\r\n  var unsigned_fallback = (a.type === 'limited unsigned long with fallback');\r\n  var min = a.min, max = a.max, setmin = a.setmin;\r\n  if (min === undefined) {\r\n    if (unsigned_long) min = 0;\r\n    if (signed_long) min = -0x80000000;\r\n    if (unsigned_fallback) min = 1;\r\n  }\r\n  if (max === undefined) {\r\n    if (unsigned_long || signed_long || unsigned_fallback) max = 0x7FFFFFFF;\r\n  }\r\n\r\n  return {\r\n    get: function() {\r\n      var v = this._getattr(a.name);\r\n      var n = a.float ? parseFloat(v) : parseInt(v, 10);\r\n      if (v === null || !isFinite(n) || (min !== undefined && n < min) || (max !== undefined && n > max)) {\r\n        return def.call(this);\r\n      }\r\n      if (unsigned_long || signed_long || unsigned_fallback) {\r\n        if (!/^[ \\t\\n\\f\\r]*[-+]?[0-9]/.test(v)) { return def.call(this); }\r\n        n = n|0; // jshint ignore:line\r\n      }\r\n      return n;\r\n    },\r\n    set: function(v) {\r\n      if (!a.float) { v = Math.floor(v); }\r\n      if (setmin !== undefined && v < setmin) {\r\n        utils.IndexSizeError(a.name + ' set to ' + v);\r\n      }\r\n      if (unsigned_long) {\r\n        v = (v < 0 || v > 0x7FFFFFFF) ? def.call(this) :\r\n          (v|0);  // jshint ignore:line\r\n      } else if (unsigned_fallback) {\r\n        v = (v < 1 || v > 0x7FFFFFFF) ? def.call(this) :\r\n          (v|0); // jshint ignore:line\r\n      } else if (signed_long) {\r\n        v = (v < -0x80000000 || v > 0x7FFFFFFF) ? def.call(this) :\r\n          (v|0); // jshint ignore:line\r\n      }\r\n      this._setattr(a.name, String(v));\r\n    }\r\n  };\r\n}\r\n\r\n// This is a utility function for setting up change handler functions\r\n// for attributes like 'id' that require special handling when they change.\r\nexports.registerChangeHandler = function(c, name, handler) {\r\n  var p = c.prototype;\r\n\r\n  // If p does not already have its own _attributeChangeHandlers\r\n  // then create one for it, inheriting from the inherited\r\n  // _attributeChangeHandlers. At the top (for the Element class) the\r\n  // _attributeChangeHandlers object will be created with a null prototype.\r\n  if (!Object.prototype.hasOwnProperty.call(p, '_attributeChangeHandlers')) {\r\n    p._attributeChangeHandlers =\r\n      Object.create(p._attributeChangeHandlers || null);\r\n  }\r\n\r\n  p._attributeChangeHandlers[name] = handler;\r\n};\r\n","/*\r\n * This file defines Domino behaviour that can be externally configured.\r\n * To change these settings, set the relevant global property *before*\r\n * you call `require(\"domino\")`.\r\n */\r\n\r\nexports.isApiWritable = !globalThis.__domino_frozen__;\r\n","\"use strict\";\r\n\r\nvar attributes = require('./attributes');\r\nvar isApiWritable = require(\"./config\").isApiWritable;\r\n\r\nmodule.exports = function(spec, defaultConstructor, tagList, tagNameToImpl) {\r\n  var c = spec.ctor;\r\n  if (c) {\r\n    var props = spec.props || {};\r\n\r\n    if (spec.attributes) {\r\n      for (var n in spec.attributes) {\r\n        var attr = spec.attributes[n];\r\n        if (typeof attr !== 'object' || Array.isArray(attr)) attr = {type: attr};\r\n        if (!attr.name) attr.name = n.toLowerCase();\r\n        props[n] = attributes.property(attr);\r\n      }\r\n    }\r\n\r\n    props.constructor = { value : c, writable: isApiWritable };\r\n    c.prototype = Object.create((spec.superclass || defaultConstructor).prototype, props);\r\n    if (spec.events) {\r\n      addEventHandlers(c, spec.events);\r\n    }\r\n    tagList[spec.name] = c;\r\n  }\r\n  else {\r\n    c = defaultConstructor;\r\n  }\r\n\r\n  (spec.tags || spec.tag && [spec.tag] || []).forEach(function(tag) {\r\n    tagNameToImpl[tag] = c;\r\n  });\r\n\r\n  return c;\r\n};\r\n\r\nfunction EventHandlerBuilder(body, document, form, element) {\r\n  this.body = body;\r\n  this.document = document;\r\n  this.form = form;\r\n  this.element = element;\r\n}\r\n\r\nEventHandlerBuilder.prototype.build = function () {\r\n  return () => {};\r\n};\r\n\r\nfunction EventHandlerChangeHandler(elt, name, oldval, newval) {\r\n  var doc = elt.ownerDocument || Object.create(null);\r\n  var form = elt.form || Object.create(null);\r\n  elt[name] = new EventHandlerBuilder(newval, doc, form, elt).build();\r\n}\r\n\r\nfunction addEventHandlers(c, eventHandlerTypes) {\r\n  var p = c.prototype;\r\n  eventHandlerTypes.forEach(function(type) {\r\n    // Define the event handler registration IDL attribute for this type\r\n    Object.defineProperty(p, \"on\" + type, {\r\n      get: function() {\r\n        return this._getEventHandler(type);\r\n      },\r\n      set: function(v) {\r\n        this._setEventHandler(type, v);\r\n      },\r\n    });\r\n\r\n    // Define special behavior for the content attribute as well\r\n    attributes.registerChangeHandler(c, \"on\" + type, EventHandlerChangeHandler);\r\n  });\r\n}\r\n","\"use strict\";\r\nmodule.exports = {\r\n  Event: require('./Event'),\r\n  UIEvent: require('./UIEvent'),\r\n  MouseEvent: require('./MouseEvent'),\r\n  CustomEvent: require('./CustomEvent')\r\n};\r\n","\"use strict\";\r\nvar Node = require('./Node');\r\nvar Element = require('./Element');\r\nvar CSSStyleDeclaration = require('./CSSStyleDeclaration');\r\nvar utils = require('./utils');\r\nvar URLUtils = require('./URLUtils');\r\nvar defineElement = require('./defineElement');\r\n\r\nvar htmlElements = exports.elements = {};\r\nvar htmlNameToImpl = Object.create(null);\r\n\r\nexports.createElement = function(doc, localName, prefix) {\r\n  var impl = htmlNameToImpl[localName] || HTMLUnknownElement;\r\n  return new impl(doc, localName, prefix);\r\n};\r\n\r\nfunction define(spec) {\r\n  return defineElement(spec, HTMLElement, htmlElements, htmlNameToImpl);\r\n}\r\n\r\nfunction URL(attr) {\r\n  return {\r\n    get: function() {\r\n      var v = this._getattr(attr);\r\n      if (v === null) { return ''; }\r\n      var url = this.doc._resolve(v);\r\n      return (url === null) ? v : url;\r\n    },\r\n    set: function(value) {\r\n      this._setattr(attr, value);\r\n    }\r\n  };\r\n}\r\n\r\nfunction CORS(attr) {\r\n  return {\r\n    get: function() {\r\n      var v = this._getattr(attr);\r\n      if (v === null) { return null; }\r\n      if (v.toLowerCase() === 'use-credentials') { return 'use-credentials'; }\r\n      return 'anonymous';\r\n    },\r\n    set: function(value) {\r\n      if (value===null || value===undefined) {\r\n        this.removeAttribute(attr);\r\n      } else {\r\n        this._setattr(attr, value);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nconst REFERRER = {\r\n  type: [\"\", \"no-referrer\", \"no-referrer-when-downgrade\", \"same-origin\", \"origin\", \"strict-origin\", \"origin-when-cross-origin\", \"strict-origin-when-cross-origin\", \"unsafe-url\"],\r\n  missing: '',\r\n};\r\n\r\n\r\n// XXX: the default value for tabIndex should be 0 if the element is\r\n// focusable and -1 if it is not.  But the full definition of focusable\r\n// is actually hard to compute, so for now, I'll follow Firefox and\r\n// just base the default value on the type of the element.\r\nvar focusableElements = {\r\n  \"A\":true, \"LINK\":true, \"BUTTON\":true, \"INPUT\":true,\r\n  \"SELECT\":true, \"TEXTAREA\":true, \"COMMAND\":true\r\n};\r\n\r\nvar HTMLFormElement = function(doc, localName, prefix) {\r\n  HTMLElement.call(this, doc, localName, prefix);\r\n  this._form = null; // Prevent later deoptimization\r\n};\r\n\r\nvar HTMLElement = exports.HTMLElement = define({\r\n  superclass: Element,\r\n  name: 'HTMLElement',\r\n  ctor: function HTMLElement(doc, localName, prefix) {\r\n    Element.call(this, doc, localName, utils.NAMESPACE.HTML, prefix);\r\n  },\r\n  props: {\r\n    dangerouslySetInnerHTML: {\r\n      set: function (v) {\r\n        this._innerHTML = v;\r\n      },\r\n    },\r\n    innerHTML: {\r\n      get: function() {\r\n        return this.serialize();\r\n      },\r\n      set: function(v) {\r\n        var parser = this.ownerDocument.implementation.mozHTMLParser(\r\n          this.ownerDocument._address,\r\n          this);\r\n        parser.parse(v===null ? '' : String(v), true);\r\n\r\n        // Remove any existing children of this node\r\n        var target = (this instanceof htmlNameToImpl.template) ?\r\n            this.content : this;\r\n        while(target.hasChildNodes())\r\n          target.removeChild(target.firstChild);\r\n\r\n        // Now copy newly parsed children to this node\r\n        target.appendChild(parser._asDocumentFragment());\r\n      }\r\n    },\r\n    style: { get: function() {\r\n      if (!this._style)\r\n        this._style = new CSSStyleDeclaration(this);\r\n      return this._style;\r\n    }, set: function(v) {\r\n        if (v===null||v===undefined) { v = ''; }\r\n        this._setattr('style', String(v));\r\n    }},\r\n\r\n    // These can't really be implemented server-side in a reasonable way.\r\n    blur: { value: function() {}},\r\n    focus: { value: function() {}},\r\n    forceSpellCheck: { value: function() {}},\r\n\r\n    click: { value: function() {\r\n      if (this._click_in_progress) return;\r\n      this._click_in_progress = true;\r\n      try {\r\n        if (this._pre_click_activation_steps)\r\n          this._pre_click_activation_steps();\r\n\r\n        var event = this.ownerDocument.createEvent(\"MouseEvent\");\r\n        event.initMouseEvent(\"click\", true, true,\r\n          this.ownerDocument.defaultView, 1,\r\n          0, 0, 0, 0,\r\n          // These 4 should be initialized with\r\n          // the actually current keyboard state\r\n          // somehow...\r\n          false, false, false, false,\r\n          0, null\r\n        );\r\n\r\n        // Dispatch this as an untrusted event since it is synthetic\r\n        var success = this.dispatchEvent(event);\r\n\r\n        if (success) {\r\n          if (this._post_click_activation_steps)\r\n            this._post_click_activation_steps(event);\r\n        }\r\n        else {\r\n          if (this._cancelled_activation_steps)\r\n            this._cancelled_activation_steps();\r\n        }\r\n      }\r\n      finally {\r\n        this._click_in_progress = false;\r\n      }\r\n    }},\r\n    submit: { value: utils.nyi },\r\n  },\r\n  attributes: {\r\n    title: String,\r\n    lang: String,\r\n    dir: {type: [\"ltr\", \"rtl\", \"auto\"], missing: ''},\r\n    draggable: {type: [\"true\", \"false\"], treatNullAsEmptyString: true },\r\n    spellcheck: {type: [\"true\", \"false\"], missing: ''},\r\n    enterKeyHint: {type: [\"enter\", \"done\", \"go\", \"next\", \"previous\", \"search\", \"send\"], missing: ''},\r\n    autoCapitalize: {type: [\"off\", \"on\", \"none\", \"sentences\", \"words\", \"characters\"], missing: '' },\r\n    autoFocus: Boolean,\r\n    accessKey: String,\r\n    nonce: String,\r\n    hidden: Boolean,\r\n    translate: {type: [\"no\", \"yes\"], missing: '' },\r\n    tabIndex: {type: \"long\", default: function() {\r\n      if (this.tagName in focusableElements ||\r\n        this.contentEditable)\r\n        return 0;\r\n      else\r\n        return -1;\r\n    }}\r\n  },\r\n  events: [\r\n    \"abort\", \"canplay\", \"canplaythrough\", \"change\", \"click\", \"contextmenu\",\r\n    \"cuechange\", \"dblclick\", \"drag\", \"dragend\", \"dragenter\", \"dragleave\",\r\n    \"dragover\", \"dragstart\", \"drop\", \"durationchange\", \"emptied\", \"ended\",\r\n    \"input\", \"invalid\", \"keydown\", \"keypress\", \"keyup\", \"loadeddata\",\r\n    \"loadedmetadata\", \"loadstart\", \"mousedown\", \"mousemove\", \"mouseout\",\r\n    \"mouseover\", \"mouseup\", \"mousewheel\", \"pause\", \"play\", \"playing\",\r\n    \"progress\", \"ratechange\", \"readystatechange\", \"reset\", \"seeked\",\r\n    \"seeking\", \"select\", \"show\", \"stalled\", \"submit\", \"suspend\",\r\n    \"timeupdate\", \"volumechange\", \"waiting\",\r\n\r\n    // These last 5 event types will be overriden by HTMLBodyElement\r\n    \"blur\", \"error\", \"focus\", \"load\", \"scroll\"\r\n  ]\r\n});\r\n\r\n\r\n// XXX: reflect contextmenu as contextMenu, with element type\r\n\r\n\r\n// style: the spec doesn't call this a reflected attribute.\r\n//   may want to handle it manually.\r\n\r\n// contentEditable: enumerated, not clear if it is actually\r\n// reflected or requires custom getter/setter. Not listed as\r\n// \"limited to known values\".  Raises syntax_err on bad setting,\r\n// so I think this is custom.\r\n\r\n// contextmenu: content is element id, idl type is an element\r\n// draggable: boolean, but not a reflected attribute\r\n// dropzone: reflected SettableTokenList, experimental, so don't\r\n//   implement it right away.\r\n\r\n// data-* attributes: need special handling in setAttribute?\r\n// Or maybe that isn't necessary. Can I just scan the attribute list\r\n// when building the dataset?  Liveness and caching issues?\r\n\r\n// microdata attributes: many are simple reflected attributes, but\r\n// I'm not going to implement this now.\r\n\r\n\r\nvar HTMLUnknownElement = define({\r\n  name: 'HTMLUnknownElement',\r\n  ctor: function HTMLUnknownElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  }\r\n});\r\n\r\n\r\nvar formAssociatedProps = {\r\n  // See http://www.w3.org/TR/html5/association-of-controls-and-forms.html#form-owner\r\n  form: { get: function() {\r\n    return this._form;\r\n  }}\r\n};\r\n\r\ndefine({\r\n  tag: 'a',\r\n  name: 'HTMLAnchorElement',\r\n  ctor: function HTMLAnchorElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: {\r\n    _post_click_activation_steps: { value: function(e) {\r\n      if (this.href) {\r\n        // Follow the link\r\n        // XXX: this is just a quick hack\r\n        // XXX: the HTML spec probably requires more than this\r\n        this.ownerDocument.defaultView.location = this.href;\r\n      }\r\n    }},\r\n  },\r\n  attributes: {\r\n    href: URL,\r\n    ping: String,\r\n    download: String,\r\n    target: String,\r\n    rel: String,\r\n    media: String,\r\n    hreflang: String,\r\n    type: String,\r\n    referrerPolicy: REFERRER,\r\n    // Obsolete\r\n    coords: String,\r\n    charset: String,\r\n    name: String,\r\n    rev: String,\r\n    shape: String,\r\n  }\r\n});\r\n// Latest WhatWG spec says these methods come via HTMLHyperlinkElementUtils\r\nURLUtils._inherit(htmlNameToImpl.a.prototype);\r\n\r\ndefine({\r\n  tag: 'area',\r\n  name: 'HTMLAreaElement',\r\n  ctor: function HTMLAreaElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    alt: String,\r\n    target: String,\r\n    download: String,\r\n    rel: String,\r\n    media: String,\r\n    href: URL,\r\n    hreflang: String,\r\n    type: String,\r\n    shape: String,\r\n    coords: String,\r\n    ping: String,\r\n    // XXX: also reflect relList\r\n    referrerPolicy: REFERRER,\r\n    // Obsolete\r\n    noHref: Boolean,\r\n  }\r\n});\r\n// Latest WhatWG spec says these methods come via HTMLHyperlinkElementUtils\r\nURLUtils._inherit(htmlNameToImpl.area.prototype);\r\n\r\ndefine({\r\n  tag: 'br',\r\n  name: 'HTMLBRElement',\r\n  ctor: function HTMLBRElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    // Obsolete\r\n    clear: String\r\n  },\r\n});\r\n\r\ndefine({\r\n  tag: 'base',\r\n  name: 'HTMLBaseElement',\r\n  ctor: function HTMLBaseElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    \"target\": String\r\n  }\r\n});\r\n\r\n\r\ndefine({\r\n  tag: 'body',\r\n  name: 'HTMLBodyElement',\r\n  ctor: function HTMLBodyElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  // Certain event handler attributes on a <body> tag actually set\r\n  // handlers for the window rather than just that element.  Define\r\n  // getters and setters for those here.  Note that some of these override\r\n  // properties on HTMLElement.prototype.\r\n  // XXX: If I add support for <frameset>, these have to go there, too\r\n  // XXX\r\n  // When the Window object is implemented, these attribute will have\r\n  // to work with the same-named attributes on the Window.\r\n  events: [\r\n    \"afterprint\", \"beforeprint\", \"beforeunload\", \"blur\", \"error\",\r\n    \"focus\",\"hashchange\", \"load\", \"message\", \"offline\", \"online\",\r\n    \"pagehide\", \"pageshow\",\"popstate\",\"resize\",\"scroll\",\"storage\",\"unload\",\r\n  ],\r\n  attributes: {\r\n    // Obsolete\r\n    text: { type: String, treatNullAsEmptyString: true },\r\n    link: { type: String, treatNullAsEmptyString: true },\r\n    vLink: { type: String, treatNullAsEmptyString: true },\r\n    aLink: { type: String, treatNullAsEmptyString: true },\r\n    bgColor: { type: String, treatNullAsEmptyString: true },\r\n    background: String,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'button',\r\n  name: 'HTMLButtonElement',\r\n  ctor: function HTMLButtonElement(doc, localName, prefix) {\r\n    HTMLFormElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: formAssociatedProps,\r\n  attributes: {\r\n    name: String,\r\n    value: String,\r\n    disabled: Boolean,\r\n    autofocus: Boolean,\r\n    type: { type:[\"submit\", \"reset\", \"button\", \"menu\"], missing: 'submit' },\r\n    formTarget: String,\r\n    formAction: URL,\r\n    formNoValidate: Boolean,\r\n    formMethod: { type: [\"get\", \"post\", \"dialog\"], invalid: 'get', missing: '' },\r\n    formEnctype: { type: [\"application/x-www-form-urlencoded\", \"multipart/form-data\", \"text/plain\"], invalid: \"application/x-www-form-urlencoded\", missing: '' },\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'dl',\r\n  name: 'HTMLDListElement',\r\n  ctor: function HTMLDListElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    // Obsolete\r\n    compact: Boolean,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'data',\r\n  name: 'HTMLDataElement',\r\n  ctor: function HTMLDataElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    value: String,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'datalist',\r\n  name: 'HTMLDataListElement',\r\n  ctor: function HTMLDataListElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'details',\r\n  name: 'HTMLDetailsElement',\r\n  ctor: function HTMLDetailsElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    \"open\": Boolean\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'div',\r\n  name: 'HTMLDivElement',\r\n  ctor: function HTMLDivElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    // Obsolete\r\n    align: String\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'embed',\r\n  name: 'HTMLEmbedElement',\r\n  ctor: function HTMLEmbedElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    src: URL,\r\n    type: String,\r\n    width: String,\r\n    height: String,\r\n    // Obsolete\r\n    align: String,\r\n    name: String,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'fieldset',\r\n  name: 'HTMLFieldSetElement',\r\n  ctor: function HTMLFieldSetElement(doc, localName, prefix) {\r\n    HTMLFormElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: formAssociatedProps,\r\n  attributes: {\r\n    disabled: Boolean,\r\n    name: String\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'form',\r\n  name: 'HTMLFormElement',\r\n  ctor: function HTMLFormElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    action: String,\r\n    autocomplete: {type:['on', 'off'], missing: 'on'},\r\n    name: String,\r\n    acceptCharset: {name: \"accept-charset\"},\r\n    target: String,\r\n    noValidate: Boolean,\r\n    method: { type: [\"get\", \"post\", \"dialog\"], invalid: 'get', missing: 'get' },\r\n    // Both enctype and encoding reflect the enctype content attribute\r\n    enctype: { type: [\"application/x-www-form-urlencoded\", \"multipart/form-data\", \"text/plain\"], invalid: \"application/x-www-form-urlencoded\", missing: \"application/x-www-form-urlencoded\" },\r\n    encoding: {name: 'enctype', type: [\"application/x-www-form-urlencoded\", \"multipart/form-data\", \"text/plain\"], invalid: \"application/x-www-form-urlencoded\", missing: \"application/x-www-form-urlencoded\" },\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'hr',\r\n  name: 'HTMLHRElement',\r\n  ctor: function HTMLHRElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    // Obsolete\r\n    align: String,\r\n    color: String,\r\n    noShade: Boolean,\r\n    size: String,\r\n    width: String,\r\n  },\r\n});\r\n\r\ndefine({\r\n  tag: 'head',\r\n  name: 'HTMLHeadElement',\r\n  ctor: function HTMLHeadElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  }\r\n});\r\n\r\ndefine({\r\n  tags: ['h1','h2','h3','h4','h5','h6'],\r\n  name: 'HTMLHeadingElement',\r\n  ctor: function HTMLHeadingElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    // Obsolete\r\n    align: String,\r\n  },\r\n});\r\n\r\ndefine({\r\n  tag: 'html',\r\n  name: 'HTMLHtmlElement',\r\n  ctor: function HTMLHtmlElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    xmlns: URL,\r\n    // Obsolete\r\n    version: String\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'iframe',\r\n  name: 'HTMLIFrameElement',\r\n  ctor: function HTMLIFrameElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    src: URL,\r\n    srcdoc: String,\r\n    name: String,\r\n    width: String,\r\n    height: String,\r\n    // XXX: sandbox is a reflected settable token list\r\n    seamless: Boolean,\r\n    allow: Boolean,\r\n    allowFullscreen: Boolean,\r\n    allowUserMedia: Boolean,\r\n    allowPaymentRequest: Boolean,\r\n    referrerPolicy: REFERRER,\r\n    loading: { type:['eager','lazy'], treatNullAsEmptyString: true },\r\n    // Obsolete\r\n    align: String,\r\n    scrolling: String,\r\n    frameBorder: String,\r\n    longDesc: URL,\r\n    marginHeight: { type: String, treatNullAsEmptyString: true },\r\n    marginWidth: { type: String, treatNullAsEmptyString: true },\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'img',\r\n  name: 'HTMLImageElement',\r\n  ctor: function HTMLImageElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    alt: String,\r\n    src: URL,\r\n    srcset: String,\r\n    crossOrigin: CORS,\r\n    useMap: String,\r\n    isMap: Boolean,\r\n    sizes: String,\r\n    height: { type: \"unsigned long\", default: 0 },\r\n    width: { type: \"unsigned long\", default: 0 },\r\n    referrerPolicy: REFERRER,\r\n    loading: { type:['eager','lazy'], missing: '' },\r\n    // Obsolete:\r\n    name: String,\r\n    lowsrc: URL,\r\n    align: String,\r\n    hspace: { type: \"unsigned long\", default: 0 },\r\n    vspace: { type: \"unsigned long\", default: 0 },\r\n    longDesc: URL,\r\n    border: { type: String, treatNullAsEmptyString: true },\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'input',\r\n  name: 'HTMLInputElement',\r\n  ctor: function HTMLInputElement(doc, localName, prefix) {\r\n    HTMLFormElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: {\r\n    form: formAssociatedProps.form,\r\n    _post_click_activation_steps: { value: function(e) {\r\n      if (this.type === 'checkbox') {\r\n        this.checked = !this.checked;\r\n      }\r\n      else if (this.type === 'radio') {\r\n        var group = this.form.getElementsByName(this.name);\r\n        for (var i=group.length-1; i >= 0; i--) {\r\n          var el = group[i];\r\n          el.checked = (el === this);\r\n        }\r\n      }\r\n    }},\r\n  },\r\n  attributes: {\r\n    name: String,\r\n    disabled: Boolean,\r\n    autofocus: Boolean,\r\n    accept: String,\r\n    alt: String,\r\n    max: String,\r\n    min: String,\r\n    pattern: String,\r\n    placeholder: String,\r\n    step: String,\r\n    dirName: String,\r\n    defaultValue: {name: 'value'},\r\n    multiple: Boolean,\r\n    required: Boolean,\r\n    readOnly: Boolean,\r\n    checked: Boolean,\r\n    value: String,\r\n    src: URL,\r\n    defaultChecked: {name: 'checked', type: Boolean},\r\n    size: {type: 'unsigned long', default: 20, min: 1, setmin: 1},\r\n    width: {type: 'unsigned long', min: 0, setmin: 0, default: 0},\r\n    height: {type: 'unsigned long', min: 0, setmin: 0, default: 0},\r\n    minLength: {type: 'unsigned long', min: 0, setmin: 0, default: -1},\r\n    maxLength: {type: 'unsigned long', min: 0, setmin: 0, default: -1},\r\n    autocomplete: String, // It's complicated\r\n    type: { type:\r\n            [\"text\", \"hidden\", \"search\", \"tel\", \"url\", \"email\", \"password\",\r\n             \"datetime\", \"date\", \"month\", \"week\", \"time\", \"datetime-local\",\r\n             \"number\", \"range\", \"color\", \"checkbox\", \"radio\", \"file\", \"submit\",\r\n             \"image\", \"reset\", \"button\"],\r\n            missing: 'text' },\r\n    formTarget: String,\r\n    formNoValidate: Boolean,\r\n    formMethod: { type: [\"get\", \"post\"], invalid: 'get', missing: '' },\r\n    formEnctype: { type: [\"application/x-www-form-urlencoded\", \"multipart/form-data\", \"text/plain\"], invalid: \"application/x-www-form-urlencoded\", missing: '' },\r\n    inputMode: { type: [ \"verbatim\", \"latin\", \"latin-name\", \"latin-prose\", \"full-width-latin\", \"kana\", \"kana-name\", \"katakana\", \"numeric\", \"tel\", \"email\", \"url\" ], missing: '' },\r\n    // Obsolete\r\n    align: String,\r\n    useMap: String,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'keygen',\r\n  name: 'HTMLKeygenElement',\r\n  ctor: function HTMLKeygenElement(doc, localName, prefix) {\r\n    HTMLFormElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: formAssociatedProps,\r\n  attributes: {\r\n    name: String,\r\n    disabled: Boolean,\r\n    autofocus: Boolean,\r\n    challenge: String,\r\n    keytype: { type:[\"rsa\"], missing: '' },\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'li',\r\n  name: 'HTMLLIElement',\r\n  ctor: function HTMLLIElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    value: {type: \"long\", default: 0},\r\n    // Obsolete\r\n    type: String,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'label',\r\n  name: 'HTMLLabelElement',\r\n  ctor: function HTMLLabelElement(doc, localName, prefix) {\r\n    HTMLFormElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: formAssociatedProps,\r\n  attributes: {\r\n    htmlFor: {name: 'for', type: String}\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'legend',\r\n  name: 'HTMLLegendElement',\r\n  ctor: function HTMLLegendElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    // Obsolete\r\n    align: String\r\n  },\r\n});\r\n\r\ndefine({\r\n  tag: 'link',\r\n  name: 'HTMLLinkElement',\r\n  ctor: function HTMLLinkElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    // XXX Reflect DOMSettableTokenList sizes also DOMTokenList relList\r\n    href: URL,\r\n    rel: String,\r\n    media: String,\r\n    hreflang: String,\r\n    type: String,\r\n    crossOrigin: CORS,\r\n    nonce: String,\r\n    integrity: String,\r\n    referrerPolicy: REFERRER,\r\n    imageSizes: String,\r\n    imageSrcset: String,\r\n    // Obsolete\r\n    charset: String,\r\n    rev: String,\r\n    target: String,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'map',\r\n  name: 'HTMLMapElement',\r\n  ctor: function HTMLMapElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    name: String\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'menu',\r\n  name: 'HTMLMenuElement',\r\n  ctor: function HTMLMenuElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    // XXX: not quite right, default should be popup if parent element is\r\n    // popup.\r\n    type: { type: [ 'context', 'popup', 'toolbar' ], missing: 'toolbar' },\r\n    label: String,\r\n    // Obsolete\r\n    compact: Boolean,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'meta',\r\n  name: 'HTMLMetaElement',\r\n  ctor: function HTMLMetaElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    name: String,\r\n    content: String,\r\n    httpEquiv: {name: 'http-equiv', type: String},\r\n    // Obsolete\r\n    scheme: String,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'meter',\r\n  name: 'HTMLMeterElement',\r\n  ctor: function HTMLMeterElement(doc, localName, prefix) {\r\n    HTMLFormElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: formAssociatedProps\r\n});\r\n\r\ndefine({\r\n  tags: ['ins', 'del'],\r\n  name: 'HTMLModElement',\r\n  ctor: function HTMLModElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    cite: URL,\r\n    dateTime: String\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'ol',\r\n  name: 'HTMLOListElement',\r\n  ctor: function HTMLOListElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: {\r\n    // Utility function (see the start attribute default value). Returns\r\n    // the number of <li> children of this element\r\n    _numitems: { get: function() {\r\n      var items = 0;\r\n      this.childNodes.forEach(function(n) {\r\n        if (n.nodeType === Node.ELEMENT_NODE && n.tagName === \"LI\")\r\n          items++;\r\n      });\r\n      return items;\r\n    }}\r\n  },\r\n  attributes: {\r\n    type: String,\r\n    reversed: Boolean,\r\n    start: {\r\n      type: \"long\",\r\n      default: function() {\r\n       // The default value of the start attribute is 1 unless the list is\r\n       // reversed. Then it is the # of li children\r\n       if (this.reversed)\r\n         return this._numitems;\r\n       else\r\n         return 1;\r\n      }\r\n    },\r\n    // Obsolete\r\n    compact: Boolean,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'object',\r\n  name: 'HTMLObjectElement',\r\n  ctor: function HTMLObjectElement(doc, localName, prefix) {\r\n    HTMLFormElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: formAssociatedProps,\r\n  attributes: {\r\n    data: URL,\r\n    type: String,\r\n    name: String,\r\n    useMap: String,\r\n    typeMustMatch: Boolean,\r\n    width: String,\r\n    height: String,\r\n    // Obsolete\r\n    align: String,\r\n    archive: String,\r\n    code: String,\r\n    declare: Boolean,\r\n    hspace: { type: \"unsigned long\", default: 0 },\r\n    standby: String,\r\n    vspace: { type: \"unsigned long\", default: 0 },\r\n    codeBase: URL,\r\n    codeType: String,\r\n    border: { type: String, treatNullAsEmptyString: true },\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'optgroup',\r\n  name: 'HTMLOptGroupElement',\r\n  ctor: function HTMLOptGroupElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    disabled: Boolean,\r\n    label: String\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'option',\r\n  name: 'HTMLOptionElement',\r\n  ctor: function HTMLOptionElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: {\r\n    form: { get: function() {\r\n      var p = this.parentNode;\r\n      while (p && p.nodeType === Node.ELEMENT_NODE) {\r\n        if (p.localName === 'select') return p.form;\r\n        p = p.parentNode;\r\n      }\r\n    }},\r\n    value: {\r\n      get: function() { return this._getattr('value') || this.text; },\r\n      set: function(v) { this._setattr('value', v); },\r\n    },\r\n    text: {\r\n      get: function() {\r\n        // Strip and collapse whitespace\r\n        return this.textContent.replace(/[ \\t\\n\\f\\r]+/g, ' ').trim();\r\n      },\r\n      set: function(v) { this.textContent = v; },\r\n    },\r\n    // missing: index\r\n  },\r\n  attributes: {\r\n    disabled: Boolean,\r\n    defaultSelected: {name: 'selected', type: Boolean},\r\n    label: String,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'output',\r\n  name: 'HTMLOutputElement',\r\n  ctor: function HTMLOutputElement(doc, localName, prefix) {\r\n    HTMLFormElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: formAssociatedProps,\r\n  attributes: {\r\n    // XXX Reflect for/htmlFor as a settable token list\r\n    name: String\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'p',\r\n  name: 'HTMLParagraphElement',\r\n  ctor: function HTMLParagraphElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    // Obsolete\r\n    align: String\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'param',\r\n  name: 'HTMLParamElement',\r\n  ctor: function HTMLParamElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    name: String,\r\n    value: String,\r\n    // Obsolete\r\n    type: String,\r\n    valueType: String,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tags: ['pre',/*legacy elements:*/'listing','xmp'],\r\n  name: 'HTMLPreElement',\r\n  ctor: function HTMLPreElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    // Obsolete\r\n    width: { type: \"long\", default: 0 },\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'progress',\r\n  name: 'HTMLProgressElement',\r\n  ctor: function HTMLProgressElement(doc, localName, prefix) {\r\n    HTMLFormElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: formAssociatedProps,\r\n  attributes: {\r\n    max: {type: Number, float: true, default: 1.0, min: 0}\r\n  }\r\n});\r\n\r\ndefine({\r\n  tags: ['q', 'blockquote'],\r\n  name: 'HTMLQuoteElement',\r\n  ctor: function HTMLQuoteElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    cite: URL\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'script',\r\n  name: 'HTMLScriptElement',\r\n  ctor: function HTMLScriptElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: {\r\n    text: {\r\n      get: function() {\r\n        var s = \"\";\r\n        for(var i = 0, n = this.childNodes.length; i < n; i++) {\r\n          var child = this.childNodes[i];\r\n          if (child.nodeType === Node.TEXT_NODE)\r\n            s += child._data;\r\n        }\r\n        return s;\r\n      },\r\n      set: function(value) {\r\n        this.removeChildren();\r\n        if (value !== null && value !== \"\") {\r\n          this.appendChild(this.ownerDocument.createTextNode(value));\r\n        }\r\n      }\r\n    }\r\n  },\r\n  attributes: {\r\n    src: URL,\r\n    type: String,\r\n    charset: String,\r\n    referrerPolicy: REFERRER,\r\n    defer: Boolean,\r\n    async: Boolean,\r\n    nomodule: Boolean,\r\n    crossOrigin: CORS,\r\n    nonce: String,\r\n    integrity: String,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'select',\r\n  name: 'HTMLSelectElement',\r\n  ctor: function HTMLSelectElement(doc, localName, prefix) {\r\n    HTMLFormElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: {\r\n    form: formAssociatedProps.form,\r\n    options: { get: function() {\r\n      return this.getElementsByTagName('option');\r\n    }}\r\n  },\r\n  attributes: {\r\n    autocomplete: String, // It's complicated\r\n    name: String,\r\n    disabled: Boolean,\r\n    autofocus: Boolean,\r\n    multiple: Boolean,\r\n    required: Boolean,\r\n    size: {type: \"unsigned long\", default: 0}\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'span',\r\n  name: 'HTMLSpanElement',\r\n  ctor: function HTMLSpanElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'style',\r\n  name: 'HTMLStyleElement',\r\n  ctor: function HTMLStyleElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    media: String,\r\n    type: String,\r\n    scoped: Boolean\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'caption',\r\n  name: 'HTMLTableCaptionElement',\r\n  ctor: function HTMLTableCaptionElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    // Obsolete\r\n    align: String,\r\n  }\r\n});\r\n\r\n\r\ndefine({\r\n  name: 'HTMLTableCellElement',\r\n  ctor: function HTMLTableCellElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    colSpan: {type: \"unsigned long\", default: 1},\r\n    rowSpan: {type: \"unsigned long\", default: 1},\r\n    //XXX Also reflect settable token list headers\r\n    scope: { type: ['row','col','rowgroup','colgroup'], missing: '' },\r\n    abbr: String,\r\n    // Obsolete\r\n    align: String,\r\n    axis: String,\r\n    height: String,\r\n    width: String,\r\n    ch: { name: 'char', type: String },\r\n    chOff: { name: 'charoff', type: String },\r\n    noWrap: Boolean,\r\n    vAlign: String,\r\n    bgColor: { type: String, treatNullAsEmptyString: true },\r\n  }\r\n});\r\n\r\ndefine({\r\n  tags: ['col', 'colgroup'],\r\n  name: 'HTMLTableColElement',\r\n  ctor: function HTMLTableColElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    span: {type: 'limited unsigned long with fallback', default: 1, min: 1},\r\n    // Obsolete\r\n    align: String,\r\n    ch: { name: 'char', type: String },\r\n    chOff: { name: 'charoff', type: String },\r\n    vAlign: String,\r\n    width: String,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'table',\r\n  name: 'HTMLTableElement',\r\n  ctor: function HTMLTableElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: {\r\n    rows: { get: function() {\r\n      return this.getElementsByTagName('tr');\r\n    }}\r\n  },\r\n  attributes: {\r\n    // Obsolete\r\n    align: String,\r\n    border: String,\r\n    frame: String,\r\n    rules: String,\r\n    summary: String,\r\n    width: String,\r\n    bgColor: { type: String, treatNullAsEmptyString: true },\r\n    cellPadding: { type: String, treatNullAsEmptyString: true },\r\n    cellSpacing: { type: String, treatNullAsEmptyString: true },\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'template',\r\n  name: 'HTMLTemplateElement',\r\n  ctor: function HTMLTemplateElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n    this._contentFragment = doc._templateDoc.createDocumentFragment();\r\n  },\r\n  props: {\r\n    content: { get: function() { return this._contentFragment; } },\r\n    serialize: { value: function() { return this.content.serialize(); } }\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'tr',\r\n  name: 'HTMLTableRowElement',\r\n  ctor: function HTMLTableRowElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: {\r\n    cells: { get: function() {\r\n      return this.querySelectorAll('td,th');\r\n    }}\r\n  },\r\n  attributes: {\r\n    // Obsolete\r\n    align: String,\r\n    ch: { name: 'char', type: String },\r\n    chOff: { name: 'charoff', type: String },\r\n    vAlign: String,\r\n    bgColor: { type: String, treatNullAsEmptyString: true },\r\n  },\r\n});\r\n\r\ndefine({\r\n  tags: ['thead', 'tfoot', 'tbody'],\r\n  name: 'HTMLTableSectionElement',\r\n  ctor: function HTMLTableSectionElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: {\r\n    rows: { get: function() {\r\n      return this.getElementsByTagName('tr');\r\n    }}\r\n  },\r\n  attributes: {\r\n    // Obsolete\r\n    align: String,\r\n    ch: { name: 'char', type: String },\r\n    chOff: { name: 'charoff', type: String },\r\n    vAlign: String,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'textarea',\r\n  name: 'HTMLTextAreaElement',\r\n  ctor: function HTMLTextAreaElement(doc, localName, prefix) {\r\n    HTMLFormElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: {\r\n    form: formAssociatedProps.form,\r\n    type: { get: function() { return 'textarea'; } },\r\n    defaultValue: {\r\n      get: function() { return this.textContent; },\r\n      set: function(v) { this.textContent = v; },\r\n    },\r\n    value: {\r\n      get: function() { return this.defaultValue; /* never dirty */ },\r\n      set: function(v) {\r\n        // This isn't completely correct: according to the spec, this\r\n        // should \"dirty\" the API value, and result in\r\n        // `this.value !== this.defaultValue`.  But for most of what\r\n        // folks want to do, this implementation should be fine:\r\n        this.defaultValue = v;\r\n      },\r\n    },\r\n    textLength: { get: function() { return this.value.length; } },\r\n  },\r\n  attributes: {\r\n    autocomplete: String, // It's complicated\r\n    name: String,\r\n    disabled: Boolean,\r\n    autofocus: Boolean,\r\n    placeholder: String,\r\n    wrap: String,\r\n    dirName: String,\r\n    required: Boolean,\r\n    readOnly: Boolean,\r\n    rows: {type: 'limited unsigned long with fallback', default: 2 },\r\n    cols: {type: 'limited unsigned long with fallback', default: 20 },\r\n    maxLength: {type: 'unsigned long', min: 0, setmin: 0, default: -1},\r\n    minLength: {type: 'unsigned long', min: 0, setmin: 0, default: -1},\r\n    inputMode: { type: [ \"verbatim\", \"latin\", \"latin-name\", \"latin-prose\", \"full-width-latin\", \"kana\", \"kana-name\", \"katakana\", \"numeric\", \"tel\", \"email\", \"url\" ], missing: '' },\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'time',\r\n  name: 'HTMLTimeElement',\r\n  ctor: function HTMLTimeElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    dateTime: String,\r\n    pubDate: Boolean\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'title',\r\n  name: 'HTMLTitleElement',\r\n  ctor: function HTMLTitleElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: {\r\n    text: { get: function() {\r\n      return this.textContent;\r\n    }}\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'ul',\r\n  name: 'HTMLUListElement',\r\n  ctor: function HTMLUListElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    type: String,\r\n    // Obsolete\r\n    compact: Boolean,\r\n  }\r\n});\r\n\r\ndefine({\r\n  name: 'HTMLMediaElement',\r\n  ctor: function HTMLMediaElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    src: URL,\r\n    crossOrigin: CORS,\r\n    preload: { type:[\"metadata\", \"none\", \"auto\", {value: \"\", alias: \"auto\"}], missing: 'auto' },\r\n    loop: Boolean,\r\n    autoplay: Boolean,\r\n    mediaGroup: String,\r\n    controls: Boolean,\r\n    defaultMuted: {name: \"muted\", type: Boolean}\r\n  }\r\n});\r\n\r\ndefine({\r\n  name: 'HTMLAudioElement',\r\n  tag: 'audio',\r\n  superclass: htmlElements.HTMLMediaElement,\r\n  ctor: function HTMLAudioElement(doc, localName, prefix) {\r\n    htmlElements.HTMLMediaElement.call(this, doc, localName, prefix);\r\n  }\r\n});\r\n\r\ndefine({\r\n  name: 'HTMLVideoElement',\r\n  tag: 'video',\r\n  superclass: htmlElements.HTMLMediaElement,\r\n  ctor: function HTMLVideoElement(doc, localName, prefix) {\r\n    htmlElements.HTMLMediaElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    poster: URL,\r\n    width: {type: \"unsigned long\", min: 0, default: 0 },\r\n    height: {type: \"unsigned long\", min: 0, default: 0 }\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'td',\r\n  name: 'HTMLTableDataCellElement',\r\n  superclass: htmlElements.HTMLTableCellElement,\r\n  ctor: function HTMLTableDataCellElement(doc, localName, prefix) {\r\n    htmlElements.HTMLTableCellElement.call(this, doc, localName, prefix);\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'th',\r\n  name: 'HTMLTableHeaderCellElement',\r\n  superclass: htmlElements.HTMLTableCellElement,\r\n  ctor: function HTMLTableHeaderCellElement(doc, localName, prefix) {\r\n    htmlElements.HTMLTableCellElement.call(this, doc, localName, prefix);\r\n  },\r\n});\r\n\r\ndefine({\r\n  tag: 'frameset',\r\n  name: 'HTMLFrameSetElement',\r\n  ctor: function HTMLFrameSetElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'frame',\r\n  name: 'HTMLFrameElement',\r\n  ctor: function HTMLFrameElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'canvas',\r\n  name: 'HTMLCanvasElement',\r\n  ctor: function HTMLCanvasElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: {\r\n    getContext: { value: utils.nyi },\r\n    probablySupportsContext: { value: utils.nyi },\r\n    setContext: { value: utils.nyi },\r\n    transferControlToProxy: { value: utils.nyi },\r\n    toDataURL: { value: utils.nyi },\r\n    toBlob: { value: utils.nyi }\r\n  },\r\n  attributes: {\r\n    width: { type: \"unsigned long\", default: 300},\r\n    height: { type: \"unsigned long\", default: 150}\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'dialog',\r\n  name: 'HTMLDialogElement',\r\n  ctor: function HTMLDialogElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: {\r\n    show: { value: utils.nyi },\r\n    showModal: { value: utils.nyi },\r\n    close: { value: utils.nyi }\r\n  },\r\n  attributes: {\r\n    open: Boolean,\r\n    returnValue: String\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'menuitem',\r\n  name: 'HTMLMenuItemElement',\r\n  ctor: function HTMLMenuItemElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  props: {\r\n    // The menuitem's label\r\n    _label: {\r\n      get: function() {\r\n        var val = this._getattr('label');\r\n        if (val !== null && val !== '') { return val; }\r\n        val = this.textContent;\r\n        // Strip and collapse whitespace\r\n        return val.replace(/[ \\t\\n\\f\\r]+/g, ' ').trim();\r\n      }\r\n    },\r\n    // The menuitem label IDL attribute\r\n    label: {\r\n      get: function() {\r\n        var val = this._getattr('label');\r\n        if (val !== null) { return val; }\r\n        return this._label;\r\n      },\r\n      set: function(v) {\r\n        this._setattr('label', v);\r\n      },\r\n    }\r\n  },\r\n  attributes: {\r\n    type: { type: [\"command\",\"checkbox\",\"radio\"], missing: 'command' },\r\n    icon: URL,\r\n    disabled: Boolean,\r\n    checked: Boolean,\r\n    radiogroup: String,\r\n    default: Boolean\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'source',\r\n  name: 'HTMLSourceElement',\r\n  ctor: function HTMLSourceElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    srcset: String,\r\n    sizes: String,\r\n    media: String,\r\n    src: URL,\r\n    type: String,\r\n    width: String,\r\n    height: String,\r\n  }\r\n});\r\n\r\ndefine({\r\n  tag: 'track',\r\n  name: 'HTMLTrackElement',\r\n  ctor: function HTMLTrackElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    src: URL,\r\n    srclang: String,\r\n    label: String,\r\n    default: Boolean,\r\n    kind: { type: [\"subtitles\", \"captions\", \"descriptions\", \"chapters\", \"metadata\"], missing: 'subtitles', invalid: 'metadata' },\r\n  },\r\n  props: {\r\n    NONE: { get: function() { return 0; } },\r\n    LOADING: { get: function() { return 1; } },\r\n    LOADED: { get: function() { return 2; } },\r\n    ERROR: { get: function() { return 3; } },\r\n    readyState: { get: utils.nyi },\r\n    track: { get: utils.nyi }\r\n  }\r\n});\r\n\r\ndefine({\r\n  // obsolete\r\n  tag: 'font',\r\n  name: 'HTMLFontElement',\r\n  ctor: function HTMLFontElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    color: { type: String, treatNullAsEmptyString: true },\r\n    face: { type: String },\r\n    size: { type: String },\r\n  },\r\n});\r\n\r\ndefine({\r\n  // obsolete\r\n  tag: 'dir',\r\n  name: 'HTMLDirectoryElement',\r\n  ctor: function HTMLDirectoryElement(doc, localName, prefix) {\r\n    HTMLElement.call(this, doc, localName, prefix);\r\n  },\r\n  attributes: {\r\n    compact: Boolean,\r\n  },\r\n});\r\n\r\ndefine({\r\n  tags: [\r\n    \"abbr\", \"address\", \"article\", \"aside\", \"b\", \"bdi\", \"bdo\", \"cite\", \"content\", \"code\",\r\n    \"dd\", \"dfn\", \"dt\", \"em\", \"figcaption\", \"figure\", \"footer\", \"header\", \"hgroup\", \"i\", \"kbd\",\r\n    \"main\", \"mark\", \"nav\", \"noscript\", \"rb\", \"rp\", \"rt\", \"rtc\",\r\n    \"ruby\", \"s\", \"samp\", \"section\", \"small\", \"strong\", \"sub\", \"summary\", \"sup\", \"u\", \"var\", \"wbr\",\r\n    // Legacy elements\r\n    \"acronym\", \"basefont\", \"big\", \"center\", \"nobr\", \"noembed\", \"noframes\",\r\n    \"plaintext\", \"strike\", \"tt\"\r\n  ]\r\n});\r\n","\"use strict\";\r\nvar utils = require('./utils');\r\n\r\nexports = module.exports = {\r\n  CSSStyleDeclaration: require('./CSSStyleDeclaration'),\r\n  CharacterData: require('./CharacterData'),\r\n  Comment: require('./Comment'),\r\n  DOMException: require('./DOMException'),\r\n  DOMImplementation: require('./DOMImplementation'),\r\n  DOMTokenList: require('./DOMTokenList'),\r\n  Document: require('./Document'),\r\n  DocumentFragment: require('./DocumentFragment'),\r\n  DocumentType: require('./DocumentType'),\r\n  Element: require('./Element'),\r\n  HTMLParser: require('./HTMLParser'),\r\n  NamedNodeMap: require('./NamedNodeMap'),\r\n  Node: require('./Node'),\r\n  NodeList: require('./NodeList'),\r\n  NodeFilter: require('./NodeFilter'),\r\n  ProcessingInstruction: require('./ProcessingInstruction'),\r\n  Text: require('./Text'),\r\n  Window: require('./Window')\r\n};\r\n\r\nutils.merge(exports, require('./events'));\r\nutils.merge(exports, require('./htmlelts').elements);\r\nutils.merge(exports, require('./svg').elements);\r\n","\"use strict\";\r\nvar DOMImplementation = require('./DOMImplementation');\r\nvar HTMLParser = require('./HTMLParser');\r\nvar Window = require('./Window');\r\nvar impl = require('./impl');\r\n\r\nexports.createDOMImplementation = function() {\r\n  return new DOMImplementation(null);\r\n};\r\n\r\nexports.createDocument = function(html, force) {\r\n  // Previous API couldn't let you pass '' as a document, and that\r\n  // yields a slightly different document than createHTMLDocument('')\r\n  // does.  The new `force` parameter lets you pass '' if you want to.\r\n  if (html || force) {\r\n    var parser = new HTMLParser();\r\n    parser.parse(html || '', true);\r\n    return parser.document();\r\n  }\r\n  return new DOMImplementation(null).createHTMLDocument(\"\");\r\n};\r\n\r\nexports.createIncrementalHTMLParser = function() {\r\n    var parser = new HTMLParser();\r\n    /** API for incremental parser. */\r\n    return {\r\n        /** Provide an additional chunk of text to be parsed. */\r\n        write: function(s) {\r\n          if (s.length > 0) {\r\n            parser.parse(s, false, function() { return true; });\r\n          }\r\n        },\r\n        /**\r\n         * Signal that we are done providing input text, optionally\r\n         * providing one last chunk as a parameter.\r\n         */\r\n        end: function(s) {\r\n          parser.parse(s || '', true, function() { return true; });\r\n        },\r\n        /**\r\n         * Performs a chunk of parsing work, returning at the end of\r\n         * the next token as soon as shouldPauseFunc() returns true.\r\n         * Returns true iff there is more work to do.\r\n         *\r\n         * For example:\r\n         * ```\r\n         *  var incrParser = domino.createIncrementalHTMLParser();\r\n         *  incrParser.end('...long html document...');\r\n         *  while (true) {\r\n         *    // Pause every 10ms\r\n         *    var start = Date.now();\r\n         *    var pauseIn10 = function() { return (Date.now() - start) >= 10; };\r\n         *    if (!incrParser.process(pauseIn10)) {\r\n         *      break;\r\n         *    }\r\n         *    ...yield to other tasks, do other housekeeping, etc...\r\n         *  }\r\n         * ```\r\n         */\r\n        process: function(shouldPauseFunc) {\r\n          return parser.parse('', false, shouldPauseFunc);\r\n        },\r\n        /**\r\n         * Returns the result of the incremental parse.  Valid after\r\n         * `this.end()` has been called and `this.process()` has returned\r\n         * false.\r\n         */\r\n        document: function() {\r\n          return parser.document();\r\n        },\r\n    };  \r\n};\r\n\r\nexports.createWindow = function(html, address) {\r\n  var document = exports.createDocument(html);\r\n  if (address !== undefined) { document._address = address; }\r\n  return new impl.Window(document);\r\n};\r\n\r\nexports.impl = impl;","\"use strict\";\r\n/* jshint eqnull: true */\r\n/**\r\n * Zest (https://github.com/chjj/zest)\r\n * A css selector engine.\r\n * Copyright (c) 2011-2012, Christopher Jeffrey. (MIT Licensed)\r\n * Domino version based on Zest v0.1.3 with bugfixes applied.\r\n */\r\n\r\n/**\r\n * Helpers\r\n */\r\n\r\nvar window = Object.create(null, {\r\n  location: { get: function() {\r\n    throw new Error('window.location is not supported.');\r\n  } }\r\n});\r\n\r\nvar compareDocumentPosition = function(a, b) {\r\n      return a.compareDocumentPosition(b);\r\n};\r\n\r\nvar order = function(a, b) {\r\n  /* jshint bitwise: false */\r\n  return compareDocumentPosition(a, b) & 2 ? 1 : -1;\r\n};\r\n\r\nvar next = function(el) {\r\n  while ((el = el.nextSibling)\r\n         && el.nodeType !== 1);\r\n  return el;\r\n};\r\n\r\nvar prev = function(el) {\r\n  while ((el = el.previousSibling)\r\n         && el.nodeType !== 1);\r\n  return el;\r\n};\r\n\r\nvar child = function(el) {\r\n  /*jshint -W084 */\r\n  if (el = el.firstChild) {\r\n    while (el.nodeType !== 1\r\n           && (el = el.nextSibling));\r\n  }\r\n  return el;\r\n};\r\n\r\nvar lastChild = function(el) {\r\n  /*jshint -W084 */\r\n  if (el = el.lastChild) {\r\n    while (el.nodeType !== 1\r\n           && (el = el.previousSibling));\r\n  }\r\n  return el;\r\n};\r\n\r\nvar parentIsElement = function(n) {\r\n  if (!n.parentNode) { return false; }\r\n  var nodeType = n.parentNode.nodeType;\r\n  // The root `html` element can be a first- or last-child, too.\r\n  return nodeType === 1 || nodeType === 9;\r\n};\r\n\r\nvar unquote = function(str) {\r\n  if (!str) return str;\r\n  var ch = str[0];\r\n  if (ch === '\"' || ch === '\\'') {\r\n    if (str[str.length-1] === ch) {\r\n      str = str.slice(1, -1);\r\n    } else {\r\n      // bad string.\r\n      str = str.slice(1);\r\n    }\r\n    return str.replace(rules.str_escape, function(s) {\r\n      var m = /^\\\\(?:([0-9A-Fa-f]+)|([\\r\\n\\f]+))/.exec(s);\r\n      if (!m) { return s.slice(1); }\r\n      if (m[2]) { return ''; /* escaped newlines are ignored in strings. */ }\r\n      var cp = parseInt(m[1], 16);\r\n      return String.fromCodePoint ? String.fromCodePoint(cp) :\r\n        // Not all JavaScript implementations have String.fromCodePoint yet.\r\n        String.fromCharCode(cp);\r\n    });\r\n  } else if (rules.ident.test(str)) {\r\n    return decodeid(str);\r\n  } else {\r\n    // NUMBER, PERCENTAGE, DIMENSION, etc\r\n    return str;\r\n  }\r\n};\r\n\r\nvar decodeid = function(str) {\r\n  return str.replace(rules.escape, function(s) {\r\n    var m = /^\\\\([0-9A-Fa-f]+)/.exec(s);\r\n    if (!m) { return s[1]; }\r\n    var cp = parseInt(m[1], 16);\r\n    return String.fromCodePoint ? String.fromCodePoint(cp) :\r\n      // Not all JavaScript implementations have String.fromCodePoint yet.\r\n      String.fromCharCode(cp);\r\n  });\r\n};\r\n\r\nvar indexOf = (function() {\r\n  if (Array.prototype.indexOf) {\r\n    return Array.prototype.indexOf;\r\n  }\r\n  return function(obj, item) {\r\n    var i = this.length;\r\n    while (i--) {\r\n      if (this[i] === item) return i;\r\n    }\r\n    return -1;\r\n  };\r\n})();\r\n\r\nvar makeInside = function(start, end) {\r\n  var regex = rules.inside.source\r\n    .replace(/</g, start)\r\n    .replace(/>/g, end);\r\n\r\n  return new RegExp(regex);\r\n};\r\n\r\nvar replace = function(regex, name, val) {\r\n  regex = regex.source;\r\n  regex = regex.replace(name, val.source || val);\r\n  return new RegExp(regex);\r\n};\r\n\r\nvar truncateUrl = function(url, num) {\r\n  return url\r\n    .replace(/^(?:\\w+:\\/\\/|\\/+)/, '')\r\n    .replace(/(?:\\/+|\\/*#.*?)$/, '')\r\n    .split('/', num)\r\n    .join('/');\r\n};\r\n\r\n/**\r\n * Handle `nth` Selectors\r\n */\r\n\r\nvar parseNth = function(param_, test) {\r\n  var param = param_.replace(/\\s+/g, '')\r\n    , cap;\r\n\r\n  if (param === 'even') {\r\n    param = '2n+0';\r\n  } else if (param === 'odd') {\r\n    param = '2n+1';\r\n  } else if (param.indexOf('n') === -1) {\r\n    param = '0n' + param;\r\n  }\r\n\r\n  cap = /^([+-])?(\\d+)?n([+-])?(\\d+)?$/.exec(param);\r\n\r\n  return {\r\n    group: cap[1] === '-'\r\n      ? -(cap[2] || 1)\r\n      : +(cap[2] || 1),\r\n    offset: cap[4]\r\n      ? (cap[3] === '-' ? -cap[4] : +cap[4])\r\n      : 0\r\n  };\r\n};\r\n\r\nvar nth = function(param_, test, last) {\r\n  var param = parseNth(param_)\r\n    , group = param.group\r\n    , offset = param.offset\r\n    , find = !last ? child : lastChild\r\n    , advance = !last ? next : prev;\r\n\r\n  return function(el) {\r\n    if (!parentIsElement(el)) return;\r\n\r\n    var rel = find(el.parentNode)\r\n      , pos = 0;\r\n\r\n    while (rel) {\r\n      if (test(rel, el)) pos++;\r\n      if (rel === el) {\r\n        pos -= offset;\r\n        return group && pos\r\n          ? (pos % group) === 0 && (pos < 0 === group < 0)\r\n          : !pos;\r\n      }\r\n      rel = advance(rel);\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * Simple Selectors\r\n */\r\n\r\nvar selectors = {\r\n  '*': (function() {\r\n    if (false/*function() {\r\n      var el = document.createElement('div');\r\n      el.appendChild(document.createComment(''));\r\n      return !!el.getElementsByTagName('*')[0];\r\n    }()*/) {\r\n      return function(el) {\r\n        if (el.nodeType === 1) return true;\r\n      };\r\n    }\r\n    return function() {\r\n      return true;\r\n    };\r\n  })(),\r\n  'type': function(type) {\r\n    type = type.toLowerCase();\r\n    return function(el) {\r\n      return el.nodeName.toLowerCase() === type;\r\n    };\r\n  },\r\n  'attr': function(key, op, val, i) {\r\n    op = operators[op];\r\n    return function(el) {\r\n      var attr;\r\n      switch (key) {\r\n        case 'for':\r\n          attr = el.htmlFor;\r\n          break;\r\n        case 'class':\r\n          // className is '' when non-existent\r\n          // getAttribute('class') is null\r\n          attr = el.className;\r\n          if (attr === '' && el.getAttribute('class') == null) {\r\n            attr = null;\r\n          }\r\n          break;\r\n        case 'href':\r\n        case 'src':\r\n          attr = el.getAttribute(key, 2);\r\n          break;\r\n        case 'title':\r\n          // getAttribute('title') can be '' when non-existent sometimes?\r\n          attr = el.getAttribute('title') || null;\r\n          break;\r\n        // careful with attributes with special getter functions\r\n        case 'id':\r\n        case 'lang':\r\n        case 'dir':\r\n        case 'accessKey':\r\n        case 'hidden':\r\n        case 'tabIndex':\r\n        case 'style':\r\n          if (el.getAttribute) {\r\n            attr = el.getAttribute(key);\r\n            break;\r\n          }\r\n        /* falls through */\r\n        default:\r\n          if (el.hasAttribute && !el.hasAttribute(key)) {\r\n            break;\r\n          }\r\n          attr = el[key] != null\r\n            ? el[key]\r\n            : el.getAttribute && el.getAttribute(key);\r\n          break;\r\n      }\r\n      if (attr == null) return;\r\n      attr = attr + '';\r\n      if (i) {\r\n        attr = attr.toLowerCase();\r\n        val = val.toLowerCase();\r\n      }\r\n      return op(attr, val);\r\n    };\r\n  },\r\n  ':first-child': function(el) {\r\n    return !prev(el) && parentIsElement(el);\r\n  },\r\n  ':last-child': function(el) {\r\n    return !next(el) && parentIsElement(el);\r\n  },\r\n  ':only-child': function(el) {\r\n    return !prev(el) && !next(el) && parentIsElement(el);\r\n  },\r\n  ':nth-child': function(param, last) {\r\n    return nth(param, function() {\r\n      return true;\r\n    }, last);\r\n  },\r\n  ':nth-last-child': function(param) {\r\n    return selectors[':nth-child'](param, true);\r\n  },\r\n  ':root': function(el) {\r\n    return el.ownerDocument.documentElement === el;\r\n  },\r\n  ':empty': function(el) {\r\n    return !el.firstChild;\r\n  },\r\n  ':not': function(sel) {\r\n    var test = compileGroup(sel);\r\n    return function(el) {\r\n      return !test(el);\r\n    };\r\n  },\r\n  ':first-of-type': function(el) {\r\n    if (!parentIsElement(el)) return;\r\n    var type = el.nodeName;\r\n    /*jshint -W084 */\r\n    while (el = prev(el)) {\r\n      if (el.nodeName === type) return;\r\n    }\r\n    return true;\r\n  },\r\n  ':last-of-type': function(el) {\r\n    if (!parentIsElement(el)) return;\r\n    var type = el.nodeName;\r\n    /*jshint -W084 */\r\n    while (el = next(el)) {\r\n      if (el.nodeName === type) return;\r\n    }\r\n    return true;\r\n  },\r\n  ':only-of-type': function(el) {\r\n    return selectors[':first-of-type'](el)\r\n        && selectors[':last-of-type'](el);\r\n  },\r\n  ':nth-of-type': function(param, last) {\r\n    return nth(param, function(rel, el) {\r\n      return rel.nodeName === el.nodeName;\r\n    }, last);\r\n  },\r\n  ':nth-last-of-type': function(param) {\r\n    return selectors[':nth-of-type'](param, true);\r\n  },\r\n  ':checked': function(el) {\r\n    return !!(el.checked || el.selected);\r\n  },\r\n  ':indeterminate': function(el) {\r\n    return !selectors[':checked'](el);\r\n  },\r\n  ':enabled': function(el) {\r\n    return !el.disabled && el.type !== 'hidden';\r\n  },\r\n  ':disabled': function(el) {\r\n    return !!el.disabled;\r\n  },\r\n  ':target': function(el) {\r\n    return el.id === window.location.hash.substring(1);\r\n  },\r\n  ':focus': function(el) {\r\n    return el === el.ownerDocument.activeElement;\r\n  },\r\n  ':is': function(sel) {\r\n    return compileGroup(sel);\r\n  },\r\n  // :matches is an older name for :is; see\r\n  // https://github.com/w3c/csswg-drafts/issues/3258\r\n  ':matches': function(sel) {\r\n    return selectors[':is'](sel);\r\n  },\r\n  ':nth-match': function(param, last) {\r\n    var args = param.split(/\\s*,\\s*/)\r\n      , arg = args.shift()\r\n      , test = compileGroup(args.join(','));\r\n\r\n    return nth(arg, test, last);\r\n  },\r\n  ':nth-last-match': function(param) {\r\n    return selectors[':nth-match'](param, true);\r\n  },\r\n  ':links-here': function(el) {\r\n    return el + '' === window.location + '';\r\n  },\r\n  ':lang': function(param) {\r\n    return function(el) {\r\n      while (el) {\r\n        if (el.lang) return el.lang.indexOf(param) === 0;\r\n        el = el.parentNode;\r\n      }\r\n    };\r\n  },\r\n  ':dir': function(param) {\r\n    return function(el) {\r\n      while (el) {\r\n        if (el.dir) return el.dir === param;\r\n        el = el.parentNode;\r\n      }\r\n    };\r\n  },\r\n  ':scope': function(el, con) {\r\n    var context = con || el.ownerDocument;\r\n    if (context.nodeType === 9) {\r\n      return el === context.documentElement;\r\n    }\r\n    return el === context;\r\n  },\r\n  ':any-link': function(el) {\r\n    return typeof el.href === 'string';\r\n  },\r\n  ':local-link': function(el) {\r\n    if (el.nodeName) {\r\n      return el.href && el.host === window.location.host;\r\n    }\r\n    var param = +el + 1;\r\n    return function(el) {\r\n      if (!el.href) return;\r\n\r\n      var url = window.location + ''\r\n        , href = el + '';\r\n\r\n      return truncateUrl(url, param) === truncateUrl(href, param);\r\n    };\r\n  },\r\n  ':default': function(el) {\r\n    return !!el.defaultSelected;\r\n  },\r\n  ':valid': function(el) {\r\n    return el.willValidate || (el.validity && el.validity.valid);\r\n  },\r\n  ':invalid': function(el) {\r\n    return !selectors[':valid'](el);\r\n  },\r\n  ':in-range': function(el) {\r\n    return el.value > el.min && el.value <= el.max;\r\n  },\r\n  ':out-of-range': function(el) {\r\n    return !selectors[':in-range'](el);\r\n  },\r\n  ':required': function(el) {\r\n    return !!el.required;\r\n  },\r\n  ':optional': function(el) {\r\n    return !el.required;\r\n  },\r\n  ':read-only': function(el) {\r\n    if (el.readOnly) return true;\r\n\r\n    var attr = el.getAttribute('contenteditable')\r\n      , prop = el.contentEditable\r\n      , name = el.nodeName.toLowerCase();\r\n\r\n    name = name !== 'input' && name !== 'textarea';\r\n\r\n    return (name || el.disabled) && attr == null && prop !== 'true';\r\n  },\r\n  ':read-write': function(el) {\r\n    return !selectors[':read-only'](el);\r\n  },\r\n  ':hover': function() {\r\n    throw new Error(':hover is not supported.');\r\n  },\r\n  ':active': function() {\r\n    throw new Error(':active is not supported.');\r\n  },\r\n  ':link': function() {\r\n    throw new Error(':link is not supported.');\r\n  },\r\n  ':visited': function() {\r\n    throw new Error(':visited is not supported.');\r\n  },\r\n  ':column': function() {\r\n    throw new Error(':column is not supported.');\r\n  },\r\n  ':nth-column': function() {\r\n    throw new Error(':nth-column is not supported.');\r\n  },\r\n  ':nth-last-column': function() {\r\n    throw new Error(':nth-last-column is not supported.');\r\n  },\r\n  ':current': function() {\r\n    throw new Error(':current is not supported.');\r\n  },\r\n  ':past': function() {\r\n    throw new Error(':past is not supported.');\r\n  },\r\n  ':future': function() {\r\n    throw new Error(':future is not supported.');\r\n  },\r\n  // Non-standard, for compatibility purposes.\r\n  ':contains': function(param) {\r\n    return function(el) {\r\n      var text = el.innerText || el.textContent || el.value || '';\r\n      return text.indexOf(param) !== -1;\r\n    };\r\n  },\r\n  ':has': function(param) {\r\n    return function(el) {\r\n      return find(param, el).length > 0;\r\n    };\r\n  }\r\n  // Potentially add more pseudo selectors for\r\n  // compatibility with sizzle and most other\r\n  // selector engines (?).\r\n};\r\n\r\n/**\r\n * Attribute Operators\r\n */\r\n\r\nvar operators = {\r\n  '-': function() {\r\n    return true;\r\n  },\r\n  '=': function(attr, val) {\r\n    return attr === val;\r\n  },\r\n  '*=': function(attr, val) {\r\n    return attr.indexOf(val) !== -1;\r\n  },\r\n  '~=': function(attr, val) {\r\n    var i\r\n      , s\r\n      , f\r\n      , l;\r\n\r\n    for (s = 0; true; s = i + 1) {\r\n      i = attr.indexOf(val, s);\r\n      if (i === -1) return false;\r\n      f = attr[i - 1];\r\n      l = attr[i + val.length];\r\n      if ((!f || f === ' ') && (!l || l === ' ')) return true;\r\n    }\r\n  },\r\n  '|=': function(attr, val) {\r\n    var i = attr.indexOf(val)\r\n      , l;\r\n\r\n    if (i !== 0) return;\r\n    l = attr[i + val.length];\r\n\r\n    return l === '-' || !l;\r\n  },\r\n  '^=': function(attr, val) {\r\n    return attr.indexOf(val) === 0;\r\n  },\r\n  '$=': function(attr, val) {\r\n    var i = attr.lastIndexOf(val);\r\n    return i !== -1 && i + val.length === attr.length;\r\n  },\r\n  // non-standard\r\n  '!=': function(attr, val) {\r\n    return attr !== val;\r\n  }\r\n};\r\n\r\n/**\r\n * Combinator Logic\r\n */\r\n\r\nvar combinators = {\r\n  ' ': function(test) {\r\n    return function(el) {\r\n      /*jshint -W084 */\r\n      while (el = el.parentNode) {\r\n        if (test(el)) return el;\r\n      }\r\n    };\r\n  },\r\n  '>': function(test) {\r\n    return function(el) {\r\n      /*jshint -W084 */\r\n      if (el = el.parentNode) {\r\n        return test(el) && el;\r\n      }\r\n    };\r\n  },\r\n  '+': function(test) {\r\n    return function(el) {\r\n      /*jshint -W084 */\r\n      if (el = prev(el)) {\r\n        return test(el) && el;\r\n      }\r\n    };\r\n  },\r\n  '~': function(test) {\r\n    return function(el) {\r\n      /*jshint -W084 */\r\n      while (el = prev(el)) {\r\n        if (test(el)) return el;\r\n      }\r\n    };\r\n  },\r\n  'noop': function(test) {\r\n    return function(el) {\r\n      return test(el) && el;\r\n    };\r\n  },\r\n  'ref': function(test, name) {\r\n    var node;\r\n\r\n    function ref(el) {\r\n      var doc = el.ownerDocument\r\n        , nodes = doc.getElementsByTagName('*')\r\n        , i = nodes.length;\r\n\r\n      while (i--) {\r\n        node = nodes[i];\r\n        if (ref.test(el)) {\r\n          node = null;\r\n          return true;\r\n        }\r\n      }\r\n\r\n      node = null;\r\n    }\r\n\r\n    ref.combinator = function(el) {\r\n      if (!node || !node.getAttribute) return;\r\n\r\n      var attr = node.getAttribute(name) || '';\r\n      if (attr[0] === '#') attr = attr.substring(1);\r\n\r\n      if (attr === el.id && test(node)) {\r\n        return node;\r\n      }\r\n    };\r\n\r\n    return ref;\r\n  }\r\n};\r\n\r\n/**\r\n * Grammar\r\n */\r\n\r\nvar rules = {\r\n  escape: /\\\\(?:[^0-9A-Fa-f\\r\\n]|[0-9A-Fa-f]{1,6}[\\r\\n\\t ]?)/g,\r\n  str_escape: /(escape)|\\\\(\\n|\\r\\n?|\\f)/g,\r\n  nonascii: /[\\u00A0-\\uFFFF]/,\r\n  cssid: /(?:(?!-?[0-9])(?:escape|nonascii|[-_a-zA-Z0-9])+)/,\r\n  qname: /^ *(cssid|\\*)/,\r\n  simple: /^(?:([.#]cssid)|pseudo|attr)/,\r\n  ref: /^ *\\/(cssid)\\/ */,\r\n  combinator: /^(?: +([^ \\w*.#\\\\]) +|( )+|([^ \\w*.#\\\\]))(?! *$)/,\r\n  attr: /^\\[(cssid)(?:([^\\w]?=)(inside))?\\]/,\r\n  pseudo: /^(:cssid)(?:\\((inside)\\))?/,\r\n  inside: /(?:\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'|<[^\"'>]*>|\\\\[\"'>]|[^\"'>])*/,\r\n  ident: /^(cssid)$/\r\n};\r\n\r\nrules.cssid = replace(rules.cssid, 'nonascii', rules.nonascii);\r\nrules.cssid = replace(rules.cssid, 'escape', rules.escape);\r\nrules.qname = replace(rules.qname, 'cssid', rules.cssid);\r\nrules.simple = replace(rules.simple, 'cssid', rules.cssid);\r\nrules.ref = replace(rules.ref, 'cssid', rules.cssid);\r\nrules.attr = replace(rules.attr, 'cssid', rules.cssid);\r\nrules.pseudo = replace(rules.pseudo, 'cssid', rules.cssid);\r\nrules.inside = replace(rules.inside, '[^\"\\'>]*', rules.inside);\r\nrules.attr = replace(rules.attr, 'inside', makeInside('\\\\[', '\\\\]'));\r\nrules.pseudo = replace(rules.pseudo, 'inside', makeInside('\\\\(', '\\\\)'));\r\nrules.simple = replace(rules.simple, 'pseudo', rules.pseudo);\r\nrules.simple = replace(rules.simple, 'attr', rules.attr);\r\nrules.ident = replace(rules.ident, 'cssid', rules.cssid);\r\nrules.str_escape = replace(rules.str_escape, 'escape', rules.escape);\r\n\r\n/**\r\n * Compiling\r\n */\r\n\r\nvar compile = function(sel_) {\r\n  var sel = sel_.replace(/^\\s+|\\s+$/g, '')\r\n    , test\r\n    , filter = []\r\n    , buff = []\r\n    , subject\r\n    , qname\r\n    , cap\r\n    , op\r\n    , ref;\r\n\r\n  /*jshint -W084 */\r\n  while (sel) {\r\n    if (cap = rules.qname.exec(sel)) {\r\n      sel = sel.substring(cap[0].length);\r\n      qname = decodeid(cap[1]);\r\n      buff.push(tok(qname, true));\r\n    } else if (cap = rules.simple.exec(sel)) {\r\n      sel = sel.substring(cap[0].length);\r\n      qname = '*';\r\n      buff.push(tok(qname, true));\r\n      buff.push(tok(cap));\r\n    } else {\r\n      throw new SyntaxError('Invalid selector.');\r\n    }\r\n\r\n    while (cap = rules.simple.exec(sel)) {\r\n      sel = sel.substring(cap[0].length);\r\n      buff.push(tok(cap));\r\n    }\r\n\r\n    if (sel[0] === '!') {\r\n      sel = sel.substring(1);\r\n      subject = makeSubject();\r\n      subject.qname = qname;\r\n      buff.push(subject.simple);\r\n    }\r\n\r\n    if (cap = rules.ref.exec(sel)) {\r\n      sel = sel.substring(cap[0].length);\r\n      ref = combinators.ref(makeSimple(buff), decodeid(cap[1]));\r\n      filter.push(ref.combinator);\r\n      buff = [];\r\n      continue;\r\n    }\r\n\r\n    if (cap = rules.combinator.exec(sel)) {\r\n      sel = sel.substring(cap[0].length);\r\n      op = cap[1] || cap[2] || cap[3];\r\n      if (op === ',') {\r\n        filter.push(combinators.noop(makeSimple(buff)));\r\n        break;\r\n      }\r\n    } else {\r\n      op = 'noop';\r\n    }\r\n\r\n    if (!combinators[op]) { throw new SyntaxError('Bad combinator.'); }\r\n    filter.push(combinators[op](makeSimple(buff)));\r\n    buff = [];\r\n  }\r\n\r\n  test = makeTest(filter);\r\n  test.qname = qname;\r\n  test.sel = sel;\r\n\r\n  if (subject) {\r\n    subject.lname = test.qname;\r\n\r\n    subject.test = test;\r\n    subject.qname = subject.qname;\r\n    subject.sel = test.sel;\r\n    test = subject;\r\n  }\r\n\r\n  if (ref) {\r\n    ref.test = test;\r\n    ref.qname = test.qname;\r\n    ref.sel = test.sel;\r\n    test = ref;\r\n  }\r\n\r\n  return test;\r\n};\r\n\r\nvar tok = function(cap, qname) {\r\n  // qname\r\n  if (qname) {\r\n    return cap === '*'\r\n      ? selectors['*']\r\n      : selectors.type(cap);\r\n  }\r\n\r\n  // class/id\r\n  if (cap[1]) {\r\n    return cap[1][0] === '.'\r\n\t  // XXX unescape here?  or in attr?\r\n      ? selectors.attr('class', '~=', decodeid(cap[1].substring(1)), false)\r\n      : selectors.attr('id', '=', decodeid(cap[1].substring(1)), false);\r\n  }\r\n\r\n  // pseudo-name\r\n  // inside-pseudo\r\n  if (cap[2]) {\r\n    return cap[3]\r\n      ? selectors[decodeid(cap[2])](unquote(cap[3]))\r\n      : selectors[decodeid(cap[2])];\r\n  }\r\n\r\n  // attr name\r\n  // attr op\r\n  // attr value\r\n  if (cap[4]) {\r\n    var value = cap[6];\r\n    var i = /[\"'\\s]\\s*I$/i.test(value);\r\n    if (i) {\r\n      value = value.replace(/\\s*I$/i, '');\r\n    }\r\n    return selectors.attr(decodeid(cap[4]), cap[5] || '-', unquote(value), i);\r\n  }\r\n\r\n  throw new SyntaxError('Unknown Selector.');\r\n};\r\n\r\nvar makeSimple = function(func) {\r\n  var l = func.length\r\n    , i;\r\n\r\n  // Potentially make sure\r\n  // `el` is truthy.\r\n  if (l < 2) return func[0];\r\n\r\n  return function(el) {\r\n    if (!el) return;\r\n    for (i = 0; i < l; i++) {\r\n      if (!func[i](el)) return;\r\n    }\r\n    return true;\r\n  };\r\n};\r\n\r\nvar makeTest = function(func) {\r\n  if (func.length < 2) {\r\n    return function(el) {\r\n      return !!func[0](el);\r\n    };\r\n  }\r\n  return function(el) {\r\n    var i = func.length;\r\n    while (i--) {\r\n      if (!(el = func[i](el))) return;\r\n    }\r\n    return true;\r\n  };\r\n};\r\n\r\nvar makeSubject = function() {\r\n  var target;\r\n\r\n  function subject(el) {\r\n    var node = el.ownerDocument\r\n      , scope = node.getElementsByTagName(subject.lname)\r\n      , i = scope.length;\r\n\r\n    while (i--) {\r\n      if (subject.test(scope[i]) && target === el) {\r\n        target = null;\r\n        return true;\r\n      }\r\n    }\r\n\r\n    target = null;\r\n  }\r\n\r\n  subject.simple = function(el) {\r\n    target = el;\r\n    return true;\r\n  };\r\n\r\n  return subject;\r\n};\r\n\r\nvar compileGroup = function(sel) {\r\n  var test = compile(sel)\r\n    , tests = [ test ];\r\n\r\n  while (test.sel) {\r\n    test = compile(test.sel);\r\n    tests.push(test);\r\n  }\r\n\r\n  if (tests.length < 2) return test;\r\n\r\n  return function(el) {\r\n    var l = tests.length\r\n      , i = 0;\r\n\r\n    for (; i < l; i++) {\r\n      if (tests[i](el)) return true;\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * Selection\r\n */\r\n\r\nvar find = function(sel, node) {\r\n  var results = []\r\n    , test = compile(sel)\r\n    , scope = node.getElementsByTagName(test.qname)\r\n    , i = 0\r\n    , el;\r\n\r\n  /*jshint -W084 */\r\n  while (el = scope[i++]) {\r\n    if (test(el)) results.push(el);\r\n  }\r\n\r\n  if (test.sel) {\r\n    while (test.sel) {\r\n      test = compile(test.sel);\r\n      scope = node.getElementsByTagName(test.qname);\r\n      i = 0;\r\n      /*jshint -W084 */\r\n      while (el = scope[i++]) {\r\n        if (test(el) && indexOf.call(results, el) === -1) {\r\n          results.push(el);\r\n        }\r\n      }\r\n    }\r\n    results.sort(order);\r\n  }\r\n\r\n  return results;\r\n};\r\n\r\n/**\r\n * Expose\r\n */\r\n\r\nmodule.exports = exports = function(sel, context) {\r\n  /* when context isn't a DocumentFragment and the selector is simple: */\r\n  var id, r;\r\n  if (context.nodeType !== 11 && sel.indexOf(' ') === -1) {\r\n    if (sel[0] === '#' && context.rooted && /^#[A-Z_][-A-Z0-9_]*$/i.test(sel)) {\r\n      if (context.doc._hasMultipleElementsWithId) {\r\n        id = sel.substring(1);\r\n        if (!context.doc._hasMultipleElementsWithId(id)) {\r\n          r = context.doc.getElementById(id);\r\n          return r ? [r] : [];\r\n        }\r\n      }\r\n    }\r\n    if (sel[0] === '.' && /^\\.\\w+$/.test(sel)) {\r\n      return context.getElementsByClassName(sel.substring(1));\r\n    }\r\n    if (/^\\w+$/.test(sel)) {\r\n      return context.getElementsByTagName(sel);\r\n    }\r\n  }\r\n  /* do things the hard/slow way */\r\n  return find(sel, context);\r\n};\r\n\r\nexports.selectors = selectors;\r\nexports.operators = operators;\r\nexports.combinators = combinators;\r\n\r\nexports.matches = function(el, sel) {\r\n  var test = { sel: sel };\r\n  do {\r\n    test = compile(test.sel);\r\n    if (test(el)) { return true; }\r\n  } while (test.sel);\r\n  return false;\r\n};\r\n","\"use strict\";\r\n/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\n// The below is a compiled copy of https://github.com/angular/angular/blob/92e41e9cb417223d9888a4c23b4c0e73188f87d0/packages/compiler/src/render3/view/style_parser.ts\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.hyphenate = exports.parse = void 0;\r\n/**\r\n * Parses string representation of a style and converts it into object literal.\r\n *\r\n * @param value string representation of style as used in the `style` attribute in HTML.\r\n *   Example: `color: red; height: auto`.\r\n * @returns An array of style property name and value pairs, e.g. `['color', 'red', 'height',\r\n * 'auto']`\r\n */\r\nfunction parse(value) {\r\n  // we use a string array here instead of a string map\r\n  // because a string-map is not guaranteed to retain the\r\n  // order of the entries whereas a string array can be\r\n  // constructed in a [key, value, key, value] format.\r\n  const styles = [];\r\n  let i = 0;\r\n  let parenDepth = 0;\r\n  let quote = 0; /* Char.QuoteNone */\r\n  let valueStart = 0;\r\n  let propStart = 0;\r\n  let currentProp = null;\r\n  while (i < value.length) {\r\n    const token = value.charCodeAt(i++);\r\n    switch (token) {\r\n      case 40 /* Char.OpenParen */:\r\n        parenDepth++;\r\n        break;\r\n      case 41 /* Char.CloseParen */:\r\n        parenDepth--;\r\n        break;\r\n      case 39 /* Char.QuoteSingle */:\r\n        // valueStart needs to be there since prop values don't\r\n        // have quotes in CSS\r\n        if (quote === 0 /* Char.QuoteNone */) {\r\n          quote = 39 /* Char.QuoteSingle */;\r\n        } else if (\r\n          quote === 39 /* Char.QuoteSingle */ &&\r\n          value.charCodeAt(i - 1) !== 92 /* Char.BackSlash */\r\n        ) {\r\n          quote = 0 /* Char.QuoteNone */;\r\n        }\r\n        break;\r\n      case 34 /* Char.QuoteDouble */:\r\n        // same logic as above\r\n        if (quote === 0 /* Char.QuoteNone */) {\r\n          quote = 34 /* Char.QuoteDouble */;\r\n        } else if (\r\n          quote === 34 /* Char.QuoteDouble */ &&\r\n          value.charCodeAt(i - 1) !== 92 /* Char.BackSlash */\r\n        ) {\r\n          quote = 0 /* Char.QuoteNone */;\r\n        }\r\n        break;\r\n      case 58 /* Char.Colon */:\r\n        if (\r\n          !currentProp &&\r\n          parenDepth === 0 &&\r\n          quote === 0 /* Char.QuoteNone */\r\n        ) {\r\n          currentProp = hyphenate(value.substring(propStart, i - 1).trim());\r\n          valueStart = i;\r\n        }\r\n        break;\r\n      case 59 /* Char.Semicolon */:\r\n        if (\r\n          currentProp &&\r\n          valueStart > 0 &&\r\n          parenDepth === 0 &&\r\n          quote === 0 /* Char.QuoteNone */\r\n        ) {\r\n          const styleVal = value.substring(valueStart, i - 1).trim();\r\n          styles.push(currentProp, styleVal);\r\n          propStart = i;\r\n          valueStart = 0;\r\n          currentProp = null;\r\n        }\r\n        break;\r\n    }\r\n  }\r\n  if (currentProp && valueStart) {\r\n    const styleVal = value.slice(valueStart).trim();\r\n    styles.push(currentProp, styleVal);\r\n  }\r\n  return styles;\r\n}\r\nexports.parse = parse;\r\nfunction hyphenate(value) {\r\n  return value\r\n    .replace(/[a-z][A-Z]/g, (v) => {\r\n      return v.charAt(0) + \"-\" + v.charAt(1);\r\n    })\r\n    .toLowerCase();\r\n}\r\nexports.hyphenate = hyphenate;\r\n","\"use strict\";\r\nvar Element = require('./Element');\r\nvar defineElement = require('./defineElement');\r\nvar utils = require('./utils');\r\nvar CSSStyleDeclaration = require('./CSSStyleDeclaration');\r\n\r\nvar svgElements = exports.elements = {};\r\nvar svgNameToImpl = Object.create(null);\r\n\r\nexports.createElement = function(doc, localName, prefix) {\r\n  var impl = svgNameToImpl[localName] || SVGElement;\r\n  return new impl(doc, localName, prefix);\r\n};\r\n\r\nfunction define(spec) {\r\n  return defineElement(spec, SVGElement, svgElements, svgNameToImpl);\r\n}\r\n\r\nvar SVGElement = define({\r\n  superclass: Element,\r\n  name: 'SVGElement',\r\n  ctor: function SVGElement(doc, localName, prefix) {\r\n    Element.call(this, doc, localName, utils.NAMESPACE.SVG, prefix);\r\n  },\r\n  props: {\r\n    style: { get: function() {\r\n      if (!this._style)\r\n        this._style = new CSSStyleDeclaration(this);\r\n      return this._style;\r\n    }}\r\n  }\r\n});\r\n\r\ndefine({\r\n  name: 'SVGSVGElement',\r\n  ctor: function SVGSVGElement(doc, localName, prefix) {\r\n    SVGElement.call(this, doc, localName, prefix);\r\n  },\r\n  tag: 'svg',\r\n  props: {\r\n    createSVGRect: { value: function () {\r\n      return exports.createElement(this.ownerDocument, 'rect', null);\r\n    } }\r\n  }\r\n});\r\n\r\ndefine({\r\n  tags: [\r\n    'a', 'altGlyph', 'altGlyphDef', 'altGlyphItem', 'animate', 'animateColor', 'animateMotion', 'animateTransform',\r\n    'circle', 'clipPath', 'color-profile', 'cursor', 'defs', 'desc', 'ellipse', 'feBlend', 'feColorMatrix',\r\n    'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight',\r\n    'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode',\r\n    'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence', 'filter',\r\n    'font', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignObject', 'g',\r\n    'glyph', 'glyphRef', 'hkern', 'image', 'line', 'linearGradient', 'marker', 'mask', 'metadata', 'missing-glyph',\r\n    'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'script', 'set', 'stop',  'style',\r\n    'switch', 'symbol', 'text', 'textPath', 'title', 'tref', 'tspan', 'use', 'view', 'vkern'\r\n  ]\r\n});\r\n","\"use strict\";\r\nvar DOMException = require('./DOMException');\r\nvar ERR = DOMException;\r\nvar isApiWritable = require(\"./config\").isApiWritable;\r\n\r\nexports.NAMESPACE = {\r\n  HTML: 'http://www.w3.org/1999/xhtml',\r\n  XML: 'http://www.w3.org/XML/1998/namespace',\r\n  XMLNS: 'http://www.w3.org/2000/xmlns/',\r\n  MATHML: 'http://www.w3.org/1998/Math/MathML',\r\n  SVG: 'http://www.w3.org/2000/svg',\r\n  XLINK: 'http://www.w3.org/1999/xlink'\r\n};\r\n\r\n//\r\n// Shortcut functions for throwing errors of various types.\r\n//\r\nexports.IndexSizeError = function() { throw new DOMException(ERR.INDEX_SIZE_ERR); };\r\nexports.HierarchyRequestError = function() { throw new DOMException(ERR.HIERARCHY_REQUEST_ERR); };\r\nexports.WrongDocumentError = function() { throw new DOMException(ERR.WRONG_DOCUMENT_ERR); };\r\nexports.InvalidCharacterError = function() { throw new DOMException(ERR.INVALID_CHARACTER_ERR); };\r\nexports.NoModificationAllowedError = function() { throw new DOMException(ERR.NO_MODIFICATION_ALLOWED_ERR); };\r\nexports.NotFoundError = function() { throw new DOMException(ERR.NOT_FOUND_ERR); };\r\nexports.NotSupportedError = function() { throw new DOMException(ERR.NOT_SUPPORTED_ERR); };\r\nexports.InvalidStateError = function() { throw new DOMException(ERR.INVALID_STATE_ERR); };\r\nexports.SyntaxError = function() { throw new DOMException(ERR.SYNTAX_ERR); };\r\nexports.InvalidModificationError = function() { throw new DOMException(ERR.INVALID_MODIFICATION_ERR); };\r\nexports.NamespaceError = function() { throw new DOMException(ERR.NAMESPACE_ERR); };\r\nexports.InvalidAccessError = function() { throw new DOMException(ERR.INVALID_ACCESS_ERR); };\r\nexports.TypeMismatchError = function() { throw new DOMException(ERR.TYPE_MISMATCH_ERR); };\r\nexports.SecurityError = function() { throw new DOMException(ERR.SECURITY_ERR); };\r\nexports.NetworkError = function() { throw new DOMException(ERR.NETWORK_ERR); };\r\nexports.AbortError = function() { throw new DOMException(ERR.ABORT_ERR); };\r\nexports.UrlMismatchError = function() { throw new DOMException(ERR.URL_MISMATCH_ERR); };\r\nexports.QuotaExceededError = function() { throw new DOMException(ERR.QUOTA_EXCEEDED_ERR); };\r\nexports.TimeoutError = function() { throw new DOMException(ERR.TIMEOUT_ERR); };\r\nexports.InvalidNodeTypeError = function() { throw new DOMException(ERR.INVALID_NODE_TYPE_ERR); };\r\nexports.DataCloneError = function() { throw new DOMException(ERR.DATA_CLONE_ERR); };\r\n\r\nexports.nyi = function() {\r\n  throw new Error(\"NotYetImplemented\");\r\n};\r\n\r\nexports.shouldOverride = function() {\r\n  throw new Error(\"Abstract function; should be overriding in subclass.\");\r\n};\r\n\r\nexports.assert = function(expr, msg) {\r\n  if (!expr) {\r\n    throw new Error(\"Assertion failed: \" + (msg || \"\") + \"\\n\" + new Error().stack);\r\n  }\r\n};\r\n\r\nexports.expose = function(src, c) {\r\n  for (var n in src) {\r\n    Object.defineProperty(c.prototype, n, { value: src[n], writable: isApiWritable });\r\n  }\r\n};\r\n\r\nexports.merge = function(a, b) {\r\n  for (var n in b) {\r\n    a[n] = b[n];\r\n  }\r\n};\r\n\r\n// Compare two nodes based on their document order. This function is intended\r\n// to be passed to sort(). Assumes that the array being sorted does not\r\n// contain duplicates.  And that all nodes are connected and comparable.\r\n// Clever code by ppk via jeresig.\r\nexports.documentOrder = function(n,m) {\r\n  /* jshint bitwise: false */\r\n  return 3 - (n.compareDocumentPosition(m) & 6);\r\n};\r\n\r\nexports.toASCIILowerCase = function(s) {\r\n  return s.replace(/[A-Z]+/g, function(c) {\r\n    return c.toLowerCase();\r\n  });\r\n};\r\n\r\nexports.toASCIIUpperCase = function(s) {\r\n  return s.replace(/[a-z]+/g, function(c) {\r\n    return c.toUpperCase();\r\n  });\r\n};\r\n","\"use strict\";\r\n// This grammar is from the XML and XML Namespace specs. It specifies whether\r\n// a string (such as an element or attribute name) is a valid Name or QName.\r\n//\r\n// Name           ::= NameStartChar (NameChar)*\r\n// NameStartChar  ::= \":\" | [A-Z] | \"_\" | [a-z] |\r\n//                    [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] |\r\n//                    [#x370-#x37D] | [#x37F-#x1FFF] |\r\n//                    [#x200C-#x200D] | [#x2070-#x218F] |\r\n//                    [#x2C00-#x2FEF] | [#x3001-#xD7FF] |\r\n//                    [#xF900-#xFDCF] | [#xFDF0-#xFFFD] |\r\n//                    [#x10000-#xEFFFF]\r\n//\r\n// NameChar       ::= NameStartChar | \"-\" | \".\" | [0-9] |\r\n//                    #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\r\n//\r\n// QName          ::= PrefixedName| UnprefixedName\r\n// PrefixedName   ::= Prefix ':' LocalPart\r\n// UnprefixedName ::= LocalPart\r\n// Prefix         ::= NCName\r\n// LocalPart      ::= NCName\r\n// NCName         ::= Name - (Char* ':' Char*)\r\n//                    # An XML Name, minus the \":\"\r\n//\r\n\r\nexports.isValidName = isValidName;\r\nexports.isValidQName = isValidQName;\r\n\r\n// Most names will be ASCII only. Try matching against simple regexps first\r\nvar simplename = /^[_:A-Za-z][-.:\\w]+$/;\r\nvar simpleqname = /^([_A-Za-z][-.\\w]+|[_A-Za-z][-.\\w]+:[_A-Za-z][-.\\w]+)$/;\r\n\r\n// If the regular expressions above fail, try more complex ones that work\r\n// for any identifiers using codepoints from the Unicode BMP\r\nvar ncnamestartchars = \"_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02ff\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\";\r\nvar ncnamechars = \"-._A-Za-z0-9\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02ff\\u0300-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203f\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\";\r\n\r\nvar ncname = \"[\" + ncnamestartchars + \"][\" + ncnamechars + \"]*\";\r\nvar namestartchars = ncnamestartchars + \":\";\r\nvar namechars = ncnamechars + \":\";\r\nvar name = new RegExp(\"^[\" + namestartchars + \"]\" + \"[\" + namechars + \"]*$\");\r\nvar qname = new RegExp(\"^(\" + ncname + \"|\" + ncname + \":\" + ncname + \")$\");\r\n\r\n// XML says that these characters are also legal:\r\n// [#x10000-#xEFFFF].  So if the patterns above fail, and the\r\n// target string includes surrogates, then try the following\r\n// patterns that allow surrogates and then run an extra validation\r\n// step to make sure that the surrogates are in valid pairs and in\r\n// the right range.  Note that since the characters \\uf0000 to \\u1f0000\r\n// are not allowed, it means that the high surrogate can only go up to\r\n// \\uDB7f instead of \\uDBFF.\r\nvar hassurrogates = /[\\uD800-\\uDB7F\\uDC00-\\uDFFF]/;\r\nvar surrogatechars = /[\\uD800-\\uDB7F\\uDC00-\\uDFFF]/g;\r\nvar surrogatepairs = /[\\uD800-\\uDB7F][\\uDC00-\\uDFFF]/g;\r\n\r\n// Modify the variables above to allow surrogates\r\nncnamestartchars += \"\\uD800-\\uDB7F\\uDC00-\\uDFFF\";\r\nncnamechars += \"\\uD800-\\uDB7F\\uDC00-\\uDFFF\";\r\nncname = \"[\" + ncnamestartchars + \"][\" + ncnamechars + \"]*\";\r\nnamestartchars = ncnamestartchars + \":\";\r\nnamechars = ncnamechars + \":\";\r\n\r\n// Build another set of regexps that include surrogates\r\nvar surrogatename = new RegExp(\"^[\" + namestartchars + \"]\" + \"[\" + namechars + \"]*$\");\r\nvar surrogateqname = new RegExp(\"^(\" + ncname + \"|\" + ncname + \":\" + ncname + \")$\");\r\n\r\nfunction isValidName(s) {\r\n  if (simplename.test(s)) return true; // Plain ASCII\r\n  if (name.test(s)) return true; // Unicode BMP\r\n\r\n  // Maybe the tests above failed because s includes surrogate pairs\r\n  // Most likely, though, they failed for some more basic syntax problem\r\n  if (!hassurrogates.test(s)) return false;\r\n\r\n  // Is the string a valid name if we allow surrogates?\r\n  if (!surrogatename.test(s)) return false;\r\n\r\n  // Finally, are the surrogates all correctly paired up?\r\n  var chars = s.match(surrogatechars), pairs = s.match(surrogatepairs);\r\n  return pairs !== null && 2*pairs.length === chars.length;\r\n}\r\n\r\nfunction isValidQName(s) {\r\n  if (simpleqname.test(s)) return true; // Plain ASCII\r\n  if (qname.test(s)) return true; // Unicode BMP\r\n\r\n  if (!hassurrogates.test(s)) return false;\r\n  if (!surrogateqname.test(s)) return false;\r\n  var chars = s.match(surrogatechars), pairs = s.match(surrogatepairs);\r\n  return pairs !== null && 2*pairs.length === chars.length;\r\n}\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formatNames = exports.fastFormats = exports.fullFormats = void 0;\nfunction fmtDef(validate, compare) {\n    return { validate, compare };\n}\nexports.fullFormats = {\n    // date: http://tools.ietf.org/html/rfc3339#section-5.6\n    date: fmtDef(date, compareDate),\n    // date-time: http://tools.ietf.org/html/rfc3339#section-5.6\n    time: fmtDef(time, compareTime),\n    \"date-time\": fmtDef(date_time, compareDateTime),\n    // duration: https://tools.ietf.org/html/rfc3339#appendix-A\n    duration: /^P(?!$)((\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+S)?)?|(\\d+W)?)$/,\n    uri,\n    \"uri-reference\": /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,\n    // uri-template: https://tools.ietf.org/html/rfc6570\n    \"uri-template\": /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i,\n    // For the source: https://gist.github.com/dperini/729294\n    // For test cases: https://mathiasbynens.be/demo/url-regex\n    url: /^(?:https?|ftp):\\/\\/(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)(?:\\.(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu,\n    email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n    hostname: /^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i,\n    // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\n    ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n    ipv6: /^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))$/i,\n    regex,\n    // uuid: http://tools.ietf.org/html/rfc4122\n    uuid: /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,\n    // JSON-pointer: https://tools.ietf.org/html/rfc6901\n    // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A\n    \"json-pointer\": /^(?:\\/(?:[^~/]|~0|~1)*)*$/,\n    \"json-pointer-uri-fragment\": /^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,\n    // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00\n    \"relative-json-pointer\": /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/,\n    // the following formats are used by the openapi specification: https://spec.openapis.org/oas/v3.0.0#data-types\n    // byte: https://github.com/miguelmota/is-base64\n    byte,\n    // signed 32 bit integer\n    int32: { type: \"number\", validate: validateInt32 },\n    // signed 64 bit integer\n    int64: { type: \"number\", validate: validateInt64 },\n    // C-type float\n    float: { type: \"number\", validate: validateNumber },\n    // C-type double\n    double: { type: \"number\", validate: validateNumber },\n    // hint to the UI to hide input strings\n    password: true,\n    // unchecked string payload\n    binary: true,\n};\nexports.fastFormats = {\n    ...exports.fullFormats,\n    date: fmtDef(/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/, compareDate),\n    time: fmtDef(/^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i, compareTime),\n    \"date-time\": fmtDef(/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i, compareDateTime),\n    // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n    uri: /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/)?[^\\s]*$/i,\n    \"uri-reference\": /^(?:(?:[a-z][a-z0-9+\\-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i,\n    // email (sources from jsen validator):\n    // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363\n    // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'wilful violation')\n    email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n};\nexports.formatNames = Object.keys(exports.fullFormats);\nfunction isLeapYear(year) {\n    // https://tools.ietf.org/html/rfc3339#appendix-C\n    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\nconst DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\nconst DAYS = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nfunction date(str) {\n    // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n    const matches = DATE.exec(str);\n    if (!matches)\n        return false;\n    const year = +matches[1];\n    const month = +matches[2];\n    const day = +matches[3];\n    return (month >= 1 &&\n        month <= 12 &&\n        day >= 1 &&\n        day <= (month === 2 && isLeapYear(year) ? 29 : DAYS[month]));\n}\nfunction compareDate(d1, d2) {\n    if (!(d1 && d2))\n        return undefined;\n    if (d1 > d2)\n        return 1;\n    if (d1 < d2)\n        return -1;\n    return 0;\n}\nconst TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d(?::?\\d\\d)?)?$/i;\nfunction time(str, withTimeZone) {\n    const matches = TIME.exec(str);\n    if (!matches)\n        return false;\n    const hour = +matches[1];\n    const minute = +matches[2];\n    const second = +matches[3];\n    const timeZone = matches[5];\n    return (((hour <= 23 && minute <= 59 && second <= 59) ||\n        (hour === 23 && minute === 59 && second === 60)) &&\n        (!withTimeZone || timeZone !== \"\"));\n}\nfunction compareTime(t1, t2) {\n    if (!(t1 && t2))\n        return undefined;\n    const a1 = TIME.exec(t1);\n    const a2 = TIME.exec(t2);\n    if (!(a1 && a2))\n        return undefined;\n    t1 = a1[1] + a1[2] + a1[3] + (a1[4] || \"\");\n    t2 = a2[1] + a2[2] + a2[3] + (a2[4] || \"\");\n    if (t1 > t2)\n        return 1;\n    if (t1 < t2)\n        return -1;\n    return 0;\n}\nconst DATE_TIME_SEPARATOR = /t|\\s/i;\nfunction date_time(str) {\n    // http://tools.ietf.org/html/rfc3339#section-5.6\n    const dateTime = str.split(DATE_TIME_SEPARATOR);\n    return dateTime.length === 2 && date(dateTime[0]) && time(dateTime[1], true);\n}\nfunction compareDateTime(dt1, dt2) {\n    if (!(dt1 && dt2))\n        return undefined;\n    const [d1, t1] = dt1.split(DATE_TIME_SEPARATOR);\n    const [d2, t2] = dt2.split(DATE_TIME_SEPARATOR);\n    const res = compareDate(d1, d2);\n    if (res === undefined)\n        return undefined;\n    return res || compareTime(t1, t2);\n}\nconst NOT_URI_FRAGMENT = /\\/|:/;\nconst URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nfunction uri(str) {\n    // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n    return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\nconst BYTE = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;\nfunction byte(str) {\n    BYTE.lastIndex = 0;\n    return BYTE.test(str);\n}\nconst MIN_INT32 = -(2 ** 31);\nconst MAX_INT32 = 2 ** 31 - 1;\nfunction validateInt32(value) {\n    return Number.isInteger(value) && value <= MAX_INT32 && value >= MIN_INT32;\n}\nfunction validateInt64(value) {\n    // JSON and javascript max Int is 2**53, so any int that passes isInteger is valid for Int64\n    return Number.isInteger(value);\n}\nfunction validateNumber() {\n    return true;\n}\nconst Z_ANCHOR = /[^\\\\]\\\\Z/;\nfunction regex(str) {\n    if (Z_ANCHOR.test(str))\n        return false;\n    try {\n        new RegExp(str);\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n//# sourceMappingURL=formats.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst formats_1 = require(\"./formats\");\nconst limit_1 = require(\"./limit\");\nconst codegen_1 = require(\"ajv/dist/compile/codegen\");\nconst fullName = new codegen_1.Name(\"fullFormats\");\nconst fastName = new codegen_1.Name(\"fastFormats\");\nconst formatsPlugin = (ajv, opts = { keywords: true }) => {\n    if (Array.isArray(opts)) {\n        addFormats(ajv, opts, formats_1.fullFormats, fullName);\n        return ajv;\n    }\n    const [formats, exportName] = opts.mode === \"fast\" ? [formats_1.fastFormats, fastName] : [formats_1.fullFormats, fullName];\n    const list = opts.formats || formats_1.formatNames;\n    addFormats(ajv, list, formats, exportName);\n    if (opts.keywords)\n        limit_1.default(ajv);\n    return ajv;\n};\nformatsPlugin.get = (name, mode = \"full\") => {\n    const formats = mode === \"fast\" ? formats_1.fastFormats : formats_1.fullFormats;\n    const f = formats[name];\n    if (!f)\n        throw new Error(`Unknown format \"${name}\"`);\n    return f;\n};\nfunction addFormats(ajv, list, fs, exportName) {\n    var _a;\n    var _b;\n    (_a = (_b = ajv.opts.code).formats) !== null && _a !== void 0 ? _a : (_b.formats = codegen_1._ `require(\"ajv-formats/dist/formats\").${exportName}`);\n    for (const f of list)\n        ajv.addFormat(f, fs[f]);\n}\nmodule.exports = exports = formatsPlugin;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = formatsPlugin;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formatLimitDefinition = void 0;\nconst ajv_1 = require(\"ajv\");\nconst codegen_1 = require(\"ajv/dist/compile/codegen\");\nconst ops = codegen_1.operators;\nconst KWDs = {\n    formatMaximum: { okStr: \"<=\", ok: ops.LTE, fail: ops.GT },\n    formatMinimum: { okStr: \">=\", ok: ops.GTE, fail: ops.LT },\n    formatExclusiveMaximum: { okStr: \"<\", ok: ops.LT, fail: ops.GTE },\n    formatExclusiveMinimum: { okStr: \">\", ok: ops.GT, fail: ops.LTE },\n};\nconst error = {\n    message: ({ keyword, schemaCode }) => codegen_1.str `should be ${KWDs[keyword].okStr} ${schemaCode}`,\n    params: ({ keyword, schemaCode }) => codegen_1._ `{comparison: ${KWDs[keyword].okStr}, limit: ${schemaCode}}`,\n};\nexports.formatLimitDefinition = {\n    keyword: Object.keys(KWDs),\n    type: \"string\",\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, schemaCode, keyword, it } = cxt;\n        const { opts, self } = it;\n        if (!opts.validateFormats)\n            return;\n        const fCxt = new ajv_1.KeywordCxt(it, self.RULES.all.format.definition, \"format\");\n        if (fCxt.$data)\n            validate$DataFormat();\n        else\n            validateFormat();\n        function validate$DataFormat() {\n            const fmts = gen.scopeValue(\"formats\", {\n                ref: self.formats,\n                code: opts.code.formats,\n            });\n            const fmt = gen.const(\"fmt\", codegen_1._ `${fmts}[${fCxt.schemaCode}]`);\n            cxt.fail$data(codegen_1.or(codegen_1._ `typeof ${fmt} != \"object\"`, codegen_1._ `${fmt} instanceof RegExp`, codegen_1._ `typeof ${fmt}.compare != \"function\"`, compareCode(fmt)));\n        }\n        function validateFormat() {\n            const format = fCxt.schema;\n            const fmtDef = self.formats[format];\n            if (!fmtDef || fmtDef === true)\n                return;\n            if (typeof fmtDef != \"object\" ||\n                fmtDef instanceof RegExp ||\n                typeof fmtDef.compare != \"function\") {\n                throw new Error(`\"${keyword}\": format \"${format}\" does not define \"compare\" function`);\n            }\n            const fmt = gen.scopeValue(\"formats\", {\n                key: format,\n                ref: fmtDef,\n                code: opts.code.formats ? codegen_1._ `${opts.code.formats}${codegen_1.getProperty(format)}` : undefined,\n            });\n            cxt.fail$data(compareCode(fmt));\n        }\n        function compareCode(fmt) {\n            return codegen_1._ `${fmt}.compare(${data}, ${schemaCode}) ${KWDs[keyword].fail} 0`;\n        }\n    },\n    dependencies: [\"format\"],\n};\nconst formatLimitPlugin = (ajv) => {\n    ajv.addKeyword(exports.formatLimitDefinition);\n    return ajv;\n};\nexports.default = formatLimitPlugin;\n//# sourceMappingURL=limit.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MissingRefError = exports.ValidationError = exports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = exports.Ajv = void 0;\nconst core_1 = require(\"./core\");\nconst draft7_1 = require(\"./vocabularies/draft7\");\nconst discriminator_1 = require(\"./vocabularies/discriminator\");\nconst draft7MetaSchema = require(\"./refs/json-schema-draft-07.json\");\nconst META_SUPPORT_DATA = [\"/properties\"];\nconst META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\";\nclass Ajv extends core_1.default {\n    _addVocabularies() {\n        super._addVocabularies();\n        draft7_1.default.forEach((v) => this.addVocabulary(v));\n        if (this.opts.discriminator)\n            this.addKeyword(discriminator_1.default);\n    }\n    _addDefaultMetaSchema() {\n        super._addDefaultMetaSchema();\n        if (!this.opts.meta)\n            return;\n        const metaSchema = this.opts.$data\n            ? this.$dataMetaSchema(draft7MetaSchema, META_SUPPORT_DATA)\n            : draft7MetaSchema;\n        this.addMetaSchema(metaSchema, META_SCHEMA_ID, false);\n        this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID;\n    }\n    defaultMeta() {\n        return (this.opts.defaultMeta =\n            super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined));\n    }\n}\nexports.Ajv = Ajv;\nmodule.exports = exports = Ajv;\nmodule.exports.Ajv = Ajv;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Ajv;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nvar validation_error_1 = require(\"./runtime/validation_error\");\nObject.defineProperty(exports, \"ValidationError\", { enumerable: true, get: function () { return validation_error_1.default; } });\nvar ref_error_1 = require(\"./compile/ref_error\");\nObject.defineProperty(exports, \"MissingRefError\", { enumerable: true, get: function () { return ref_error_1.default; } });\n//# sourceMappingURL=ajv.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.regexpCode = exports.getEsmExportName = exports.getProperty = exports.safeStringify = exports.stringify = exports.strConcat = exports.addCodeArg = exports.str = exports._ = exports.nil = exports._Code = exports.Name = exports.IDENTIFIER = exports._CodeOrName = void 0;\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nclass _CodeOrName {\n}\nexports._CodeOrName = _CodeOrName;\nexports.IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nclass Name extends _CodeOrName {\n    constructor(s) {\n        super();\n        if (!exports.IDENTIFIER.test(s))\n            throw new Error(\"CodeGen: name must be a valid identifier\");\n        this.str = s;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        return false;\n    }\n    get names() {\n        return { [this.str]: 1 };\n    }\n}\nexports.Name = Name;\nclass _Code extends _CodeOrName {\n    constructor(code) {\n        super();\n        this._items = typeof code === \"string\" ? [code] : code;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        if (this._items.length > 1)\n            return false;\n        const item = this._items[0];\n        return item === \"\" || item === '\"\"';\n    }\n    get str() {\n        var _a;\n        return ((_a = this._str) !== null && _a !== void 0 ? _a : (this._str = this._items.reduce((s, c) => `${s}${c}`, \"\")));\n    }\n    get names() {\n        var _a;\n        return ((_a = this._names) !== null && _a !== void 0 ? _a : (this._names = this._items.reduce((names, c) => {\n            if (c instanceof Name)\n                names[c.str] = (names[c.str] || 0) + 1;\n            return names;\n        }, {})));\n    }\n}\nexports._Code = _Code;\nexports.nil = new _Code(\"\");\nfunction _(strs, ...args) {\n    const code = [strs[0]];\n    let i = 0;\n    while (i < args.length) {\n        addCodeArg(code, args[i]);\n        code.push(strs[++i]);\n    }\n    return new _Code(code);\n}\nexports._ = _;\nconst plus = new _Code(\"+\");\nfunction str(strs, ...args) {\n    const expr = [safeStringify(strs[0])];\n    let i = 0;\n    while (i < args.length) {\n        expr.push(plus);\n        addCodeArg(expr, args[i]);\n        expr.push(plus, safeStringify(strs[++i]));\n    }\n    optimize(expr);\n    return new _Code(expr);\n}\nexports.str = str;\nfunction addCodeArg(code, arg) {\n    if (arg instanceof _Code)\n        code.push(...arg._items);\n    else if (arg instanceof Name)\n        code.push(arg);\n    else\n        code.push(interpolate(arg));\n}\nexports.addCodeArg = addCodeArg;\nfunction optimize(expr) {\n    let i = 1;\n    while (i < expr.length - 1) {\n        if (expr[i] === plus) {\n            const res = mergeExprItems(expr[i - 1], expr[i + 1]);\n            if (res !== undefined) {\n                expr.splice(i - 1, 3, res);\n                continue;\n            }\n            expr[i++] = \"+\";\n        }\n        i++;\n    }\n}\nfunction mergeExprItems(a, b) {\n    if (b === '\"\"')\n        return a;\n    if (a === '\"\"')\n        return b;\n    if (typeof a == \"string\") {\n        if (b instanceof Name || a[a.length - 1] !== '\"')\n            return;\n        if (typeof b != \"string\")\n            return `${a.slice(0, -1)}${b}\"`;\n        if (b[0] === '\"')\n            return a.slice(0, -1) + b.slice(1);\n        return;\n    }\n    if (typeof b == \"string\" && b[0] === '\"' && !(a instanceof Name))\n        return `\"${a}${b.slice(1)}`;\n    return;\n}\nfunction strConcat(c1, c2) {\n    return c2.emptyStr() ? c1 : c1.emptyStr() ? c2 : str `${c1}${c2}`;\n}\nexports.strConcat = strConcat;\n// TODO do not allow arrays here\nfunction interpolate(x) {\n    return typeof x == \"number\" || typeof x == \"boolean\" || x === null\n        ? x\n        : safeStringify(Array.isArray(x) ? x.join(\",\") : x);\n}\nfunction stringify(x) {\n    return new _Code(safeStringify(x));\n}\nexports.stringify = stringify;\nfunction safeStringify(x) {\n    return JSON.stringify(x)\n        .replace(/\\u2028/g, \"\\\\u2028\")\n        .replace(/\\u2029/g, \"\\\\u2029\");\n}\nexports.safeStringify = safeStringify;\nfunction getProperty(key) {\n    return typeof key == \"string\" && exports.IDENTIFIER.test(key) ? new _Code(`.${key}`) : _ `[${key}]`;\n}\nexports.getProperty = getProperty;\n//Does best effort to format the name properly\nfunction getEsmExportName(key) {\n    if (typeof key == \"string\" && exports.IDENTIFIER.test(key)) {\n        return new _Code(`${key}`);\n    }\n    throw new Error(`CodeGen: invalid export name: ${key}, use explicit $id name mapping`);\n}\nexports.getEsmExportName = getEsmExportName;\nfunction regexpCode(rx) {\n    return new _Code(rx.toString());\n}\nexports.regexpCode = regexpCode;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.or = exports.and = exports.not = exports.CodeGen = exports.operators = exports.varKinds = exports.ValueScopeName = exports.ValueScope = exports.Scope = exports.Name = exports.regexpCode = exports.stringify = exports.getProperty = exports.nil = exports.strConcat = exports.str = exports._ = void 0;\nconst code_1 = require(\"./code\");\nconst scope_1 = require(\"./scope\");\nvar code_2 = require(\"./code\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return code_2._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return code_2.str; } });\nObject.defineProperty(exports, \"strConcat\", { enumerable: true, get: function () { return code_2.strConcat; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return code_2.nil; } });\nObject.defineProperty(exports, \"getProperty\", { enumerable: true, get: function () { return code_2.getProperty; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return code_2.stringify; } });\nObject.defineProperty(exports, \"regexpCode\", { enumerable: true, get: function () { return code_2.regexpCode; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return code_2.Name; } });\nvar scope_2 = require(\"./scope\");\nObject.defineProperty(exports, \"Scope\", { enumerable: true, get: function () { return scope_2.Scope; } });\nObject.defineProperty(exports, \"ValueScope\", { enumerable: true, get: function () { return scope_2.ValueScope; } });\nObject.defineProperty(exports, \"ValueScopeName\", { enumerable: true, get: function () { return scope_2.ValueScopeName; } });\nObject.defineProperty(exports, \"varKinds\", { enumerable: true, get: function () { return scope_2.varKinds; } });\nexports.operators = {\n    GT: new code_1._Code(\">\"),\n    GTE: new code_1._Code(\">=\"),\n    LT: new code_1._Code(\"<\"),\n    LTE: new code_1._Code(\"<=\"),\n    EQ: new code_1._Code(\"===\"),\n    NEQ: new code_1._Code(\"!==\"),\n    NOT: new code_1._Code(\"!\"),\n    OR: new code_1._Code(\"||\"),\n    AND: new code_1._Code(\"&&\"),\n    ADD: new code_1._Code(\"+\"),\n};\nclass Node {\n    optimizeNodes() {\n        return this;\n    }\n    optimizeNames(_names, _constants) {\n        return this;\n    }\n}\nclass Def extends Node {\n    constructor(varKind, name, rhs) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.rhs = rhs;\n    }\n    render({ es5, _n }) {\n        const varKind = es5 ? scope_1.varKinds.var : this.varKind;\n        const rhs = this.rhs === undefined ? \"\" : ` = ${this.rhs}`;\n        return `${varKind} ${this.name}${rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (!names[this.name.str])\n            return;\n        if (this.rhs)\n            this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        return this.rhs instanceof code_1._CodeOrName ? this.rhs.names : {};\n    }\n}\nclass Assign extends Node {\n    constructor(lhs, rhs, sideEffects) {\n        super();\n        this.lhs = lhs;\n        this.rhs = rhs;\n        this.sideEffects = sideEffects;\n    }\n    render({ _n }) {\n        return `${this.lhs} = ${this.rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (this.lhs instanceof code_1.Name && !names[this.lhs.str] && !this.sideEffects)\n            return;\n        this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        const names = this.lhs instanceof code_1.Name ? {} : { ...this.lhs.names };\n        return addExprNames(names, this.rhs);\n    }\n}\nclass AssignOp extends Assign {\n    constructor(lhs, op, rhs, sideEffects) {\n        super(lhs, rhs, sideEffects);\n        this.op = op;\n    }\n    render({ _n }) {\n        return `${this.lhs} ${this.op}= ${this.rhs};` + _n;\n    }\n}\nclass Label extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        return `${this.label}:` + _n;\n    }\n}\nclass Break extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        const label = this.label ? ` ${this.label}` : \"\";\n        return `break${label};` + _n;\n    }\n}\nclass Throw extends Node {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render({ _n }) {\n        return `throw ${this.error};` + _n;\n    }\n    get names() {\n        return this.error.names;\n    }\n}\nclass AnyCode extends Node {\n    constructor(code) {\n        super();\n        this.code = code;\n    }\n    render({ _n }) {\n        return `${this.code};` + _n;\n    }\n    optimizeNodes() {\n        return `${this.code}` ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        this.code = optimizeExpr(this.code, names, constants);\n        return this;\n    }\n    get names() {\n        return this.code instanceof code_1._CodeOrName ? this.code.names : {};\n    }\n}\nclass ParentNode extends Node {\n    constructor(nodes = []) {\n        super();\n        this.nodes = nodes;\n    }\n    render(opts) {\n        return this.nodes.reduce((code, n) => code + n.render(opts), \"\");\n    }\n    optimizeNodes() {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            const n = nodes[i].optimizeNodes();\n            if (Array.isArray(n))\n                nodes.splice(i, 1, ...n);\n            else if (n)\n                nodes[i] = n;\n            else\n                nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            // iterating backwards improves 1-pass optimization\n            const n = nodes[i];\n            if (n.optimizeNames(names, constants))\n                continue;\n            subtractNames(names, n.names);\n            nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    get names() {\n        return this.nodes.reduce((names, n) => addNames(names, n.names), {});\n    }\n}\nclass BlockNode extends ParentNode {\n    render(opts) {\n        return \"{\" + opts._n + super.render(opts) + \"}\" + opts._n;\n    }\n}\nclass Root extends ParentNode {\n}\nclass Else extends BlockNode {\n}\nElse.kind = \"else\";\nclass If extends BlockNode {\n    constructor(condition, nodes) {\n        super(nodes);\n        this.condition = condition;\n    }\n    render(opts) {\n        let code = `if(${this.condition})` + super.render(opts);\n        if (this.else)\n            code += \"else \" + this.else.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        super.optimizeNodes();\n        const cond = this.condition;\n        if (cond === true)\n            return this.nodes; // else is ignored here\n        let e = this.else;\n        if (e) {\n            const ns = e.optimizeNodes();\n            e = this.else = Array.isArray(ns) ? new Else(ns) : ns;\n        }\n        if (e) {\n            if (cond === false)\n                return e instanceof If ? e : e.nodes;\n            if (this.nodes.length)\n                return this;\n            return new If(not(cond), e instanceof If ? [e] : e.nodes);\n        }\n        if (cond === false || !this.nodes.length)\n            return undefined;\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a;\n        this.else = (_a = this.else) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        if (!(super.optimizeNames(names, constants) || this.else))\n            return;\n        this.condition = optimizeExpr(this.condition, names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        addExprNames(names, this.condition);\n        if (this.else)\n            addNames(names, this.else.names);\n        return names;\n    }\n}\nIf.kind = \"if\";\nclass For extends BlockNode {\n}\nFor.kind = \"for\";\nclass ForLoop extends For {\n    constructor(iteration) {\n        super();\n        this.iteration = iteration;\n    }\n    render(opts) {\n        return `for(${this.iteration})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iteration = optimizeExpr(this.iteration, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iteration.names);\n    }\n}\nclass ForRange extends For {\n    constructor(varKind, name, from, to) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.from = from;\n        this.to = to;\n    }\n    render(opts) {\n        const varKind = opts.es5 ? scope_1.varKinds.var : this.varKind;\n        const { name, from, to } = this;\n        return `for(${varKind} ${name}=${from}; ${name}<${to}; ${name}++)` + super.render(opts);\n    }\n    get names() {\n        const names = addExprNames(super.names, this.from);\n        return addExprNames(names, this.to);\n    }\n}\nclass ForIter extends For {\n    constructor(loop, varKind, name, iterable) {\n        super();\n        this.loop = loop;\n        this.varKind = varKind;\n        this.name = name;\n        this.iterable = iterable;\n    }\n    render(opts) {\n        return `for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iterable = optimizeExpr(this.iterable, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iterable.names);\n    }\n}\nclass Func extends BlockNode {\n    constructor(name, args, async) {\n        super();\n        this.name = name;\n        this.args = args;\n        this.async = async;\n    }\n    render(opts) {\n        const _async = this.async ? \"async \" : \"\";\n        return `${_async}function ${this.name}(${this.args})` + super.render(opts);\n    }\n}\nFunc.kind = \"func\";\nclass Return extends ParentNode {\n    render(opts) {\n        return \"return \" + super.render(opts);\n    }\n}\nReturn.kind = \"return\";\nclass Try extends BlockNode {\n    render(opts) {\n        let code = \"try\" + super.render(opts);\n        if (this.catch)\n            code += this.catch.render(opts);\n        if (this.finally)\n            code += this.finally.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        var _a, _b;\n        super.optimizeNodes();\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNodes();\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNodes();\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a, _b;\n        super.optimizeNames(names, constants);\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNames(names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        if (this.catch)\n            addNames(names, this.catch.names);\n        if (this.finally)\n            addNames(names, this.finally.names);\n        return names;\n    }\n}\nclass Catch extends BlockNode {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render(opts) {\n        return `catch(${this.error})` + super.render(opts);\n    }\n}\nCatch.kind = \"catch\";\nclass Finally extends BlockNode {\n    render(opts) {\n        return \"finally\" + super.render(opts);\n    }\n}\nFinally.kind = \"finally\";\nclass CodeGen {\n    constructor(extScope, opts = {}) {\n        this._values = {};\n        this._blockStarts = [];\n        this._constants = {};\n        this.opts = { ...opts, _n: opts.lines ? \"\\n\" : \"\" };\n        this._extScope = extScope;\n        this._scope = new scope_1.Scope({ parent: extScope });\n        this._nodes = [new Root()];\n    }\n    toString() {\n        return this._root.render(this.opts);\n    }\n    // returns unique name in the internal scope\n    name(prefix) {\n        return this._scope.name(prefix);\n    }\n    // reserves unique name in the external scope\n    scopeName(prefix) {\n        return this._extScope.name(prefix);\n    }\n    // reserves unique name in the external scope and assigns value to it\n    scopeValue(prefixOrName, value) {\n        const name = this._extScope.value(prefixOrName, value);\n        const vs = this._values[name.prefix] || (this._values[name.prefix] = new Set());\n        vs.add(name);\n        return name;\n    }\n    getScopeValue(prefix, keyOrRef) {\n        return this._extScope.getValue(prefix, keyOrRef);\n    }\n    // return code that assigns values in the external scope to the names that are used internally\n    // (same names that were returned by gen.scopeName or gen.scopeValue)\n    scopeRefs(scopeName) {\n        return this._extScope.scopeRefs(scopeName, this._values);\n    }\n    scopeCode() {\n        return this._extScope.scopeCode(this._values);\n    }\n    _def(varKind, nameOrPrefix, rhs, constant) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (rhs !== undefined && constant)\n            this._constants[name.str] = rhs;\n        this._leafNode(new Def(varKind, name, rhs));\n        return name;\n    }\n    // `const` declaration (`var` in es5 mode)\n    const(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.const, nameOrPrefix, rhs, _constant);\n    }\n    // `let` declaration with optional assignment (`var` in es5 mode)\n    let(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.let, nameOrPrefix, rhs, _constant);\n    }\n    // `var` declaration with optional assignment\n    var(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.var, nameOrPrefix, rhs, _constant);\n    }\n    // assignment code\n    assign(lhs, rhs, sideEffects) {\n        return this._leafNode(new Assign(lhs, rhs, sideEffects));\n    }\n    // `+=` code\n    add(lhs, rhs) {\n        return this._leafNode(new AssignOp(lhs, exports.operators.ADD, rhs));\n    }\n    // appends passed SafeExpr to code or executes Block\n    code(c) {\n        if (typeof c == \"function\")\n            c();\n        else if (c !== code_1.nil)\n            this._leafNode(new AnyCode(c));\n        return this;\n    }\n    // returns code for object literal for the passed argument list of key-value pairs\n    object(...keyValues) {\n        const code = [\"{\"];\n        for (const [key, value] of keyValues) {\n            if (code.length > 1)\n                code.push(\",\");\n            code.push(key);\n            if (key !== value || this.opts.es5) {\n                code.push(\":\");\n                (0, code_1.addCodeArg)(code, value);\n            }\n        }\n        code.push(\"}\");\n        return new code_1._Code(code);\n    }\n    // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n    if(condition, thenBody, elseBody) {\n        this._blockNode(new If(condition));\n        if (thenBody && elseBody) {\n            this.code(thenBody).else().code(elseBody).endIf();\n        }\n        else if (thenBody) {\n            this.code(thenBody).endIf();\n        }\n        else if (elseBody) {\n            throw new Error('CodeGen: \"else\" body without \"then\" body');\n        }\n        return this;\n    }\n    // `else if` clause - invalid without `if` or after `else` clauses\n    elseIf(condition) {\n        return this._elseNode(new If(condition));\n    }\n    // `else` clause - only valid after `if` or `else if` clauses\n    else() {\n        return this._elseNode(new Else());\n    }\n    // end `if` statement (needed if gen.if was used only with condition)\n    endIf() {\n        return this._endBlockNode(If, Else);\n    }\n    _for(node, forBody) {\n        this._blockNode(node);\n        if (forBody)\n            this.code(forBody).endFor();\n        return this;\n    }\n    // a generic `for` clause (or statement if `forBody` is passed)\n    for(iteration, forBody) {\n        return this._for(new ForLoop(iteration), forBody);\n    }\n    // `for` statement for a range of values\n    forRange(nameOrPrefix, from, to, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.let) {\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForRange(varKind, name, from, to), () => forBody(name));\n    }\n    // `for-of` statement (in es5 mode replace with a normal for loop)\n    forOf(nameOrPrefix, iterable, forBody, varKind = scope_1.varKinds.const) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (this.opts.es5) {\n            const arr = iterable instanceof code_1.Name ? iterable : this.var(\"_arr\", iterable);\n            return this.forRange(\"_i\", 0, (0, code_1._) `${arr}.length`, (i) => {\n                this.var(name, (0, code_1._) `${arr}[${i}]`);\n                forBody(name);\n            });\n        }\n        return this._for(new ForIter(\"of\", varKind, name, iterable), () => forBody(name));\n    }\n    // `for-in` statement.\n    // With option `ownProperties` replaced with a `for-of` loop for object keys\n    forIn(nameOrPrefix, obj, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.const) {\n        if (this.opts.ownProperties) {\n            return this.forOf(nameOrPrefix, (0, code_1._) `Object.keys(${obj})`, forBody);\n        }\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForIter(\"in\", varKind, name, obj), () => forBody(name));\n    }\n    // end `for` loop\n    endFor() {\n        return this._endBlockNode(For);\n    }\n    // `label` statement\n    label(label) {\n        return this._leafNode(new Label(label));\n    }\n    // `break` statement\n    break(label) {\n        return this._leafNode(new Break(label));\n    }\n    // `return` statement\n    return(value) {\n        const node = new Return();\n        this._blockNode(node);\n        this.code(value);\n        if (node.nodes.length !== 1)\n            throw new Error('CodeGen: \"return\" should have one node');\n        return this._endBlockNode(Return);\n    }\n    // `try` statement\n    try(tryBody, catchCode, finallyCode) {\n        if (!catchCode && !finallyCode)\n            throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"');\n        const node = new Try();\n        this._blockNode(node);\n        this.code(tryBody);\n        if (catchCode) {\n            const error = this.name(\"e\");\n            this._currNode = node.catch = new Catch(error);\n            catchCode(error);\n        }\n        if (finallyCode) {\n            this._currNode = node.finally = new Finally();\n            this.code(finallyCode);\n        }\n        return this._endBlockNode(Catch, Finally);\n    }\n    // `throw` statement\n    throw(error) {\n        return this._leafNode(new Throw(error));\n    }\n    // start self-balancing block\n    block(body, nodeCount) {\n        this._blockStarts.push(this._nodes.length);\n        if (body)\n            this.code(body).endBlock(nodeCount);\n        return this;\n    }\n    // end the current self-balancing block\n    endBlock(nodeCount) {\n        const len = this._blockStarts.pop();\n        if (len === undefined)\n            throw new Error(\"CodeGen: not in self-balancing block\");\n        const toClose = this._nodes.length - len;\n        if (toClose < 0 || (nodeCount !== undefined && toClose !== nodeCount)) {\n            throw new Error(`CodeGen: wrong number of nodes: ${toClose} vs ${nodeCount} expected`);\n        }\n        this._nodes.length = len;\n        return this;\n    }\n    // `function` heading (or definition if funcBody is passed)\n    func(name, args = code_1.nil, async, funcBody) {\n        this._blockNode(new Func(name, args, async));\n        if (funcBody)\n            this.code(funcBody).endFunc();\n        return this;\n    }\n    // end function definition\n    endFunc() {\n        return this._endBlockNode(Func);\n    }\n    optimize(n = 1) {\n        while (n-- > 0) {\n            this._root.optimizeNodes();\n            this._root.optimizeNames(this._root.names, this._constants);\n        }\n    }\n    _leafNode(node) {\n        this._currNode.nodes.push(node);\n        return this;\n    }\n    _blockNode(node) {\n        this._currNode.nodes.push(node);\n        this._nodes.push(node);\n    }\n    _endBlockNode(N1, N2) {\n        const n = this._currNode;\n        if (n instanceof N1 || (N2 && n instanceof N2)) {\n            this._nodes.pop();\n            return this;\n        }\n        throw new Error(`CodeGen: not in block \"${N2 ? `${N1.kind}/${N2.kind}` : N1.kind}\"`);\n    }\n    _elseNode(node) {\n        const n = this._currNode;\n        if (!(n instanceof If)) {\n            throw new Error('CodeGen: \"else\" without \"if\"');\n        }\n        this._currNode = n.else = node;\n        return this;\n    }\n    get _root() {\n        return this._nodes[0];\n    }\n    get _currNode() {\n        const ns = this._nodes;\n        return ns[ns.length - 1];\n    }\n    set _currNode(node) {\n        const ns = this._nodes;\n        ns[ns.length - 1] = node;\n    }\n}\nexports.CodeGen = CodeGen;\nfunction addNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) + (from[n] || 0);\n    return names;\n}\nfunction addExprNames(names, from) {\n    return from instanceof code_1._CodeOrName ? addNames(names, from.names) : names;\n}\nfunction optimizeExpr(expr, names, constants) {\n    if (expr instanceof code_1.Name)\n        return replaceName(expr);\n    if (!canOptimize(expr))\n        return expr;\n    return new code_1._Code(expr._items.reduce((items, c) => {\n        if (c instanceof code_1.Name)\n            c = replaceName(c);\n        if (c instanceof code_1._Code)\n            items.push(...c._items);\n        else\n            items.push(c);\n        return items;\n    }, []));\n    function replaceName(n) {\n        const c = constants[n.str];\n        if (c === undefined || names[n.str] !== 1)\n            return n;\n        delete names[n.str];\n        return c;\n    }\n    function canOptimize(e) {\n        return (e instanceof code_1._Code &&\n            e._items.some((c) => c instanceof code_1.Name && names[c.str] === 1 && constants[c.str] !== undefined));\n    }\n}\nfunction subtractNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) - (from[n] || 0);\n}\nfunction not(x) {\n    return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : (0, code_1._) `!${par(x)}`;\n}\nexports.not = not;\nconst andCode = mappend(exports.operators.AND);\n// boolean AND (&&) expression with the passed arguments\nfunction and(...args) {\n    return args.reduce(andCode);\n}\nexports.and = and;\nconst orCode = mappend(exports.operators.OR);\n// boolean OR (||) expression with the passed arguments\nfunction or(...args) {\n    return args.reduce(orCode);\n}\nexports.or = or;\nfunction mappend(op) {\n    return (x, y) => (x === code_1.nil ? y : y === code_1.nil ? x : (0, code_1._) `${par(x)} ${op} ${par(y)}`);\n}\nfunction par(x) {\n    return x instanceof code_1.Name ? x : (0, code_1._) `(${x})`;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValueScope = exports.ValueScopeName = exports.Scope = exports.varKinds = exports.UsedValueState = void 0;\nconst code_1 = require(\"./code\");\nclass ValueError extends Error {\n    constructor(name) {\n        super(`CodeGen: \"code\" for ${name} not defined`);\n        this.value = name.value;\n    }\n}\nvar UsedValueState;\n(function (UsedValueState) {\n    UsedValueState[UsedValueState[\"Started\"] = 0] = \"Started\";\n    UsedValueState[UsedValueState[\"Completed\"] = 1] = \"Completed\";\n})(UsedValueState || (exports.UsedValueState = UsedValueState = {}));\nexports.varKinds = {\n    const: new code_1.Name(\"const\"),\n    let: new code_1.Name(\"let\"),\n    var: new code_1.Name(\"var\"),\n};\nclass Scope {\n    constructor({ prefixes, parent } = {}) {\n        this._names = {};\n        this._prefixes = prefixes;\n        this._parent = parent;\n    }\n    toName(nameOrPrefix) {\n        return nameOrPrefix instanceof code_1.Name ? nameOrPrefix : this.name(nameOrPrefix);\n    }\n    name(prefix) {\n        return new code_1.Name(this._newName(prefix));\n    }\n    _newName(prefix) {\n        const ng = this._names[prefix] || this._nameGroup(prefix);\n        return `${prefix}${ng.index++}`;\n    }\n    _nameGroup(prefix) {\n        var _a, _b;\n        if (((_b = (_a = this._parent) === null || _a === void 0 ? void 0 : _a._prefixes) === null || _b === void 0 ? void 0 : _b.has(prefix)) || (this._prefixes && !this._prefixes.has(prefix))) {\n            throw new Error(`CodeGen: prefix \"${prefix}\" is not allowed in this scope`);\n        }\n        return (this._names[prefix] = { prefix, index: 0 });\n    }\n}\nexports.Scope = Scope;\nclass ValueScopeName extends code_1.Name {\n    constructor(prefix, nameStr) {\n        super(nameStr);\n        this.prefix = prefix;\n    }\n    setValue(value, { property, itemIndex }) {\n        this.value = value;\n        this.scopePath = (0, code_1._) `.${new code_1.Name(property)}[${itemIndex}]`;\n    }\n}\nexports.ValueScopeName = ValueScopeName;\nconst line = (0, code_1._) `\\n`;\nclass ValueScope extends Scope {\n    constructor(opts) {\n        super(opts);\n        this._values = {};\n        this._scope = opts.scope;\n        this.opts = { ...opts, _n: opts.lines ? line : code_1.nil };\n    }\n    get() {\n        return this._scope;\n    }\n    name(prefix) {\n        return new ValueScopeName(prefix, this._newName(prefix));\n    }\n    value(nameOrPrefix, value) {\n        var _a;\n        if (value.ref === undefined)\n            throw new Error(\"CodeGen: ref must be passed in value\");\n        const name = this.toName(nameOrPrefix);\n        const { prefix } = name;\n        const valueKey = (_a = value.key) !== null && _a !== void 0 ? _a : value.ref;\n        let vs = this._values[prefix];\n        if (vs) {\n            const _name = vs.get(valueKey);\n            if (_name)\n                return _name;\n        }\n        else {\n            vs = this._values[prefix] = new Map();\n        }\n        vs.set(valueKey, name);\n        const s = this._scope[prefix] || (this._scope[prefix] = []);\n        const itemIndex = s.length;\n        s[itemIndex] = value.ref;\n        name.setValue(value, { property: prefix, itemIndex });\n        return name;\n    }\n    getValue(prefix, keyOrRef) {\n        const vs = this._values[prefix];\n        if (!vs)\n            return;\n        return vs.get(keyOrRef);\n    }\n    scopeRefs(scopeName, values = this._values) {\n        return this._reduceValues(values, (name) => {\n            if (name.scopePath === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return (0, code_1._) `${scopeName}${name.scopePath}`;\n        });\n    }\n    scopeCode(values = this._values, usedValues, getCode) {\n        return this._reduceValues(values, (name) => {\n            if (name.value === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return name.value.code;\n        }, usedValues, getCode);\n    }\n    _reduceValues(values, valueCode, usedValues = {}, getCode) {\n        let code = code_1.nil;\n        for (const prefix in values) {\n            const vs = values[prefix];\n            if (!vs)\n                continue;\n            const nameSet = (usedValues[prefix] = usedValues[prefix] || new Map());\n            vs.forEach((name) => {\n                if (nameSet.has(name))\n                    return;\n                nameSet.set(name, UsedValueState.Started);\n                let c = valueCode(name);\n                if (c) {\n                    const def = this.opts.es5 ? exports.varKinds.var : exports.varKinds.const;\n                    code = (0, code_1._) `${code}${def} ${name} = ${c};${this.opts._n}`;\n                }\n                else if ((c = getCode === null || getCode === void 0 ? void 0 : getCode(name))) {\n                    code = (0, code_1._) `${code}${c}${this.opts._n}`;\n                }\n                else {\n                    throw new ValueError(name);\n                }\n                nameSet.set(name, UsedValueState.Completed);\n            });\n        }\n        return code;\n    }\n}\nexports.ValueScope = ValueScope;\n//# sourceMappingURL=scope.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendErrors = exports.resetErrorsCount = exports.reportExtraError = exports.reportError = exports.keyword$DataError = exports.keywordError = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst util_1 = require(\"./util\");\nconst names_1 = require(\"./names\");\nexports.keywordError = {\n    message: ({ keyword }) => (0, codegen_1.str) `must pass \"${keyword}\" keyword validation`,\n};\nexports.keyword$DataError = {\n    message: ({ keyword, schemaType }) => schemaType\n        ? (0, codegen_1.str) `\"${keyword}\" keyword must be ${schemaType} ($data)`\n        : (0, codegen_1.str) `\"${keyword}\" keyword is invalid ($data)`,\n};\nfunction reportError(cxt, error = exports.keywordError, errorPaths, overrideAllErrors) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    if (overrideAllErrors !== null && overrideAllErrors !== void 0 ? overrideAllErrors : (compositeRule || allErrors)) {\n        addError(gen, errObj);\n    }\n    else {\n        returnErrors(it, (0, codegen_1._) `[${errObj}]`);\n    }\n}\nexports.reportError = reportError;\nfunction reportExtraError(cxt, error = exports.keywordError, errorPaths) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    addError(gen, errObj);\n    if (!(compositeRule || allErrors)) {\n        returnErrors(it, names_1.default.vErrors);\n    }\n}\nexports.reportExtraError = reportExtraError;\nfunction resetErrorsCount(gen, errsCount) {\n    gen.assign(names_1.default.errors, errsCount);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} !== null`, () => gen.if(errsCount, () => gen.assign((0, codegen_1._) `${names_1.default.vErrors}.length`, errsCount), () => gen.assign(names_1.default.vErrors, null)));\n}\nexports.resetErrorsCount = resetErrorsCount;\nfunction extendErrors({ gen, keyword, schemaValue, data, errsCount, it, }) {\n    /* istanbul ignore if */\n    if (errsCount === undefined)\n        throw new Error(\"ajv implementation error\");\n    const err = gen.name(\"err\");\n    gen.forRange(\"i\", errsCount, names_1.default.errors, (i) => {\n        gen.const(err, (0, codegen_1._) `${names_1.default.vErrors}[${i}]`);\n        gen.if((0, codegen_1._) `${err}.instancePath === undefined`, () => gen.assign((0, codegen_1._) `${err}.instancePath`, (0, codegen_1.strConcat)(names_1.default.instancePath, it.errorPath)));\n        gen.assign((0, codegen_1._) `${err}.schemaPath`, (0, codegen_1.str) `${it.errSchemaPath}/${keyword}`);\n        if (it.opts.verbose) {\n            gen.assign((0, codegen_1._) `${err}.schema`, schemaValue);\n            gen.assign((0, codegen_1._) `${err}.data`, data);\n        }\n    });\n}\nexports.extendErrors = extendErrors;\nfunction addError(gen, errObj) {\n    const err = gen.const(\"err\", errObj);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} === null`, () => gen.assign(names_1.default.vErrors, (0, codegen_1._) `[${err}]`), (0, codegen_1._) `${names_1.default.vErrors}.push(${err})`);\n    gen.code((0, codegen_1._) `${names_1.default.errors}++`);\n}\nfunction returnErrors(it, errs) {\n    const { gen, validateName, schemaEnv } = it;\n    if (schemaEnv.$async) {\n        gen.throw((0, codegen_1._) `new ${it.ValidationError}(${errs})`);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, errs);\n        gen.return(false);\n    }\n}\nconst E = {\n    keyword: new codegen_1.Name(\"keyword\"),\n    schemaPath: new codegen_1.Name(\"schemaPath\"), // also used in JTD errors\n    params: new codegen_1.Name(\"params\"),\n    propertyName: new codegen_1.Name(\"propertyName\"),\n    message: new codegen_1.Name(\"message\"),\n    schema: new codegen_1.Name(\"schema\"),\n    parentSchema: new codegen_1.Name(\"parentSchema\"),\n};\nfunction errorObjectCode(cxt, error, errorPaths) {\n    const { createErrors } = cxt.it;\n    if (createErrors === false)\n        return (0, codegen_1._) `{}`;\n    return errorObject(cxt, error, errorPaths);\n}\nfunction errorObject(cxt, error, errorPaths = {}) {\n    const { gen, it } = cxt;\n    const keyValues = [\n        errorInstancePath(it, errorPaths),\n        errorSchemaPath(cxt, errorPaths),\n    ];\n    extraErrorProps(cxt, error, keyValues);\n    return gen.object(...keyValues);\n}\nfunction errorInstancePath({ errorPath }, { instancePath }) {\n    const instPath = instancePath\n        ? (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(instancePath, util_1.Type.Str)}`\n        : errorPath;\n    return [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, instPath)];\n}\nfunction errorSchemaPath({ keyword, it: { errSchemaPath } }, { schemaPath, parentSchema }) {\n    let schPath = parentSchema ? errSchemaPath : (0, codegen_1.str) `${errSchemaPath}/${keyword}`;\n    if (schemaPath) {\n        schPath = (0, codegen_1.str) `${schPath}${(0, util_1.getErrorPath)(schemaPath, util_1.Type.Str)}`;\n    }\n    return [E.schemaPath, schPath];\n}\nfunction extraErrorProps(cxt, { params, message }, keyValues) {\n    const { keyword, data, schemaValue, it } = cxt;\n    const { opts, propertyName, topSchemaRef, schemaPath } = it;\n    keyValues.push([E.keyword, keyword], [E.params, typeof params == \"function\" ? params(cxt) : params || (0, codegen_1._) `{}`]);\n    if (opts.messages) {\n        keyValues.push([E.message, typeof message == \"function\" ? message(cxt) : message]);\n    }\n    if (opts.verbose) {\n        keyValues.push([E.schema, schemaValue], [E.parentSchema, (0, codegen_1._) `${topSchemaRef}${schemaPath}`], [names_1.default.data, data]);\n    }\n    if (propertyName)\n        keyValues.push([E.propertyName, propertyName]);\n}\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveSchema = exports.getCompilingSchema = exports.resolveRef = exports.compileSchema = exports.SchemaEnv = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst validation_error_1 = require(\"../runtime/validation_error\");\nconst names_1 = require(\"./names\");\nconst resolve_1 = require(\"./resolve\");\nconst util_1 = require(\"./util\");\nconst validate_1 = require(\"./validate\");\nclass SchemaEnv {\n    constructor(env) {\n        var _a;\n        this.refs = {};\n        this.dynamicAnchors = {};\n        let schema;\n        if (typeof env.schema == \"object\")\n            schema = env.schema;\n        this.schema = env.schema;\n        this.schemaId = env.schemaId;\n        this.root = env.root || this;\n        this.baseId = (_a = env.baseId) !== null && _a !== void 0 ? _a : (0, resolve_1.normalizeId)(schema === null || schema === void 0 ? void 0 : schema[env.schemaId || \"$id\"]);\n        this.schemaPath = env.schemaPath;\n        this.localRefs = env.localRefs;\n        this.meta = env.meta;\n        this.$async = schema === null || schema === void 0 ? void 0 : schema.$async;\n        this.refs = {};\n    }\n}\nexports.SchemaEnv = SchemaEnv;\n// let codeSize = 0\n// let nodeCount = 0\n// Compiles schema in SchemaEnv\nfunction compileSchema(sch) {\n    // TODO refactor - remove compilations\n    const _sch = getCompilingSchema.call(this, sch);\n    if (_sch)\n        return _sch;\n    const rootId = (0, resolve_1.getFullPath)(this.opts.uriResolver, sch.root.baseId); // TODO if getFullPath removed 1 tests fails\n    const { es5, lines } = this.opts.code;\n    const { ownProperties } = this.opts;\n    const gen = new codegen_1.CodeGen(this.scope, { es5, lines, ownProperties });\n    let _ValidationError;\n    if (sch.$async) {\n        _ValidationError = gen.scopeValue(\"Error\", {\n            ref: validation_error_1.default,\n            code: (0, codegen_1._) `require(\"ajv/dist/runtime/validation_error\").default`,\n        });\n    }\n    const validateName = gen.scopeName(\"validate\");\n    sch.validateName = validateName;\n    const schemaCxt = {\n        gen,\n        allErrors: this.opts.allErrors,\n        data: names_1.default.data,\n        parentData: names_1.default.parentData,\n        parentDataProperty: names_1.default.parentDataProperty,\n        dataNames: [names_1.default.data],\n        dataPathArr: [codegen_1.nil], // TODO can its length be used as dataLevel if nil is removed?\n        dataLevel: 0,\n        dataTypes: [],\n        definedProperties: new Set(),\n        topSchemaRef: gen.scopeValue(\"schema\", this.opts.code.source === true\n            ? { ref: sch.schema, code: (0, codegen_1.stringify)(sch.schema) }\n            : { ref: sch.schema }),\n        validateName,\n        ValidationError: _ValidationError,\n        schema: sch.schema,\n        schemaEnv: sch,\n        rootId,\n        baseId: sch.baseId || rootId,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: sch.schemaPath || (this.opts.jtd ? \"\" : \"#\"),\n        errorPath: (0, codegen_1._) `\"\"`,\n        opts: this.opts,\n        self: this,\n    };\n    let sourceCode;\n    try {\n        this._compilations.add(sch);\n        (0, validate_1.validateFunctionCode)(schemaCxt);\n        gen.optimize(this.opts.code.optimize);\n        // gen.optimize(1)\n        const validateCode = gen.toString();\n        sourceCode = `${gen.scopeRefs(names_1.default.scope)}return ${validateCode}`;\n        // console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))\n        if (this.opts.code.process)\n            sourceCode = this.opts.code.process(sourceCode, sch);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode)\n        const makeValidate = new Function(`${names_1.default.self}`, `${names_1.default.scope}`, sourceCode);\n        const validate = makeValidate(this, this.scope.get());\n        this.scope.value(validateName, { ref: validate });\n        validate.errors = null;\n        validate.schema = sch.schema;\n        validate.schemaEnv = sch;\n        if (sch.$async)\n            validate.$async = true;\n        if (this.opts.code.source === true) {\n            validate.source = { validateName, validateCode, scopeValues: gen._values };\n        }\n        if (this.opts.unevaluated) {\n            const { props, items } = schemaCxt;\n            validate.evaluated = {\n                props: props instanceof codegen_1.Name ? undefined : props,\n                items: items instanceof codegen_1.Name ? undefined : items,\n                dynamicProps: props instanceof codegen_1.Name,\n                dynamicItems: items instanceof codegen_1.Name,\n            };\n            if (validate.source)\n                validate.source.evaluated = (0, codegen_1.stringify)(validate.evaluated);\n        }\n        sch.validate = validate;\n        return sch;\n    }\n    catch (e) {\n        delete sch.validate;\n        delete sch.validateName;\n        if (sourceCode)\n            this.logger.error(\"Error compiling schema, function code:\", sourceCode);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode, this.opts)\n        throw e;\n    }\n    finally {\n        this._compilations.delete(sch);\n    }\n}\nexports.compileSchema = compileSchema;\nfunction resolveRef(root, baseId, ref) {\n    var _a;\n    ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, ref);\n    const schOrFunc = root.refs[ref];\n    if (schOrFunc)\n        return schOrFunc;\n    let _sch = resolve.call(this, root, ref);\n    if (_sch === undefined) {\n        const schema = (_a = root.localRefs) === null || _a === void 0 ? void 0 : _a[ref]; // TODO maybe localRefs should hold SchemaEnv\n        const { schemaId } = this.opts;\n        if (schema)\n            _sch = new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    if (_sch === undefined)\n        return;\n    return (root.refs[ref] = inlineOrCompile.call(this, _sch));\n}\nexports.resolveRef = resolveRef;\nfunction inlineOrCompile(sch) {\n    if ((0, resolve_1.inlineRef)(sch.schema, this.opts.inlineRefs))\n        return sch.schema;\n    return sch.validate ? sch : compileSchema.call(this, sch);\n}\n// Index of schema compilation in the currently compiled list\nfunction getCompilingSchema(schEnv) {\n    for (const sch of this._compilations) {\n        if (sameSchemaEnv(sch, schEnv))\n            return sch;\n    }\n}\nexports.getCompilingSchema = getCompilingSchema;\nfunction sameSchemaEnv(s1, s2) {\n    return s1.schema === s2.schema && s1.root === s2.root && s1.baseId === s2.baseId;\n}\n// resolve and compile the references ($ref)\n// TODO returns AnySchemaObject (if the schema can be inlined) or validation function\nfunction resolve(root, // information about the root schema for the current schema\nref // reference to resolve\n) {\n    let sch;\n    while (typeof (sch = this.refs[ref]) == \"string\")\n        ref = sch;\n    return sch || this.schemas[ref] || resolveSchema.call(this, root, ref);\n}\n// Resolve schema, its root and baseId\nfunction resolveSchema(root, // root object with properties schema, refs TODO below SchemaEnv is assigned to it\nref // reference to resolve\n) {\n    const p = this.opts.uriResolver.parse(ref);\n    const refPath = (0, resolve_1._getFullPath)(this.opts.uriResolver, p);\n    let baseId = (0, resolve_1.getFullPath)(this.opts.uriResolver, root.baseId, undefined);\n    // TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests\n    if (Object.keys(root.schema).length > 0 && refPath === baseId) {\n        return getJsonPointer.call(this, p, root);\n    }\n    const id = (0, resolve_1.normalizeId)(refPath);\n    const schOrRef = this.refs[id] || this.schemas[id];\n    if (typeof schOrRef == \"string\") {\n        const sch = resolveSchema.call(this, root, schOrRef);\n        if (typeof (sch === null || sch === void 0 ? void 0 : sch.schema) !== \"object\")\n            return;\n        return getJsonPointer.call(this, p, sch);\n    }\n    if (typeof (schOrRef === null || schOrRef === void 0 ? void 0 : schOrRef.schema) !== \"object\")\n        return;\n    if (!schOrRef.validate)\n        compileSchema.call(this, schOrRef);\n    if (id === (0, resolve_1.normalizeId)(ref)) {\n        const { schema } = schOrRef;\n        const { schemaId } = this.opts;\n        const schId = schema[schemaId];\n        if (schId)\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        return new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    return getJsonPointer.call(this, p, schOrRef);\n}\nexports.resolveSchema = resolveSchema;\nconst PREVENT_SCOPE_CHANGE = new Set([\n    \"properties\",\n    \"patternProperties\",\n    \"enum\",\n    \"dependencies\",\n    \"definitions\",\n]);\nfunction getJsonPointer(parsedRef, { baseId, schema, root }) {\n    var _a;\n    if (((_a = parsedRef.fragment) === null || _a === void 0 ? void 0 : _a[0]) !== \"/\")\n        return;\n    for (const part of parsedRef.fragment.slice(1).split(\"/\")) {\n        if (typeof schema === \"boolean\")\n            return;\n        const partSchema = schema[(0, util_1.unescapeFragment)(part)];\n        if (partSchema === undefined)\n            return;\n        schema = partSchema;\n        // TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?\n        const schId = typeof schema === \"object\" && schema[this.opts.schemaId];\n        if (!PREVENT_SCOPE_CHANGE.has(part) && schId) {\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        }\n    }\n    let env;\n    if (typeof schema != \"boolean\" && schema.$ref && !(0, util_1.schemaHasRulesButRef)(schema, this.RULES)) {\n        const $ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schema.$ref);\n        env = resolveSchema.call(this, root, $ref);\n    }\n    // even though resolution failed we need to return SchemaEnv to throw exception\n    // so that compileAsync loads missing schema.\n    const { schemaId } = this.opts;\n    env = env || new SchemaEnv({ schema, schemaId, root, baseId });\n    if (env.schema !== env.root.schema)\n        return env;\n    return undefined;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"./codegen\");\nconst names = {\n    // validation function arguments\n    data: new codegen_1.Name(\"data\"), // data passed to validation function\n    // args passed from referencing schema\n    valCxt: new codegen_1.Name(\"valCxt\"), // validation/data context - should not be used directly, it is destructured to the names below\n    instancePath: new codegen_1.Name(\"instancePath\"),\n    parentData: new codegen_1.Name(\"parentData\"),\n    parentDataProperty: new codegen_1.Name(\"parentDataProperty\"),\n    rootData: new codegen_1.Name(\"rootData\"), // root data - same as the data passed to the first/top validation function\n    dynamicAnchors: new codegen_1.Name(\"dynamicAnchors\"), // used to support recursiveRef and dynamicRef\n    // function scoped variables\n    vErrors: new codegen_1.Name(\"vErrors\"), // null or array of validation errors\n    errors: new codegen_1.Name(\"errors\"), // counter of validation errors\n    this: new codegen_1.Name(\"this\"),\n    // \"globals\"\n    self: new codegen_1.Name(\"self\"),\n    scope: new codegen_1.Name(\"scope\"),\n    // JTD serialize/parse name for JSON string and position\n    json: new codegen_1.Name(\"json\"),\n    jsonPos: new codegen_1.Name(\"jsonPos\"),\n    jsonLen: new codegen_1.Name(\"jsonLen\"),\n    jsonPart: new codegen_1.Name(\"jsonPart\"),\n};\nexports.default = names;\n//# sourceMappingURL=names.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst resolve_1 = require(\"./resolve\");\nclass MissingRefError extends Error {\n    constructor(resolver, baseId, ref, msg) {\n        super(msg || `can't resolve reference ${ref} from id ${baseId}`);\n        this.missingRef = (0, resolve_1.resolveUrl)(resolver, baseId, ref);\n        this.missingSchema = (0, resolve_1.normalizeId)((0, resolve_1.getFullPath)(resolver, this.missingRef));\n    }\n}\nexports.default = MissingRefError;\n//# sourceMappingURL=ref_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSchemaRefs = exports.resolveUrl = exports.normalizeId = exports._getFullPath = exports.getFullPath = exports.inlineRef = void 0;\nconst util_1 = require(\"./util\");\nconst equal = require(\"fast-deep-equal\");\nconst traverse = require(\"json-schema-traverse\");\n// TODO refactor to use keyword definitions\nconst SIMPLE_INLINED = new Set([\n    \"type\",\n    \"format\",\n    \"pattern\",\n    \"maxLength\",\n    \"minLength\",\n    \"maxProperties\",\n    \"minProperties\",\n    \"maxItems\",\n    \"minItems\",\n    \"maximum\",\n    \"minimum\",\n    \"uniqueItems\",\n    \"multipleOf\",\n    \"required\",\n    \"enum\",\n    \"const\",\n]);\nfunction inlineRef(schema, limit = true) {\n    if (typeof schema == \"boolean\")\n        return true;\n    if (limit === true)\n        return !hasRef(schema);\n    if (!limit)\n        return false;\n    return countKeys(schema) <= limit;\n}\nexports.inlineRef = inlineRef;\nconst REF_KEYWORDS = new Set([\n    \"$ref\",\n    \"$recursiveRef\",\n    \"$recursiveAnchor\",\n    \"$dynamicRef\",\n    \"$dynamicAnchor\",\n]);\nfunction hasRef(schema) {\n    for (const key in schema) {\n        if (REF_KEYWORDS.has(key))\n            return true;\n        const sch = schema[key];\n        if (Array.isArray(sch) && sch.some(hasRef))\n            return true;\n        if (typeof sch == \"object\" && hasRef(sch))\n            return true;\n    }\n    return false;\n}\nfunction countKeys(schema) {\n    let count = 0;\n    for (const key in schema) {\n        if (key === \"$ref\")\n            return Infinity;\n        count++;\n        if (SIMPLE_INLINED.has(key))\n            continue;\n        if (typeof schema[key] == \"object\") {\n            (0, util_1.eachItem)(schema[key], (sch) => (count += countKeys(sch)));\n        }\n        if (count === Infinity)\n            return Infinity;\n    }\n    return count;\n}\nfunction getFullPath(resolver, id = \"\", normalize) {\n    if (normalize !== false)\n        id = normalizeId(id);\n    const p = resolver.parse(id);\n    return _getFullPath(resolver, p);\n}\nexports.getFullPath = getFullPath;\nfunction _getFullPath(resolver, p) {\n    const serialized = resolver.serialize(p);\n    return serialized.split(\"#\")[0] + \"#\";\n}\nexports._getFullPath = _getFullPath;\nconst TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n    return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\";\n}\nexports.normalizeId = normalizeId;\nfunction resolveUrl(resolver, baseId, id) {\n    id = normalizeId(id);\n    return resolver.resolve(baseId, id);\n}\nexports.resolveUrl = resolveUrl;\nconst ANCHOR = /^[a-z_][-a-z0-9._]*$/i;\nfunction getSchemaRefs(schema, baseId) {\n    if (typeof schema == \"boolean\")\n        return {};\n    const { schemaId, uriResolver } = this.opts;\n    const schId = normalizeId(schema[schemaId] || baseId);\n    const baseIds = { \"\": schId };\n    const pathPrefix = getFullPath(uriResolver, schId, false);\n    const localRefs = {};\n    const schemaRefs = new Set();\n    traverse(schema, { allKeys: true }, (sch, jsonPtr, _, parentJsonPtr) => {\n        if (parentJsonPtr === undefined)\n            return;\n        const fullPath = pathPrefix + jsonPtr;\n        let innerBaseId = baseIds[parentJsonPtr];\n        if (typeof sch[schemaId] == \"string\")\n            innerBaseId = addRef.call(this, sch[schemaId]);\n        addAnchor.call(this, sch.$anchor);\n        addAnchor.call(this, sch.$dynamicAnchor);\n        baseIds[jsonPtr] = innerBaseId;\n        function addRef(ref) {\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            const _resolve = this.opts.uriResolver.resolve;\n            ref = normalizeId(innerBaseId ? _resolve(innerBaseId, ref) : ref);\n            if (schemaRefs.has(ref))\n                throw ambiguos(ref);\n            schemaRefs.add(ref);\n            let schOrRef = this.refs[ref];\n            if (typeof schOrRef == \"string\")\n                schOrRef = this.refs[schOrRef];\n            if (typeof schOrRef == \"object\") {\n                checkAmbiguosRef(sch, schOrRef.schema, ref);\n            }\n            else if (ref !== normalizeId(fullPath)) {\n                if (ref[0] === \"#\") {\n                    checkAmbiguosRef(sch, localRefs[ref], ref);\n                    localRefs[ref] = sch;\n                }\n                else {\n                    this.refs[ref] = fullPath;\n                }\n            }\n            return ref;\n        }\n        function addAnchor(anchor) {\n            if (typeof anchor == \"string\") {\n                if (!ANCHOR.test(anchor))\n                    throw new Error(`invalid anchor \"${anchor}\"`);\n                addRef.call(this, `#${anchor}`);\n            }\n        }\n    });\n    return localRefs;\n    function checkAmbiguosRef(sch1, sch2, ref) {\n        if (sch2 !== undefined && !equal(sch1, sch2))\n            throw ambiguos(ref);\n    }\n    function ambiguos(ref) {\n        return new Error(`reference \"${ref}\" resolves to more than one schema`);\n    }\n}\nexports.getSchemaRefs = getSchemaRefs;\n//# sourceMappingURL=resolve.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRules = exports.isJSONType = void 0;\nconst _jsonTypes = [\"string\", \"number\", \"integer\", \"boolean\", \"null\", \"object\", \"array\"];\nconst jsonTypes = new Set(_jsonTypes);\nfunction isJSONType(x) {\n    return typeof x == \"string\" && jsonTypes.has(x);\n}\nexports.isJSONType = isJSONType;\nfunction getRules() {\n    const groups = {\n        number: { type: \"number\", rules: [] },\n        string: { type: \"string\", rules: [] },\n        array: { type: \"array\", rules: [] },\n        object: { type: \"object\", rules: [] },\n    };\n    return {\n        types: { ...groups, integer: true, boolean: true, null: true },\n        rules: [{ rules: [] }, groups.number, groups.string, groups.array, groups.object],\n        post: { rules: [] },\n        all: {},\n        keywords: {},\n    };\n}\nexports.getRules = getRules;\n//# sourceMappingURL=rules.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkStrictMode = exports.getErrorPath = exports.Type = exports.useFunc = exports.setEvaluated = exports.evaluatedPropsToName = exports.mergeEvaluated = exports.eachItem = exports.unescapeJsonPointer = exports.escapeJsonPointer = exports.escapeFragment = exports.unescapeFragment = exports.schemaRefOrVal = exports.schemaHasRulesButRef = exports.schemaHasRules = exports.checkUnknownRules = exports.alwaysValidSchema = exports.toHash = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst code_1 = require(\"./codegen/code\");\n// TODO refactor to use Set\nfunction toHash(arr) {\n    const hash = {};\n    for (const item of arr)\n        hash[item] = true;\n    return hash;\n}\nexports.toHash = toHash;\nfunction alwaysValidSchema(it, schema) {\n    if (typeof schema == \"boolean\")\n        return schema;\n    if (Object.keys(schema).length === 0)\n        return true;\n    checkUnknownRules(it, schema);\n    return !schemaHasRules(schema, it.self.RULES.all);\n}\nexports.alwaysValidSchema = alwaysValidSchema;\nfunction checkUnknownRules(it, schema = it.schema) {\n    const { opts, self } = it;\n    if (!opts.strictSchema)\n        return;\n    if (typeof schema === \"boolean\")\n        return;\n    const rules = self.RULES.keywords;\n    for (const key in schema) {\n        if (!rules[key])\n            checkStrictMode(it, `unknown keyword: \"${key}\"`);\n    }\n}\nexports.checkUnknownRules = checkUnknownRules;\nfunction schemaHasRules(schema, rules) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (rules[key])\n            return true;\n    return false;\n}\nexports.schemaHasRules = schemaHasRules;\nfunction schemaHasRulesButRef(schema, RULES) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (key !== \"$ref\" && RULES.all[key])\n            return true;\n    return false;\n}\nexports.schemaHasRulesButRef = schemaHasRulesButRef;\nfunction schemaRefOrVal({ topSchemaRef, schemaPath }, schema, keyword, $data) {\n    if (!$data) {\n        if (typeof schema == \"number\" || typeof schema == \"boolean\")\n            return schema;\n        if (typeof schema == \"string\")\n            return (0, codegen_1._) `${schema}`;\n    }\n    return (0, codegen_1._) `${topSchemaRef}${schemaPath}${(0, codegen_1.getProperty)(keyword)}`;\n}\nexports.schemaRefOrVal = schemaRefOrVal;\nfunction unescapeFragment(str) {\n    return unescapeJsonPointer(decodeURIComponent(str));\n}\nexports.unescapeFragment = unescapeFragment;\nfunction escapeFragment(str) {\n    return encodeURIComponent(escapeJsonPointer(str));\n}\nexports.escapeFragment = escapeFragment;\nfunction escapeJsonPointer(str) {\n    if (typeof str == \"number\")\n        return `${str}`;\n    return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\nexports.escapeJsonPointer = escapeJsonPointer;\nfunction unescapeJsonPointer(str) {\n    return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nexports.unescapeJsonPointer = unescapeJsonPointer;\nfunction eachItem(xs, f) {\n    if (Array.isArray(xs)) {\n        for (const x of xs)\n            f(x);\n    }\n    else {\n        f(xs);\n    }\n}\nexports.eachItem = eachItem;\nfunction makeMergeEvaluated({ mergeNames, mergeToName, mergeValues, resultToName, }) {\n    return (gen, from, to, toName) => {\n        const res = to === undefined\n            ? from\n            : to instanceof codegen_1.Name\n                ? (from instanceof codegen_1.Name ? mergeNames(gen, from, to) : mergeToName(gen, from, to), to)\n                : from instanceof codegen_1.Name\n                    ? (mergeToName(gen, to, from), from)\n                    : mergeValues(from, to);\n        return toName === codegen_1.Name && !(res instanceof codegen_1.Name) ? resultToName(gen, res) : res;\n    };\n}\nexports.mergeEvaluated = {\n    props: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => {\n            gen.if((0, codegen_1._) `${from} === true`, () => gen.assign(to, true), () => gen.assign(to, (0, codegen_1._) `${to} || {}`).code((0, codegen_1._) `Object.assign(${to}, ${from})`));\n        }),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => {\n            if (from === true) {\n                gen.assign(to, true);\n            }\n            else {\n                gen.assign(to, (0, codegen_1._) `${to} || {}`);\n                setEvaluated(gen, to, from);\n            }\n        }),\n        mergeValues: (from, to) => (from === true ? true : { ...from, ...to }),\n        resultToName: evaluatedPropsToName,\n    }),\n    items: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => gen.assign(to, (0, codegen_1._) `${from} === true ? true : ${to} > ${from} ? ${to} : ${from}`)),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => gen.assign(to, from === true ? true : (0, codegen_1._) `${to} > ${from} ? ${to} : ${from}`)),\n        mergeValues: (from, to) => (from === true ? true : Math.max(from, to)),\n        resultToName: (gen, items) => gen.var(\"items\", items),\n    }),\n};\nfunction evaluatedPropsToName(gen, ps) {\n    if (ps === true)\n        return gen.var(\"props\", true);\n    const props = gen.var(\"props\", (0, codegen_1._) `{}`);\n    if (ps !== undefined)\n        setEvaluated(gen, props, ps);\n    return props;\n}\nexports.evaluatedPropsToName = evaluatedPropsToName;\nfunction setEvaluated(gen, props, ps) {\n    Object.keys(ps).forEach((p) => gen.assign((0, codegen_1._) `${props}${(0, codegen_1.getProperty)(p)}`, true));\n}\nexports.setEvaluated = setEvaluated;\nconst snippets = {};\nfunction useFunc(gen, f) {\n    return gen.scopeValue(\"func\", {\n        ref: f,\n        code: snippets[f.code] || (snippets[f.code] = new code_1._Code(f.code)),\n    });\n}\nexports.useFunc = useFunc;\nvar Type;\n(function (Type) {\n    Type[Type[\"Num\"] = 0] = \"Num\";\n    Type[Type[\"Str\"] = 1] = \"Str\";\n})(Type || (exports.Type = Type = {}));\nfunction getErrorPath(dataProp, dataPropType, jsPropertySyntax) {\n    // let path\n    if (dataProp instanceof codegen_1.Name) {\n        const isNumber = dataPropType === Type.Num;\n        return jsPropertySyntax\n            ? isNumber\n                ? (0, codegen_1._) `\"[\" + ${dataProp} + \"]\"`\n                : (0, codegen_1._) `\"['\" + ${dataProp} + \"']\"`\n            : isNumber\n                ? (0, codegen_1._) `\"/\" + ${dataProp}`\n                : (0, codegen_1._) `\"/\" + ${dataProp}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")`; // TODO maybe use global escapePointer\n    }\n    return jsPropertySyntax ? (0, codegen_1.getProperty)(dataProp).toString() : \"/\" + escapeJsonPointer(dataProp);\n}\nexports.getErrorPath = getErrorPath;\nfunction checkStrictMode(it, msg, mode = it.opts.strictSchema) {\n    if (!mode)\n        return;\n    msg = `strict mode: ${msg}`;\n    if (mode === true)\n        throw new Error(msg);\n    it.self.logger.warn(msg);\n}\nexports.checkStrictMode = checkStrictMode;\n//# sourceMappingURL=util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldUseRule = exports.shouldUseGroup = exports.schemaHasRulesForType = void 0;\nfunction schemaHasRulesForType({ schema, self }, type) {\n    const group = self.RULES.types[type];\n    return group && group !== true && shouldUseGroup(schema, group);\n}\nexports.schemaHasRulesForType = schemaHasRulesForType;\nfunction shouldUseGroup(schema, group) {\n    return group.rules.some((rule) => shouldUseRule(schema, rule));\n}\nexports.shouldUseGroup = shouldUseGroup;\nfunction shouldUseRule(schema, rule) {\n    var _a;\n    return (schema[rule.keyword] !== undefined ||\n        ((_a = rule.definition.implements) === null || _a === void 0 ? void 0 : _a.some((kwd) => schema[kwd] !== undefined)));\n}\nexports.shouldUseRule = shouldUseRule;\n//# sourceMappingURL=applicability.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolOrEmptySchema = exports.topBoolOrEmptySchema = void 0;\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst boolError = {\n    message: \"boolean schema is false\",\n};\nfunction topBoolOrEmptySchema(it) {\n    const { gen, schema, validateName } = it;\n    if (schema === false) {\n        falseSchemaError(it, false);\n    }\n    else if (typeof schema == \"object\" && schema.$async === true) {\n        gen.return(names_1.default.data);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, null);\n        gen.return(true);\n    }\n}\nexports.topBoolOrEmptySchema = topBoolOrEmptySchema;\nfunction boolOrEmptySchema(it, valid) {\n    const { gen, schema } = it;\n    if (schema === false) {\n        gen.var(valid, false); // TODO var\n        falseSchemaError(it);\n    }\n    else {\n        gen.var(valid, true); // TODO var\n    }\n}\nexports.boolOrEmptySchema = boolOrEmptySchema;\nfunction falseSchemaError(it, overrideAllErrors) {\n    const { gen, data } = it;\n    // TODO maybe some other interface should be used for non-keyword validation errors...\n    const cxt = {\n        gen,\n        keyword: \"false schema\",\n        data,\n        schema: false,\n        schemaCode: false,\n        schemaValue: false,\n        params: {},\n        it,\n    };\n    (0, errors_1.reportError)(cxt, boolError, undefined, overrideAllErrors);\n}\n//# sourceMappingURL=boolSchema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reportTypeError = exports.checkDataTypes = exports.checkDataType = exports.coerceAndCheckDataType = exports.getJSONTypes = exports.getSchemaTypes = exports.DataType = void 0;\nconst rules_1 = require(\"../rules\");\nconst applicability_1 = require(\"./applicability\");\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nvar DataType;\n(function (DataType) {\n    DataType[DataType[\"Correct\"] = 0] = \"Correct\";\n    DataType[DataType[\"Wrong\"] = 1] = \"Wrong\";\n})(DataType || (exports.DataType = DataType = {}));\nfunction getSchemaTypes(schema) {\n    const types = getJSONTypes(schema.type);\n    const hasNull = types.includes(\"null\");\n    if (hasNull) {\n        if (schema.nullable === false)\n            throw new Error(\"type: null contradicts nullable: false\");\n    }\n    else {\n        if (!types.length && schema.nullable !== undefined) {\n            throw new Error('\"nullable\" cannot be used without \"type\"');\n        }\n        if (schema.nullable === true)\n            types.push(\"null\");\n    }\n    return types;\n}\nexports.getSchemaTypes = getSchemaTypes;\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nfunction getJSONTypes(ts) {\n    const types = Array.isArray(ts) ? ts : ts ? [ts] : [];\n    if (types.every(rules_1.isJSONType))\n        return types;\n    throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"));\n}\nexports.getJSONTypes = getJSONTypes;\nfunction coerceAndCheckDataType(it, types) {\n    const { gen, data, opts } = it;\n    const coerceTo = coerceToTypes(types, opts.coerceTypes);\n    const checkTypes = types.length > 0 &&\n        !(coerceTo.length === 0 && types.length === 1 && (0, applicability_1.schemaHasRulesForType)(it, types[0]));\n    if (checkTypes) {\n        const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong);\n        gen.if(wrongType, () => {\n            if (coerceTo.length)\n                coerceData(it, types, coerceTo);\n            else\n                reportTypeError(it);\n        });\n    }\n    return checkTypes;\n}\nexports.coerceAndCheckDataType = coerceAndCheckDataType;\nconst COERCIBLE = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"]);\nfunction coerceToTypes(types, coerceTypes) {\n    return coerceTypes\n        ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n        : [];\n}\nfunction coerceData(it, types, coerceTo) {\n    const { gen, data, opts } = it;\n    const dataType = gen.let(\"dataType\", (0, codegen_1._) `typeof ${data}`);\n    const coerced = gen.let(\"coerced\", (0, codegen_1._) `undefined`);\n    if (opts.coerceTypes === \"array\") {\n        gen.if((0, codegen_1._) `${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () => gen\n            .assign(data, (0, codegen_1._) `${data}[0]`)\n            .assign(dataType, (0, codegen_1._) `typeof ${data}`)\n            .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data)));\n    }\n    gen.if((0, codegen_1._) `${coerced} !== undefined`);\n    for (const t of coerceTo) {\n        if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n            coerceSpecificType(t);\n        }\n    }\n    gen.else();\n    reportTypeError(it);\n    gen.endIf();\n    gen.if((0, codegen_1._) `${coerced} !== undefined`, () => {\n        gen.assign(data, coerced);\n        assignParentData(it, coerced);\n    });\n    function coerceSpecificType(t) {\n        switch (t) {\n            case \"string\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n                    .assign(coerced, (0, codegen_1._) `\"\" + ${data}`)\n                    .elseIf((0, codegen_1._) `${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `\"\"`);\n                return;\n            case \"number\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"integer\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"boolean\":\n                gen\n                    .elseIf((0, codegen_1._) `${data} === \"false\" || ${data} === 0 || ${data} === null`)\n                    .assign(coerced, false)\n                    .elseIf((0, codegen_1._) `${data} === \"true\" || ${data} === 1`)\n                    .assign(coerced, true);\n                return;\n            case \"null\":\n                gen.elseIf((0, codegen_1._) `${data} === \"\" || ${data} === 0 || ${data} === false`);\n                gen.assign(coerced, null);\n                return;\n            case \"array\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `[${data}]`);\n        }\n    }\n}\nfunction assignParentData({ gen, parentData, parentDataProperty }, expr) {\n    // TODO use gen.property\n    gen.if((0, codegen_1._) `${parentData} !== undefined`, () => gen.assign((0, codegen_1._) `${parentData}[${parentDataProperty}]`, expr));\n}\nfunction checkDataType(dataType, data, strictNums, correct = DataType.Correct) {\n    const EQ = correct === DataType.Correct ? codegen_1.operators.EQ : codegen_1.operators.NEQ;\n    let cond;\n    switch (dataType) {\n        case \"null\":\n            return (0, codegen_1._) `${data} ${EQ} null`;\n        case \"array\":\n            cond = (0, codegen_1._) `Array.isArray(${data})`;\n            break;\n        case \"object\":\n            cond = (0, codegen_1._) `${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`;\n            break;\n        case \"integer\":\n            cond = numCond((0, codegen_1._) `!(${data} % 1) && !isNaN(${data})`);\n            break;\n        case \"number\":\n            cond = numCond();\n            break;\n        default:\n            return (0, codegen_1._) `typeof ${data} ${EQ} ${dataType}`;\n    }\n    return correct === DataType.Correct ? cond : (0, codegen_1.not)(cond);\n    function numCond(_cond = codegen_1.nil) {\n        return (0, codegen_1.and)((0, codegen_1._) `typeof ${data} == \"number\"`, _cond, strictNums ? (0, codegen_1._) `isFinite(${data})` : codegen_1.nil);\n    }\n}\nexports.checkDataType = checkDataType;\nfunction checkDataTypes(dataTypes, data, strictNums, correct) {\n    if (dataTypes.length === 1) {\n        return checkDataType(dataTypes[0], data, strictNums, correct);\n    }\n    let cond;\n    const types = (0, util_1.toHash)(dataTypes);\n    if (types.array && types.object) {\n        const notObj = (0, codegen_1._) `typeof ${data} != \"object\"`;\n        cond = types.null ? notObj : (0, codegen_1._) `!${data} || ${notObj}`;\n        delete types.null;\n        delete types.array;\n        delete types.object;\n    }\n    else {\n        cond = codegen_1.nil;\n    }\n    if (types.number)\n        delete types.integer;\n    for (const t in types)\n        cond = (0, codegen_1.and)(cond, checkDataType(t, data, strictNums, correct));\n    return cond;\n}\nexports.checkDataTypes = checkDataTypes;\nconst typeError = {\n    message: ({ schema }) => `must be ${schema}`,\n    params: ({ schema, schemaValue }) => typeof schema == \"string\" ? (0, codegen_1._) `{type: ${schema}}` : (0, codegen_1._) `{type: ${schemaValue}}`,\n};\nfunction reportTypeError(it) {\n    const cxt = getTypeErrorContext(it);\n    (0, errors_1.reportError)(cxt, typeError);\n}\nexports.reportTypeError = reportTypeError;\nfunction getTypeErrorContext(it) {\n    const { gen, data, schema } = it;\n    const schemaCode = (0, util_1.schemaRefOrVal)(it, schema, \"type\");\n    return {\n        gen,\n        keyword: \"type\",\n        data,\n        schema: schema.type,\n        schemaCode,\n        schemaValue: schemaCode,\n        parentSchema: schema,\n        params: {},\n        it,\n    };\n}\n//# sourceMappingURL=dataType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assignDefaults = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction assignDefaults(it, ty) {\n    const { properties, items } = it.schema;\n    if (ty === \"object\" && properties) {\n        for (const key in properties) {\n            assignDefault(it, key, properties[key].default);\n        }\n    }\n    else if (ty === \"array\" && Array.isArray(items)) {\n        items.forEach((sch, i) => assignDefault(it, i, sch.default));\n    }\n}\nexports.assignDefaults = assignDefaults;\nfunction assignDefault(it, prop, defaultValue) {\n    const { gen, compositeRule, data, opts } = it;\n    if (defaultValue === undefined)\n        return;\n    const childData = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(prop)}`;\n    if (compositeRule) {\n        (0, util_1.checkStrictMode)(it, `default is ignored for: ${childData}`);\n        return;\n    }\n    let condition = (0, codegen_1._) `${childData} === undefined`;\n    if (opts.useDefaults === \"empty\") {\n        condition = (0, codegen_1._) `${condition} || ${childData} === null || ${childData} === \"\"`;\n    }\n    // `${childData} === undefined` +\n    // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n    gen.if(condition, (0, codegen_1._) `${childData} = ${(0, codegen_1.stringify)(defaultValue)}`);\n}\n//# sourceMappingURL=defaults.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getData = exports.KeywordCxt = exports.validateFunctionCode = void 0;\nconst boolSchema_1 = require(\"./boolSchema\");\nconst dataType_1 = require(\"./dataType\");\nconst applicability_1 = require(\"./applicability\");\nconst dataType_2 = require(\"./dataType\");\nconst defaults_1 = require(\"./defaults\");\nconst keyword_1 = require(\"./keyword\");\nconst subschema_1 = require(\"./subschema\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst resolve_1 = require(\"../resolve\");\nconst util_1 = require(\"../util\");\nconst errors_1 = require(\"../errors\");\n// schema compilation - generates validation function, subschemaCode (below) is used for subschemas\nfunction validateFunctionCode(it) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            topSchemaObjCode(it);\n            return;\n        }\n    }\n    validateFunction(it, () => (0, boolSchema_1.topBoolOrEmptySchema)(it));\n}\nexports.validateFunctionCode = validateFunctionCode;\nfunction validateFunction({ gen, validateName, schema, schemaEnv, opts }, body) {\n    if (opts.code.es5) {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${names_1.default.valCxt}`, schemaEnv.$async, () => {\n            gen.code((0, codegen_1._) `\"use strict\"; ${funcSourceUrl(schema, opts)}`);\n            destructureValCxtES5(gen, opts);\n            gen.code(body);\n        });\n    }\n    else {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${destructureValCxt(opts)}`, schemaEnv.$async, () => gen.code(funcSourceUrl(schema, opts)).code(body));\n    }\n}\nfunction destructureValCxt(opts) {\n    return (0, codegen_1._) `{${names_1.default.instancePath}=\"\", ${names_1.default.parentData}, ${names_1.default.parentDataProperty}, ${names_1.default.rootData}=${names_1.default.data}${opts.dynamicRef ? (0, codegen_1._) `, ${names_1.default.dynamicAnchors}={}` : codegen_1.nil}}={}`;\n}\nfunction destructureValCxtES5(gen, opts) {\n    gen.if(names_1.default.valCxt, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.instancePath}`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentData}`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentDataProperty}`);\n        gen.var(names_1.default.rootData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.rootData}`);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.dynamicAnchors}`);\n    }, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `\"\"`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.rootData, names_1.default.data);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `{}`);\n    });\n}\nfunction topSchemaObjCode(it) {\n    const { schema, opts, gen } = it;\n    validateFunction(it, () => {\n        if (opts.$comment && schema.$comment)\n            commentKeyword(it);\n        checkNoDefault(it);\n        gen.let(names_1.default.vErrors, null);\n        gen.let(names_1.default.errors, 0);\n        if (opts.unevaluated)\n            resetEvaluated(it);\n        typeAndKeywords(it);\n        returnResults(it);\n    });\n    return;\n}\nfunction resetEvaluated(it) {\n    // TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated\n    const { gen, validateName } = it;\n    it.evaluated = gen.const(\"evaluated\", (0, codegen_1._) `${validateName}.evaluated`);\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicProps`, () => gen.assign((0, codegen_1._) `${it.evaluated}.props`, (0, codegen_1._) `undefined`));\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicItems`, () => gen.assign((0, codegen_1._) `${it.evaluated}.items`, (0, codegen_1._) `undefined`));\n}\nfunction funcSourceUrl(schema, opts) {\n    const schId = typeof schema == \"object\" && schema[opts.schemaId];\n    return schId && (opts.code.source || opts.code.process) ? (0, codegen_1._) `/*# sourceURL=${schId} */` : codegen_1.nil;\n}\n// schema compilation - this function is used recursively to generate code for sub-schemas\nfunction subschemaCode(it, valid) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            subSchemaObjCode(it, valid);\n            return;\n        }\n    }\n    (0, boolSchema_1.boolOrEmptySchema)(it, valid);\n}\nfunction schemaCxtHasRules({ schema, self }) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (self.RULES.all[key])\n            return true;\n    return false;\n}\nfunction isSchemaObj(it) {\n    return typeof it.schema != \"boolean\";\n}\nfunction subSchemaObjCode(it, valid) {\n    const { schema, gen, opts } = it;\n    if (opts.$comment && schema.$comment)\n        commentKeyword(it);\n    updateContext(it);\n    checkAsyncSchema(it);\n    const errsCount = gen.const(\"_errs\", names_1.default.errors);\n    typeAndKeywords(it, errsCount);\n    // TODO var\n    gen.var(valid, (0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n}\nfunction checkKeywords(it) {\n    (0, util_1.checkUnknownRules)(it);\n    checkRefsAndKeywords(it);\n}\nfunction typeAndKeywords(it, errsCount) {\n    if (it.opts.jtd)\n        return schemaKeywords(it, [], false, errsCount);\n    const types = (0, dataType_1.getSchemaTypes)(it.schema);\n    const checkedTypes = (0, dataType_1.coerceAndCheckDataType)(it, types);\n    schemaKeywords(it, types, !checkedTypes, errsCount);\n}\nfunction checkRefsAndKeywords(it) {\n    const { schema, errSchemaPath, opts, self } = it;\n    if (schema.$ref && opts.ignoreKeywordsWithRef && (0, util_1.schemaHasRulesButRef)(schema, self.RULES)) {\n        self.logger.warn(`$ref: keywords ignored in schema at path \"${errSchemaPath}\"`);\n    }\n}\nfunction checkNoDefault(it) {\n    const { schema, opts } = it;\n    if (schema.default !== undefined && opts.useDefaults && opts.strictSchema) {\n        (0, util_1.checkStrictMode)(it, \"default is ignored in the schema root\");\n    }\n}\nfunction updateContext(it) {\n    const schId = it.schema[it.opts.schemaId];\n    if (schId)\n        it.baseId = (0, resolve_1.resolveUrl)(it.opts.uriResolver, it.baseId, schId);\n}\nfunction checkAsyncSchema(it) {\n    if (it.schema.$async && !it.schemaEnv.$async)\n        throw new Error(\"async schema in sync schema\");\n}\nfunction commentKeyword({ gen, schemaEnv, schema, errSchemaPath, opts }) {\n    const msg = schema.$comment;\n    if (opts.$comment === true) {\n        gen.code((0, codegen_1._) `${names_1.default.self}.logger.log(${msg})`);\n    }\n    else if (typeof opts.$comment == \"function\") {\n        const schemaPath = (0, codegen_1.str) `${errSchemaPath}/$comment`;\n        const rootName = gen.scopeValue(\"root\", { ref: schemaEnv.root });\n        gen.code((0, codegen_1._) `${names_1.default.self}.opts.$comment(${msg}, ${schemaPath}, ${rootName}.schema)`);\n    }\n}\nfunction returnResults(it) {\n    const { gen, schemaEnv, validateName, ValidationError, opts } = it;\n    if (schemaEnv.$async) {\n        // TODO assign unevaluated\n        gen.if((0, codegen_1._) `${names_1.default.errors} === 0`, () => gen.return(names_1.default.data), () => gen.throw((0, codegen_1._) `new ${ValidationError}(${names_1.default.vErrors})`));\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, names_1.default.vErrors);\n        if (opts.unevaluated)\n            assignEvaluated(it);\n        gen.return((0, codegen_1._) `${names_1.default.errors} === 0`);\n    }\n}\nfunction assignEvaluated({ gen, evaluated, props, items }) {\n    if (props instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.props`, props);\n    if (items instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.items`, items);\n}\nfunction schemaKeywords(it, types, typeErrors, errsCount) {\n    const { gen, schema, data, allErrors, opts, self } = it;\n    const { RULES } = self;\n    if (schema.$ref && (opts.ignoreKeywordsWithRef || !(0, util_1.schemaHasRulesButRef)(schema, RULES))) {\n        gen.block(() => keywordCode(it, \"$ref\", RULES.all.$ref.definition)); // TODO typecast\n        return;\n    }\n    if (!opts.jtd)\n        checkStrictTypes(it, types);\n    gen.block(() => {\n        for (const group of RULES.rules)\n            groupKeywords(group);\n        groupKeywords(RULES.post);\n    });\n    function groupKeywords(group) {\n        if (!(0, applicability_1.shouldUseGroup)(schema, group))\n            return;\n        if (group.type) {\n            gen.if((0, dataType_2.checkDataType)(group.type, data, opts.strictNumbers));\n            iterateKeywords(it, group);\n            if (types.length === 1 && types[0] === group.type && typeErrors) {\n                gen.else();\n                (0, dataType_2.reportTypeError)(it);\n            }\n            gen.endIf();\n        }\n        else {\n            iterateKeywords(it, group);\n        }\n        // TODO make it \"ok\" call?\n        if (!allErrors)\n            gen.if((0, codegen_1._) `${names_1.default.errors} === ${errsCount || 0}`);\n    }\n}\nfunction iterateKeywords(it, group) {\n    const { gen, schema, opts: { useDefaults }, } = it;\n    if (useDefaults)\n        (0, defaults_1.assignDefaults)(it, group.type);\n    gen.block(() => {\n        for (const rule of group.rules) {\n            if ((0, applicability_1.shouldUseRule)(schema, rule)) {\n                keywordCode(it, rule.keyword, rule.definition, group.type);\n            }\n        }\n    });\n}\nfunction checkStrictTypes(it, types) {\n    if (it.schemaEnv.meta || !it.opts.strictTypes)\n        return;\n    checkContextTypes(it, types);\n    if (!it.opts.allowUnionTypes)\n        checkMultipleTypes(it, types);\n    checkKeywordTypes(it, it.dataTypes);\n}\nfunction checkContextTypes(it, types) {\n    if (!types.length)\n        return;\n    if (!it.dataTypes.length) {\n        it.dataTypes = types;\n        return;\n    }\n    types.forEach((t) => {\n        if (!includesType(it.dataTypes, t)) {\n            strictTypesError(it, `type \"${t}\" not allowed by context \"${it.dataTypes.join(\",\")}\"`);\n        }\n    });\n    narrowSchemaTypes(it, types);\n}\nfunction checkMultipleTypes(it, ts) {\n    if (ts.length > 1 && !(ts.length === 2 && ts.includes(\"null\"))) {\n        strictTypesError(it, \"use allowUnionTypes to allow union type keyword\");\n    }\n}\nfunction checkKeywordTypes(it, ts) {\n    const rules = it.self.RULES.all;\n    for (const keyword in rules) {\n        const rule = rules[keyword];\n        if (typeof rule == \"object\" && (0, applicability_1.shouldUseRule)(it.schema, rule)) {\n            const { type } = rule.definition;\n            if (type.length && !type.some((t) => hasApplicableType(ts, t))) {\n                strictTypesError(it, `missing type \"${type.join(\",\")}\" for keyword \"${keyword}\"`);\n            }\n        }\n    }\n}\nfunction hasApplicableType(schTs, kwdT) {\n    return schTs.includes(kwdT) || (kwdT === \"number\" && schTs.includes(\"integer\"));\n}\nfunction includesType(ts, t) {\n    return ts.includes(t) || (t === \"integer\" && ts.includes(\"number\"));\n}\nfunction narrowSchemaTypes(it, withTypes) {\n    const ts = [];\n    for (const t of it.dataTypes) {\n        if (includesType(withTypes, t))\n            ts.push(t);\n        else if (withTypes.includes(\"integer\") && t === \"number\")\n            ts.push(\"integer\");\n    }\n    it.dataTypes = ts;\n}\nfunction strictTypesError(it, msg) {\n    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n    msg += ` at \"${schemaPath}\" (strictTypes)`;\n    (0, util_1.checkStrictMode)(it, msg, it.opts.strictTypes);\n}\nclass KeywordCxt {\n    constructor(it, def, keyword) {\n        (0, keyword_1.validateKeywordUsage)(it, def, keyword);\n        this.gen = it.gen;\n        this.allErrors = it.allErrors;\n        this.keyword = keyword;\n        this.data = it.data;\n        this.schema = it.schema[keyword];\n        this.$data = def.$data && it.opts.$data && this.schema && this.schema.$data;\n        this.schemaValue = (0, util_1.schemaRefOrVal)(it, this.schema, keyword, this.$data);\n        this.schemaType = def.schemaType;\n        this.parentSchema = it.schema;\n        this.params = {};\n        this.it = it;\n        this.def = def;\n        if (this.$data) {\n            this.schemaCode = it.gen.const(\"vSchema\", getData(this.$data, it));\n        }\n        else {\n            this.schemaCode = this.schemaValue;\n            if (!(0, keyword_1.validSchemaType)(this.schema, def.schemaType, def.allowUndefined)) {\n                throw new Error(`${keyword} value must be ${JSON.stringify(def.schemaType)}`);\n            }\n        }\n        if (\"code\" in def ? def.trackErrors : def.errors !== false) {\n            this.errsCount = it.gen.const(\"_errs\", names_1.default.errors);\n        }\n    }\n    result(condition, successAction, failAction) {\n        this.failResult((0, codegen_1.not)(condition), successAction, failAction);\n    }\n    failResult(condition, successAction, failAction) {\n        this.gen.if(condition);\n        if (failAction)\n            failAction();\n        else\n            this.error();\n        if (successAction) {\n            this.gen.else();\n            successAction();\n            if (this.allErrors)\n                this.gen.endIf();\n        }\n        else {\n            if (this.allErrors)\n                this.gen.endIf();\n            else\n                this.gen.else();\n        }\n    }\n    pass(condition, failAction) {\n        this.failResult((0, codegen_1.not)(condition), undefined, failAction);\n    }\n    fail(condition) {\n        if (condition === undefined) {\n            this.error();\n            if (!this.allErrors)\n                this.gen.if(false); // this branch will be removed by gen.optimize\n            return;\n        }\n        this.gen.if(condition);\n        this.error();\n        if (this.allErrors)\n            this.gen.endIf();\n        else\n            this.gen.else();\n    }\n    fail$data(condition) {\n        if (!this.$data)\n            return this.fail(condition);\n        const { schemaCode } = this;\n        this.fail((0, codegen_1._) `${schemaCode} !== undefined && (${(0, codegen_1.or)(this.invalid$data(), condition)})`);\n    }\n    error(append, errorParams, errorPaths) {\n        if (errorParams) {\n            this.setParams(errorParams);\n            this._error(append, errorPaths);\n            this.setParams({});\n            return;\n        }\n        this._error(append, errorPaths);\n    }\n    _error(append, errorPaths) {\n        ;\n        (append ? errors_1.reportExtraError : errors_1.reportError)(this, this.def.error, errorPaths);\n    }\n    $dataError() {\n        (0, errors_1.reportError)(this, this.def.$dataError || errors_1.keyword$DataError);\n    }\n    reset() {\n        if (this.errsCount === undefined)\n            throw new Error('add \"trackErrors\" to keyword definition');\n        (0, errors_1.resetErrorsCount)(this.gen, this.errsCount);\n    }\n    ok(cond) {\n        if (!this.allErrors)\n            this.gen.if(cond);\n    }\n    setParams(obj, assign) {\n        if (assign)\n            Object.assign(this.params, obj);\n        else\n            this.params = obj;\n    }\n    block$data(valid, codeBlock, $dataValid = codegen_1.nil) {\n        this.gen.block(() => {\n            this.check$data(valid, $dataValid);\n            codeBlock();\n        });\n    }\n    check$data(valid = codegen_1.nil, $dataValid = codegen_1.nil) {\n        if (!this.$data)\n            return;\n        const { gen, schemaCode, schemaType, def } = this;\n        gen.if((0, codegen_1.or)((0, codegen_1._) `${schemaCode} === undefined`, $dataValid));\n        if (valid !== codegen_1.nil)\n            gen.assign(valid, true);\n        if (schemaType.length || def.validateSchema) {\n            gen.elseIf(this.invalid$data());\n            this.$dataError();\n            if (valid !== codegen_1.nil)\n                gen.assign(valid, false);\n        }\n        gen.else();\n    }\n    invalid$data() {\n        const { gen, schemaCode, schemaType, def, it } = this;\n        return (0, codegen_1.or)(wrong$DataType(), invalid$DataSchema());\n        function wrong$DataType() {\n            if (schemaType.length) {\n                /* istanbul ignore if */\n                if (!(schemaCode instanceof codegen_1.Name))\n                    throw new Error(\"ajv implementation error\");\n                const st = Array.isArray(schemaType) ? schemaType : [schemaType];\n                return (0, codegen_1._) `${(0, dataType_2.checkDataTypes)(st, schemaCode, it.opts.strictNumbers, dataType_2.DataType.Wrong)}`;\n            }\n            return codegen_1.nil;\n        }\n        function invalid$DataSchema() {\n            if (def.validateSchema) {\n                const validateSchemaRef = gen.scopeValue(\"validate$data\", { ref: def.validateSchema }); // TODO value.code for standalone\n                return (0, codegen_1._) `!${validateSchemaRef}(${schemaCode})`;\n            }\n            return codegen_1.nil;\n        }\n    }\n    subschema(appl, valid) {\n        const subschema = (0, subschema_1.getSubschema)(this.it, appl);\n        (0, subschema_1.extendSubschemaData)(subschema, this.it, appl);\n        (0, subschema_1.extendSubschemaMode)(subschema, appl);\n        const nextContext = { ...this.it, ...subschema, items: undefined, props: undefined };\n        subschemaCode(nextContext, valid);\n        return nextContext;\n    }\n    mergeEvaluated(schemaCxt, toName) {\n        const { it, gen } = this;\n        if (!it.opts.unevaluated)\n            return;\n        if (it.props !== true && schemaCxt.props !== undefined) {\n            it.props = util_1.mergeEvaluated.props(gen, schemaCxt.props, it.props, toName);\n        }\n        if (it.items !== true && schemaCxt.items !== undefined) {\n            it.items = util_1.mergeEvaluated.items(gen, schemaCxt.items, it.items, toName);\n        }\n    }\n    mergeValidEvaluated(schemaCxt, valid) {\n        const { it, gen } = this;\n        if (it.opts.unevaluated && (it.props !== true || it.items !== true)) {\n            gen.if(valid, () => this.mergeEvaluated(schemaCxt, codegen_1.Name));\n            return true;\n        }\n    }\n}\nexports.KeywordCxt = KeywordCxt;\nfunction keywordCode(it, keyword, def, ruleType) {\n    const cxt = new KeywordCxt(it, def, keyword);\n    if (\"code\" in def) {\n        def.code(cxt, ruleType);\n    }\n    else if (cxt.$data && def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n    else if (\"macro\" in def) {\n        (0, keyword_1.macroKeywordCode)(cxt, def);\n    }\n    else if (def.compile || def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n}\nconst JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nconst RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, { dataLevel, dataNames, dataPathArr }) {\n    let jsonPointer;\n    let data;\n    if ($data === \"\")\n        return names_1.default.rootData;\n    if ($data[0] === \"/\") {\n        if (!JSON_POINTER.test($data))\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        jsonPointer = $data;\n        data = names_1.default.rootData;\n    }\n    else {\n        const matches = RELATIVE_JSON_POINTER.exec($data);\n        if (!matches)\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        const up = +matches[1];\n        jsonPointer = matches[2];\n        if (jsonPointer === \"#\") {\n            if (up >= dataLevel)\n                throw new Error(errorMsg(\"property/index\", up));\n            return dataPathArr[dataLevel - up];\n        }\n        if (up > dataLevel)\n            throw new Error(errorMsg(\"data\", up));\n        data = dataNames[dataLevel - up];\n        if (!jsonPointer)\n            return data;\n    }\n    let expr = data;\n    const segments = jsonPointer.split(\"/\");\n    for (const segment of segments) {\n        if (segment) {\n            data = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)((0, util_1.unescapeJsonPointer)(segment))}`;\n            expr = (0, codegen_1._) `${expr} && ${data}`;\n        }\n    }\n    return expr;\n    function errorMsg(pointerType, up) {\n        return `Cannot access ${pointerType} ${up} levels up, current level is ${dataLevel}`;\n    }\n}\nexports.getData = getData;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateKeywordUsage = exports.validSchemaType = exports.funcKeywordCode = exports.macroKeywordCode = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst code_1 = require(\"../../vocabularies/code\");\nconst errors_1 = require(\"../errors\");\nfunction macroKeywordCode(cxt, def) {\n    const { gen, keyword, schema, parentSchema, it } = cxt;\n    const macroSchema = def.macro.call(it.self, schema, parentSchema, it);\n    const schemaRef = useKeyword(gen, keyword, macroSchema);\n    if (it.opts.validateSchema !== false)\n        it.self.validateSchema(macroSchema, true);\n    const valid = gen.name(\"valid\");\n    cxt.subschema({\n        schema: macroSchema,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n        topSchemaRef: schemaRef,\n        compositeRule: true,\n    }, valid);\n    cxt.pass(valid, () => cxt.error(true));\n}\nexports.macroKeywordCode = macroKeywordCode;\nfunction funcKeywordCode(cxt, def) {\n    var _a;\n    const { gen, keyword, schema, parentSchema, $data, it } = cxt;\n    checkAsyncKeyword(it, def);\n    const validate = !$data && def.compile ? def.compile.call(it.self, schema, parentSchema, it) : def.validate;\n    const validateRef = useKeyword(gen, keyword, validate);\n    const valid = gen.let(\"valid\");\n    cxt.block$data(valid, validateKeyword);\n    cxt.ok((_a = def.valid) !== null && _a !== void 0 ? _a : valid);\n    function validateKeyword() {\n        if (def.errors === false) {\n            assignValid();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => cxt.error());\n        }\n        else {\n            const ruleErrs = def.async ? validateAsync() : validateSync();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => addErrs(cxt, ruleErrs));\n        }\n    }\n    function validateAsync() {\n        const ruleErrs = gen.let(\"ruleErrs\", null);\n        gen.try(() => assignValid((0, codegen_1._) `await `), (e) => gen.assign(valid, false).if((0, codegen_1._) `${e} instanceof ${it.ValidationError}`, () => gen.assign(ruleErrs, (0, codegen_1._) `${e}.errors`), () => gen.throw(e)));\n        return ruleErrs;\n    }\n    function validateSync() {\n        const validateErrs = (0, codegen_1._) `${validateRef}.errors`;\n        gen.assign(validateErrs, null);\n        assignValid(codegen_1.nil);\n        return validateErrs;\n    }\n    function assignValid(_await = def.async ? (0, codegen_1._) `await ` : codegen_1.nil) {\n        const passCxt = it.opts.passContext ? names_1.default.this : names_1.default.self;\n        const passSchema = !((\"compile\" in def && !$data) || def.schema === false);\n        gen.assign(valid, (0, codegen_1._) `${_await}${(0, code_1.callValidateCode)(cxt, validateRef, passCxt, passSchema)}`, def.modifying);\n    }\n    function reportErrs(errors) {\n        var _a;\n        gen.if((0, codegen_1.not)((_a = def.valid) !== null && _a !== void 0 ? _a : valid), errors);\n    }\n}\nexports.funcKeywordCode = funcKeywordCode;\nfunction modifyData(cxt) {\n    const { gen, data, it } = cxt;\n    gen.if(it.parentData, () => gen.assign(data, (0, codegen_1._) `${it.parentData}[${it.parentDataProperty}]`));\n}\nfunction addErrs(cxt, errs) {\n    const { gen } = cxt;\n    gen.if((0, codegen_1._) `Array.isArray(${errs})`, () => {\n        gen\n            .assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`)\n            .assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n        (0, errors_1.extendErrors)(cxt);\n    }, () => cxt.error());\n}\nfunction checkAsyncKeyword({ schemaEnv }, def) {\n    if (def.async && !schemaEnv.$async)\n        throw new Error(\"async keyword in sync schema\");\n}\nfunction useKeyword(gen, keyword, result) {\n    if (result === undefined)\n        throw new Error(`keyword \"${keyword}\" failed to compile`);\n    return gen.scopeValue(\"keyword\", typeof result == \"function\" ? { ref: result } : { ref: result, code: (0, codegen_1.stringify)(result) });\n}\nfunction validSchemaType(schema, schemaType, allowUndefined = false) {\n    // TODO add tests\n    return (!schemaType.length ||\n        schemaType.some((st) => st === \"array\"\n            ? Array.isArray(schema)\n            : st === \"object\"\n                ? schema && typeof schema == \"object\" && !Array.isArray(schema)\n                : typeof schema == st || (allowUndefined && typeof schema == \"undefined\")));\n}\nexports.validSchemaType = validSchemaType;\nfunction validateKeywordUsage({ schema, opts, self, errSchemaPath }, def, keyword) {\n    /* istanbul ignore if */\n    if (Array.isArray(def.keyword) ? !def.keyword.includes(keyword) : def.keyword !== keyword) {\n        throw new Error(\"ajv implementation error\");\n    }\n    const deps = def.dependencies;\n    if (deps === null || deps === void 0 ? void 0 : deps.some((kwd) => !Object.prototype.hasOwnProperty.call(schema, kwd))) {\n        throw new Error(`parent schema must have dependencies of ${keyword}: ${deps.join(\",\")}`);\n    }\n    if (def.validateSchema) {\n        const valid = def.validateSchema(schema[keyword]);\n        if (!valid) {\n            const msg = `keyword \"${keyword}\" value is invalid at path \"${errSchemaPath}\": ` +\n                self.errorsText(def.validateSchema.errors);\n            if (opts.validateSchema === \"log\")\n                self.logger.error(msg);\n            else\n                throw new Error(msg);\n        }\n    }\n}\nexports.validateKeywordUsage = validateKeywordUsage;\n//# sourceMappingURL=keyword.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendSubschemaMode = exports.extendSubschemaData = exports.getSubschema = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction getSubschema(it, { keyword, schemaProp, schema, schemaPath, errSchemaPath, topSchemaRef }) {\n    if (keyword !== undefined && schema !== undefined) {\n        throw new Error('both \"keyword\" and \"schema\" passed, only one allowed');\n    }\n    if (keyword !== undefined) {\n        const sch = it.schema[keyword];\n        return schemaProp === undefined\n            ? {\n                schema: sch,\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n            }\n            : {\n                schema: sch[schemaProp],\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}${(0, codegen_1.getProperty)(schemaProp)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}/${(0, util_1.escapeFragment)(schemaProp)}`,\n            };\n    }\n    if (schema !== undefined) {\n        if (schemaPath === undefined || errSchemaPath === undefined || topSchemaRef === undefined) {\n            throw new Error('\"schemaPath\", \"errSchemaPath\" and \"topSchemaRef\" are required with \"schema\"');\n        }\n        return {\n            schema,\n            schemaPath,\n            topSchemaRef,\n            errSchemaPath,\n        };\n    }\n    throw new Error('either \"keyword\" or \"schema\" must be passed');\n}\nexports.getSubschema = getSubschema;\nfunction extendSubschemaData(subschema, it, { dataProp, dataPropType: dpType, data, dataTypes, propertyName }) {\n    if (data !== undefined && dataProp !== undefined) {\n        throw new Error('both \"data\" and \"dataProp\" passed, only one allowed');\n    }\n    const { gen } = it;\n    if (dataProp !== undefined) {\n        const { errorPath, dataPathArr, opts } = it;\n        const nextData = gen.let(\"data\", (0, codegen_1._) `${it.data}${(0, codegen_1.getProperty)(dataProp)}`, true);\n        dataContextProps(nextData);\n        subschema.errorPath = (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(dataProp, dpType, opts.jsPropertySyntax)}`;\n        subschema.parentDataProperty = (0, codegen_1._) `${dataProp}`;\n        subschema.dataPathArr = [...dataPathArr, subschema.parentDataProperty];\n    }\n    if (data !== undefined) {\n        const nextData = data instanceof codegen_1.Name ? data : gen.let(\"data\", data, true); // replaceable if used once?\n        dataContextProps(nextData);\n        if (propertyName !== undefined)\n            subschema.propertyName = propertyName;\n        // TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr\n    }\n    if (dataTypes)\n        subschema.dataTypes = dataTypes;\n    function dataContextProps(_nextData) {\n        subschema.data = _nextData;\n        subschema.dataLevel = it.dataLevel + 1;\n        subschema.dataTypes = [];\n        it.definedProperties = new Set();\n        subschema.parentData = it.data;\n        subschema.dataNames = [...it.dataNames, _nextData];\n    }\n}\nexports.extendSubschemaData = extendSubschemaData;\nfunction extendSubschemaMode(subschema, { jtdDiscriminator, jtdMetadata, compositeRule, createErrors, allErrors }) {\n    if (compositeRule !== undefined)\n        subschema.compositeRule = compositeRule;\n    if (createErrors !== undefined)\n        subschema.createErrors = createErrors;\n    if (allErrors !== undefined)\n        subschema.allErrors = allErrors;\n    subschema.jtdDiscriminator = jtdDiscriminator; // not inherited\n    subschema.jtdMetadata = jtdMetadata; // not inherited\n}\nexports.extendSubschemaMode = extendSubschemaMode;\n//# sourceMappingURL=subschema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = void 0;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nconst validation_error_1 = require(\"./runtime/validation_error\");\nconst ref_error_1 = require(\"./compile/ref_error\");\nconst rules_1 = require(\"./compile/rules\");\nconst compile_1 = require(\"./compile\");\nconst codegen_2 = require(\"./compile/codegen\");\nconst resolve_1 = require(\"./compile/resolve\");\nconst dataType_1 = require(\"./compile/validate/dataType\");\nconst util_1 = require(\"./compile/util\");\nconst $dataRefSchema = require(\"./refs/data.json\");\nconst uri_1 = require(\"./runtime/uri\");\nconst defaultRegExp = (str, flags) => new RegExp(str, flags);\ndefaultRegExp.code = \"new RegExp\";\nconst META_IGNORE_OPTIONS = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\"];\nconst EXT_SCOPE_NAMES = new Set([\n    \"validate\",\n    \"serialize\",\n    \"parse\",\n    \"wrapper\",\n    \"root\",\n    \"schema\",\n    \"keyword\",\n    \"pattern\",\n    \"formats\",\n    \"validate$data\",\n    \"func\",\n    \"obj\",\n    \"Error\",\n]);\nconst removedOptions = {\n    errorDataPath: \"\",\n    format: \"`validateFormats: false` can be used instead.\",\n    nullable: '\"nullable\" keyword is supported by default.',\n    jsonPointers: \"Deprecated jsPropertySyntax can be used instead.\",\n    extendRefs: \"Deprecated ignoreKeywordsWithRef can be used instead.\",\n    missingRefs: \"Pass empty schema with $id that should be ignored to ajv.addSchema.\",\n    processCode: \"Use option `code: {process: (code, schemaEnv: object) => string}`\",\n    sourceCode: \"Use option `code: {source: true}`\",\n    strictDefaults: \"It is default now, see option `strict`.\",\n    strictKeywords: \"It is default now, see option `strict`.\",\n    uniqueItems: '\"uniqueItems\" keyword is always validated.',\n    unknownFormats: \"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\",\n    cache: \"Map is used as cache, schema object as key.\",\n    serialize: \"Map is used as cache, schema object as key.\",\n    ajvErrors: \"It is default now.\",\n};\nconst deprecatedOptions = {\n    ignoreKeywordsWithRef: \"\",\n    jsPropertySyntax: \"\",\n    unicode: '\"minLength\"/\"maxLength\" account for unicode characters by default.',\n};\nconst MAX_EXPRESSION = 200;\n// eslint-disable-next-line complexity\nfunction requiredOptions(o) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0;\n    const s = o.strict;\n    const _optz = (_a = o.code) === null || _a === void 0 ? void 0 : _a.optimize;\n    const optimize = _optz === true || _optz === undefined ? 1 : _optz || 0;\n    const regExp = (_c = (_b = o.code) === null || _b === void 0 ? void 0 : _b.regExp) !== null && _c !== void 0 ? _c : defaultRegExp;\n    const uriResolver = (_d = o.uriResolver) !== null && _d !== void 0 ? _d : uri_1.default;\n    return {\n        strictSchema: (_f = (_e = o.strictSchema) !== null && _e !== void 0 ? _e : s) !== null && _f !== void 0 ? _f : true,\n        strictNumbers: (_h = (_g = o.strictNumbers) !== null && _g !== void 0 ? _g : s) !== null && _h !== void 0 ? _h : true,\n        strictTypes: (_k = (_j = o.strictTypes) !== null && _j !== void 0 ? _j : s) !== null && _k !== void 0 ? _k : \"log\",\n        strictTuples: (_m = (_l = o.strictTuples) !== null && _l !== void 0 ? _l : s) !== null && _m !== void 0 ? _m : \"log\",\n        strictRequired: (_p = (_o = o.strictRequired) !== null && _o !== void 0 ? _o : s) !== null && _p !== void 0 ? _p : false,\n        code: o.code ? { ...o.code, optimize, regExp } : { optimize, regExp },\n        loopRequired: (_q = o.loopRequired) !== null && _q !== void 0 ? _q : MAX_EXPRESSION,\n        loopEnum: (_r = o.loopEnum) !== null && _r !== void 0 ? _r : MAX_EXPRESSION,\n        meta: (_s = o.meta) !== null && _s !== void 0 ? _s : true,\n        messages: (_t = o.messages) !== null && _t !== void 0 ? _t : true,\n        inlineRefs: (_u = o.inlineRefs) !== null && _u !== void 0 ? _u : true,\n        schemaId: (_v = o.schemaId) !== null && _v !== void 0 ? _v : \"$id\",\n        addUsedSchema: (_w = o.addUsedSchema) !== null && _w !== void 0 ? _w : true,\n        validateSchema: (_x = o.validateSchema) !== null && _x !== void 0 ? _x : true,\n        validateFormats: (_y = o.validateFormats) !== null && _y !== void 0 ? _y : true,\n        unicodeRegExp: (_z = o.unicodeRegExp) !== null && _z !== void 0 ? _z : true,\n        int32range: (_0 = o.int32range) !== null && _0 !== void 0 ? _0 : true,\n        uriResolver: uriResolver,\n    };\n}\nclass Ajv {\n    constructor(opts = {}) {\n        this.schemas = {};\n        this.refs = {};\n        this.formats = {};\n        this._compilations = new Set();\n        this._loading = {};\n        this._cache = new Map();\n        opts = this.opts = { ...opts, ...requiredOptions(opts) };\n        const { es5, lines } = this.opts.code;\n        this.scope = new codegen_2.ValueScope({ scope: {}, prefixes: EXT_SCOPE_NAMES, es5, lines });\n        this.logger = getLogger(opts.logger);\n        const formatOpt = opts.validateFormats;\n        opts.validateFormats = false;\n        this.RULES = (0, rules_1.getRules)();\n        checkOptions.call(this, removedOptions, opts, \"NOT SUPPORTED\");\n        checkOptions.call(this, deprecatedOptions, opts, \"DEPRECATED\", \"warn\");\n        this._metaOpts = getMetaSchemaOptions.call(this);\n        if (opts.formats)\n            addInitialFormats.call(this);\n        this._addVocabularies();\n        this._addDefaultMetaSchema();\n        if (opts.keywords)\n            addInitialKeywords.call(this, opts.keywords);\n        if (typeof opts.meta == \"object\")\n            this.addMetaSchema(opts.meta);\n        addInitialSchemas.call(this);\n        opts.validateFormats = formatOpt;\n    }\n    _addVocabularies() {\n        this.addKeyword(\"$async\");\n    }\n    _addDefaultMetaSchema() {\n        const { $data, meta, schemaId } = this.opts;\n        let _dataRefSchema = $dataRefSchema;\n        if (schemaId === \"id\") {\n            _dataRefSchema = { ...$dataRefSchema };\n            _dataRefSchema.id = _dataRefSchema.$id;\n            delete _dataRefSchema.$id;\n        }\n        if (meta && $data)\n            this.addMetaSchema(_dataRefSchema, _dataRefSchema[schemaId], false);\n    }\n    defaultMeta() {\n        const { meta, schemaId } = this.opts;\n        return (this.opts.defaultMeta = typeof meta == \"object\" ? meta[schemaId] || meta : undefined);\n    }\n    validate(schemaKeyRef, // key, ref or schema object\n    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n    data // to be validated\n    ) {\n        let v;\n        if (typeof schemaKeyRef == \"string\") {\n            v = this.getSchema(schemaKeyRef);\n            if (!v)\n                throw new Error(`no schema with key or ref \"${schemaKeyRef}\"`);\n        }\n        else {\n            v = this.compile(schemaKeyRef);\n        }\n        const valid = v(data);\n        if (!(\"$async\" in v))\n            this.errors = v.errors;\n        return valid;\n    }\n    compile(schema, _meta) {\n        const sch = this._addSchema(schema, _meta);\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    compileAsync(schema, meta) {\n        if (typeof this.opts.loadSchema != \"function\") {\n            throw new Error(\"options.loadSchema should be a function\");\n        }\n        const { loadSchema } = this.opts;\n        return runCompileAsync.call(this, schema, meta);\n        async function runCompileAsync(_schema, _meta) {\n            await loadMetaSchema.call(this, _schema.$schema);\n            const sch = this._addSchema(_schema, _meta);\n            return sch.validate || _compileAsync.call(this, sch);\n        }\n        async function loadMetaSchema($ref) {\n            if ($ref && !this.getSchema($ref)) {\n                await runCompileAsync.call(this, { $ref }, true);\n            }\n        }\n        async function _compileAsync(sch) {\n            try {\n                return this._compileSchemaEnv(sch);\n            }\n            catch (e) {\n                if (!(e instanceof ref_error_1.default))\n                    throw e;\n                checkLoaded.call(this, e);\n                await loadMissingSchema.call(this, e.missingSchema);\n                return _compileAsync.call(this, sch);\n            }\n        }\n        function checkLoaded({ missingSchema: ref, missingRef }) {\n            if (this.refs[ref]) {\n                throw new Error(`AnySchema ${ref} is loaded but ${missingRef} cannot be resolved`);\n            }\n        }\n        async function loadMissingSchema(ref) {\n            const _schema = await _loadSchema.call(this, ref);\n            if (!this.refs[ref])\n                await loadMetaSchema.call(this, _schema.$schema);\n            if (!this.refs[ref])\n                this.addSchema(_schema, ref, meta);\n        }\n        async function _loadSchema(ref) {\n            const p = this._loading[ref];\n            if (p)\n                return p;\n            try {\n                return await (this._loading[ref] = loadSchema(ref));\n            }\n            finally {\n                delete this._loading[ref];\n            }\n        }\n    }\n    // Adds schema to the instance\n    addSchema(schema, // If array is passed, `key` will be ignored\n    key, // Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n    _meta, // true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n    _validateSchema = this.opts.validateSchema // false to skip schema validation. Used internally, option validateSchema should be used instead.\n    ) {\n        if (Array.isArray(schema)) {\n            for (const sch of schema)\n                this.addSchema(sch, undefined, _meta, _validateSchema);\n            return this;\n        }\n        let id;\n        if (typeof schema === \"object\") {\n            const { schemaId } = this.opts;\n            id = schema[schemaId];\n            if (id !== undefined && typeof id != \"string\") {\n                throw new Error(`schema ${schemaId} must be string`);\n            }\n        }\n        key = (0, resolve_1.normalizeId)(key || id);\n        this._checkUnique(key);\n        this.schemas[key] = this._addSchema(schema, _meta, key, _validateSchema, true);\n        return this;\n    }\n    // Add schema that will be used to validate other schemas\n    // options in META_IGNORE_OPTIONS are alway set to false\n    addMetaSchema(schema, key, // schema key\n    _validateSchema = this.opts.validateSchema // false to skip schema validation, can be used to override validateSchema option for meta-schema\n    ) {\n        this.addSchema(schema, key, true, _validateSchema);\n        return this;\n    }\n    //  Validate schema against its meta-schema\n    validateSchema(schema, throwOrLogError) {\n        if (typeof schema == \"boolean\")\n            return true;\n        let $schema;\n        $schema = schema.$schema;\n        if ($schema !== undefined && typeof $schema != \"string\") {\n            throw new Error(\"$schema must be a string\");\n        }\n        $schema = $schema || this.opts.defaultMeta || this.defaultMeta();\n        if (!$schema) {\n            this.logger.warn(\"meta-schema not available\");\n            this.errors = null;\n            return true;\n        }\n        const valid = this.validate($schema, schema);\n        if (!valid && throwOrLogError) {\n            const message = \"schema is invalid: \" + this.errorsText();\n            if (this.opts.validateSchema === \"log\")\n                this.logger.error(message);\n            else\n                throw new Error(message);\n        }\n        return valid;\n    }\n    // Get compiled schema by `key` or `ref`.\n    // (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)\n    getSchema(keyRef) {\n        let sch;\n        while (typeof (sch = getSchEnv.call(this, keyRef)) == \"string\")\n            keyRef = sch;\n        if (sch === undefined) {\n            const { schemaId } = this.opts;\n            const root = new compile_1.SchemaEnv({ schema: {}, schemaId });\n            sch = compile_1.resolveSchema.call(this, root, keyRef);\n            if (!sch)\n                return;\n            this.refs[keyRef] = sch;\n        }\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    // Remove cached schema(s).\n    // If no parameter is passed all schemas but meta-schemas are removed.\n    // If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n    // Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n    removeSchema(schemaKeyRef) {\n        if (schemaKeyRef instanceof RegExp) {\n            this._removeAllSchemas(this.schemas, schemaKeyRef);\n            this._removeAllSchemas(this.refs, schemaKeyRef);\n            return this;\n        }\n        switch (typeof schemaKeyRef) {\n            case \"undefined\":\n                this._removeAllSchemas(this.schemas);\n                this._removeAllSchemas(this.refs);\n                this._cache.clear();\n                return this;\n            case \"string\": {\n                const sch = getSchEnv.call(this, schemaKeyRef);\n                if (typeof sch == \"object\")\n                    this._cache.delete(sch.schema);\n                delete this.schemas[schemaKeyRef];\n                delete this.refs[schemaKeyRef];\n                return this;\n            }\n            case \"object\": {\n                const cacheKey = schemaKeyRef;\n                this._cache.delete(cacheKey);\n                let id = schemaKeyRef[this.opts.schemaId];\n                if (id) {\n                    id = (0, resolve_1.normalizeId)(id);\n                    delete this.schemas[id];\n                    delete this.refs[id];\n                }\n                return this;\n            }\n            default:\n                throw new Error(\"ajv.removeSchema: invalid parameter\");\n        }\n    }\n    // add \"vocabulary\" - a collection of keywords\n    addVocabulary(definitions) {\n        for (const def of definitions)\n            this.addKeyword(def);\n        return this;\n    }\n    addKeyword(kwdOrDef, def // deprecated\n    ) {\n        let keyword;\n        if (typeof kwdOrDef == \"string\") {\n            keyword = kwdOrDef;\n            if (typeof def == \"object\") {\n                this.logger.warn(\"these parameters are deprecated, see docs for addKeyword\");\n                def.keyword = keyword;\n            }\n        }\n        else if (typeof kwdOrDef == \"object\" && def === undefined) {\n            def = kwdOrDef;\n            keyword = def.keyword;\n            if (Array.isArray(keyword) && !keyword.length) {\n                throw new Error(\"addKeywords: keyword must be string or non-empty array\");\n            }\n        }\n        else {\n            throw new Error(\"invalid addKeywords parameters\");\n        }\n        checkKeyword.call(this, keyword, def);\n        if (!def) {\n            (0, util_1.eachItem)(keyword, (kwd) => addRule.call(this, kwd));\n            return this;\n        }\n        keywordMetaschema.call(this, def);\n        const definition = {\n            ...def,\n            type: (0, dataType_1.getJSONTypes)(def.type),\n            schemaType: (0, dataType_1.getJSONTypes)(def.schemaType),\n        };\n        (0, util_1.eachItem)(keyword, definition.type.length === 0\n            ? (k) => addRule.call(this, k, definition)\n            : (k) => definition.type.forEach((t) => addRule.call(this, k, definition, t)));\n        return this;\n    }\n    getKeyword(keyword) {\n        const rule = this.RULES.all[keyword];\n        return typeof rule == \"object\" ? rule.definition : !!rule;\n    }\n    // Remove keyword\n    removeKeyword(keyword) {\n        // TODO return type should be Ajv\n        const { RULES } = this;\n        delete RULES.keywords[keyword];\n        delete RULES.all[keyword];\n        for (const group of RULES.rules) {\n            const i = group.rules.findIndex((rule) => rule.keyword === keyword);\n            if (i >= 0)\n                group.rules.splice(i, 1);\n        }\n        return this;\n    }\n    // Add format\n    addFormat(name, format) {\n        if (typeof format == \"string\")\n            format = new RegExp(format);\n        this.formats[name] = format;\n        return this;\n    }\n    errorsText(errors = this.errors, // optional array of validation errors\n    { separator = \", \", dataVar = \"data\" } = {} // optional options with properties `separator` and `dataVar`\n    ) {\n        if (!errors || errors.length === 0)\n            return \"No errors\";\n        return errors\n            .map((e) => `${dataVar}${e.instancePath} ${e.message}`)\n            .reduce((text, msg) => text + separator + msg);\n    }\n    $dataMetaSchema(metaSchema, keywordsJsonPointers) {\n        const rules = this.RULES.all;\n        metaSchema = JSON.parse(JSON.stringify(metaSchema));\n        for (const jsonPointer of keywordsJsonPointers) {\n            const segments = jsonPointer.split(\"/\").slice(1); // first segment is an empty string\n            let keywords = metaSchema;\n            for (const seg of segments)\n                keywords = keywords[seg];\n            for (const key in rules) {\n                const rule = rules[key];\n                if (typeof rule != \"object\")\n                    continue;\n                const { $data } = rule.definition;\n                const schema = keywords[key];\n                if ($data && schema)\n                    keywords[key] = schemaOrData(schema);\n            }\n        }\n        return metaSchema;\n    }\n    _removeAllSchemas(schemas, regex) {\n        for (const keyRef in schemas) {\n            const sch = schemas[keyRef];\n            if (!regex || regex.test(keyRef)) {\n                if (typeof sch == \"string\") {\n                    delete schemas[keyRef];\n                }\n                else if (sch && !sch.meta) {\n                    this._cache.delete(sch.schema);\n                    delete schemas[keyRef];\n                }\n            }\n        }\n    }\n    _addSchema(schema, meta, baseId, validateSchema = this.opts.validateSchema, addSchema = this.opts.addUsedSchema) {\n        let id;\n        const { schemaId } = this.opts;\n        if (typeof schema == \"object\") {\n            id = schema[schemaId];\n        }\n        else {\n            if (this.opts.jtd)\n                throw new Error(\"schema must be object\");\n            else if (typeof schema != \"boolean\")\n                throw new Error(\"schema must be object or boolean\");\n        }\n        let sch = this._cache.get(schema);\n        if (sch !== undefined)\n            return sch;\n        baseId = (0, resolve_1.normalizeId)(id || baseId);\n        const localRefs = resolve_1.getSchemaRefs.call(this, schema, baseId);\n        sch = new compile_1.SchemaEnv({ schema, schemaId, meta, baseId, localRefs });\n        this._cache.set(sch.schema, sch);\n        if (addSchema && !baseId.startsWith(\"#\")) {\n            // TODO atm it is allowed to overwrite schemas without id (instead of not adding them)\n            if (baseId)\n                this._checkUnique(baseId);\n            this.refs[baseId] = sch;\n        }\n        if (validateSchema)\n            this.validateSchema(schema, true);\n        return sch;\n    }\n    _checkUnique(id) {\n        if (this.schemas[id] || this.refs[id]) {\n            throw new Error(`schema with key or id \"${id}\" already exists`);\n        }\n    }\n    _compileSchemaEnv(sch) {\n        if (sch.meta)\n            this._compileMetaSchema(sch);\n        else\n            compile_1.compileSchema.call(this, sch);\n        /* istanbul ignore if */\n        if (!sch.validate)\n            throw new Error(\"ajv implementation error\");\n        return sch.validate;\n    }\n    _compileMetaSchema(sch) {\n        const currentOpts = this.opts;\n        this.opts = this._metaOpts;\n        try {\n            compile_1.compileSchema.call(this, sch);\n        }\n        finally {\n            this.opts = currentOpts;\n        }\n    }\n}\nAjv.ValidationError = validation_error_1.default;\nAjv.MissingRefError = ref_error_1.default;\nexports.default = Ajv;\nfunction checkOptions(checkOpts, options, msg, log = \"error\") {\n    for (const key in checkOpts) {\n        const opt = key;\n        if (opt in options)\n            this.logger[log](`${msg}: option ${key}. ${checkOpts[opt]}`);\n    }\n}\nfunction getSchEnv(keyRef) {\n    keyRef = (0, resolve_1.normalizeId)(keyRef); // TODO tests fail without this line\n    return this.schemas[keyRef] || this.refs[keyRef];\n}\nfunction addInitialSchemas() {\n    const optsSchemas = this.opts.schemas;\n    if (!optsSchemas)\n        return;\n    if (Array.isArray(optsSchemas))\n        this.addSchema(optsSchemas);\n    else\n        for (const key in optsSchemas)\n            this.addSchema(optsSchemas[key], key);\n}\nfunction addInitialFormats() {\n    for (const name in this.opts.formats) {\n        const format = this.opts.formats[name];\n        if (format)\n            this.addFormat(name, format);\n    }\n}\nfunction addInitialKeywords(defs) {\n    if (Array.isArray(defs)) {\n        this.addVocabulary(defs);\n        return;\n    }\n    this.logger.warn(\"keywords option as map is deprecated, pass array\");\n    for (const keyword in defs) {\n        const def = defs[keyword];\n        if (!def.keyword)\n            def.keyword = keyword;\n        this.addKeyword(def);\n    }\n}\nfunction getMetaSchemaOptions() {\n    const metaOpts = { ...this.opts };\n    for (const opt of META_IGNORE_OPTIONS)\n        delete metaOpts[opt];\n    return metaOpts;\n}\nconst noLogs = { log() { }, warn() { }, error() { } };\nfunction getLogger(logger) {\n    if (logger === false)\n        return noLogs;\n    if (logger === undefined)\n        return console;\n    if (logger.log && logger.warn && logger.error)\n        return logger;\n    throw new Error(\"logger must implement log, warn and error methods\");\n}\nconst KEYWORD_NAME = /^[a-z_$][a-z0-9_$:-]*$/i;\nfunction checkKeyword(keyword, def) {\n    const { RULES } = this;\n    (0, util_1.eachItem)(keyword, (kwd) => {\n        if (RULES.keywords[kwd])\n            throw new Error(`Keyword ${kwd} is already defined`);\n        if (!KEYWORD_NAME.test(kwd))\n            throw new Error(`Keyword ${kwd} has invalid name`);\n    });\n    if (!def)\n        return;\n    if (def.$data && !(\"code\" in def || \"validate\" in def)) {\n        throw new Error('$data keyword must have \"code\" or \"validate\" function');\n    }\n}\nfunction addRule(keyword, definition, dataType) {\n    var _a;\n    const post = definition === null || definition === void 0 ? void 0 : definition.post;\n    if (dataType && post)\n        throw new Error('keyword with \"post\" flag cannot have \"type\"');\n    const { RULES } = this;\n    let ruleGroup = post ? RULES.post : RULES.rules.find(({ type: t }) => t === dataType);\n    if (!ruleGroup) {\n        ruleGroup = { type: dataType, rules: [] };\n        RULES.rules.push(ruleGroup);\n    }\n    RULES.keywords[keyword] = true;\n    if (!definition)\n        return;\n    const rule = {\n        keyword,\n        definition: {\n            ...definition,\n            type: (0, dataType_1.getJSONTypes)(definition.type),\n            schemaType: (0, dataType_1.getJSONTypes)(definition.schemaType),\n        },\n    };\n    if (definition.before)\n        addBeforeRule.call(this, ruleGroup, rule, definition.before);\n    else\n        ruleGroup.rules.push(rule);\n    RULES.all[keyword] = rule;\n    (_a = definition.implements) === null || _a === void 0 ? void 0 : _a.forEach((kwd) => this.addKeyword(kwd));\n}\nfunction addBeforeRule(ruleGroup, rule, before) {\n    const i = ruleGroup.rules.findIndex((_rule) => _rule.keyword === before);\n    if (i >= 0) {\n        ruleGroup.rules.splice(i, 0, rule);\n    }\n    else {\n        ruleGroup.rules.push(rule);\n        this.logger.warn(`rule ${before} is not defined`);\n    }\n}\nfunction keywordMetaschema(def) {\n    let { metaSchema } = def;\n    if (metaSchema === undefined)\n        return;\n    if (def.$data && this.opts.$data)\n        metaSchema = schemaOrData(metaSchema);\n    def.validateSchema = this.compile(metaSchema, true);\n}\nconst $dataRef = {\n    $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n};\nfunction schemaOrData(schema) {\n    return { anyOf: [schema, $dataRef] };\n}\n//# sourceMappingURL=core.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://github.com/ajv-validator/ajv/issues/889\nconst equal = require(\"fast-deep-equal\");\nequal.code = 'require(\"ajv/dist/runtime/equal\").default';\nexports.default = equal;\n//# sourceMappingURL=equal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nfunction ucs2length(str) {\n    const len = str.length;\n    let length = 0;\n    let pos = 0;\n    let value;\n    while (pos < len) {\n        length++;\n        value = str.charCodeAt(pos++);\n        if (value >= 0xd800 && value <= 0xdbff && pos < len) {\n            // high surrogate, and there is a next character\n            value = str.charCodeAt(pos);\n            if ((value & 0xfc00) === 0xdc00)\n                pos++; // low surrogate\n        }\n    }\n    return length;\n}\nexports.default = ucs2length;\nucs2length.code = 'require(\"ajv/dist/runtime/ucs2length\").default';\n//# sourceMappingURL=ucs2length.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst uri = require(\"fast-uri\");\nuri.code = 'require(\"ajv/dist/runtime/uri\").default';\nexports.default = uri;\n//# sourceMappingURL=uri.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ValidationError extends Error {\n    constructor(errors) {\n        super(\"validation failed\");\n        this.errors = errors;\n        this.ajv = this.validation = true;\n    }\n}\nexports.default = ValidationError;\n//# sourceMappingURL=validation_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateAdditionalItems = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"additionalItems\",\n    type: \"array\",\n    schemaType: [\"boolean\", \"object\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { parentSchema, it } = cxt;\n        const { items } = parentSchema;\n        if (!Array.isArray(items)) {\n            (0, util_1.checkStrictMode)(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas');\n            return;\n        }\n        validateAdditionalItems(cxt, items);\n    },\n};\nfunction validateAdditionalItems(cxt, items) {\n    const { gen, schema, data, keyword, it } = cxt;\n    it.items = true;\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    if (schema === false) {\n        cxt.setParams({ len: items.length });\n        cxt.pass((0, codegen_1._) `${len} <= ${items.length}`);\n    }\n    else if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n        const valid = gen.var(\"valid\", (0, codegen_1._) `${len} <= ${items.length}`); // TODO var\n        gen.if((0, codegen_1.not)(valid), () => validateItems(valid));\n        cxt.ok(valid);\n    }\n    function validateItems(valid) {\n        gen.forRange(\"i\", items.length, len, (i) => {\n            cxt.subschema({ keyword, dataProp: i, dataPropType: util_1.Type.Num }, valid);\n            if (!it.allErrors)\n                gen.if((0, codegen_1.not)(valid), () => gen.break());\n        });\n    }\n}\nexports.validateAdditionalItems = validateAdditionalItems;\nexports.default = def;\n//# sourceMappingURL=additionalItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must NOT have additional properties\",\n    params: ({ params }) => (0, codegen_1._) `{additionalProperty: ${params.additionalProperty}}`,\n};\nconst def = {\n    keyword: \"additionalProperties\",\n    type: [\"object\"],\n    schemaType: [\"boolean\", \"object\"],\n    allowUndefined: true,\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, errsCount, it } = cxt;\n        /* istanbul ignore if */\n        if (!errsCount)\n            throw new Error(\"ajv implementation error\");\n        const { allErrors, opts } = it;\n        it.props = true;\n        if (opts.removeAdditional !== \"all\" && (0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const props = (0, code_1.allSchemaProperties)(parentSchema.properties);\n        const patProps = (0, code_1.allSchemaProperties)(parentSchema.patternProperties);\n        checkAdditionalProperties();\n        cxt.ok((0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n        function checkAdditionalProperties() {\n            gen.forIn(\"key\", data, (key) => {\n                if (!props.length && !patProps.length)\n                    additionalPropertyCode(key);\n                else\n                    gen.if(isAdditional(key), () => additionalPropertyCode(key));\n            });\n        }\n        function isAdditional(key) {\n            let definedProp;\n            if (props.length > 8) {\n                // TODO maybe an option instead of hard-coded 8?\n                const propsSchema = (0, util_1.schemaRefOrVal)(it, parentSchema.properties, \"properties\");\n                definedProp = (0, code_1.isOwnProperty)(gen, propsSchema, key);\n            }\n            else if (props.length) {\n                definedProp = (0, codegen_1.or)(...props.map((p) => (0, codegen_1._) `${key} === ${p}`));\n            }\n            else {\n                definedProp = codegen_1.nil;\n            }\n            if (patProps.length) {\n                definedProp = (0, codegen_1.or)(definedProp, ...patProps.map((p) => (0, codegen_1._) `${(0, code_1.usePattern)(cxt, p)}.test(${key})`));\n            }\n            return (0, codegen_1.not)(definedProp);\n        }\n        function deleteAdditional(key) {\n            gen.code((0, codegen_1._) `delete ${data}[${key}]`);\n        }\n        function additionalPropertyCode(key) {\n            if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n                deleteAdditional(key);\n                return;\n            }\n            if (schema === false) {\n                cxt.setParams({ additionalProperty: key });\n                cxt.error();\n                if (!allErrors)\n                    gen.break();\n                return;\n            }\n            if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n                const valid = gen.name(\"valid\");\n                if (opts.removeAdditional === \"failing\") {\n                    applyAdditionalSchema(key, valid, false);\n                    gen.if((0, codegen_1.not)(valid), () => {\n                        cxt.reset();\n                        deleteAdditional(key);\n                    });\n                }\n                else {\n                    applyAdditionalSchema(key, valid);\n                    if (!allErrors)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                }\n            }\n        }\n        function applyAdditionalSchema(key, valid, errors) {\n            const subschema = {\n                keyword: \"additionalProperties\",\n                dataProp: key,\n                dataPropType: util_1.Type.Str,\n            };\n            if (errors === false) {\n                Object.assign(subschema, {\n                    compositeRule: true,\n                    createErrors: false,\n                    allErrors: false,\n                });\n            }\n            cxt.subschema(subschema, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=additionalProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"allOf\",\n    schemaType: \"array\",\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        const valid = gen.name(\"valid\");\n        schema.forEach((sch, i) => {\n            if ((0, util_1.alwaysValidSchema)(it, sch))\n                return;\n            const schCxt = cxt.subschema({ keyword: \"allOf\", schemaProp: i }, valid);\n            cxt.ok(valid);\n            cxt.mergeEvaluated(schCxt);\n        });\n    },\n};\nexports.default = def;\n//# sourceMappingURL=allOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"anyOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    code: code_1.validateUnion,\n    error: { message: \"must match a schema in anyOf\" },\n};\nexports.default = def;\n//# sourceMappingURL=anyOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { min, max } }) => max === undefined\n        ? (0, codegen_1.str) `must contain at least ${min} valid item(s)`\n        : (0, codegen_1.str) `must contain at least ${min} and no more than ${max} valid item(s)`,\n    params: ({ params: { min, max } }) => max === undefined ? (0, codegen_1._) `{minContains: ${min}}` : (0, codegen_1._) `{minContains: ${min}, maxContains: ${max}}`,\n};\nconst def = {\n    keyword: \"contains\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        let min;\n        let max;\n        const { minContains, maxContains } = parentSchema;\n        if (it.opts.next) {\n            min = minContains === undefined ? 1 : minContains;\n            max = maxContains;\n        }\n        else {\n            min = 1;\n        }\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        cxt.setParams({ min, max });\n        if (max === undefined && min === 0) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored`);\n            return;\n        }\n        if (max !== undefined && min > max) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" > \"maxContains\" is always invalid`);\n            cxt.fail();\n            return;\n        }\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            let cond = (0, codegen_1._) `${len} >= ${min}`;\n            if (max !== undefined)\n                cond = (0, codegen_1._) `${cond} && ${len} <= ${max}`;\n            cxt.pass(cond);\n            return;\n        }\n        it.items = true;\n        const valid = gen.name(\"valid\");\n        if (max === undefined && min === 1) {\n            validateItems(valid, () => gen.if(valid, () => gen.break()));\n        }\n        else if (min === 0) {\n            gen.let(valid, true);\n            if (max !== undefined)\n                gen.if((0, codegen_1._) `${data}.length > 0`, validateItemsWithCount);\n        }\n        else {\n            gen.let(valid, false);\n            validateItemsWithCount();\n        }\n        cxt.result(valid, () => cxt.reset());\n        function validateItemsWithCount() {\n            const schValid = gen.name(\"_valid\");\n            const count = gen.let(\"count\", 0);\n            validateItems(schValid, () => gen.if(schValid, () => checkLimits(count)));\n        }\n        function validateItems(_valid, block) {\n            gen.forRange(\"i\", 0, len, (i) => {\n                cxt.subschema({\n                    keyword: \"contains\",\n                    dataProp: i,\n                    dataPropType: util_1.Type.Num,\n                    compositeRule: true,\n                }, _valid);\n                block();\n            });\n        }\n        function checkLimits(count) {\n            gen.code((0, codegen_1._) `${count}++`);\n            if (max === undefined) {\n                gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true).break());\n            }\n            else {\n                gen.if((0, codegen_1._) `${count} > ${max}`, () => gen.assign(valid, false).break());\n                if (min === 1)\n                    gen.assign(valid, true);\n                else\n                    gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true));\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=contains.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateSchemaDeps = exports.validatePropertyDeps = exports.error = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nexports.error = {\n    message: ({ params: { property, depsCount, deps } }) => {\n        const property_ies = depsCount === 1 ? \"property\" : \"properties\";\n        return (0, codegen_1.str) `must have ${property_ies} ${deps} when property ${property} is present`;\n    },\n    params: ({ params: { property, depsCount, deps, missingProperty } }) => (0, codegen_1._) `{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n};\nconst def = {\n    keyword: \"dependencies\",\n    type: \"object\",\n    schemaType: \"object\",\n    error: exports.error,\n    code(cxt) {\n        const [propDeps, schDeps] = splitDependencies(cxt);\n        validatePropertyDeps(cxt, propDeps);\n        validateSchemaDeps(cxt, schDeps);\n    },\n};\nfunction splitDependencies({ schema }) {\n    const propertyDeps = {};\n    const schemaDeps = {};\n    for (const key in schema) {\n        if (key === \"__proto__\")\n            continue;\n        const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps;\n        deps[key] = schema[key];\n    }\n    return [propertyDeps, schemaDeps];\n}\nfunction validatePropertyDeps(cxt, propertyDeps = cxt.schema) {\n    const { gen, data, it } = cxt;\n    if (Object.keys(propertyDeps).length === 0)\n        return;\n    const missing = gen.let(\"missing\");\n    for (const prop in propertyDeps) {\n        const deps = propertyDeps[prop];\n        if (deps.length === 0)\n            continue;\n        const hasProperty = (0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties);\n        cxt.setParams({\n            property: prop,\n            depsCount: deps.length,\n            deps: deps.join(\", \"),\n        });\n        if (it.allErrors) {\n            gen.if(hasProperty, () => {\n                for (const depProp of deps) {\n                    (0, code_1.checkReportMissingProp)(cxt, depProp);\n                }\n            });\n        }\n        else {\n            gen.if((0, codegen_1._) `${hasProperty} && (${(0, code_1.checkMissingProp)(cxt, deps, missing)})`);\n            (0, code_1.reportMissingProp)(cxt, missing);\n            gen.else();\n        }\n    }\n}\nexports.validatePropertyDeps = validatePropertyDeps;\nfunction validateSchemaDeps(cxt, schemaDeps = cxt.schema) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    for (const prop in schemaDeps) {\n        if ((0, util_1.alwaysValidSchema)(it, schemaDeps[prop]))\n            continue;\n        gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties), () => {\n            const schCxt = cxt.subschema({ keyword, schemaProp: prop }, valid);\n            cxt.mergeValidEvaluated(schCxt, valid);\n        }, () => gen.var(valid, true) // TODO var\n        );\n        cxt.ok(valid);\n    }\n}\nexports.validateSchemaDeps = validateSchemaDeps;\nexports.default = def;\n//# sourceMappingURL=dependencies.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params }) => (0, codegen_1.str) `must match \"${params.ifClause}\" schema`,\n    params: ({ params }) => (0, codegen_1._) `{failingKeyword: ${params.ifClause}}`,\n};\nconst def = {\n    keyword: \"if\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, parentSchema, it } = cxt;\n        if (parentSchema.then === undefined && parentSchema.else === undefined) {\n            (0, util_1.checkStrictMode)(it, '\"if\" without \"then\" and \"else\" is ignored');\n        }\n        const hasThen = hasSchema(it, \"then\");\n        const hasElse = hasSchema(it, \"else\");\n        if (!hasThen && !hasElse)\n            return;\n        const valid = gen.let(\"valid\", true);\n        const schValid = gen.name(\"_valid\");\n        validateIf();\n        cxt.reset();\n        if (hasThen && hasElse) {\n            const ifClause = gen.let(\"ifClause\");\n            cxt.setParams({ ifClause });\n            gen.if(schValid, validateClause(\"then\", ifClause), validateClause(\"else\", ifClause));\n        }\n        else if (hasThen) {\n            gen.if(schValid, validateClause(\"then\"));\n        }\n        else {\n            gen.if((0, codegen_1.not)(schValid), validateClause(\"else\"));\n        }\n        cxt.pass(valid, () => cxt.error(true));\n        function validateIf() {\n            const schCxt = cxt.subschema({\n                keyword: \"if\",\n                compositeRule: true,\n                createErrors: false,\n                allErrors: false,\n            }, schValid);\n            cxt.mergeEvaluated(schCxt);\n        }\n        function validateClause(keyword, ifClause) {\n            return () => {\n                const schCxt = cxt.subschema({ keyword }, schValid);\n                gen.assign(valid, schValid);\n                cxt.mergeValidEvaluated(schCxt, valid);\n                if (ifClause)\n                    gen.assign(ifClause, (0, codegen_1._) `${keyword}`);\n                else\n                    cxt.setParams({ ifClause: keyword });\n            };\n        }\n    },\n};\nfunction hasSchema(it, keyword) {\n    const schema = it.schema[keyword];\n    return schema !== undefined && !(0, util_1.alwaysValidSchema)(it, schema);\n}\nexports.default = def;\n//# sourceMappingURL=if.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst additionalItems_1 = require(\"./additionalItems\");\nconst prefixItems_1 = require(\"./prefixItems\");\nconst items_1 = require(\"./items\");\nconst items2020_1 = require(\"./items2020\");\nconst contains_1 = require(\"./contains\");\nconst dependencies_1 = require(\"./dependencies\");\nconst propertyNames_1 = require(\"./propertyNames\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst properties_1 = require(\"./properties\");\nconst patternProperties_1 = require(\"./patternProperties\");\nconst not_1 = require(\"./not\");\nconst anyOf_1 = require(\"./anyOf\");\nconst oneOf_1 = require(\"./oneOf\");\nconst allOf_1 = require(\"./allOf\");\nconst if_1 = require(\"./if\");\nconst thenElse_1 = require(\"./thenElse\");\nfunction getApplicator(draft2020 = false) {\n    const applicator = [\n        // any\n        not_1.default,\n        anyOf_1.default,\n        oneOf_1.default,\n        allOf_1.default,\n        if_1.default,\n        thenElse_1.default,\n        // object\n        propertyNames_1.default,\n        additionalProperties_1.default,\n        dependencies_1.default,\n        properties_1.default,\n        patternProperties_1.default,\n    ];\n    // array\n    if (draft2020)\n        applicator.push(prefixItems_1.default, items2020_1.default);\n    else\n        applicator.push(additionalItems_1.default, items_1.default);\n    applicator.push(contains_1.default);\n    return applicator;\n}\nexports.default = getApplicator;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateTuple = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"array\", \"boolean\"],\n    before: \"uniqueItems\",\n    code(cxt) {\n        const { schema, it } = cxt;\n        if (Array.isArray(schema))\n            return validateTuple(cxt, \"additionalItems\", schema);\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nfunction validateTuple(cxt, extraItems, schArr = cxt.schema) {\n    const { gen, parentSchema, data, keyword, it } = cxt;\n    checkStrictTuple(parentSchema);\n    if (it.opts.unevaluated && schArr.length && it.items !== true) {\n        it.items = util_1.mergeEvaluated.items(gen, schArr.length, it.items);\n    }\n    const valid = gen.name(\"valid\");\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    schArr.forEach((sch, i) => {\n        if ((0, util_1.alwaysValidSchema)(it, sch))\n            return;\n        gen.if((0, codegen_1._) `${len} > ${i}`, () => cxt.subschema({\n            keyword,\n            schemaProp: i,\n            dataProp: i,\n        }, valid));\n        cxt.ok(valid);\n    });\n    function checkStrictTuple(sch) {\n        const { opts, errSchemaPath } = it;\n        const l = schArr.length;\n        const fullTuple = l === sch.minItems && (l === sch.maxItems || sch[extraItems] === false);\n        if (opts.strictTuples && !fullTuple) {\n            const msg = `\"${keyword}\" is ${l}-tuple, but minItems or maxItems/${extraItems} are not specified or different at path \"${errSchemaPath}\"`;\n            (0, util_1.checkStrictMode)(it, msg, opts.strictTuples);\n        }\n    }\n}\nexports.validateTuple = validateTuple;\nexports.default = def;\n//# sourceMappingURL=items.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst additionalItems_1 = require(\"./additionalItems\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { schema, parentSchema, it } = cxt;\n        const { prefixItems } = parentSchema;\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        if (prefixItems)\n            (0, additionalItems_1.validateAdditionalItems)(cxt, prefixItems);\n        else\n            cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nexports.default = def;\n//# sourceMappingURL=items2020.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"not\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            cxt.fail();\n            return;\n        }\n        const valid = gen.name(\"valid\");\n        cxt.subschema({\n            keyword: \"not\",\n            compositeRule: true,\n            createErrors: false,\n            allErrors: false,\n        }, valid);\n        cxt.failResult(valid, () => cxt.reset(), () => cxt.error());\n    },\n    error: { message: \"must NOT be valid\" },\n};\nexports.default = def;\n//# sourceMappingURL=not.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must match exactly one schema in oneOf\",\n    params: ({ params }) => (0, codegen_1._) `{passingSchemas: ${params.passing}}`,\n};\nconst def = {\n    keyword: \"oneOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        if (it.opts.discriminator && parentSchema.discriminator)\n            return;\n        const schArr = schema;\n        const valid = gen.let(\"valid\", false);\n        const passing = gen.let(\"passing\", null);\n        const schValid = gen.name(\"_valid\");\n        cxt.setParams({ passing });\n        // TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas\n        gen.block(validateOneOf);\n        cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n        function validateOneOf() {\n            schArr.forEach((sch, i) => {\n                let schCxt;\n                if ((0, util_1.alwaysValidSchema)(it, sch)) {\n                    gen.var(schValid, true);\n                }\n                else {\n                    schCxt = cxt.subschema({\n                        keyword: \"oneOf\",\n                        schemaProp: i,\n                        compositeRule: true,\n                    }, schValid);\n                }\n                if (i > 0) {\n                    gen\n                        .if((0, codegen_1._) `${schValid} && ${valid}`)\n                        .assign(valid, false)\n                        .assign(passing, (0, codegen_1._) `[${passing}, ${i}]`)\n                        .else();\n                }\n                gen.if(schValid, () => {\n                    gen.assign(valid, true);\n                    gen.assign(passing, i);\n                    if (schCxt)\n                        cxt.mergeEvaluated(schCxt, codegen_1.Name);\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=oneOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst util_2 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"patternProperties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, data, parentSchema, it } = cxt;\n        const { opts } = it;\n        const patterns = (0, code_1.allSchemaProperties)(schema);\n        const alwaysValidPatterns = patterns.filter((p) => (0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (patterns.length === 0 ||\n            (alwaysValidPatterns.length === patterns.length &&\n                (!it.opts.unevaluated || it.props === true))) {\n            return;\n        }\n        const checkProperties = opts.strictSchema && !opts.allowMatchingProperties && parentSchema.properties;\n        const valid = gen.name(\"valid\");\n        if (it.props !== true && !(it.props instanceof codegen_1.Name)) {\n            it.props = (0, util_2.evaluatedPropsToName)(gen, it.props);\n        }\n        const { props } = it;\n        validatePatternProperties();\n        function validatePatternProperties() {\n            for (const pat of patterns) {\n                if (checkProperties)\n                    checkMatchingProperties(pat);\n                if (it.allErrors) {\n                    validateProperties(pat);\n                }\n                else {\n                    gen.var(valid, true); // TODO var\n                    validateProperties(pat);\n                    gen.if(valid);\n                }\n            }\n        }\n        function checkMatchingProperties(pat) {\n            for (const prop in checkProperties) {\n                if (new RegExp(pat).test(prop)) {\n                    (0, util_1.checkStrictMode)(it, `property ${prop} matches pattern ${pat} (use allowMatchingProperties)`);\n                }\n            }\n        }\n        function validateProperties(pat) {\n            gen.forIn(\"key\", data, (key) => {\n                gen.if((0, codegen_1._) `${(0, code_1.usePattern)(cxt, pat)}.test(${key})`, () => {\n                    const alwaysValid = alwaysValidPatterns.includes(pat);\n                    if (!alwaysValid) {\n                        cxt.subschema({\n                            keyword: \"patternProperties\",\n                            schemaProp: pat,\n                            dataProp: key,\n                            dataPropType: util_2.Type.Str,\n                        }, valid);\n                    }\n                    if (it.opts.unevaluated && props !== true) {\n                        gen.assign((0, codegen_1._) `${props}[${key}]`, true);\n                    }\n                    else if (!alwaysValid && !it.allErrors) {\n                        // can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)\n                        // or if all properties were evaluated (props === true)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                    }\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=patternProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst items_1 = require(\"./items\");\nconst def = {\n    keyword: \"prefixItems\",\n    type: \"array\",\n    schemaType: [\"array\"],\n    before: \"uniqueItems\",\n    code: (cxt) => (0, items_1.validateTuple)(cxt, \"items\"),\n};\nexports.default = def;\n//# sourceMappingURL=prefixItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst validate_1 = require(\"../../compile/validate\");\nconst code_1 = require(\"../code\");\nconst util_1 = require(\"../../compile/util\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst def = {\n    keyword: \"properties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n            additionalProperties_1.default.code(new validate_1.KeywordCxt(it, additionalProperties_1.default, \"additionalProperties\"));\n        }\n        const allProps = (0, code_1.allSchemaProperties)(schema);\n        for (const prop of allProps) {\n            it.definedProperties.add(prop);\n        }\n        if (it.opts.unevaluated && allProps.length && it.props !== true) {\n            it.props = util_1.mergeEvaluated.props(gen, (0, util_1.toHash)(allProps), it.props);\n        }\n        const properties = allProps.filter((p) => !(0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (properties.length === 0)\n            return;\n        const valid = gen.name(\"valid\");\n        for (const prop of properties) {\n            if (hasDefault(prop)) {\n                applyPropertySchema(prop);\n            }\n            else {\n                gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties));\n                applyPropertySchema(prop);\n                if (!it.allErrors)\n                    gen.else().var(valid, true);\n                gen.endIf();\n            }\n            cxt.it.definedProperties.add(prop);\n            cxt.ok(valid);\n        }\n        function hasDefault(prop) {\n            return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined;\n        }\n        function applyPropertySchema(prop) {\n            cxt.subschema({\n                keyword: \"properties\",\n                schemaProp: prop,\n                dataProp: prop,\n            }, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=properties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"property name must be valid\",\n    params: ({ params }) => (0, codegen_1._) `{propertyName: ${params.propertyName}}`,\n};\nconst def = {\n    keyword: \"propertyNames\",\n    type: \"object\",\n    schemaType: [\"object\", \"boolean\"],\n    error,\n    code(cxt) {\n        const { gen, schema, data, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const valid = gen.name(\"valid\");\n        gen.forIn(\"key\", data, (key) => {\n            cxt.setParams({ propertyName: key });\n            cxt.subschema({\n                keyword: \"propertyNames\",\n                data: key,\n                dataTypes: [\"string\"],\n                propertyName: key,\n                compositeRule: true,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), () => {\n                cxt.error(true);\n                if (!it.allErrors)\n                    gen.break();\n            });\n        });\n        cxt.ok(valid);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=propertyNames.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: [\"then\", \"else\"],\n    schemaType: [\"object\", \"boolean\"],\n    code({ keyword, parentSchema, it }) {\n        if (parentSchema.if === undefined)\n            (0, util_1.checkStrictMode)(it, `\"${keyword}\" without \"if\" is ignored`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=thenElse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateUnion = exports.validateArray = exports.usePattern = exports.callValidateCode = exports.schemaProperties = exports.allSchemaProperties = exports.noPropertyInData = exports.propertyInData = exports.isOwnProperty = exports.hasPropFunc = exports.reportMissingProp = exports.checkMissingProp = exports.checkReportMissingProp = void 0;\nconst codegen_1 = require(\"../compile/codegen\");\nconst util_1 = require(\"../compile/util\");\nconst names_1 = require(\"../compile/names\");\nconst util_2 = require(\"../compile/util\");\nfunction checkReportMissingProp(cxt, prop) {\n    const { gen, data, it } = cxt;\n    gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n        cxt.setParams({ missingProperty: (0, codegen_1._) `${prop}` }, true);\n        cxt.error();\n    });\n}\nexports.checkReportMissingProp = checkReportMissingProp;\nfunction checkMissingProp({ gen, data, it: { opts } }, properties, missing) {\n    return (0, codegen_1.or)(...properties.map((prop) => (0, codegen_1.and)(noPropertyInData(gen, data, prop, opts.ownProperties), (0, codegen_1._) `${missing} = ${prop}`)));\n}\nexports.checkMissingProp = checkMissingProp;\nfunction reportMissingProp(cxt, missing) {\n    cxt.setParams({ missingProperty: missing }, true);\n    cxt.error();\n}\nexports.reportMissingProp = reportMissingProp;\nfunction hasPropFunc(gen) {\n    return gen.scopeValue(\"func\", {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        ref: Object.prototype.hasOwnProperty,\n        code: (0, codegen_1._) `Object.prototype.hasOwnProperty`,\n    });\n}\nexports.hasPropFunc = hasPropFunc;\nfunction isOwnProperty(gen, data, property) {\n    return (0, codegen_1._) `${hasPropFunc(gen)}.call(${data}, ${property})`;\n}\nexports.isOwnProperty = isOwnProperty;\nfunction propertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} !== undefined`;\n    return ownProperties ? (0, codegen_1._) `${cond} && ${isOwnProperty(gen, data, property)}` : cond;\n}\nexports.propertyInData = propertyInData;\nfunction noPropertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} === undefined`;\n    return ownProperties ? (0, codegen_1.or)(cond, (0, codegen_1.not)(isOwnProperty(gen, data, property))) : cond;\n}\nexports.noPropertyInData = noPropertyInData;\nfunction allSchemaProperties(schemaMap) {\n    return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : [];\n}\nexports.allSchemaProperties = allSchemaProperties;\nfunction schemaProperties(it, schemaMap) {\n    return allSchemaProperties(schemaMap).filter((p) => !(0, util_1.alwaysValidSchema)(it, schemaMap[p]));\n}\nexports.schemaProperties = schemaProperties;\nfunction callValidateCode({ schemaCode, data, it: { gen, topSchemaRef, schemaPath, errorPath }, it }, func, context, passSchema) {\n    const dataAndSchema = passSchema ? (0, codegen_1._) `${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data;\n    const valCxt = [\n        [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, errorPath)],\n        [names_1.default.parentData, it.parentData],\n        [names_1.default.parentDataProperty, it.parentDataProperty],\n        [names_1.default.rootData, names_1.default.rootData],\n    ];\n    if (it.opts.dynamicRef)\n        valCxt.push([names_1.default.dynamicAnchors, names_1.default.dynamicAnchors]);\n    const args = (0, codegen_1._) `${dataAndSchema}, ${gen.object(...valCxt)}`;\n    return context !== codegen_1.nil ? (0, codegen_1._) `${func}.call(${context}, ${args})` : (0, codegen_1._) `${func}(${args})`;\n}\nexports.callValidateCode = callValidateCode;\nconst newRegExp = (0, codegen_1._) `new RegExp`;\nfunction usePattern({ gen, it: { opts } }, pattern) {\n    const u = opts.unicodeRegExp ? \"u\" : \"\";\n    const { regExp } = opts.code;\n    const rx = regExp(pattern, u);\n    return gen.scopeValue(\"pattern\", {\n        key: rx.toString(),\n        ref: rx,\n        code: (0, codegen_1._) `${regExp.code === \"new RegExp\" ? newRegExp : (0, util_2.useFunc)(gen, regExp)}(${pattern}, ${u})`,\n    });\n}\nexports.usePattern = usePattern;\nfunction validateArray(cxt) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    if (it.allErrors) {\n        const validArr = gen.let(\"valid\", true);\n        validateItems(() => gen.assign(validArr, false));\n        return validArr;\n    }\n    gen.var(valid, true);\n    validateItems(() => gen.break());\n    return valid;\n    function validateItems(notValid) {\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        gen.forRange(\"i\", 0, len, (i) => {\n            cxt.subschema({\n                keyword,\n                dataProp: i,\n                dataPropType: util_1.Type.Num,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), notValid);\n        });\n    }\n}\nexports.validateArray = validateArray;\nfunction validateUnion(cxt) {\n    const { gen, schema, keyword, it } = cxt;\n    /* istanbul ignore if */\n    if (!Array.isArray(schema))\n        throw new Error(\"ajv implementation error\");\n    const alwaysValid = schema.some((sch) => (0, util_1.alwaysValidSchema)(it, sch));\n    if (alwaysValid && !it.opts.unevaluated)\n        return;\n    const valid = gen.let(\"valid\", false);\n    const schValid = gen.name(\"_valid\");\n    gen.block(() => schema.forEach((_sch, i) => {\n        const schCxt = cxt.subschema({\n            keyword,\n            schemaProp: i,\n            compositeRule: true,\n        }, schValid);\n        gen.assign(valid, (0, codegen_1._) `${valid} || ${schValid}`);\n        const merged = cxt.mergeValidEvaluated(schCxt, schValid);\n        // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n        // or if all properties and items were evaluated (it.props === true && it.items === true)\n        if (!merged)\n            gen.if((0, codegen_1.not)(valid));\n    }));\n    cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n}\nexports.validateUnion = validateUnion;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst def = {\n    keyword: \"id\",\n    code() {\n        throw new Error('NOT SUPPORTED: keyword \"id\", use \"$id\" for schema ID');\n    },\n};\nexports.default = def;\n//# sourceMappingURL=id.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst id_1 = require(\"./id\");\nconst ref_1 = require(\"./ref\");\nconst core = [\n    \"$schema\",\n    \"$id\",\n    \"$defs\",\n    \"$vocabulary\",\n    { keyword: \"$comment\" },\n    \"definitions\",\n    id_1.default,\n    ref_1.default,\n];\nexports.default = core;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.callRef = exports.getValidate = void 0;\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst compile_1 = require(\"../../compile\");\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"$ref\",\n    schemaType: \"string\",\n    code(cxt) {\n        const { gen, schema: $ref, it } = cxt;\n        const { baseId, schemaEnv: env, validateName, opts, self } = it;\n        const { root } = env;\n        if (($ref === \"#\" || $ref === \"#/\") && baseId === root.baseId)\n            return callRootRef();\n        const schOrEnv = compile_1.resolveRef.call(self, root, baseId, $ref);\n        if (schOrEnv === undefined)\n            throw new ref_error_1.default(it.opts.uriResolver, baseId, $ref);\n        if (schOrEnv instanceof compile_1.SchemaEnv)\n            return callValidate(schOrEnv);\n        return inlineRefSchema(schOrEnv);\n        function callRootRef() {\n            if (env === root)\n                return callRef(cxt, validateName, env, env.$async);\n            const rootName = gen.scopeValue(\"root\", { ref: root });\n            return callRef(cxt, (0, codegen_1._) `${rootName}.validate`, root, root.$async);\n        }\n        function callValidate(sch) {\n            const v = getValidate(cxt, sch);\n            callRef(cxt, v, sch, sch.$async);\n        }\n        function inlineRefSchema(sch) {\n            const schName = gen.scopeValue(\"schema\", opts.code.source === true ? { ref: sch, code: (0, codegen_1.stringify)(sch) } : { ref: sch });\n            const valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({\n                schema: sch,\n                dataTypes: [],\n                schemaPath: codegen_1.nil,\n                topSchemaRef: schName,\n                errSchemaPath: $ref,\n            }, valid);\n            cxt.mergeEvaluated(schCxt);\n            cxt.ok(valid);\n        }\n    },\n};\nfunction getValidate(cxt, sch) {\n    const { gen } = cxt;\n    return sch.validate\n        ? gen.scopeValue(\"validate\", { ref: sch.validate })\n        : (0, codegen_1._) `${gen.scopeValue(\"wrapper\", { ref: sch })}.validate`;\n}\nexports.getValidate = getValidate;\nfunction callRef(cxt, v, sch, $async) {\n    const { gen, it } = cxt;\n    const { allErrors, schemaEnv: env, opts } = it;\n    const passCxt = opts.passContext ? names_1.default.this : codegen_1.nil;\n    if ($async)\n        callAsyncRef();\n    else\n        callSyncRef();\n    function callAsyncRef() {\n        if (!env.$async)\n            throw new Error(\"async schema referenced by sync schema\");\n        const valid = gen.let(\"valid\");\n        gen.try(() => {\n            gen.code((0, codegen_1._) `await ${(0, code_1.callValidateCode)(cxt, v, passCxt)}`);\n            addEvaluatedFrom(v); // TODO will not work with async, it has to be returned with the result\n            if (!allErrors)\n                gen.assign(valid, true);\n        }, (e) => {\n            gen.if((0, codegen_1._) `!(${e} instanceof ${it.ValidationError})`, () => gen.throw(e));\n            addErrorsFrom(e);\n            if (!allErrors)\n                gen.assign(valid, false);\n        });\n        cxt.ok(valid);\n    }\n    function callSyncRef() {\n        cxt.result((0, code_1.callValidateCode)(cxt, v, passCxt), () => addEvaluatedFrom(v), () => addErrorsFrom(v));\n    }\n    function addErrorsFrom(source) {\n        const errs = (0, codegen_1._) `${source}.errors`;\n        gen.assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`); // TODO tagged\n        gen.assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n    }\n    function addEvaluatedFrom(source) {\n        var _a;\n        if (!it.opts.unevaluated)\n            return;\n        const schEvaluated = (_a = sch === null || sch === void 0 ? void 0 : sch.validate) === null || _a === void 0 ? void 0 : _a.evaluated;\n        // TODO refactor\n        if (it.props !== true) {\n            if (schEvaluated && !schEvaluated.dynamicProps) {\n                if (schEvaluated.props !== undefined) {\n                    it.props = util_1.mergeEvaluated.props(gen, schEvaluated.props, it.props);\n                }\n            }\n            else {\n                const props = gen.var(\"props\", (0, codegen_1._) `${source}.evaluated.props`);\n                it.props = util_1.mergeEvaluated.props(gen, props, it.props, codegen_1.Name);\n            }\n        }\n        if (it.items !== true) {\n            if (schEvaluated && !schEvaluated.dynamicItems) {\n                if (schEvaluated.items !== undefined) {\n                    it.items = util_1.mergeEvaluated.items(gen, schEvaluated.items, it.items);\n                }\n            }\n            else {\n                const items = gen.var(\"items\", (0, codegen_1._) `${source}.evaluated.items`);\n                it.items = util_1.mergeEvaluated.items(gen, items, it.items, codegen_1.Name);\n            }\n        }\n    }\n}\nexports.callRef = callRef;\nexports.default = def;\n//# sourceMappingURL=ref.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst types_1 = require(\"../discriminator/types\");\nconst compile_1 = require(\"../../compile\");\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { discrError, tagName } }) => discrError === types_1.DiscrError.Tag\n        ? `tag \"${tagName}\" must be string`\n        : `value of tag \"${tagName}\" must be in oneOf`,\n    params: ({ params: { discrError, tag, tagName } }) => (0, codegen_1._) `{error: ${discrError}, tag: ${tagName}, tagValue: ${tag}}`,\n};\nconst def = {\n    keyword: \"discriminator\",\n    type: \"object\",\n    schemaType: \"object\",\n    error,\n    code(cxt) {\n        const { gen, data, schema, parentSchema, it } = cxt;\n        const { oneOf } = parentSchema;\n        if (!it.opts.discriminator) {\n            throw new Error(\"discriminator: requires discriminator option\");\n        }\n        const tagName = schema.propertyName;\n        if (typeof tagName != \"string\")\n            throw new Error(\"discriminator: requires propertyName\");\n        if (schema.mapping)\n            throw new Error(\"discriminator: mapping is not supported\");\n        if (!oneOf)\n            throw new Error(\"discriminator: requires oneOf keyword\");\n        const valid = gen.let(\"valid\", false);\n        const tag = gen.const(\"tag\", (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(tagName)}`);\n        gen.if((0, codegen_1._) `typeof ${tag} == \"string\"`, () => validateMapping(), () => cxt.error(false, { discrError: types_1.DiscrError.Tag, tag, tagName }));\n        cxt.ok(valid);\n        function validateMapping() {\n            const mapping = getMapping();\n            gen.if(false);\n            for (const tagValue in mapping) {\n                gen.elseIf((0, codegen_1._) `${tag} === ${tagValue}`);\n                gen.assign(valid, applyTagSchema(mapping[tagValue]));\n            }\n            gen.else();\n            cxt.error(false, { discrError: types_1.DiscrError.Mapping, tag, tagName });\n            gen.endIf();\n        }\n        function applyTagSchema(schemaProp) {\n            const _valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({ keyword: \"oneOf\", schemaProp }, _valid);\n            cxt.mergeEvaluated(schCxt, codegen_1.Name);\n            return _valid;\n        }\n        function getMapping() {\n            var _a;\n            const oneOfMapping = {};\n            const topRequired = hasRequired(parentSchema);\n            let tagRequired = true;\n            for (let i = 0; i < oneOf.length; i++) {\n                let sch = oneOf[i];\n                if ((sch === null || sch === void 0 ? void 0 : sch.$ref) && !(0, util_1.schemaHasRulesButRef)(sch, it.self.RULES)) {\n                    const ref = sch.$ref;\n                    sch = compile_1.resolveRef.call(it.self, it.schemaEnv.root, it.baseId, ref);\n                    if (sch instanceof compile_1.SchemaEnv)\n                        sch = sch.schema;\n                    if (sch === undefined)\n                        throw new ref_error_1.default(it.opts.uriResolver, it.baseId, ref);\n                }\n                const propSch = (_a = sch === null || sch === void 0 ? void 0 : sch.properties) === null || _a === void 0 ? void 0 : _a[tagName];\n                if (typeof propSch != \"object\") {\n                    throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have \"properties/${tagName}\"`);\n                }\n                tagRequired = tagRequired && (topRequired || hasRequired(sch));\n                addMappings(propSch, i);\n            }\n            if (!tagRequired)\n                throw new Error(`discriminator: \"${tagName}\" must be required`);\n            return oneOfMapping;\n            function hasRequired({ required }) {\n                return Array.isArray(required) && required.includes(tagName);\n            }\n            function addMappings(sch, i) {\n                if (sch.const) {\n                    addMapping(sch.const, i);\n                }\n                else if (sch.enum) {\n                    for (const tagValue of sch.enum) {\n                        addMapping(tagValue, i);\n                    }\n                }\n                else {\n                    throw new Error(`discriminator: \"properties/${tagName}\" must have \"const\" or \"enum\"`);\n                }\n            }\n            function addMapping(tagValue, i) {\n                if (typeof tagValue != \"string\" || tagValue in oneOfMapping) {\n                    throw new Error(`discriminator: \"${tagName}\" values must be unique strings`);\n                }\n                oneOfMapping[tagValue] = i;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiscrError = void 0;\nvar DiscrError;\n(function (DiscrError) {\n    DiscrError[\"Tag\"] = \"tag\";\n    DiscrError[\"Mapping\"] = \"mapping\";\n})(DiscrError || (exports.DiscrError = DiscrError = {}));\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_1 = require(\"./core\");\nconst validation_1 = require(\"./validation\");\nconst applicator_1 = require(\"./applicator\");\nconst format_1 = require(\"./format\");\nconst metadata_1 = require(\"./metadata\");\nconst draft7Vocabularies = [\n    core_1.default,\n    validation_1.default,\n    (0, applicator_1.default)(),\n    format_1.default,\n    metadata_1.metadataVocabulary,\n    metadata_1.contentVocabulary,\n];\nexports.default = draft7Vocabularies;\n//# sourceMappingURL=draft7.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match format \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{format: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"format\",\n    type: [\"number\", \"string\"],\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt, ruleType) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        const { opts, errSchemaPath, schemaEnv, self } = it;\n        if (!opts.validateFormats)\n            return;\n        if ($data)\n            validate$DataFormat();\n        else\n            validateFormat();\n        function validate$DataFormat() {\n            const fmts = gen.scopeValue(\"formats\", {\n                ref: self.formats,\n                code: opts.code.formats,\n            });\n            const fDef = gen.const(\"fDef\", (0, codegen_1._) `${fmts}[${schemaCode}]`);\n            const fType = gen.let(\"fType\");\n            const format = gen.let(\"format\");\n            // TODO simplify\n            gen.if((0, codegen_1._) `typeof ${fDef} == \"object\" && !(${fDef} instanceof RegExp)`, () => gen.assign(fType, (0, codegen_1._) `${fDef}.type || \"string\"`).assign(format, (0, codegen_1._) `${fDef}.validate`), () => gen.assign(fType, (0, codegen_1._) `\"string\"`).assign(format, fDef));\n            cxt.fail$data((0, codegen_1.or)(unknownFmt(), invalidFmt()));\n            function unknownFmt() {\n                if (opts.strictSchema === false)\n                    return codegen_1.nil;\n                return (0, codegen_1._) `${schemaCode} && !${format}`;\n            }\n            function invalidFmt() {\n                const callFormat = schemaEnv.$async\n                    ? (0, codegen_1._) `(${fDef}.async ? await ${format}(${data}) : ${format}(${data}))`\n                    : (0, codegen_1._) `${format}(${data})`;\n                const validData = (0, codegen_1._) `(typeof ${format} == \"function\" ? ${callFormat} : ${format}.test(${data}))`;\n                return (0, codegen_1._) `${format} && ${format} !== true && ${fType} === ${ruleType} && !${validData}`;\n            }\n        }\n        function validateFormat() {\n            const formatDef = self.formats[schema];\n            if (!formatDef) {\n                unknownFormat();\n                return;\n            }\n            if (formatDef === true)\n                return;\n            const [fmtType, format, fmtRef] = getFormat(formatDef);\n            if (fmtType === ruleType)\n                cxt.pass(validCondition());\n            function unknownFormat() {\n                if (opts.strictSchema === false) {\n                    self.logger.warn(unknownMsg());\n                    return;\n                }\n                throw new Error(unknownMsg());\n                function unknownMsg() {\n                    return `unknown format \"${schema}\" ignored in schema at path \"${errSchemaPath}\"`;\n                }\n            }\n            function getFormat(fmtDef) {\n                const code = fmtDef instanceof RegExp\n                    ? (0, codegen_1.regexpCode)(fmtDef)\n                    : opts.code.formats\n                        ? (0, codegen_1._) `${opts.code.formats}${(0, codegen_1.getProperty)(schema)}`\n                        : undefined;\n                const fmt = gen.scopeValue(\"formats\", { key: schema, ref: fmtDef, code });\n                if (typeof fmtDef == \"object\" && !(fmtDef instanceof RegExp)) {\n                    return [fmtDef.type || \"string\", fmtDef.validate, (0, codegen_1._) `${fmt}.validate`];\n                }\n                return [\"string\", fmtDef, fmt];\n            }\n            function validCondition() {\n                if (typeof formatDef == \"object\" && !(formatDef instanceof RegExp) && formatDef.async) {\n                    if (!schemaEnv.$async)\n                        throw new Error(\"async format in sync schema\");\n                    return (0, codegen_1._) `await ${fmtRef}(${data})`;\n                }\n                return typeof format == \"function\" ? (0, codegen_1._) `${fmtRef}(${data})` : (0, codegen_1._) `${fmtRef}.test(${data})`;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=format.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst format_1 = require(\"./format\");\nconst format = [format_1.default];\nexports.default = format;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.contentVocabulary = exports.metadataVocabulary = void 0;\nexports.metadataVocabulary = [\n    \"title\",\n    \"description\",\n    \"default\",\n    \"deprecated\",\n    \"readOnly\",\n    \"writeOnly\",\n    \"examples\",\n];\nexports.contentVocabulary = [\n    \"contentMediaType\",\n    \"contentEncoding\",\n    \"contentSchema\",\n];\n//# sourceMappingURL=metadata.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to constant\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValue: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"const\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schemaCode, schema } = cxt;\n        if ($data || (schema && typeof schema == \"object\")) {\n            cxt.fail$data((0, codegen_1._) `!${(0, util_1.useFunc)(gen, equal_1.default)}(${data}, ${schemaCode})`);\n        }\n        else {\n            cxt.fail((0, codegen_1._) `${schema} !== ${data}`);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=const.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to one of the allowed values\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValues: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"enum\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        if (!$data && schema.length === 0)\n            throw new Error(\"enum must have non-empty array\");\n        const useLoop = schema.length >= it.opts.loopEnum;\n        let eql;\n        const getEql = () => (eql !== null && eql !== void 0 ? eql : (eql = (0, util_1.useFunc)(gen, equal_1.default)));\n        let valid;\n        if (useLoop || $data) {\n            valid = gen.let(\"valid\");\n            cxt.block$data(valid, loopEnum);\n        }\n        else {\n            /* istanbul ignore if */\n            if (!Array.isArray(schema))\n                throw new Error(\"ajv implementation error\");\n            const vSchema = gen.const(\"vSchema\", schemaCode);\n            valid = (0, codegen_1.or)(...schema.map((_x, i) => equalCode(vSchema, i)));\n        }\n        cxt.pass(valid);\n        function loopEnum() {\n            gen.assign(valid, false);\n            gen.forOf(\"v\", schemaCode, (v) => gen.if((0, codegen_1._) `${getEql()}(${data}, ${v})`, () => gen.assign(valid, true).break()));\n        }\n        function equalCode(vSchema, i) {\n            const sch = schema[i];\n            return typeof sch === \"object\" && sch !== null\n                ? (0, codegen_1._) `${getEql()}(${data}, ${vSchema}[${i}])`\n                : (0, codegen_1._) `${data} === ${sch}`;\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=enum.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst limitNumber_1 = require(\"./limitNumber\");\nconst multipleOf_1 = require(\"./multipleOf\");\nconst limitLength_1 = require(\"./limitLength\");\nconst pattern_1 = require(\"./pattern\");\nconst limitProperties_1 = require(\"./limitProperties\");\nconst required_1 = require(\"./required\");\nconst limitItems_1 = require(\"./limitItems\");\nconst uniqueItems_1 = require(\"./uniqueItems\");\nconst const_1 = require(\"./const\");\nconst enum_1 = require(\"./enum\");\nconst validation = [\n    // number\n    limitNumber_1.default,\n    multipleOf_1.default,\n    // string\n    limitLength_1.default,\n    pattern_1.default,\n    // object\n    limitProperties_1.default,\n    required_1.default,\n    // array\n    limitItems_1.default,\n    uniqueItems_1.default,\n    // any\n    { keyword: \"type\", schemaType: [\"string\", \"array\"] },\n    { keyword: \"nullable\", schemaType: \"boolean\" },\n    const_1.default,\n    enum_1.default,\n];\nexports.default = validation;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxItems\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} items`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxItems\", \"minItems\"],\n    type: \"array\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxItems\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `${data}.length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst ucs2length_1 = require(\"../../runtime/ucs2length\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxLength\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} characters`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxLength\", \"minLength\"],\n    type: \"string\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode, it } = cxt;\n        const op = keyword === \"maxLength\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        const len = it.opts.unicode === false ? (0, codegen_1._) `${data}.length` : (0, codegen_1._) `${(0, util_1.useFunc)(cxt.gen, ucs2length_1.default)}(${data})`;\n        cxt.fail$data((0, codegen_1._) `${len} ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitLength.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst ops = codegen_1.operators;\nconst KWDs = {\n    maximum: { okStr: \"<=\", ok: ops.LTE, fail: ops.GT },\n    minimum: { okStr: \">=\", ok: ops.GTE, fail: ops.LT },\n    exclusiveMaximum: { okStr: \"<\", ok: ops.LT, fail: ops.GTE },\n    exclusiveMinimum: { okStr: \">\", ok: ops.GT, fail: ops.LTE },\n};\nconst error = {\n    message: ({ keyword, schemaCode }) => (0, codegen_1.str) `must be ${KWDs[keyword].okStr} ${schemaCode}`,\n    params: ({ keyword, schemaCode }) => (0, codegen_1._) `{comparison: ${KWDs[keyword].okStr}, limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: Object.keys(KWDs),\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        cxt.fail$data((0, codegen_1._) `${data} ${KWDs[keyword].fail} ${schemaCode} || isNaN(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitNumber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxProperties\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} properties`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxProperties\", \"minProperties\"],\n    type: \"object\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxProperties\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `Object.keys(${data}).length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must be multiple of ${schemaCode}`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{multipleOf: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"multipleOf\",\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, schemaCode, it } = cxt;\n        // const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)\n        const prec = it.opts.multipleOfPrecision;\n        const res = gen.let(\"res\");\n        const invalid = prec\n            ? (0, codegen_1._) `Math.abs(Math.round(${res}) - ${res}) > 1e-${prec}`\n            : (0, codegen_1._) `${res} !== parseInt(${res})`;\n        cxt.fail$data((0, codegen_1._) `(${schemaCode} === 0 || (${res} = ${data}/${schemaCode}, ${invalid}))`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=multipleOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match pattern \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{pattern: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"pattern\",\n    type: \"string\",\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { data, $data, schema, schemaCode, it } = cxt;\n        // TODO regexp should be wrapped in try/catchs\n        const u = it.opts.unicodeRegExp ? \"u\" : \"\";\n        const regExp = $data ? (0, codegen_1._) `(new RegExp(${schemaCode}, ${u}))` : (0, code_1.usePattern)(cxt, schema);\n        cxt.fail$data((0, codegen_1._) `!${regExp}.test(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=pattern.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { missingProperty } }) => (0, codegen_1.str) `must have required property '${missingProperty}'`,\n    params: ({ params: { missingProperty } }) => (0, codegen_1._) `{missingProperty: ${missingProperty}}`,\n};\nconst def = {\n    keyword: \"required\",\n    type: \"object\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, schema, schemaCode, data, $data, it } = cxt;\n        const { opts } = it;\n        if (!$data && schema.length === 0)\n            return;\n        const useLoop = schema.length >= opts.loopRequired;\n        if (it.allErrors)\n            allErrorsMode();\n        else\n            exitOnErrorMode();\n        if (opts.strictRequired) {\n            const props = cxt.parentSchema.properties;\n            const { definedProperties } = cxt.it;\n            for (const requiredKey of schema) {\n                if ((props === null || props === void 0 ? void 0 : props[requiredKey]) === undefined && !definedProperties.has(requiredKey)) {\n                    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n                    const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`;\n                    (0, util_1.checkStrictMode)(it, msg, it.opts.strictRequired);\n                }\n            }\n        }\n        function allErrorsMode() {\n            if (useLoop || $data) {\n                cxt.block$data(codegen_1.nil, loopAllRequired);\n            }\n            else {\n                for (const prop of schema) {\n                    (0, code_1.checkReportMissingProp)(cxt, prop);\n                }\n            }\n        }\n        function exitOnErrorMode() {\n            const missing = gen.let(\"missing\");\n            if (useLoop || $data) {\n                const valid = gen.let(\"valid\", true);\n                cxt.block$data(valid, () => loopUntilMissing(missing, valid));\n                cxt.ok(valid);\n            }\n            else {\n                gen.if((0, code_1.checkMissingProp)(cxt, schema, missing));\n                (0, code_1.reportMissingProp)(cxt, missing);\n                gen.else();\n            }\n        }\n        function loopAllRequired() {\n            gen.forOf(\"prop\", schemaCode, (prop) => {\n                cxt.setParams({ missingProperty: prop });\n                gen.if((0, code_1.noPropertyInData)(gen, data, prop, opts.ownProperties), () => cxt.error());\n            });\n        }\n        function loopUntilMissing(missing, valid) {\n            cxt.setParams({ missingProperty: missing });\n            gen.forOf(missing, schemaCode, () => {\n                gen.assign(valid, (0, code_1.propertyInData)(gen, data, missing, opts.ownProperties));\n                gen.if((0, codegen_1.not)(valid), () => {\n                    cxt.error();\n                    gen.break();\n                });\n            }, codegen_1.nil);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=required.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dataType_1 = require(\"../../compile/validate/dataType\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: ({ params: { i, j } }) => (0, codegen_1.str) `must NOT have duplicate items (items ## ${j} and ${i} are identical)`,\n    params: ({ params: { i, j } }) => (0, codegen_1._) `{i: ${i}, j: ${j}}`,\n};\nconst def = {\n    keyword: \"uniqueItems\",\n    type: \"array\",\n    schemaType: \"boolean\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, parentSchema, schemaCode, it } = cxt;\n        if (!$data && !schema)\n            return;\n        const valid = gen.let(\"valid\");\n        const itemTypes = parentSchema.items ? (0, dataType_1.getSchemaTypes)(parentSchema.items) : [];\n        cxt.block$data(valid, validateUniqueItems, (0, codegen_1._) `${schemaCode} === false`);\n        cxt.ok(valid);\n        function validateUniqueItems() {\n            const i = gen.let(\"i\", (0, codegen_1._) `${data}.length`);\n            const j = gen.let(\"j\");\n            cxt.setParams({ i, j });\n            gen.assign(valid, true);\n            gen.if((0, codegen_1._) `${i} > 1`, () => (canOptimize() ? loopN : loopN2)(i, j));\n        }\n        function canOptimize() {\n            return itemTypes.length > 0 && !itemTypes.some((t) => t === \"object\" || t === \"array\");\n        }\n        function loopN(i, j) {\n            const item = gen.name(\"item\");\n            const wrongType = (0, dataType_1.checkDataTypes)(itemTypes, item, it.opts.strictNumbers, dataType_1.DataType.Wrong);\n            const indices = gen.const(\"indices\", (0, codegen_1._) `{}`);\n            gen.for((0, codegen_1._) `;${i}--;`, () => {\n                gen.let(item, (0, codegen_1._) `${data}[${i}]`);\n                gen.if(wrongType, (0, codegen_1._) `continue`);\n                if (itemTypes.length > 1)\n                    gen.if((0, codegen_1._) `typeof ${item} == \"string\"`, (0, codegen_1._) `${item} += \"_\"`);\n                gen\n                    .if((0, codegen_1._) `typeof ${indices}[${item}] == \"number\"`, () => {\n                    gen.assign(j, (0, codegen_1._) `${indices}[${item}]`);\n                    cxt.error();\n                    gen.assign(valid, false).break();\n                })\n                    .code((0, codegen_1._) `${indices}[${item}] = ${i}`);\n            });\n        }\n        function loopN2(i, j) {\n            const eql = (0, util_1.useFunc)(gen, equal_1.default);\n            const outer = gen.name(\"outer\");\n            gen.label(outer).for((0, codegen_1._) `;${i}--;`, () => gen.for((0, codegen_1._) `${j} = ${i}; ${j}--;`, () => gen.if((0, codegen_1._) `${eql}(${data}[${i}], ${data}[${j}])`, () => {\n                cxt.error();\n                gen.assign(valid, false).break(outer);\n            })));\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=uniqueItems.js.map","'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true,\n  if: true,\n  then: true,\n  else: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  $defs: true,\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n","\"use strict\";\n/* CONSTS */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NOOP = exports.LIMIT_FILES_DESCRIPTORS = exports.LIMIT_BASENAME_LENGTH = exports.IS_USER_ROOT = exports.IS_POSIX = exports.DEFAULT_TIMEOUT_SYNC = exports.DEFAULT_TIMEOUT_ASYNC = exports.DEFAULT_WRITE_OPTIONS = exports.DEFAULT_READ_OPTIONS = exports.DEFAULT_FOLDER_MODE = exports.DEFAULT_FILE_MODE = exports.DEFAULT_ENCODING = void 0;\nconst DEFAULT_ENCODING = 'utf8';\nexports.DEFAULT_ENCODING = DEFAULT_ENCODING;\nconst DEFAULT_FILE_MODE = 0o666;\nexports.DEFAULT_FILE_MODE = DEFAULT_FILE_MODE;\nconst DEFAULT_FOLDER_MODE = 0o777;\nexports.DEFAULT_FOLDER_MODE = DEFAULT_FOLDER_MODE;\nconst DEFAULT_READ_OPTIONS = {};\nexports.DEFAULT_READ_OPTIONS = DEFAULT_READ_OPTIONS;\nconst DEFAULT_WRITE_OPTIONS = {};\nexports.DEFAULT_WRITE_OPTIONS = DEFAULT_WRITE_OPTIONS;\nconst DEFAULT_TIMEOUT_ASYNC = 5000;\nexports.DEFAULT_TIMEOUT_ASYNC = DEFAULT_TIMEOUT_ASYNC;\nconst DEFAULT_TIMEOUT_SYNC = 100;\nexports.DEFAULT_TIMEOUT_SYNC = DEFAULT_TIMEOUT_SYNC;\nconst IS_POSIX = !!process.getuid;\nexports.IS_POSIX = IS_POSIX;\nconst IS_USER_ROOT = process.getuid ? !process.getuid() : false;\nexports.IS_USER_ROOT = IS_USER_ROOT;\nconst LIMIT_BASENAME_LENGTH = 128; //TODO: fetch the real limit from the filesystem //TODO: fetch the whole-path length limit too\nexports.LIMIT_BASENAME_LENGTH = LIMIT_BASENAME_LENGTH;\nconst LIMIT_FILES_DESCRIPTORS = 10000; //TODO: fetch the real limit from the filesystem\nexports.LIMIT_FILES_DESCRIPTORS = LIMIT_FILES_DESCRIPTORS;\nconst NOOP = () => { };\nexports.NOOP = NOOP;\n","\"use strict\";\n/* IMPORT */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.writeFileSync = exports.writeFile = exports.readFileSync = exports.readFile = void 0;\nconst path = require(\"path\");\nconst consts_1 = require(\"./consts\");\nconst fs_1 = require(\"./utils/fs\");\nconst lang_1 = require(\"./utils/lang\");\nconst scheduler_1 = require(\"./utils/scheduler\");\nconst temp_1 = require(\"./utils/temp\");\nfunction readFile(filePath, options = consts_1.DEFAULT_READ_OPTIONS) {\n    var _a;\n    if (lang_1.default.isString(options))\n        return readFile(filePath, { encoding: options });\n    const timeout = Date.now() + ((_a = options.timeout) !== null && _a !== void 0 ? _a : consts_1.DEFAULT_TIMEOUT_ASYNC);\n    return fs_1.default.readFileRetry(timeout)(filePath, options);\n}\nexports.readFile = readFile;\n;\nfunction readFileSync(filePath, options = consts_1.DEFAULT_READ_OPTIONS) {\n    var _a;\n    if (lang_1.default.isString(options))\n        return readFileSync(filePath, { encoding: options });\n    const timeout = Date.now() + ((_a = options.timeout) !== null && _a !== void 0 ? _a : consts_1.DEFAULT_TIMEOUT_SYNC);\n    return fs_1.default.readFileSyncRetry(timeout)(filePath, options);\n}\nexports.readFileSync = readFileSync;\n;\nconst writeFile = (filePath, data, options, callback) => {\n    if (lang_1.default.isFunction(options))\n        return writeFile(filePath, data, consts_1.DEFAULT_WRITE_OPTIONS, options);\n    const promise = writeFileAsync(filePath, data, options);\n    if (callback)\n        promise.then(callback, callback);\n    return promise;\n};\nexports.writeFile = writeFile;\nconst writeFileAsync = async (filePath, data, options = consts_1.DEFAULT_WRITE_OPTIONS) => {\n    var _a;\n    if (lang_1.default.isString(options))\n        return writeFileAsync(filePath, data, { encoding: options });\n    const timeout = Date.now() + ((_a = options.timeout) !== null && _a !== void 0 ? _a : consts_1.DEFAULT_TIMEOUT_ASYNC);\n    let schedulerCustomDisposer = null, schedulerDisposer = null, tempDisposer = null, tempPath = null, fd = null;\n    try {\n        if (options.schedule)\n            schedulerCustomDisposer = await options.schedule(filePath);\n        schedulerDisposer = await scheduler_1.default.schedule(filePath);\n        filePath = await fs_1.default.realpathAttempt(filePath) || filePath;\n        [tempPath, tempDisposer] = temp_1.default.get(filePath, options.tmpCreate || temp_1.default.create, !(options.tmpPurge === false));\n        const useStatChown = consts_1.IS_POSIX && lang_1.default.isUndefined(options.chown), useStatMode = lang_1.default.isUndefined(options.mode);\n        if (useStatChown || useStatMode) {\n            const stat = await fs_1.default.statAttempt(filePath);\n            if (stat) {\n                options = { ...options };\n                if (useStatChown)\n                    options.chown = { uid: stat.uid, gid: stat.gid };\n                if (useStatMode)\n                    options.mode = stat.mode;\n            }\n        }\n        const parentPath = path.dirname(filePath);\n        await fs_1.default.mkdirAttempt(parentPath, {\n            mode: consts_1.DEFAULT_FOLDER_MODE,\n            recursive: true\n        });\n        fd = await fs_1.default.openRetry(timeout)(tempPath, 'w', options.mode || consts_1.DEFAULT_FILE_MODE);\n        if (options.tmpCreated)\n            options.tmpCreated(tempPath);\n        if (lang_1.default.isString(data)) {\n            await fs_1.default.writeRetry(timeout)(fd, data, 0, options.encoding || consts_1.DEFAULT_ENCODING);\n        }\n        else if (!lang_1.default.isUndefined(data)) {\n            await fs_1.default.writeRetry(timeout)(fd, data, 0, data.length, 0);\n        }\n        if (options.fsync !== false) {\n            if (options.fsyncWait !== false) {\n                await fs_1.default.fsyncRetry(timeout)(fd);\n            }\n            else {\n                fs_1.default.fsyncAttempt(fd);\n            }\n        }\n        await fs_1.default.closeRetry(timeout)(fd);\n        fd = null;\n        if (options.chown)\n            await fs_1.default.chownAttempt(tempPath, options.chown.uid, options.chown.gid);\n        if (options.mode)\n            await fs_1.default.chmodAttempt(tempPath, options.mode);\n        try {\n            await fs_1.default.renameRetry(timeout)(tempPath, filePath);\n        }\n        catch (error) {\n            if (error.code !== 'ENAMETOOLONG')\n                throw error;\n            await fs_1.default.renameRetry(timeout)(tempPath, temp_1.default.truncate(filePath));\n        }\n        tempDisposer();\n        tempPath = null;\n    }\n    finally {\n        if (fd)\n            await fs_1.default.closeAttempt(fd);\n        if (tempPath)\n            temp_1.default.purge(tempPath);\n        if (schedulerCustomDisposer)\n            schedulerCustomDisposer();\n        if (schedulerDisposer)\n            schedulerDisposer();\n    }\n};\nconst writeFileSync = (filePath, data, options = consts_1.DEFAULT_WRITE_OPTIONS) => {\n    var _a;\n    if (lang_1.default.isString(options))\n        return writeFileSync(filePath, data, { encoding: options });\n    const timeout = Date.now() + ((_a = options.timeout) !== null && _a !== void 0 ? _a : consts_1.DEFAULT_TIMEOUT_SYNC);\n    let tempDisposer = null, tempPath = null, fd = null;\n    try {\n        filePath = fs_1.default.realpathSyncAttempt(filePath) || filePath;\n        [tempPath, tempDisposer] = temp_1.default.get(filePath, options.tmpCreate || temp_1.default.create, !(options.tmpPurge === false));\n        const useStatChown = consts_1.IS_POSIX && lang_1.default.isUndefined(options.chown), useStatMode = lang_1.default.isUndefined(options.mode);\n        if (useStatChown || useStatMode) {\n            const stat = fs_1.default.statSyncAttempt(filePath);\n            if (stat) {\n                options = { ...options };\n                if (useStatChown)\n                    options.chown = { uid: stat.uid, gid: stat.gid };\n                if (useStatMode)\n                    options.mode = stat.mode;\n            }\n        }\n        const parentPath = path.dirname(filePath);\n        fs_1.default.mkdirSyncAttempt(parentPath, {\n            mode: consts_1.DEFAULT_FOLDER_MODE,\n            recursive: true\n        });\n        fd = fs_1.default.openSyncRetry(timeout)(tempPath, 'w', options.mode || consts_1.DEFAULT_FILE_MODE);\n        if (options.tmpCreated)\n            options.tmpCreated(tempPath);\n        if (lang_1.default.isString(data)) {\n            fs_1.default.writeSyncRetry(timeout)(fd, data, 0, options.encoding || consts_1.DEFAULT_ENCODING);\n        }\n        else if (!lang_1.default.isUndefined(data)) {\n            fs_1.default.writeSyncRetry(timeout)(fd, data, 0, data.length, 0);\n        }\n        if (options.fsync !== false) {\n            if (options.fsyncWait !== false) {\n                fs_1.default.fsyncSyncRetry(timeout)(fd);\n            }\n            else {\n                fs_1.default.fsyncAttempt(fd);\n            }\n        }\n        fs_1.default.closeSyncRetry(timeout)(fd);\n        fd = null;\n        if (options.chown)\n            fs_1.default.chownSyncAttempt(tempPath, options.chown.uid, options.chown.gid);\n        if (options.mode)\n            fs_1.default.chmodSyncAttempt(tempPath, options.mode);\n        try {\n            fs_1.default.renameSyncRetry(timeout)(tempPath, filePath);\n        }\n        catch (error) {\n            if (error.code !== 'ENAMETOOLONG')\n                throw error;\n            fs_1.default.renameSyncRetry(timeout)(tempPath, temp_1.default.truncate(filePath));\n        }\n        tempDisposer();\n        tempPath = null;\n    }\n    finally {\n        if (fd)\n            fs_1.default.closeSyncAttempt(fd);\n        if (tempPath)\n            temp_1.default.purge(tempPath);\n    }\n};\nexports.writeFileSync = writeFileSync;\n","\"use strict\";\n/* IMPORT */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.attemptifySync = exports.attemptifyAsync = void 0;\nconst consts_1 = require(\"../consts\");\n/* ATTEMPTIFY */\n//TODO: Maybe publish this as a standalone package\n//FIXME: The type castings here aren't exactly correct\nconst attemptifyAsync = (fn, onError = consts_1.NOOP) => {\n    return function () {\n        return fn.apply(undefined, arguments).catch(onError);\n    };\n};\nexports.attemptifyAsync = attemptifyAsync;\nconst attemptifySync = (fn, onError = consts_1.NOOP) => {\n    return function () {\n        try {\n            return fn.apply(undefined, arguments);\n        }\n        catch (error) {\n            return onError(error);\n        }\n    };\n};\nexports.attemptifySync = attemptifySync;\n","\"use strict\";\n/* IMPORT */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst fs = require(\"fs\");\nconst util_1 = require(\"util\");\nconst attemptify_1 = require(\"./attemptify\");\nconst fs_handlers_1 = require(\"./fs_handlers\");\nconst retryify_1 = require(\"./retryify\");\n/* FS */\nconst FS = {\n    chmodAttempt: attemptify_1.attemptifyAsync(util_1.promisify(fs.chmod), fs_handlers_1.default.onChangeError),\n    chownAttempt: attemptify_1.attemptifyAsync(util_1.promisify(fs.chown), fs_handlers_1.default.onChangeError),\n    closeAttempt: attemptify_1.attemptifyAsync(util_1.promisify(fs.close)),\n    fsyncAttempt: attemptify_1.attemptifyAsync(util_1.promisify(fs.fsync)),\n    mkdirAttempt: attemptify_1.attemptifyAsync(util_1.promisify(fs.mkdir)),\n    realpathAttempt: attemptify_1.attemptifyAsync(util_1.promisify(fs.realpath)),\n    statAttempt: attemptify_1.attemptifyAsync(util_1.promisify(fs.stat)),\n    unlinkAttempt: attemptify_1.attemptifyAsync(util_1.promisify(fs.unlink)),\n    closeRetry: retryify_1.retryifyAsync(util_1.promisify(fs.close), fs_handlers_1.default.isRetriableError),\n    fsyncRetry: retryify_1.retryifyAsync(util_1.promisify(fs.fsync), fs_handlers_1.default.isRetriableError),\n    openRetry: retryify_1.retryifyAsync(util_1.promisify(fs.open), fs_handlers_1.default.isRetriableError),\n    readFileRetry: retryify_1.retryifyAsync(util_1.promisify(fs.readFile), fs_handlers_1.default.isRetriableError),\n    renameRetry: retryify_1.retryifyAsync(util_1.promisify(fs.rename), fs_handlers_1.default.isRetriableError),\n    statRetry: retryify_1.retryifyAsync(util_1.promisify(fs.stat), fs_handlers_1.default.isRetriableError),\n    writeRetry: retryify_1.retryifyAsync(util_1.promisify(fs.write), fs_handlers_1.default.isRetriableError),\n    chmodSyncAttempt: attemptify_1.attemptifySync(fs.chmodSync, fs_handlers_1.default.onChangeError),\n    chownSyncAttempt: attemptify_1.attemptifySync(fs.chownSync, fs_handlers_1.default.onChangeError),\n    closeSyncAttempt: attemptify_1.attemptifySync(fs.closeSync),\n    mkdirSyncAttempt: attemptify_1.attemptifySync(fs.mkdirSync),\n    realpathSyncAttempt: attemptify_1.attemptifySync(fs.realpathSync),\n    statSyncAttempt: attemptify_1.attemptifySync(fs.statSync),\n    unlinkSyncAttempt: attemptify_1.attemptifySync(fs.unlinkSync),\n    closeSyncRetry: retryify_1.retryifySync(fs.closeSync, fs_handlers_1.default.isRetriableError),\n    fsyncSyncRetry: retryify_1.retryifySync(fs.fsyncSync, fs_handlers_1.default.isRetriableError),\n    openSyncRetry: retryify_1.retryifySync(fs.openSync, fs_handlers_1.default.isRetriableError),\n    readFileSyncRetry: retryify_1.retryifySync(fs.readFileSync, fs_handlers_1.default.isRetriableError),\n    renameSyncRetry: retryify_1.retryifySync(fs.renameSync, fs_handlers_1.default.isRetriableError),\n    statSyncRetry: retryify_1.retryifySync(fs.statSync, fs_handlers_1.default.isRetriableError),\n    writeSyncRetry: retryify_1.retryifySync(fs.writeSync, fs_handlers_1.default.isRetriableError)\n};\n/* EXPORT */\nexports.default = FS;\n","\"use strict\";\n/* IMPORT */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst consts_1 = require(\"../consts\");\n/* FS HANDLERS */\nconst Handlers = {\n    isChangeErrorOk: (error) => {\n        const { code } = error;\n        if (code === 'ENOSYS')\n            return true;\n        if (!consts_1.IS_USER_ROOT && (code === 'EINVAL' || code === 'EPERM'))\n            return true;\n        return false;\n    },\n    isRetriableError: (error) => {\n        const { code } = error;\n        if (code === 'EMFILE' || code === 'ENFILE' || code === 'EAGAIN' || code === 'EBUSY' || code === 'EACCESS' || code === 'EACCS' || code === 'EPERM')\n            return true;\n        return false;\n    },\n    onChangeError: (error) => {\n        if (Handlers.isChangeErrorOk(error))\n            return;\n        throw error;\n    }\n};\n/* EXPORT */\nexports.default = Handlers;\n","\"use strict\";\n/* LANG */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Lang = {\n    isFunction: (x) => {\n        return typeof x === 'function';\n    },\n    isString: (x) => {\n        return typeof x === 'string';\n    },\n    isUndefined: (x) => {\n        return typeof x === 'undefined';\n    }\n};\n/* EXPORT */\nexports.default = Lang;\n","\"use strict\";\n/* IMPORT */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.retryifySync = exports.retryifyAsync = void 0;\nconst retryify_queue_1 = require(\"./retryify_queue\");\n/* RETRYIFY */\nconst retryifyAsync = (fn, isRetriableError) => {\n    return function (timestamp) {\n        return function attempt() {\n            return retryify_queue_1.default.schedule().then(cleanup => {\n                return fn.apply(undefined, arguments).then(result => {\n                    cleanup();\n                    return result;\n                }, error => {\n                    cleanup();\n                    if (Date.now() >= timestamp)\n                        throw error;\n                    if (isRetriableError(error)) {\n                        const delay = Math.round(100 + (400 * Math.random())), delayPromise = new Promise(resolve => setTimeout(resolve, delay));\n                        return delayPromise.then(() => attempt.apply(undefined, arguments));\n                    }\n                    throw error;\n                });\n            });\n        };\n    };\n};\nexports.retryifyAsync = retryifyAsync;\nconst retryifySync = (fn, isRetriableError) => {\n    return function (timestamp) {\n        return function attempt() {\n            try {\n                return fn.apply(undefined, arguments);\n            }\n            catch (error) {\n                if (Date.now() > timestamp)\n                    throw error;\n                if (isRetriableError(error))\n                    return attempt.apply(undefined, arguments);\n                throw error;\n            }\n        };\n    };\n};\nexports.retryifySync = retryifySync;\n","\"use strict\";\n/* IMPORT */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst consts_1 = require(\"../consts\");\n/* RETRYIFY QUEUE */\nconst RetryfyQueue = {\n    interval: 25,\n    intervalId: undefined,\n    limit: consts_1.LIMIT_FILES_DESCRIPTORS,\n    queueActive: new Set(),\n    queueWaiting: new Set(),\n    init: () => {\n        if (RetryfyQueue.intervalId)\n            return;\n        RetryfyQueue.intervalId = setInterval(RetryfyQueue.tick, RetryfyQueue.interval);\n    },\n    reset: () => {\n        if (!RetryfyQueue.intervalId)\n            return;\n        clearInterval(RetryfyQueue.intervalId);\n        delete RetryfyQueue.intervalId;\n    },\n    add: (fn) => {\n        RetryfyQueue.queueWaiting.add(fn);\n        if (RetryfyQueue.queueActive.size < (RetryfyQueue.limit / 2)) { // Active queue not under preassure, executing immediately\n            RetryfyQueue.tick();\n        }\n        else {\n            RetryfyQueue.init();\n        }\n    },\n    remove: (fn) => {\n        RetryfyQueue.queueWaiting.delete(fn);\n        RetryfyQueue.queueActive.delete(fn);\n    },\n    schedule: () => {\n        return new Promise(resolve => {\n            const cleanup = () => RetryfyQueue.remove(resolver);\n            const resolver = () => resolve(cleanup);\n            RetryfyQueue.add(resolver);\n        });\n    },\n    tick: () => {\n        if (RetryfyQueue.queueActive.size >= RetryfyQueue.limit)\n            return;\n        if (!RetryfyQueue.queueWaiting.size)\n            return RetryfyQueue.reset();\n        for (const fn of RetryfyQueue.queueWaiting) {\n            if (RetryfyQueue.queueActive.size >= RetryfyQueue.limit)\n                break;\n            RetryfyQueue.queueWaiting.delete(fn);\n            RetryfyQueue.queueActive.add(fn);\n            fn();\n        }\n    }\n};\n/* EXPORT */\nexports.default = RetryfyQueue;\n","\"use strict\";\n/* IMPORT */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* VARIABLES */\nconst Queues = {};\n/* SCHEDULER */\n//TODO: Maybe publish this as a standalone package\nconst Scheduler = {\n    next: (id) => {\n        const queue = Queues[id];\n        if (!queue)\n            return;\n        queue.shift();\n        const job = queue[0];\n        if (job) {\n            job(() => Scheduler.next(id));\n        }\n        else {\n            delete Queues[id];\n        }\n    },\n    schedule: (id) => {\n        return new Promise(resolve => {\n            let queue = Queues[id];\n            if (!queue)\n                queue = Queues[id] = [];\n            queue.push(resolve);\n            if (queue.length > 1)\n                return;\n            resolve(() => Scheduler.next(id));\n        });\n    }\n};\n/* EXPORT */\nexports.default = Scheduler;\n","\"use strict\";\n/* IMPORT */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst path = require(\"path\");\nconst consts_1 = require(\"../consts\");\nconst fs_1 = require(\"./fs\");\n/* TEMP */\n//TODO: Maybe publish this as a standalone package\nconst Temp = {\n    store: {},\n    create: (filePath) => {\n        const randomness = `000000${Math.floor(Math.random() * 16777215).toString(16)}`.slice(-6), // 6 random-enough hex characters\n        timestamp = Date.now().toString().slice(-10), // 10 precise timestamp digits\n        prefix = 'tmp-', suffix = `.${prefix}${timestamp}${randomness}`, tempPath = `${filePath}${suffix}`;\n        return tempPath;\n    },\n    get: (filePath, creator, purge = true) => {\n        const tempPath = Temp.truncate(creator(filePath));\n        if (tempPath in Temp.store)\n            return Temp.get(filePath, creator, purge); // Collision found, try again\n        Temp.store[tempPath] = purge;\n        const disposer = () => delete Temp.store[tempPath];\n        return [tempPath, disposer];\n    },\n    purge: (filePath) => {\n        if (!Temp.store[filePath])\n            return;\n        delete Temp.store[filePath];\n        fs_1.default.unlinkAttempt(filePath);\n    },\n    purgeSync: (filePath) => {\n        if (!Temp.store[filePath])\n            return;\n        delete Temp.store[filePath];\n        fs_1.default.unlinkSyncAttempt(filePath);\n    },\n    purgeSyncAll: () => {\n        for (const filePath in Temp.store) {\n            Temp.purgeSync(filePath);\n        }\n    },\n    truncate: (filePath) => {\n        const basename = path.basename(filePath);\n        if (basename.length <= consts_1.LIMIT_BASENAME_LENGTH)\n            return filePath; //FIXME: Rough and quick attempt at detecting ok lengths\n        const truncable = /^(\\.?)(.*?)((?:\\.[^.]+)?(?:\\.tmp-\\d{10}[a-f0-9]{6})?)$/.exec(basename);\n        if (!truncable)\n            return filePath; //FIXME: No truncable part detected, can't really do much without also changing the parent path, which is unsafe, hoping for the best here\n        const truncationLength = basename.length - consts_1.LIMIT_BASENAME_LENGTH;\n        return `${filePath.slice(0, -basename.length)}${truncable[1]}${truncable[2].slice(0, -truncationLength)}${truncable[3]}`; //FIXME: The truncable part might be shorter than needed here\n    }\n};\n/* INIT */\nprocess.on('exit', Temp.purgeSyncAll); // Ensuring purgeable temp files are purged on exit\n/* EXPORT */\nexports.default = Temp;\n","\"use strict\";\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _a, _b;\nvar _Conf_validator, _Conf_encryptionKey, _Conf_options, _Conf_defaultValues;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"util\");\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst crypto = require(\"crypto\");\nconst assert = require(\"assert\");\nconst events_1 = require(\"events\");\nconst dotProp = require(\"dot-prop\");\nconst pkgUp = require(\"pkg-up\");\nconst envPaths = require(\"env-paths\");\nconst atomically = require(\"atomically\");\nconst ajv_1 = require(\"ajv\");\nconst ajv_formats_1 = require(\"ajv-formats\");\nconst debounceFn = require(\"debounce-fn\");\nconst semver = require(\"semver\");\nconst onetime = require(\"onetime\");\nconst encryptionAlgorithm = 'aes-256-cbc';\nconst createPlainObject = () => {\n    return Object.create(null);\n};\nconst isExist = (data) => {\n    return data !== undefined && data !== null;\n};\nlet parentDir = '';\ntry {\n    // Prevent caching of this module so module.parent is always accurate.\n    // Note: This trick won't work with ESM or inside a webworker\n    // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n    delete require.cache[__filename];\n    parentDir = path.dirname((_b = (_a = module.parent) === null || _a === void 0 ? void 0 : _a.filename) !== null && _b !== void 0 ? _b : '.');\n}\ncatch (_c) { }\nconst checkValueType = (key, value) => {\n    const nonJsonTypes = new Set([\n        'undefined',\n        'symbol',\n        'function'\n    ]);\n    const type = typeof value;\n    if (nonJsonTypes.has(type)) {\n        throw new TypeError(`Setting a value of type \\`${type}\\` for key \\`${key}\\` is not allowed as it's not supported by JSON`);\n    }\n};\nconst INTERNAL_KEY = '__internal__';\nconst MIGRATION_KEY = `${INTERNAL_KEY}.migrations.version`;\nclass Conf {\n    constructor(partialOptions = {}) {\n        var _a;\n        _Conf_validator.set(this, void 0);\n        _Conf_encryptionKey.set(this, void 0);\n        _Conf_options.set(this, void 0);\n        _Conf_defaultValues.set(this, {});\n        this._deserialize = value => JSON.parse(value);\n        this._serialize = value => JSON.stringify(value, undefined, '\\t');\n        const options = {\n            configName: 'config',\n            fileExtension: 'json',\n            projectSuffix: 'nodejs',\n            clearInvalidConfig: false,\n            accessPropertiesByDotNotation: true,\n            configFileMode: 0o666,\n            ...partialOptions\n        };\n        const getPackageData = onetime(() => {\n            const packagePath = pkgUp.sync({ cwd: parentDir });\n            // Can't use `require` because of Webpack being annoying:\n            // https://github.com/webpack/webpack/issues/196\n            const packageData = packagePath && JSON.parse(fs.readFileSync(packagePath, 'utf8'));\n            return packageData !== null && packageData !== void 0 ? packageData : {};\n        });\n        if (!options.cwd) {\n            if (!options.projectName) {\n                options.projectName = getPackageData().name;\n            }\n            if (!options.projectName) {\n                throw new Error('Project name could not be inferred. Please specify the `projectName` option.');\n            }\n            options.cwd = envPaths(options.projectName, { suffix: options.projectSuffix }).config;\n        }\n        __classPrivateFieldSet(this, _Conf_options, options, \"f\");\n        if (options.schema) {\n            if (typeof options.schema !== 'object') {\n                throw new TypeError('The `schema` option must be an object.');\n            }\n            const ajv = new ajv_1.default({\n                allErrors: true,\n                useDefaults: true\n            });\n            (0, ajv_formats_1.default)(ajv);\n            const schema = {\n                type: 'object',\n                properties: options.schema\n            };\n            __classPrivateFieldSet(this, _Conf_validator, ajv.compile(schema), \"f\");\n            for (const [key, value] of Object.entries(options.schema)) {\n                if (value === null || value === void 0 ? void 0 : value.default) {\n                    __classPrivateFieldGet(this, _Conf_defaultValues, \"f\")[key] = value.default;\n                }\n            }\n        }\n        if (options.defaults) {\n            __classPrivateFieldSet(this, _Conf_defaultValues, {\n                ...__classPrivateFieldGet(this, _Conf_defaultValues, \"f\"),\n                ...options.defaults\n            }, \"f\");\n        }\n        if (options.serialize) {\n            this._serialize = options.serialize;\n        }\n        if (options.deserialize) {\n            this._deserialize = options.deserialize;\n        }\n        this.events = new events_1.EventEmitter();\n        __classPrivateFieldSet(this, _Conf_encryptionKey, options.encryptionKey, \"f\");\n        const fileExtension = options.fileExtension ? `.${options.fileExtension}` : '';\n        this.path = path.resolve(options.cwd, `${(_a = options.configName) !== null && _a !== void 0 ? _a : 'config'}${fileExtension}`);\n        const fileStore = this.store;\n        const store = Object.assign(createPlainObject(), options.defaults, fileStore);\n        this._validate(store);\n        try {\n            assert.deepEqual(fileStore, store);\n        }\n        catch (_b) {\n            this.store = store;\n        }\n        if (options.watch) {\n            this._watch();\n        }\n        if (options.migrations) {\n            if (!options.projectVersion) {\n                options.projectVersion = getPackageData().version;\n            }\n            if (!options.projectVersion) {\n                throw new Error('Project version could not be inferred. Please specify the `projectVersion` option.');\n            }\n            this._migrate(options.migrations, options.projectVersion, options.beforeEachMigration);\n        }\n    }\n    get(key, defaultValue) {\n        if (__classPrivateFieldGet(this, _Conf_options, \"f\").accessPropertiesByDotNotation) {\n            return this._get(key, defaultValue);\n        }\n        const { store } = this;\n        return key in store ? store[key] : defaultValue;\n    }\n    set(key, value) {\n        if (typeof key !== 'string' && typeof key !== 'object') {\n            throw new TypeError(`Expected \\`key\\` to be of type \\`string\\` or \\`object\\`, got ${typeof key}`);\n        }\n        if (typeof key !== 'object' && value === undefined) {\n            throw new TypeError('Use `delete()` to clear values');\n        }\n        if (this._containsReservedKey(key)) {\n            throw new TypeError(`Please don't use the ${INTERNAL_KEY} key, as it's used to manage this module internal operations.`);\n        }\n        const { store } = this;\n        const set = (key, value) => {\n            checkValueType(key, value);\n            if (__classPrivateFieldGet(this, _Conf_options, \"f\").accessPropertiesByDotNotation) {\n                dotProp.set(store, key, value);\n            }\n            else {\n                store[key] = value;\n            }\n        };\n        if (typeof key === 'object') {\n            const object = key;\n            for (const [key, value] of Object.entries(object)) {\n                set(key, value);\n            }\n        }\n        else {\n            set(key, value);\n        }\n        this.store = store;\n    }\n    /**\n    Check if an item exists.\n\n    @param key - The key of the item to check.\n    */\n    has(key) {\n        if (__classPrivateFieldGet(this, _Conf_options, \"f\").accessPropertiesByDotNotation) {\n            return dotProp.has(this.store, key);\n        }\n        return key in this.store;\n    }\n    /**\n    Reset items to their default values, as defined by the `defaults` or `schema` option.\n\n    @see `clear()` to reset all items.\n\n    @param keys - The keys of the items to reset.\n    */\n    reset(...keys) {\n        for (const key of keys) {\n            if (isExist(__classPrivateFieldGet(this, _Conf_defaultValues, \"f\")[key])) {\n                this.set(key, __classPrivateFieldGet(this, _Conf_defaultValues, \"f\")[key]);\n            }\n        }\n    }\n    /**\n    Delete an item.\n\n    @param key - The key of the item to delete.\n    */\n    delete(key) {\n        const { store } = this;\n        if (__classPrivateFieldGet(this, _Conf_options, \"f\").accessPropertiesByDotNotation) {\n            dotProp.delete(store, key);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n            delete store[key];\n        }\n        this.store = store;\n    }\n    /**\n    Delete all items.\n\n    This resets known items to their default values, if defined by the `defaults` or `schema` option.\n    */\n    clear() {\n        this.store = createPlainObject();\n        for (const key of Object.keys(__classPrivateFieldGet(this, _Conf_defaultValues, \"f\"))) {\n            this.reset(key);\n        }\n    }\n    /**\n    Watches the given `key`, calling `callback` on any changes.\n\n    @param key - The key wo watch.\n    @param callback - A callback function that is called on any changes. When a `key` is first set `oldValue` will be `undefined`, and when a key is deleted `newValue` will be `undefined`.\n    @returns A function, that when called, will unsubscribe.\n    */\n    onDidChange(key, callback) {\n        if (typeof key !== 'string') {\n            throw new TypeError(`Expected \\`key\\` to be of type \\`string\\`, got ${typeof key}`);\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(`Expected \\`callback\\` to be of type \\`function\\`, got ${typeof callback}`);\n        }\n        return this._handleChange(() => this.get(key), callback);\n    }\n    /**\n    Watches the whole config object, calling `callback` on any changes.\n\n    @param callback - A callback function that is called on any changes. When a `key` is first set `oldValue` will be `undefined`, and when a key is deleted `newValue` will be `undefined`.\n    @returns A function, that when called, will unsubscribe.\n    */\n    onDidAnyChange(callback) {\n        if (typeof callback !== 'function') {\n            throw new TypeError(`Expected \\`callback\\` to be of type \\`function\\`, got ${typeof callback}`);\n        }\n        return this._handleChange(() => this.store, callback);\n    }\n    get size() {\n        return Object.keys(this.store).length;\n    }\n    get store() {\n        try {\n            const data = fs.readFileSync(this.path, __classPrivateFieldGet(this, _Conf_encryptionKey, \"f\") ? null : 'utf8');\n            const dataString = this._encryptData(data);\n            const deserializedData = this._deserialize(dataString);\n            this._validate(deserializedData);\n            return Object.assign(createPlainObject(), deserializedData);\n        }\n        catch (error) {\n            if ((error === null || error === void 0 ? void 0 : error.code) === 'ENOENT') {\n                this._ensureDirectory();\n                return createPlainObject();\n            }\n            if (__classPrivateFieldGet(this, _Conf_options, \"f\").clearInvalidConfig && error.name === 'SyntaxError') {\n                return createPlainObject();\n            }\n            throw error;\n        }\n    }\n    set store(value) {\n        this._ensureDirectory();\n        this._validate(value);\n        this._write(value);\n        this.events.emit('change');\n    }\n    *[(_Conf_validator = new WeakMap(), _Conf_encryptionKey = new WeakMap(), _Conf_options = new WeakMap(), _Conf_defaultValues = new WeakMap(), Symbol.iterator)]() {\n        for (const [key, value] of Object.entries(this.store)) {\n            yield [key, value];\n        }\n    }\n    _encryptData(data) {\n        if (!__classPrivateFieldGet(this, _Conf_encryptionKey, \"f\")) {\n            return data.toString();\n        }\n        try {\n            // Check if an initialization vector has been used to encrypt the data\n            if (__classPrivateFieldGet(this, _Conf_encryptionKey, \"f\")) {\n                try {\n                    if (data.slice(16, 17).toString() === ':') {\n                        const initializationVector = data.slice(0, 16);\n                        const password = crypto.pbkdf2Sync(__classPrivateFieldGet(this, _Conf_encryptionKey, \"f\"), initializationVector.toString(), 10000, 32, 'sha512');\n                        const decipher = crypto.createDecipheriv(encryptionAlgorithm, password, initializationVector);\n                        data = Buffer.concat([decipher.update(Buffer.from(data.slice(17))), decipher.final()]).toString('utf8');\n                    }\n                    else {\n                        // TODO: Remove this in the next major version.\n                        const decipher = crypto.createDecipher(encryptionAlgorithm, __classPrivateFieldGet(this, _Conf_encryptionKey, \"f\"));\n                        data = Buffer.concat([decipher.update(Buffer.from(data)), decipher.final()]).toString('utf8');\n                    }\n                }\n                catch (_a) { }\n            }\n        }\n        catch (_b) { }\n        return data.toString();\n    }\n    _handleChange(getter, callback) {\n        let currentValue = getter();\n        const onChange = () => {\n            const oldValue = currentValue;\n            const newValue = getter();\n            if ((0, util_1.isDeepStrictEqual)(newValue, oldValue)) {\n                return;\n            }\n            currentValue = newValue;\n            callback.call(this, newValue, oldValue);\n        };\n        this.events.on('change', onChange);\n        return () => this.events.removeListener('change', onChange);\n    }\n    _validate(data) {\n        if (!__classPrivateFieldGet(this, _Conf_validator, \"f\")) {\n            return;\n        }\n        const valid = __classPrivateFieldGet(this, _Conf_validator, \"f\").call(this, data);\n        if (valid || !__classPrivateFieldGet(this, _Conf_validator, \"f\").errors) {\n            return;\n        }\n        const errors = __classPrivateFieldGet(this, _Conf_validator, \"f\").errors\n            .map(({ instancePath, message = '' }) => `\\`${instancePath.slice(1)}\\` ${message}`);\n        throw new Error('Config schema violation: ' + errors.join('; '));\n    }\n    _ensureDirectory() {\n        // Ensure the directory exists as it could have been deleted in the meantime.\n        fs.mkdirSync(path.dirname(this.path), { recursive: true });\n    }\n    _write(value) {\n        let data = this._serialize(value);\n        if (__classPrivateFieldGet(this, _Conf_encryptionKey, \"f\")) {\n            const initializationVector = crypto.randomBytes(16);\n            const password = crypto.pbkdf2Sync(__classPrivateFieldGet(this, _Conf_encryptionKey, \"f\"), initializationVector.toString(), 10000, 32, 'sha512');\n            const cipher = crypto.createCipheriv(encryptionAlgorithm, password, initializationVector);\n            data = Buffer.concat([initializationVector, Buffer.from(':'), cipher.update(Buffer.from(data)), cipher.final()]);\n        }\n        // Temporary workaround for Conf being packaged in a Ubuntu Snap app.\n        // See https://github.com/sindresorhus/conf/pull/82\n        if (process.env.SNAP) {\n            fs.writeFileSync(this.path, data, { mode: __classPrivateFieldGet(this, _Conf_options, \"f\").configFileMode });\n        }\n        else {\n            try {\n                atomically.writeFileSync(this.path, data, { mode: __classPrivateFieldGet(this, _Conf_options, \"f\").configFileMode });\n            }\n            catch (error) {\n                // Fix for https://github.com/sindresorhus/electron-store/issues/106\n                // Sometimes on Windows, we will get an EXDEV error when atomic writing\n                // (even though to the same directory), so we fall back to non atomic write\n                if ((error === null || error === void 0 ? void 0 : error.code) === 'EXDEV') {\n                    fs.writeFileSync(this.path, data, { mode: __classPrivateFieldGet(this, _Conf_options, \"f\").configFileMode });\n                    return;\n                }\n                throw error;\n            }\n        }\n    }\n    _watch() {\n        this._ensureDirectory();\n        if (!fs.existsSync(this.path)) {\n            this._write(createPlainObject());\n        }\n        if (process.platform === 'win32') {\n            fs.watch(this.path, { persistent: false }, debounceFn(() => {\n                // On Linux and Windows, writing to the config file emits a `rename` event, so we skip checking the event type.\n                this.events.emit('change');\n            }, { wait: 100 }));\n        }\n        else {\n            fs.watchFile(this.path, { persistent: false }, debounceFn(() => {\n                this.events.emit('change');\n            }, { wait: 5000 }));\n        }\n    }\n    _migrate(migrations, versionToMigrate, beforeEachMigration) {\n        let previousMigratedVersion = this._get(MIGRATION_KEY, '0.0.0');\n        const newerVersions = Object.keys(migrations)\n            .filter(candidateVersion => this._shouldPerformMigration(candidateVersion, previousMigratedVersion, versionToMigrate));\n        let storeBackup = { ...this.store };\n        for (const version of newerVersions) {\n            try {\n                if (beforeEachMigration) {\n                    beforeEachMigration(this, {\n                        fromVersion: previousMigratedVersion,\n                        toVersion: version,\n                        finalVersion: versionToMigrate,\n                        versions: newerVersions\n                    });\n                }\n                const migration = migrations[version];\n                migration(this);\n                this._set(MIGRATION_KEY, version);\n                previousMigratedVersion = version;\n                storeBackup = { ...this.store };\n            }\n            catch (error) {\n                this.store = storeBackup;\n                throw new Error(`Something went wrong during the migration! Changes applied to the store until this failed migration will be restored. ${error}`);\n            }\n        }\n        if (this._isVersionInRangeFormat(previousMigratedVersion) || !semver.eq(previousMigratedVersion, versionToMigrate)) {\n            this._set(MIGRATION_KEY, versionToMigrate);\n        }\n    }\n    _containsReservedKey(key) {\n        if (typeof key === 'object') {\n            const firsKey = Object.keys(key)[0];\n            if (firsKey === INTERNAL_KEY) {\n                return true;\n            }\n        }\n        if (typeof key !== 'string') {\n            return false;\n        }\n        if (__classPrivateFieldGet(this, _Conf_options, \"f\").accessPropertiesByDotNotation) {\n            if (key.startsWith(`${INTERNAL_KEY}.`)) {\n                return true;\n            }\n            return false;\n        }\n        return false;\n    }\n    _isVersionInRangeFormat(version) {\n        return semver.clean(version) === null;\n    }\n    _shouldPerformMigration(candidateVersion, previousMigratedVersion, versionToMigrate) {\n        if (this._isVersionInRangeFormat(candidateVersion)) {\n            if (previousMigratedVersion !== '0.0.0' && semver.satisfies(previousMigratedVersion, candidateVersion)) {\n                return false;\n            }\n            return semver.satisfies(versionToMigrate, candidateVersion);\n        }\n        if (semver.lte(candidateVersion, previousMigratedVersion)) {\n            return false;\n        }\n        if (semver.gt(candidateVersion, versionToMigrate)) {\n            return false;\n        }\n        return true;\n    }\n    _get(key, defaultValue) {\n        return dotProp.get(this.store, key, defaultValue);\n    }\n    _set(key, value) {\n        const { store } = this;\n        dotProp.set(store, key, value);\n        this.store = store;\n    }\n}\nexports.default = Conf;\n// For CommonJS default export support\nmodule.exports = Conf;\nmodule.exports.default = Conf;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MissingRefError = exports.ValidationError = exports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = exports.Ajv = void 0;\nconst core_1 = require(\"./core\");\nconst draft7_1 = require(\"./vocabularies/draft7\");\nconst discriminator_1 = require(\"./vocabularies/discriminator\");\nconst draft7MetaSchema = require(\"./refs/json-schema-draft-07.json\");\nconst META_SUPPORT_DATA = [\"/properties\"];\nconst META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\";\nclass Ajv extends core_1.default {\n    _addVocabularies() {\n        super._addVocabularies();\n        draft7_1.default.forEach((v) => this.addVocabulary(v));\n        if (this.opts.discriminator)\n            this.addKeyword(discriminator_1.default);\n    }\n    _addDefaultMetaSchema() {\n        super._addDefaultMetaSchema();\n        if (!this.opts.meta)\n            return;\n        const metaSchema = this.opts.$data\n            ? this.$dataMetaSchema(draft7MetaSchema, META_SUPPORT_DATA)\n            : draft7MetaSchema;\n        this.addMetaSchema(metaSchema, META_SCHEMA_ID, false);\n        this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID;\n    }\n    defaultMeta() {\n        return (this.opts.defaultMeta =\n            super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined));\n    }\n}\nexports.Ajv = Ajv;\nmodule.exports = exports = Ajv;\nmodule.exports.Ajv = Ajv;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Ajv;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nvar validation_error_1 = require(\"./runtime/validation_error\");\nObject.defineProperty(exports, \"ValidationError\", { enumerable: true, get: function () { return validation_error_1.default; } });\nvar ref_error_1 = require(\"./compile/ref_error\");\nObject.defineProperty(exports, \"MissingRefError\", { enumerable: true, get: function () { return ref_error_1.default; } });\n//# sourceMappingURL=ajv.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.regexpCode = exports.getEsmExportName = exports.getProperty = exports.safeStringify = exports.stringify = exports.strConcat = exports.addCodeArg = exports.str = exports._ = exports.nil = exports._Code = exports.Name = exports.IDENTIFIER = exports._CodeOrName = void 0;\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nclass _CodeOrName {\n}\nexports._CodeOrName = _CodeOrName;\nexports.IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nclass Name extends _CodeOrName {\n    constructor(s) {\n        super();\n        if (!exports.IDENTIFIER.test(s))\n            throw new Error(\"CodeGen: name must be a valid identifier\");\n        this.str = s;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        return false;\n    }\n    get names() {\n        return { [this.str]: 1 };\n    }\n}\nexports.Name = Name;\nclass _Code extends _CodeOrName {\n    constructor(code) {\n        super();\n        this._items = typeof code === \"string\" ? [code] : code;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        if (this._items.length > 1)\n            return false;\n        const item = this._items[0];\n        return item === \"\" || item === '\"\"';\n    }\n    get str() {\n        var _a;\n        return ((_a = this._str) !== null && _a !== void 0 ? _a : (this._str = this._items.reduce((s, c) => `${s}${c}`, \"\")));\n    }\n    get names() {\n        var _a;\n        return ((_a = this._names) !== null && _a !== void 0 ? _a : (this._names = this._items.reduce((names, c) => {\n            if (c instanceof Name)\n                names[c.str] = (names[c.str] || 0) + 1;\n            return names;\n        }, {})));\n    }\n}\nexports._Code = _Code;\nexports.nil = new _Code(\"\");\nfunction _(strs, ...args) {\n    const code = [strs[0]];\n    let i = 0;\n    while (i < args.length) {\n        addCodeArg(code, args[i]);\n        code.push(strs[++i]);\n    }\n    return new _Code(code);\n}\nexports._ = _;\nconst plus = new _Code(\"+\");\nfunction str(strs, ...args) {\n    const expr = [safeStringify(strs[0])];\n    let i = 0;\n    while (i < args.length) {\n        expr.push(plus);\n        addCodeArg(expr, args[i]);\n        expr.push(plus, safeStringify(strs[++i]));\n    }\n    optimize(expr);\n    return new _Code(expr);\n}\nexports.str = str;\nfunction addCodeArg(code, arg) {\n    if (arg instanceof _Code)\n        code.push(...arg._items);\n    else if (arg instanceof Name)\n        code.push(arg);\n    else\n        code.push(interpolate(arg));\n}\nexports.addCodeArg = addCodeArg;\nfunction optimize(expr) {\n    let i = 1;\n    while (i < expr.length - 1) {\n        if (expr[i] === plus) {\n            const res = mergeExprItems(expr[i - 1], expr[i + 1]);\n            if (res !== undefined) {\n                expr.splice(i - 1, 3, res);\n                continue;\n            }\n            expr[i++] = \"+\";\n        }\n        i++;\n    }\n}\nfunction mergeExprItems(a, b) {\n    if (b === '\"\"')\n        return a;\n    if (a === '\"\"')\n        return b;\n    if (typeof a == \"string\") {\n        if (b instanceof Name || a[a.length - 1] !== '\"')\n            return;\n        if (typeof b != \"string\")\n            return `${a.slice(0, -1)}${b}\"`;\n        if (b[0] === '\"')\n            return a.slice(0, -1) + b.slice(1);\n        return;\n    }\n    if (typeof b == \"string\" && b[0] === '\"' && !(a instanceof Name))\n        return `\"${a}${b.slice(1)}`;\n    return;\n}\nfunction strConcat(c1, c2) {\n    return c2.emptyStr() ? c1 : c1.emptyStr() ? c2 : str `${c1}${c2}`;\n}\nexports.strConcat = strConcat;\n// TODO do not allow arrays here\nfunction interpolate(x) {\n    return typeof x == \"number\" || typeof x == \"boolean\" || x === null\n        ? x\n        : safeStringify(Array.isArray(x) ? x.join(\",\") : x);\n}\nfunction stringify(x) {\n    return new _Code(safeStringify(x));\n}\nexports.stringify = stringify;\nfunction safeStringify(x) {\n    return JSON.stringify(x)\n        .replace(/\\u2028/g, \"\\\\u2028\")\n        .replace(/\\u2029/g, \"\\\\u2029\");\n}\nexports.safeStringify = safeStringify;\nfunction getProperty(key) {\n    return typeof key == \"string\" && exports.IDENTIFIER.test(key) ? new _Code(`.${key}`) : _ `[${key}]`;\n}\nexports.getProperty = getProperty;\n//Does best effort to format the name properly\nfunction getEsmExportName(key) {\n    if (typeof key == \"string\" && exports.IDENTIFIER.test(key)) {\n        return new _Code(`${key}`);\n    }\n    throw new Error(`CodeGen: invalid export name: ${key}, use explicit $id name mapping`);\n}\nexports.getEsmExportName = getEsmExportName;\nfunction regexpCode(rx) {\n    return new _Code(rx.toString());\n}\nexports.regexpCode = regexpCode;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.or = exports.and = exports.not = exports.CodeGen = exports.operators = exports.varKinds = exports.ValueScopeName = exports.ValueScope = exports.Scope = exports.Name = exports.regexpCode = exports.stringify = exports.getProperty = exports.nil = exports.strConcat = exports.str = exports._ = void 0;\nconst code_1 = require(\"./code\");\nconst scope_1 = require(\"./scope\");\nvar code_2 = require(\"./code\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return code_2._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return code_2.str; } });\nObject.defineProperty(exports, \"strConcat\", { enumerable: true, get: function () { return code_2.strConcat; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return code_2.nil; } });\nObject.defineProperty(exports, \"getProperty\", { enumerable: true, get: function () { return code_2.getProperty; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return code_2.stringify; } });\nObject.defineProperty(exports, \"regexpCode\", { enumerable: true, get: function () { return code_2.regexpCode; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return code_2.Name; } });\nvar scope_2 = require(\"./scope\");\nObject.defineProperty(exports, \"Scope\", { enumerable: true, get: function () { return scope_2.Scope; } });\nObject.defineProperty(exports, \"ValueScope\", { enumerable: true, get: function () { return scope_2.ValueScope; } });\nObject.defineProperty(exports, \"ValueScopeName\", { enumerable: true, get: function () { return scope_2.ValueScopeName; } });\nObject.defineProperty(exports, \"varKinds\", { enumerable: true, get: function () { return scope_2.varKinds; } });\nexports.operators = {\n    GT: new code_1._Code(\">\"),\n    GTE: new code_1._Code(\">=\"),\n    LT: new code_1._Code(\"<\"),\n    LTE: new code_1._Code(\"<=\"),\n    EQ: new code_1._Code(\"===\"),\n    NEQ: new code_1._Code(\"!==\"),\n    NOT: new code_1._Code(\"!\"),\n    OR: new code_1._Code(\"||\"),\n    AND: new code_1._Code(\"&&\"),\n    ADD: new code_1._Code(\"+\"),\n};\nclass Node {\n    optimizeNodes() {\n        return this;\n    }\n    optimizeNames(_names, _constants) {\n        return this;\n    }\n}\nclass Def extends Node {\n    constructor(varKind, name, rhs) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.rhs = rhs;\n    }\n    render({ es5, _n }) {\n        const varKind = es5 ? scope_1.varKinds.var : this.varKind;\n        const rhs = this.rhs === undefined ? \"\" : ` = ${this.rhs}`;\n        return `${varKind} ${this.name}${rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (!names[this.name.str])\n            return;\n        if (this.rhs)\n            this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        return this.rhs instanceof code_1._CodeOrName ? this.rhs.names : {};\n    }\n}\nclass Assign extends Node {\n    constructor(lhs, rhs, sideEffects) {\n        super();\n        this.lhs = lhs;\n        this.rhs = rhs;\n        this.sideEffects = sideEffects;\n    }\n    render({ _n }) {\n        return `${this.lhs} = ${this.rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (this.lhs instanceof code_1.Name && !names[this.lhs.str] && !this.sideEffects)\n            return;\n        this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        const names = this.lhs instanceof code_1.Name ? {} : { ...this.lhs.names };\n        return addExprNames(names, this.rhs);\n    }\n}\nclass AssignOp extends Assign {\n    constructor(lhs, op, rhs, sideEffects) {\n        super(lhs, rhs, sideEffects);\n        this.op = op;\n    }\n    render({ _n }) {\n        return `${this.lhs} ${this.op}= ${this.rhs};` + _n;\n    }\n}\nclass Label extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        return `${this.label}:` + _n;\n    }\n}\nclass Break extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        const label = this.label ? ` ${this.label}` : \"\";\n        return `break${label};` + _n;\n    }\n}\nclass Throw extends Node {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render({ _n }) {\n        return `throw ${this.error};` + _n;\n    }\n    get names() {\n        return this.error.names;\n    }\n}\nclass AnyCode extends Node {\n    constructor(code) {\n        super();\n        this.code = code;\n    }\n    render({ _n }) {\n        return `${this.code};` + _n;\n    }\n    optimizeNodes() {\n        return `${this.code}` ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        this.code = optimizeExpr(this.code, names, constants);\n        return this;\n    }\n    get names() {\n        return this.code instanceof code_1._CodeOrName ? this.code.names : {};\n    }\n}\nclass ParentNode extends Node {\n    constructor(nodes = []) {\n        super();\n        this.nodes = nodes;\n    }\n    render(opts) {\n        return this.nodes.reduce((code, n) => code + n.render(opts), \"\");\n    }\n    optimizeNodes() {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            const n = nodes[i].optimizeNodes();\n            if (Array.isArray(n))\n                nodes.splice(i, 1, ...n);\n            else if (n)\n                nodes[i] = n;\n            else\n                nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            // iterating backwards improves 1-pass optimization\n            const n = nodes[i];\n            if (n.optimizeNames(names, constants))\n                continue;\n            subtractNames(names, n.names);\n            nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    get names() {\n        return this.nodes.reduce((names, n) => addNames(names, n.names), {});\n    }\n}\nclass BlockNode extends ParentNode {\n    render(opts) {\n        return \"{\" + opts._n + super.render(opts) + \"}\" + opts._n;\n    }\n}\nclass Root extends ParentNode {\n}\nclass Else extends BlockNode {\n}\nElse.kind = \"else\";\nclass If extends BlockNode {\n    constructor(condition, nodes) {\n        super(nodes);\n        this.condition = condition;\n    }\n    render(opts) {\n        let code = `if(${this.condition})` + super.render(opts);\n        if (this.else)\n            code += \"else \" + this.else.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        super.optimizeNodes();\n        const cond = this.condition;\n        if (cond === true)\n            return this.nodes; // else is ignored here\n        let e = this.else;\n        if (e) {\n            const ns = e.optimizeNodes();\n            e = this.else = Array.isArray(ns) ? new Else(ns) : ns;\n        }\n        if (e) {\n            if (cond === false)\n                return e instanceof If ? e : e.nodes;\n            if (this.nodes.length)\n                return this;\n            return new If(not(cond), e instanceof If ? [e] : e.nodes);\n        }\n        if (cond === false || !this.nodes.length)\n            return undefined;\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a;\n        this.else = (_a = this.else) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        if (!(super.optimizeNames(names, constants) || this.else))\n            return;\n        this.condition = optimizeExpr(this.condition, names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        addExprNames(names, this.condition);\n        if (this.else)\n            addNames(names, this.else.names);\n        return names;\n    }\n}\nIf.kind = \"if\";\nclass For extends BlockNode {\n}\nFor.kind = \"for\";\nclass ForLoop extends For {\n    constructor(iteration) {\n        super();\n        this.iteration = iteration;\n    }\n    render(opts) {\n        return `for(${this.iteration})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iteration = optimizeExpr(this.iteration, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iteration.names);\n    }\n}\nclass ForRange extends For {\n    constructor(varKind, name, from, to) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.from = from;\n        this.to = to;\n    }\n    render(opts) {\n        const varKind = opts.es5 ? scope_1.varKinds.var : this.varKind;\n        const { name, from, to } = this;\n        return `for(${varKind} ${name}=${from}; ${name}<${to}; ${name}++)` + super.render(opts);\n    }\n    get names() {\n        const names = addExprNames(super.names, this.from);\n        return addExprNames(names, this.to);\n    }\n}\nclass ForIter extends For {\n    constructor(loop, varKind, name, iterable) {\n        super();\n        this.loop = loop;\n        this.varKind = varKind;\n        this.name = name;\n        this.iterable = iterable;\n    }\n    render(opts) {\n        return `for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iterable = optimizeExpr(this.iterable, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iterable.names);\n    }\n}\nclass Func extends BlockNode {\n    constructor(name, args, async) {\n        super();\n        this.name = name;\n        this.args = args;\n        this.async = async;\n    }\n    render(opts) {\n        const _async = this.async ? \"async \" : \"\";\n        return `${_async}function ${this.name}(${this.args})` + super.render(opts);\n    }\n}\nFunc.kind = \"func\";\nclass Return extends ParentNode {\n    render(opts) {\n        return \"return \" + super.render(opts);\n    }\n}\nReturn.kind = \"return\";\nclass Try extends BlockNode {\n    render(opts) {\n        let code = \"try\" + super.render(opts);\n        if (this.catch)\n            code += this.catch.render(opts);\n        if (this.finally)\n            code += this.finally.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        var _a, _b;\n        super.optimizeNodes();\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNodes();\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNodes();\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a, _b;\n        super.optimizeNames(names, constants);\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNames(names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        if (this.catch)\n            addNames(names, this.catch.names);\n        if (this.finally)\n            addNames(names, this.finally.names);\n        return names;\n    }\n}\nclass Catch extends BlockNode {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render(opts) {\n        return `catch(${this.error})` + super.render(opts);\n    }\n}\nCatch.kind = \"catch\";\nclass Finally extends BlockNode {\n    render(opts) {\n        return \"finally\" + super.render(opts);\n    }\n}\nFinally.kind = \"finally\";\nclass CodeGen {\n    constructor(extScope, opts = {}) {\n        this._values = {};\n        this._blockStarts = [];\n        this._constants = {};\n        this.opts = { ...opts, _n: opts.lines ? \"\\n\" : \"\" };\n        this._extScope = extScope;\n        this._scope = new scope_1.Scope({ parent: extScope });\n        this._nodes = [new Root()];\n    }\n    toString() {\n        return this._root.render(this.opts);\n    }\n    // returns unique name in the internal scope\n    name(prefix) {\n        return this._scope.name(prefix);\n    }\n    // reserves unique name in the external scope\n    scopeName(prefix) {\n        return this._extScope.name(prefix);\n    }\n    // reserves unique name in the external scope and assigns value to it\n    scopeValue(prefixOrName, value) {\n        const name = this._extScope.value(prefixOrName, value);\n        const vs = this._values[name.prefix] || (this._values[name.prefix] = new Set());\n        vs.add(name);\n        return name;\n    }\n    getScopeValue(prefix, keyOrRef) {\n        return this._extScope.getValue(prefix, keyOrRef);\n    }\n    // return code that assigns values in the external scope to the names that are used internally\n    // (same names that were returned by gen.scopeName or gen.scopeValue)\n    scopeRefs(scopeName) {\n        return this._extScope.scopeRefs(scopeName, this._values);\n    }\n    scopeCode() {\n        return this._extScope.scopeCode(this._values);\n    }\n    _def(varKind, nameOrPrefix, rhs, constant) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (rhs !== undefined && constant)\n            this._constants[name.str] = rhs;\n        this._leafNode(new Def(varKind, name, rhs));\n        return name;\n    }\n    // `const` declaration (`var` in es5 mode)\n    const(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.const, nameOrPrefix, rhs, _constant);\n    }\n    // `let` declaration with optional assignment (`var` in es5 mode)\n    let(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.let, nameOrPrefix, rhs, _constant);\n    }\n    // `var` declaration with optional assignment\n    var(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.var, nameOrPrefix, rhs, _constant);\n    }\n    // assignment code\n    assign(lhs, rhs, sideEffects) {\n        return this._leafNode(new Assign(lhs, rhs, sideEffects));\n    }\n    // `+=` code\n    add(lhs, rhs) {\n        return this._leafNode(new AssignOp(lhs, exports.operators.ADD, rhs));\n    }\n    // appends passed SafeExpr to code or executes Block\n    code(c) {\n        if (typeof c == \"function\")\n            c();\n        else if (c !== code_1.nil)\n            this._leafNode(new AnyCode(c));\n        return this;\n    }\n    // returns code for object literal for the passed argument list of key-value pairs\n    object(...keyValues) {\n        const code = [\"{\"];\n        for (const [key, value] of keyValues) {\n            if (code.length > 1)\n                code.push(\",\");\n            code.push(key);\n            if (key !== value || this.opts.es5) {\n                code.push(\":\");\n                (0, code_1.addCodeArg)(code, value);\n            }\n        }\n        code.push(\"}\");\n        return new code_1._Code(code);\n    }\n    // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n    if(condition, thenBody, elseBody) {\n        this._blockNode(new If(condition));\n        if (thenBody && elseBody) {\n            this.code(thenBody).else().code(elseBody).endIf();\n        }\n        else if (thenBody) {\n            this.code(thenBody).endIf();\n        }\n        else if (elseBody) {\n            throw new Error('CodeGen: \"else\" body without \"then\" body');\n        }\n        return this;\n    }\n    // `else if` clause - invalid without `if` or after `else` clauses\n    elseIf(condition) {\n        return this._elseNode(new If(condition));\n    }\n    // `else` clause - only valid after `if` or `else if` clauses\n    else() {\n        return this._elseNode(new Else());\n    }\n    // end `if` statement (needed if gen.if was used only with condition)\n    endIf() {\n        return this._endBlockNode(If, Else);\n    }\n    _for(node, forBody) {\n        this._blockNode(node);\n        if (forBody)\n            this.code(forBody).endFor();\n        return this;\n    }\n    // a generic `for` clause (or statement if `forBody` is passed)\n    for(iteration, forBody) {\n        return this._for(new ForLoop(iteration), forBody);\n    }\n    // `for` statement for a range of values\n    forRange(nameOrPrefix, from, to, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.let) {\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForRange(varKind, name, from, to), () => forBody(name));\n    }\n    // `for-of` statement (in es5 mode replace with a normal for loop)\n    forOf(nameOrPrefix, iterable, forBody, varKind = scope_1.varKinds.const) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (this.opts.es5) {\n            const arr = iterable instanceof code_1.Name ? iterable : this.var(\"_arr\", iterable);\n            return this.forRange(\"_i\", 0, (0, code_1._) `${arr}.length`, (i) => {\n                this.var(name, (0, code_1._) `${arr}[${i}]`);\n                forBody(name);\n            });\n        }\n        return this._for(new ForIter(\"of\", varKind, name, iterable), () => forBody(name));\n    }\n    // `for-in` statement.\n    // With option `ownProperties` replaced with a `for-of` loop for object keys\n    forIn(nameOrPrefix, obj, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.const) {\n        if (this.opts.ownProperties) {\n            return this.forOf(nameOrPrefix, (0, code_1._) `Object.keys(${obj})`, forBody);\n        }\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForIter(\"in\", varKind, name, obj), () => forBody(name));\n    }\n    // end `for` loop\n    endFor() {\n        return this._endBlockNode(For);\n    }\n    // `label` statement\n    label(label) {\n        return this._leafNode(new Label(label));\n    }\n    // `break` statement\n    break(label) {\n        return this._leafNode(new Break(label));\n    }\n    // `return` statement\n    return(value) {\n        const node = new Return();\n        this._blockNode(node);\n        this.code(value);\n        if (node.nodes.length !== 1)\n            throw new Error('CodeGen: \"return\" should have one node');\n        return this._endBlockNode(Return);\n    }\n    // `try` statement\n    try(tryBody, catchCode, finallyCode) {\n        if (!catchCode && !finallyCode)\n            throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"');\n        const node = new Try();\n        this._blockNode(node);\n        this.code(tryBody);\n        if (catchCode) {\n            const error = this.name(\"e\");\n            this._currNode = node.catch = new Catch(error);\n            catchCode(error);\n        }\n        if (finallyCode) {\n            this._currNode = node.finally = new Finally();\n            this.code(finallyCode);\n        }\n        return this._endBlockNode(Catch, Finally);\n    }\n    // `throw` statement\n    throw(error) {\n        return this._leafNode(new Throw(error));\n    }\n    // start self-balancing block\n    block(body, nodeCount) {\n        this._blockStarts.push(this._nodes.length);\n        if (body)\n            this.code(body).endBlock(nodeCount);\n        return this;\n    }\n    // end the current self-balancing block\n    endBlock(nodeCount) {\n        const len = this._blockStarts.pop();\n        if (len === undefined)\n            throw new Error(\"CodeGen: not in self-balancing block\");\n        const toClose = this._nodes.length - len;\n        if (toClose < 0 || (nodeCount !== undefined && toClose !== nodeCount)) {\n            throw new Error(`CodeGen: wrong number of nodes: ${toClose} vs ${nodeCount} expected`);\n        }\n        this._nodes.length = len;\n        return this;\n    }\n    // `function` heading (or definition if funcBody is passed)\n    func(name, args = code_1.nil, async, funcBody) {\n        this._blockNode(new Func(name, args, async));\n        if (funcBody)\n            this.code(funcBody).endFunc();\n        return this;\n    }\n    // end function definition\n    endFunc() {\n        return this._endBlockNode(Func);\n    }\n    optimize(n = 1) {\n        while (n-- > 0) {\n            this._root.optimizeNodes();\n            this._root.optimizeNames(this._root.names, this._constants);\n        }\n    }\n    _leafNode(node) {\n        this._currNode.nodes.push(node);\n        return this;\n    }\n    _blockNode(node) {\n        this._currNode.nodes.push(node);\n        this._nodes.push(node);\n    }\n    _endBlockNode(N1, N2) {\n        const n = this._currNode;\n        if (n instanceof N1 || (N2 && n instanceof N2)) {\n            this._nodes.pop();\n            return this;\n        }\n        throw new Error(`CodeGen: not in block \"${N2 ? `${N1.kind}/${N2.kind}` : N1.kind}\"`);\n    }\n    _elseNode(node) {\n        const n = this._currNode;\n        if (!(n instanceof If)) {\n            throw new Error('CodeGen: \"else\" without \"if\"');\n        }\n        this._currNode = n.else = node;\n        return this;\n    }\n    get _root() {\n        return this._nodes[0];\n    }\n    get _currNode() {\n        const ns = this._nodes;\n        return ns[ns.length - 1];\n    }\n    set _currNode(node) {\n        const ns = this._nodes;\n        ns[ns.length - 1] = node;\n    }\n}\nexports.CodeGen = CodeGen;\nfunction addNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) + (from[n] || 0);\n    return names;\n}\nfunction addExprNames(names, from) {\n    return from instanceof code_1._CodeOrName ? addNames(names, from.names) : names;\n}\nfunction optimizeExpr(expr, names, constants) {\n    if (expr instanceof code_1.Name)\n        return replaceName(expr);\n    if (!canOptimize(expr))\n        return expr;\n    return new code_1._Code(expr._items.reduce((items, c) => {\n        if (c instanceof code_1.Name)\n            c = replaceName(c);\n        if (c instanceof code_1._Code)\n            items.push(...c._items);\n        else\n            items.push(c);\n        return items;\n    }, []));\n    function replaceName(n) {\n        const c = constants[n.str];\n        if (c === undefined || names[n.str] !== 1)\n            return n;\n        delete names[n.str];\n        return c;\n    }\n    function canOptimize(e) {\n        return (e instanceof code_1._Code &&\n            e._items.some((c) => c instanceof code_1.Name && names[c.str] === 1 && constants[c.str] !== undefined));\n    }\n}\nfunction subtractNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) - (from[n] || 0);\n}\nfunction not(x) {\n    return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : (0, code_1._) `!${par(x)}`;\n}\nexports.not = not;\nconst andCode = mappend(exports.operators.AND);\n// boolean AND (&&) expression with the passed arguments\nfunction and(...args) {\n    return args.reduce(andCode);\n}\nexports.and = and;\nconst orCode = mappend(exports.operators.OR);\n// boolean OR (||) expression with the passed arguments\nfunction or(...args) {\n    return args.reduce(orCode);\n}\nexports.or = or;\nfunction mappend(op) {\n    return (x, y) => (x === code_1.nil ? y : y === code_1.nil ? x : (0, code_1._) `${par(x)} ${op} ${par(y)}`);\n}\nfunction par(x) {\n    return x instanceof code_1.Name ? x : (0, code_1._) `(${x})`;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValueScope = exports.ValueScopeName = exports.Scope = exports.varKinds = exports.UsedValueState = void 0;\nconst code_1 = require(\"./code\");\nclass ValueError extends Error {\n    constructor(name) {\n        super(`CodeGen: \"code\" for ${name} not defined`);\n        this.value = name.value;\n    }\n}\nvar UsedValueState;\n(function (UsedValueState) {\n    UsedValueState[UsedValueState[\"Started\"] = 0] = \"Started\";\n    UsedValueState[UsedValueState[\"Completed\"] = 1] = \"Completed\";\n})(UsedValueState || (exports.UsedValueState = UsedValueState = {}));\nexports.varKinds = {\n    const: new code_1.Name(\"const\"),\n    let: new code_1.Name(\"let\"),\n    var: new code_1.Name(\"var\"),\n};\nclass Scope {\n    constructor({ prefixes, parent } = {}) {\n        this._names = {};\n        this._prefixes = prefixes;\n        this._parent = parent;\n    }\n    toName(nameOrPrefix) {\n        return nameOrPrefix instanceof code_1.Name ? nameOrPrefix : this.name(nameOrPrefix);\n    }\n    name(prefix) {\n        return new code_1.Name(this._newName(prefix));\n    }\n    _newName(prefix) {\n        const ng = this._names[prefix] || this._nameGroup(prefix);\n        return `${prefix}${ng.index++}`;\n    }\n    _nameGroup(prefix) {\n        var _a, _b;\n        if (((_b = (_a = this._parent) === null || _a === void 0 ? void 0 : _a._prefixes) === null || _b === void 0 ? void 0 : _b.has(prefix)) || (this._prefixes && !this._prefixes.has(prefix))) {\n            throw new Error(`CodeGen: prefix \"${prefix}\" is not allowed in this scope`);\n        }\n        return (this._names[prefix] = { prefix, index: 0 });\n    }\n}\nexports.Scope = Scope;\nclass ValueScopeName extends code_1.Name {\n    constructor(prefix, nameStr) {\n        super(nameStr);\n        this.prefix = prefix;\n    }\n    setValue(value, { property, itemIndex }) {\n        this.value = value;\n        this.scopePath = (0, code_1._) `.${new code_1.Name(property)}[${itemIndex}]`;\n    }\n}\nexports.ValueScopeName = ValueScopeName;\nconst line = (0, code_1._) `\\n`;\nclass ValueScope extends Scope {\n    constructor(opts) {\n        super(opts);\n        this._values = {};\n        this._scope = opts.scope;\n        this.opts = { ...opts, _n: opts.lines ? line : code_1.nil };\n    }\n    get() {\n        return this._scope;\n    }\n    name(prefix) {\n        return new ValueScopeName(prefix, this._newName(prefix));\n    }\n    value(nameOrPrefix, value) {\n        var _a;\n        if (value.ref === undefined)\n            throw new Error(\"CodeGen: ref must be passed in value\");\n        const name = this.toName(nameOrPrefix);\n        const { prefix } = name;\n        const valueKey = (_a = value.key) !== null && _a !== void 0 ? _a : value.ref;\n        let vs = this._values[prefix];\n        if (vs) {\n            const _name = vs.get(valueKey);\n            if (_name)\n                return _name;\n        }\n        else {\n            vs = this._values[prefix] = new Map();\n        }\n        vs.set(valueKey, name);\n        const s = this._scope[prefix] || (this._scope[prefix] = []);\n        const itemIndex = s.length;\n        s[itemIndex] = value.ref;\n        name.setValue(value, { property: prefix, itemIndex });\n        return name;\n    }\n    getValue(prefix, keyOrRef) {\n        const vs = this._values[prefix];\n        if (!vs)\n            return;\n        return vs.get(keyOrRef);\n    }\n    scopeRefs(scopeName, values = this._values) {\n        return this._reduceValues(values, (name) => {\n            if (name.scopePath === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return (0, code_1._) `${scopeName}${name.scopePath}`;\n        });\n    }\n    scopeCode(values = this._values, usedValues, getCode) {\n        return this._reduceValues(values, (name) => {\n            if (name.value === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return name.value.code;\n        }, usedValues, getCode);\n    }\n    _reduceValues(values, valueCode, usedValues = {}, getCode) {\n        let code = code_1.nil;\n        for (const prefix in values) {\n            const vs = values[prefix];\n            if (!vs)\n                continue;\n            const nameSet = (usedValues[prefix] = usedValues[prefix] || new Map());\n            vs.forEach((name) => {\n                if (nameSet.has(name))\n                    return;\n                nameSet.set(name, UsedValueState.Started);\n                let c = valueCode(name);\n                if (c) {\n                    const def = this.opts.es5 ? exports.varKinds.var : exports.varKinds.const;\n                    code = (0, code_1._) `${code}${def} ${name} = ${c};${this.opts._n}`;\n                }\n                else if ((c = getCode === null || getCode === void 0 ? void 0 : getCode(name))) {\n                    code = (0, code_1._) `${code}${c}${this.opts._n}`;\n                }\n                else {\n                    throw new ValueError(name);\n                }\n                nameSet.set(name, UsedValueState.Completed);\n            });\n        }\n        return code;\n    }\n}\nexports.ValueScope = ValueScope;\n//# sourceMappingURL=scope.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendErrors = exports.resetErrorsCount = exports.reportExtraError = exports.reportError = exports.keyword$DataError = exports.keywordError = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst util_1 = require(\"./util\");\nconst names_1 = require(\"./names\");\nexports.keywordError = {\n    message: ({ keyword }) => (0, codegen_1.str) `must pass \"${keyword}\" keyword validation`,\n};\nexports.keyword$DataError = {\n    message: ({ keyword, schemaType }) => schemaType\n        ? (0, codegen_1.str) `\"${keyword}\" keyword must be ${schemaType} ($data)`\n        : (0, codegen_1.str) `\"${keyword}\" keyword is invalid ($data)`,\n};\nfunction reportError(cxt, error = exports.keywordError, errorPaths, overrideAllErrors) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    if (overrideAllErrors !== null && overrideAllErrors !== void 0 ? overrideAllErrors : (compositeRule || allErrors)) {\n        addError(gen, errObj);\n    }\n    else {\n        returnErrors(it, (0, codegen_1._) `[${errObj}]`);\n    }\n}\nexports.reportError = reportError;\nfunction reportExtraError(cxt, error = exports.keywordError, errorPaths) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    addError(gen, errObj);\n    if (!(compositeRule || allErrors)) {\n        returnErrors(it, names_1.default.vErrors);\n    }\n}\nexports.reportExtraError = reportExtraError;\nfunction resetErrorsCount(gen, errsCount) {\n    gen.assign(names_1.default.errors, errsCount);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} !== null`, () => gen.if(errsCount, () => gen.assign((0, codegen_1._) `${names_1.default.vErrors}.length`, errsCount), () => gen.assign(names_1.default.vErrors, null)));\n}\nexports.resetErrorsCount = resetErrorsCount;\nfunction extendErrors({ gen, keyword, schemaValue, data, errsCount, it, }) {\n    /* istanbul ignore if */\n    if (errsCount === undefined)\n        throw new Error(\"ajv implementation error\");\n    const err = gen.name(\"err\");\n    gen.forRange(\"i\", errsCount, names_1.default.errors, (i) => {\n        gen.const(err, (0, codegen_1._) `${names_1.default.vErrors}[${i}]`);\n        gen.if((0, codegen_1._) `${err}.instancePath === undefined`, () => gen.assign((0, codegen_1._) `${err}.instancePath`, (0, codegen_1.strConcat)(names_1.default.instancePath, it.errorPath)));\n        gen.assign((0, codegen_1._) `${err}.schemaPath`, (0, codegen_1.str) `${it.errSchemaPath}/${keyword}`);\n        if (it.opts.verbose) {\n            gen.assign((0, codegen_1._) `${err}.schema`, schemaValue);\n            gen.assign((0, codegen_1._) `${err}.data`, data);\n        }\n    });\n}\nexports.extendErrors = extendErrors;\nfunction addError(gen, errObj) {\n    const err = gen.const(\"err\", errObj);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} === null`, () => gen.assign(names_1.default.vErrors, (0, codegen_1._) `[${err}]`), (0, codegen_1._) `${names_1.default.vErrors}.push(${err})`);\n    gen.code((0, codegen_1._) `${names_1.default.errors}++`);\n}\nfunction returnErrors(it, errs) {\n    const { gen, validateName, schemaEnv } = it;\n    if (schemaEnv.$async) {\n        gen.throw((0, codegen_1._) `new ${it.ValidationError}(${errs})`);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, errs);\n        gen.return(false);\n    }\n}\nconst E = {\n    keyword: new codegen_1.Name(\"keyword\"),\n    schemaPath: new codegen_1.Name(\"schemaPath\"), // also used in JTD errors\n    params: new codegen_1.Name(\"params\"),\n    propertyName: new codegen_1.Name(\"propertyName\"),\n    message: new codegen_1.Name(\"message\"),\n    schema: new codegen_1.Name(\"schema\"),\n    parentSchema: new codegen_1.Name(\"parentSchema\"),\n};\nfunction errorObjectCode(cxt, error, errorPaths) {\n    const { createErrors } = cxt.it;\n    if (createErrors === false)\n        return (0, codegen_1._) `{}`;\n    return errorObject(cxt, error, errorPaths);\n}\nfunction errorObject(cxt, error, errorPaths = {}) {\n    const { gen, it } = cxt;\n    const keyValues = [\n        errorInstancePath(it, errorPaths),\n        errorSchemaPath(cxt, errorPaths),\n    ];\n    extraErrorProps(cxt, error, keyValues);\n    return gen.object(...keyValues);\n}\nfunction errorInstancePath({ errorPath }, { instancePath }) {\n    const instPath = instancePath\n        ? (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(instancePath, util_1.Type.Str)}`\n        : errorPath;\n    return [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, instPath)];\n}\nfunction errorSchemaPath({ keyword, it: { errSchemaPath } }, { schemaPath, parentSchema }) {\n    let schPath = parentSchema ? errSchemaPath : (0, codegen_1.str) `${errSchemaPath}/${keyword}`;\n    if (schemaPath) {\n        schPath = (0, codegen_1.str) `${schPath}${(0, util_1.getErrorPath)(schemaPath, util_1.Type.Str)}`;\n    }\n    return [E.schemaPath, schPath];\n}\nfunction extraErrorProps(cxt, { params, message }, keyValues) {\n    const { keyword, data, schemaValue, it } = cxt;\n    const { opts, propertyName, topSchemaRef, schemaPath } = it;\n    keyValues.push([E.keyword, keyword], [E.params, typeof params == \"function\" ? params(cxt) : params || (0, codegen_1._) `{}`]);\n    if (opts.messages) {\n        keyValues.push([E.message, typeof message == \"function\" ? message(cxt) : message]);\n    }\n    if (opts.verbose) {\n        keyValues.push([E.schema, schemaValue], [E.parentSchema, (0, codegen_1._) `${topSchemaRef}${schemaPath}`], [names_1.default.data, data]);\n    }\n    if (propertyName)\n        keyValues.push([E.propertyName, propertyName]);\n}\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveSchema = exports.getCompilingSchema = exports.resolveRef = exports.compileSchema = exports.SchemaEnv = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst validation_error_1 = require(\"../runtime/validation_error\");\nconst names_1 = require(\"./names\");\nconst resolve_1 = require(\"./resolve\");\nconst util_1 = require(\"./util\");\nconst validate_1 = require(\"./validate\");\nclass SchemaEnv {\n    constructor(env) {\n        var _a;\n        this.refs = {};\n        this.dynamicAnchors = {};\n        let schema;\n        if (typeof env.schema == \"object\")\n            schema = env.schema;\n        this.schema = env.schema;\n        this.schemaId = env.schemaId;\n        this.root = env.root || this;\n        this.baseId = (_a = env.baseId) !== null && _a !== void 0 ? _a : (0, resolve_1.normalizeId)(schema === null || schema === void 0 ? void 0 : schema[env.schemaId || \"$id\"]);\n        this.schemaPath = env.schemaPath;\n        this.localRefs = env.localRefs;\n        this.meta = env.meta;\n        this.$async = schema === null || schema === void 0 ? void 0 : schema.$async;\n        this.refs = {};\n    }\n}\nexports.SchemaEnv = SchemaEnv;\n// let codeSize = 0\n// let nodeCount = 0\n// Compiles schema in SchemaEnv\nfunction compileSchema(sch) {\n    // TODO refactor - remove compilations\n    const _sch = getCompilingSchema.call(this, sch);\n    if (_sch)\n        return _sch;\n    const rootId = (0, resolve_1.getFullPath)(this.opts.uriResolver, sch.root.baseId); // TODO if getFullPath removed 1 tests fails\n    const { es5, lines } = this.opts.code;\n    const { ownProperties } = this.opts;\n    const gen = new codegen_1.CodeGen(this.scope, { es5, lines, ownProperties });\n    let _ValidationError;\n    if (sch.$async) {\n        _ValidationError = gen.scopeValue(\"Error\", {\n            ref: validation_error_1.default,\n            code: (0, codegen_1._) `require(\"ajv/dist/runtime/validation_error\").default`,\n        });\n    }\n    const validateName = gen.scopeName(\"validate\");\n    sch.validateName = validateName;\n    const schemaCxt = {\n        gen,\n        allErrors: this.opts.allErrors,\n        data: names_1.default.data,\n        parentData: names_1.default.parentData,\n        parentDataProperty: names_1.default.parentDataProperty,\n        dataNames: [names_1.default.data],\n        dataPathArr: [codegen_1.nil], // TODO can its length be used as dataLevel if nil is removed?\n        dataLevel: 0,\n        dataTypes: [],\n        definedProperties: new Set(),\n        topSchemaRef: gen.scopeValue(\"schema\", this.opts.code.source === true\n            ? { ref: sch.schema, code: (0, codegen_1.stringify)(sch.schema) }\n            : { ref: sch.schema }),\n        validateName,\n        ValidationError: _ValidationError,\n        schema: sch.schema,\n        schemaEnv: sch,\n        rootId,\n        baseId: sch.baseId || rootId,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: sch.schemaPath || (this.opts.jtd ? \"\" : \"#\"),\n        errorPath: (0, codegen_1._) `\"\"`,\n        opts: this.opts,\n        self: this,\n    };\n    let sourceCode;\n    try {\n        this._compilations.add(sch);\n        (0, validate_1.validateFunctionCode)(schemaCxt);\n        gen.optimize(this.opts.code.optimize);\n        // gen.optimize(1)\n        const validateCode = gen.toString();\n        sourceCode = `${gen.scopeRefs(names_1.default.scope)}return ${validateCode}`;\n        // console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))\n        if (this.opts.code.process)\n            sourceCode = this.opts.code.process(sourceCode, sch);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode)\n        const makeValidate = new Function(`${names_1.default.self}`, `${names_1.default.scope}`, sourceCode);\n        const validate = makeValidate(this, this.scope.get());\n        this.scope.value(validateName, { ref: validate });\n        validate.errors = null;\n        validate.schema = sch.schema;\n        validate.schemaEnv = sch;\n        if (sch.$async)\n            validate.$async = true;\n        if (this.opts.code.source === true) {\n            validate.source = { validateName, validateCode, scopeValues: gen._values };\n        }\n        if (this.opts.unevaluated) {\n            const { props, items } = schemaCxt;\n            validate.evaluated = {\n                props: props instanceof codegen_1.Name ? undefined : props,\n                items: items instanceof codegen_1.Name ? undefined : items,\n                dynamicProps: props instanceof codegen_1.Name,\n                dynamicItems: items instanceof codegen_1.Name,\n            };\n            if (validate.source)\n                validate.source.evaluated = (0, codegen_1.stringify)(validate.evaluated);\n        }\n        sch.validate = validate;\n        return sch;\n    }\n    catch (e) {\n        delete sch.validate;\n        delete sch.validateName;\n        if (sourceCode)\n            this.logger.error(\"Error compiling schema, function code:\", sourceCode);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode, this.opts)\n        throw e;\n    }\n    finally {\n        this._compilations.delete(sch);\n    }\n}\nexports.compileSchema = compileSchema;\nfunction resolveRef(root, baseId, ref) {\n    var _a;\n    ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, ref);\n    const schOrFunc = root.refs[ref];\n    if (schOrFunc)\n        return schOrFunc;\n    let _sch = resolve.call(this, root, ref);\n    if (_sch === undefined) {\n        const schema = (_a = root.localRefs) === null || _a === void 0 ? void 0 : _a[ref]; // TODO maybe localRefs should hold SchemaEnv\n        const { schemaId } = this.opts;\n        if (schema)\n            _sch = new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    if (_sch === undefined)\n        return;\n    return (root.refs[ref] = inlineOrCompile.call(this, _sch));\n}\nexports.resolveRef = resolveRef;\nfunction inlineOrCompile(sch) {\n    if ((0, resolve_1.inlineRef)(sch.schema, this.opts.inlineRefs))\n        return sch.schema;\n    return sch.validate ? sch : compileSchema.call(this, sch);\n}\n// Index of schema compilation in the currently compiled list\nfunction getCompilingSchema(schEnv) {\n    for (const sch of this._compilations) {\n        if (sameSchemaEnv(sch, schEnv))\n            return sch;\n    }\n}\nexports.getCompilingSchema = getCompilingSchema;\nfunction sameSchemaEnv(s1, s2) {\n    return s1.schema === s2.schema && s1.root === s2.root && s1.baseId === s2.baseId;\n}\n// resolve and compile the references ($ref)\n// TODO returns AnySchemaObject (if the schema can be inlined) or validation function\nfunction resolve(root, // information about the root schema for the current schema\nref // reference to resolve\n) {\n    let sch;\n    while (typeof (sch = this.refs[ref]) == \"string\")\n        ref = sch;\n    return sch || this.schemas[ref] || resolveSchema.call(this, root, ref);\n}\n// Resolve schema, its root and baseId\nfunction resolveSchema(root, // root object with properties schema, refs TODO below SchemaEnv is assigned to it\nref // reference to resolve\n) {\n    const p = this.opts.uriResolver.parse(ref);\n    const refPath = (0, resolve_1._getFullPath)(this.opts.uriResolver, p);\n    let baseId = (0, resolve_1.getFullPath)(this.opts.uriResolver, root.baseId, undefined);\n    // TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests\n    if (Object.keys(root.schema).length > 0 && refPath === baseId) {\n        return getJsonPointer.call(this, p, root);\n    }\n    const id = (0, resolve_1.normalizeId)(refPath);\n    const schOrRef = this.refs[id] || this.schemas[id];\n    if (typeof schOrRef == \"string\") {\n        const sch = resolveSchema.call(this, root, schOrRef);\n        if (typeof (sch === null || sch === void 0 ? void 0 : sch.schema) !== \"object\")\n            return;\n        return getJsonPointer.call(this, p, sch);\n    }\n    if (typeof (schOrRef === null || schOrRef === void 0 ? void 0 : schOrRef.schema) !== \"object\")\n        return;\n    if (!schOrRef.validate)\n        compileSchema.call(this, schOrRef);\n    if (id === (0, resolve_1.normalizeId)(ref)) {\n        const { schema } = schOrRef;\n        const { schemaId } = this.opts;\n        const schId = schema[schemaId];\n        if (schId)\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        return new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    return getJsonPointer.call(this, p, schOrRef);\n}\nexports.resolveSchema = resolveSchema;\nconst PREVENT_SCOPE_CHANGE = new Set([\n    \"properties\",\n    \"patternProperties\",\n    \"enum\",\n    \"dependencies\",\n    \"definitions\",\n]);\nfunction getJsonPointer(parsedRef, { baseId, schema, root }) {\n    var _a;\n    if (((_a = parsedRef.fragment) === null || _a === void 0 ? void 0 : _a[0]) !== \"/\")\n        return;\n    for (const part of parsedRef.fragment.slice(1).split(\"/\")) {\n        if (typeof schema === \"boolean\")\n            return;\n        const partSchema = schema[(0, util_1.unescapeFragment)(part)];\n        if (partSchema === undefined)\n            return;\n        schema = partSchema;\n        // TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?\n        const schId = typeof schema === \"object\" && schema[this.opts.schemaId];\n        if (!PREVENT_SCOPE_CHANGE.has(part) && schId) {\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        }\n    }\n    let env;\n    if (typeof schema != \"boolean\" && schema.$ref && !(0, util_1.schemaHasRulesButRef)(schema, this.RULES)) {\n        const $ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schema.$ref);\n        env = resolveSchema.call(this, root, $ref);\n    }\n    // even though resolution failed we need to return SchemaEnv to throw exception\n    // so that compileAsync loads missing schema.\n    const { schemaId } = this.opts;\n    env = env || new SchemaEnv({ schema, schemaId, root, baseId });\n    if (env.schema !== env.root.schema)\n        return env;\n    return undefined;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"./codegen\");\nconst names = {\n    // validation function arguments\n    data: new codegen_1.Name(\"data\"), // data passed to validation function\n    // args passed from referencing schema\n    valCxt: new codegen_1.Name(\"valCxt\"), // validation/data context - should not be used directly, it is destructured to the names below\n    instancePath: new codegen_1.Name(\"instancePath\"),\n    parentData: new codegen_1.Name(\"parentData\"),\n    parentDataProperty: new codegen_1.Name(\"parentDataProperty\"),\n    rootData: new codegen_1.Name(\"rootData\"), // root data - same as the data passed to the first/top validation function\n    dynamicAnchors: new codegen_1.Name(\"dynamicAnchors\"), // used to support recursiveRef and dynamicRef\n    // function scoped variables\n    vErrors: new codegen_1.Name(\"vErrors\"), // null or array of validation errors\n    errors: new codegen_1.Name(\"errors\"), // counter of validation errors\n    this: new codegen_1.Name(\"this\"),\n    // \"globals\"\n    self: new codegen_1.Name(\"self\"),\n    scope: new codegen_1.Name(\"scope\"),\n    // JTD serialize/parse name for JSON string and position\n    json: new codegen_1.Name(\"json\"),\n    jsonPos: new codegen_1.Name(\"jsonPos\"),\n    jsonLen: new codegen_1.Name(\"jsonLen\"),\n    jsonPart: new codegen_1.Name(\"jsonPart\"),\n};\nexports.default = names;\n//# sourceMappingURL=names.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst resolve_1 = require(\"./resolve\");\nclass MissingRefError extends Error {\n    constructor(resolver, baseId, ref, msg) {\n        super(msg || `can't resolve reference ${ref} from id ${baseId}`);\n        this.missingRef = (0, resolve_1.resolveUrl)(resolver, baseId, ref);\n        this.missingSchema = (0, resolve_1.normalizeId)((0, resolve_1.getFullPath)(resolver, this.missingRef));\n    }\n}\nexports.default = MissingRefError;\n//# sourceMappingURL=ref_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSchemaRefs = exports.resolveUrl = exports.normalizeId = exports._getFullPath = exports.getFullPath = exports.inlineRef = void 0;\nconst util_1 = require(\"./util\");\nconst equal = require(\"fast-deep-equal\");\nconst traverse = require(\"json-schema-traverse\");\n// TODO refactor to use keyword definitions\nconst SIMPLE_INLINED = new Set([\n    \"type\",\n    \"format\",\n    \"pattern\",\n    \"maxLength\",\n    \"minLength\",\n    \"maxProperties\",\n    \"minProperties\",\n    \"maxItems\",\n    \"minItems\",\n    \"maximum\",\n    \"minimum\",\n    \"uniqueItems\",\n    \"multipleOf\",\n    \"required\",\n    \"enum\",\n    \"const\",\n]);\nfunction inlineRef(schema, limit = true) {\n    if (typeof schema == \"boolean\")\n        return true;\n    if (limit === true)\n        return !hasRef(schema);\n    if (!limit)\n        return false;\n    return countKeys(schema) <= limit;\n}\nexports.inlineRef = inlineRef;\nconst REF_KEYWORDS = new Set([\n    \"$ref\",\n    \"$recursiveRef\",\n    \"$recursiveAnchor\",\n    \"$dynamicRef\",\n    \"$dynamicAnchor\",\n]);\nfunction hasRef(schema) {\n    for (const key in schema) {\n        if (REF_KEYWORDS.has(key))\n            return true;\n        const sch = schema[key];\n        if (Array.isArray(sch) && sch.some(hasRef))\n            return true;\n        if (typeof sch == \"object\" && hasRef(sch))\n            return true;\n    }\n    return false;\n}\nfunction countKeys(schema) {\n    let count = 0;\n    for (const key in schema) {\n        if (key === \"$ref\")\n            return Infinity;\n        count++;\n        if (SIMPLE_INLINED.has(key))\n            continue;\n        if (typeof schema[key] == \"object\") {\n            (0, util_1.eachItem)(schema[key], (sch) => (count += countKeys(sch)));\n        }\n        if (count === Infinity)\n            return Infinity;\n    }\n    return count;\n}\nfunction getFullPath(resolver, id = \"\", normalize) {\n    if (normalize !== false)\n        id = normalizeId(id);\n    const p = resolver.parse(id);\n    return _getFullPath(resolver, p);\n}\nexports.getFullPath = getFullPath;\nfunction _getFullPath(resolver, p) {\n    const serialized = resolver.serialize(p);\n    return serialized.split(\"#\")[0] + \"#\";\n}\nexports._getFullPath = _getFullPath;\nconst TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n    return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\";\n}\nexports.normalizeId = normalizeId;\nfunction resolveUrl(resolver, baseId, id) {\n    id = normalizeId(id);\n    return resolver.resolve(baseId, id);\n}\nexports.resolveUrl = resolveUrl;\nconst ANCHOR = /^[a-z_][-a-z0-9._]*$/i;\nfunction getSchemaRefs(schema, baseId) {\n    if (typeof schema == \"boolean\")\n        return {};\n    const { schemaId, uriResolver } = this.opts;\n    const schId = normalizeId(schema[schemaId] || baseId);\n    const baseIds = { \"\": schId };\n    const pathPrefix = getFullPath(uriResolver, schId, false);\n    const localRefs = {};\n    const schemaRefs = new Set();\n    traverse(schema, { allKeys: true }, (sch, jsonPtr, _, parentJsonPtr) => {\n        if (parentJsonPtr === undefined)\n            return;\n        const fullPath = pathPrefix + jsonPtr;\n        let innerBaseId = baseIds[parentJsonPtr];\n        if (typeof sch[schemaId] == \"string\")\n            innerBaseId = addRef.call(this, sch[schemaId]);\n        addAnchor.call(this, sch.$anchor);\n        addAnchor.call(this, sch.$dynamicAnchor);\n        baseIds[jsonPtr] = innerBaseId;\n        function addRef(ref) {\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            const _resolve = this.opts.uriResolver.resolve;\n            ref = normalizeId(innerBaseId ? _resolve(innerBaseId, ref) : ref);\n            if (schemaRefs.has(ref))\n                throw ambiguos(ref);\n            schemaRefs.add(ref);\n            let schOrRef = this.refs[ref];\n            if (typeof schOrRef == \"string\")\n                schOrRef = this.refs[schOrRef];\n            if (typeof schOrRef == \"object\") {\n                checkAmbiguosRef(sch, schOrRef.schema, ref);\n            }\n            else if (ref !== normalizeId(fullPath)) {\n                if (ref[0] === \"#\") {\n                    checkAmbiguosRef(sch, localRefs[ref], ref);\n                    localRefs[ref] = sch;\n                }\n                else {\n                    this.refs[ref] = fullPath;\n                }\n            }\n            return ref;\n        }\n        function addAnchor(anchor) {\n            if (typeof anchor == \"string\") {\n                if (!ANCHOR.test(anchor))\n                    throw new Error(`invalid anchor \"${anchor}\"`);\n                addRef.call(this, `#${anchor}`);\n            }\n        }\n    });\n    return localRefs;\n    function checkAmbiguosRef(sch1, sch2, ref) {\n        if (sch2 !== undefined && !equal(sch1, sch2))\n            throw ambiguos(ref);\n    }\n    function ambiguos(ref) {\n        return new Error(`reference \"${ref}\" resolves to more than one schema`);\n    }\n}\nexports.getSchemaRefs = getSchemaRefs;\n//# sourceMappingURL=resolve.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRules = exports.isJSONType = void 0;\nconst _jsonTypes = [\"string\", \"number\", \"integer\", \"boolean\", \"null\", \"object\", \"array\"];\nconst jsonTypes = new Set(_jsonTypes);\nfunction isJSONType(x) {\n    return typeof x == \"string\" && jsonTypes.has(x);\n}\nexports.isJSONType = isJSONType;\nfunction getRules() {\n    const groups = {\n        number: { type: \"number\", rules: [] },\n        string: { type: \"string\", rules: [] },\n        array: { type: \"array\", rules: [] },\n        object: { type: \"object\", rules: [] },\n    };\n    return {\n        types: { ...groups, integer: true, boolean: true, null: true },\n        rules: [{ rules: [] }, groups.number, groups.string, groups.array, groups.object],\n        post: { rules: [] },\n        all: {},\n        keywords: {},\n    };\n}\nexports.getRules = getRules;\n//# sourceMappingURL=rules.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkStrictMode = exports.getErrorPath = exports.Type = exports.useFunc = exports.setEvaluated = exports.evaluatedPropsToName = exports.mergeEvaluated = exports.eachItem = exports.unescapeJsonPointer = exports.escapeJsonPointer = exports.escapeFragment = exports.unescapeFragment = exports.schemaRefOrVal = exports.schemaHasRulesButRef = exports.schemaHasRules = exports.checkUnknownRules = exports.alwaysValidSchema = exports.toHash = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst code_1 = require(\"./codegen/code\");\n// TODO refactor to use Set\nfunction toHash(arr) {\n    const hash = {};\n    for (const item of arr)\n        hash[item] = true;\n    return hash;\n}\nexports.toHash = toHash;\nfunction alwaysValidSchema(it, schema) {\n    if (typeof schema == \"boolean\")\n        return schema;\n    if (Object.keys(schema).length === 0)\n        return true;\n    checkUnknownRules(it, schema);\n    return !schemaHasRules(schema, it.self.RULES.all);\n}\nexports.alwaysValidSchema = alwaysValidSchema;\nfunction checkUnknownRules(it, schema = it.schema) {\n    const { opts, self } = it;\n    if (!opts.strictSchema)\n        return;\n    if (typeof schema === \"boolean\")\n        return;\n    const rules = self.RULES.keywords;\n    for (const key in schema) {\n        if (!rules[key])\n            checkStrictMode(it, `unknown keyword: \"${key}\"`);\n    }\n}\nexports.checkUnknownRules = checkUnknownRules;\nfunction schemaHasRules(schema, rules) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (rules[key])\n            return true;\n    return false;\n}\nexports.schemaHasRules = schemaHasRules;\nfunction schemaHasRulesButRef(schema, RULES) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (key !== \"$ref\" && RULES.all[key])\n            return true;\n    return false;\n}\nexports.schemaHasRulesButRef = schemaHasRulesButRef;\nfunction schemaRefOrVal({ topSchemaRef, schemaPath }, schema, keyword, $data) {\n    if (!$data) {\n        if (typeof schema == \"number\" || typeof schema == \"boolean\")\n            return schema;\n        if (typeof schema == \"string\")\n            return (0, codegen_1._) `${schema}`;\n    }\n    return (0, codegen_1._) `${topSchemaRef}${schemaPath}${(0, codegen_1.getProperty)(keyword)}`;\n}\nexports.schemaRefOrVal = schemaRefOrVal;\nfunction unescapeFragment(str) {\n    return unescapeJsonPointer(decodeURIComponent(str));\n}\nexports.unescapeFragment = unescapeFragment;\nfunction escapeFragment(str) {\n    return encodeURIComponent(escapeJsonPointer(str));\n}\nexports.escapeFragment = escapeFragment;\nfunction escapeJsonPointer(str) {\n    if (typeof str == \"number\")\n        return `${str}`;\n    return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\nexports.escapeJsonPointer = escapeJsonPointer;\nfunction unescapeJsonPointer(str) {\n    return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nexports.unescapeJsonPointer = unescapeJsonPointer;\nfunction eachItem(xs, f) {\n    if (Array.isArray(xs)) {\n        for (const x of xs)\n            f(x);\n    }\n    else {\n        f(xs);\n    }\n}\nexports.eachItem = eachItem;\nfunction makeMergeEvaluated({ mergeNames, mergeToName, mergeValues, resultToName, }) {\n    return (gen, from, to, toName) => {\n        const res = to === undefined\n            ? from\n            : to instanceof codegen_1.Name\n                ? (from instanceof codegen_1.Name ? mergeNames(gen, from, to) : mergeToName(gen, from, to), to)\n                : from instanceof codegen_1.Name\n                    ? (mergeToName(gen, to, from), from)\n                    : mergeValues(from, to);\n        return toName === codegen_1.Name && !(res instanceof codegen_1.Name) ? resultToName(gen, res) : res;\n    };\n}\nexports.mergeEvaluated = {\n    props: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => {\n            gen.if((0, codegen_1._) `${from} === true`, () => gen.assign(to, true), () => gen.assign(to, (0, codegen_1._) `${to} || {}`).code((0, codegen_1._) `Object.assign(${to}, ${from})`));\n        }),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => {\n            if (from === true) {\n                gen.assign(to, true);\n            }\n            else {\n                gen.assign(to, (0, codegen_1._) `${to} || {}`);\n                setEvaluated(gen, to, from);\n            }\n        }),\n        mergeValues: (from, to) => (from === true ? true : { ...from, ...to }),\n        resultToName: evaluatedPropsToName,\n    }),\n    items: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => gen.assign(to, (0, codegen_1._) `${from} === true ? true : ${to} > ${from} ? ${to} : ${from}`)),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => gen.assign(to, from === true ? true : (0, codegen_1._) `${to} > ${from} ? ${to} : ${from}`)),\n        mergeValues: (from, to) => (from === true ? true : Math.max(from, to)),\n        resultToName: (gen, items) => gen.var(\"items\", items),\n    }),\n};\nfunction evaluatedPropsToName(gen, ps) {\n    if (ps === true)\n        return gen.var(\"props\", true);\n    const props = gen.var(\"props\", (0, codegen_1._) `{}`);\n    if (ps !== undefined)\n        setEvaluated(gen, props, ps);\n    return props;\n}\nexports.evaluatedPropsToName = evaluatedPropsToName;\nfunction setEvaluated(gen, props, ps) {\n    Object.keys(ps).forEach((p) => gen.assign((0, codegen_1._) `${props}${(0, codegen_1.getProperty)(p)}`, true));\n}\nexports.setEvaluated = setEvaluated;\nconst snippets = {};\nfunction useFunc(gen, f) {\n    return gen.scopeValue(\"func\", {\n        ref: f,\n        code: snippets[f.code] || (snippets[f.code] = new code_1._Code(f.code)),\n    });\n}\nexports.useFunc = useFunc;\nvar Type;\n(function (Type) {\n    Type[Type[\"Num\"] = 0] = \"Num\";\n    Type[Type[\"Str\"] = 1] = \"Str\";\n})(Type || (exports.Type = Type = {}));\nfunction getErrorPath(dataProp, dataPropType, jsPropertySyntax) {\n    // let path\n    if (dataProp instanceof codegen_1.Name) {\n        const isNumber = dataPropType === Type.Num;\n        return jsPropertySyntax\n            ? isNumber\n                ? (0, codegen_1._) `\"[\" + ${dataProp} + \"]\"`\n                : (0, codegen_1._) `\"['\" + ${dataProp} + \"']\"`\n            : isNumber\n                ? (0, codegen_1._) `\"/\" + ${dataProp}`\n                : (0, codegen_1._) `\"/\" + ${dataProp}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")`; // TODO maybe use global escapePointer\n    }\n    return jsPropertySyntax ? (0, codegen_1.getProperty)(dataProp).toString() : \"/\" + escapeJsonPointer(dataProp);\n}\nexports.getErrorPath = getErrorPath;\nfunction checkStrictMode(it, msg, mode = it.opts.strictSchema) {\n    if (!mode)\n        return;\n    msg = `strict mode: ${msg}`;\n    if (mode === true)\n        throw new Error(msg);\n    it.self.logger.warn(msg);\n}\nexports.checkStrictMode = checkStrictMode;\n//# sourceMappingURL=util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldUseRule = exports.shouldUseGroup = exports.schemaHasRulesForType = void 0;\nfunction schemaHasRulesForType({ schema, self }, type) {\n    const group = self.RULES.types[type];\n    return group && group !== true && shouldUseGroup(schema, group);\n}\nexports.schemaHasRulesForType = schemaHasRulesForType;\nfunction shouldUseGroup(schema, group) {\n    return group.rules.some((rule) => shouldUseRule(schema, rule));\n}\nexports.shouldUseGroup = shouldUseGroup;\nfunction shouldUseRule(schema, rule) {\n    var _a;\n    return (schema[rule.keyword] !== undefined ||\n        ((_a = rule.definition.implements) === null || _a === void 0 ? void 0 : _a.some((kwd) => schema[kwd] !== undefined)));\n}\nexports.shouldUseRule = shouldUseRule;\n//# sourceMappingURL=applicability.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolOrEmptySchema = exports.topBoolOrEmptySchema = void 0;\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst boolError = {\n    message: \"boolean schema is false\",\n};\nfunction topBoolOrEmptySchema(it) {\n    const { gen, schema, validateName } = it;\n    if (schema === false) {\n        falseSchemaError(it, false);\n    }\n    else if (typeof schema == \"object\" && schema.$async === true) {\n        gen.return(names_1.default.data);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, null);\n        gen.return(true);\n    }\n}\nexports.topBoolOrEmptySchema = topBoolOrEmptySchema;\nfunction boolOrEmptySchema(it, valid) {\n    const { gen, schema } = it;\n    if (schema === false) {\n        gen.var(valid, false); // TODO var\n        falseSchemaError(it);\n    }\n    else {\n        gen.var(valid, true); // TODO var\n    }\n}\nexports.boolOrEmptySchema = boolOrEmptySchema;\nfunction falseSchemaError(it, overrideAllErrors) {\n    const { gen, data } = it;\n    // TODO maybe some other interface should be used for non-keyword validation errors...\n    const cxt = {\n        gen,\n        keyword: \"false schema\",\n        data,\n        schema: false,\n        schemaCode: false,\n        schemaValue: false,\n        params: {},\n        it,\n    };\n    (0, errors_1.reportError)(cxt, boolError, undefined, overrideAllErrors);\n}\n//# sourceMappingURL=boolSchema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reportTypeError = exports.checkDataTypes = exports.checkDataType = exports.coerceAndCheckDataType = exports.getJSONTypes = exports.getSchemaTypes = exports.DataType = void 0;\nconst rules_1 = require(\"../rules\");\nconst applicability_1 = require(\"./applicability\");\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nvar DataType;\n(function (DataType) {\n    DataType[DataType[\"Correct\"] = 0] = \"Correct\";\n    DataType[DataType[\"Wrong\"] = 1] = \"Wrong\";\n})(DataType || (exports.DataType = DataType = {}));\nfunction getSchemaTypes(schema) {\n    const types = getJSONTypes(schema.type);\n    const hasNull = types.includes(\"null\");\n    if (hasNull) {\n        if (schema.nullable === false)\n            throw new Error(\"type: null contradicts nullable: false\");\n    }\n    else {\n        if (!types.length && schema.nullable !== undefined) {\n            throw new Error('\"nullable\" cannot be used without \"type\"');\n        }\n        if (schema.nullable === true)\n            types.push(\"null\");\n    }\n    return types;\n}\nexports.getSchemaTypes = getSchemaTypes;\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nfunction getJSONTypes(ts) {\n    const types = Array.isArray(ts) ? ts : ts ? [ts] : [];\n    if (types.every(rules_1.isJSONType))\n        return types;\n    throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"));\n}\nexports.getJSONTypes = getJSONTypes;\nfunction coerceAndCheckDataType(it, types) {\n    const { gen, data, opts } = it;\n    const coerceTo = coerceToTypes(types, opts.coerceTypes);\n    const checkTypes = types.length > 0 &&\n        !(coerceTo.length === 0 && types.length === 1 && (0, applicability_1.schemaHasRulesForType)(it, types[0]));\n    if (checkTypes) {\n        const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong);\n        gen.if(wrongType, () => {\n            if (coerceTo.length)\n                coerceData(it, types, coerceTo);\n            else\n                reportTypeError(it);\n        });\n    }\n    return checkTypes;\n}\nexports.coerceAndCheckDataType = coerceAndCheckDataType;\nconst COERCIBLE = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"]);\nfunction coerceToTypes(types, coerceTypes) {\n    return coerceTypes\n        ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n        : [];\n}\nfunction coerceData(it, types, coerceTo) {\n    const { gen, data, opts } = it;\n    const dataType = gen.let(\"dataType\", (0, codegen_1._) `typeof ${data}`);\n    const coerced = gen.let(\"coerced\", (0, codegen_1._) `undefined`);\n    if (opts.coerceTypes === \"array\") {\n        gen.if((0, codegen_1._) `${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () => gen\n            .assign(data, (0, codegen_1._) `${data}[0]`)\n            .assign(dataType, (0, codegen_1._) `typeof ${data}`)\n            .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data)));\n    }\n    gen.if((0, codegen_1._) `${coerced} !== undefined`);\n    for (const t of coerceTo) {\n        if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n            coerceSpecificType(t);\n        }\n    }\n    gen.else();\n    reportTypeError(it);\n    gen.endIf();\n    gen.if((0, codegen_1._) `${coerced} !== undefined`, () => {\n        gen.assign(data, coerced);\n        assignParentData(it, coerced);\n    });\n    function coerceSpecificType(t) {\n        switch (t) {\n            case \"string\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n                    .assign(coerced, (0, codegen_1._) `\"\" + ${data}`)\n                    .elseIf((0, codegen_1._) `${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `\"\"`);\n                return;\n            case \"number\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"integer\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"boolean\":\n                gen\n                    .elseIf((0, codegen_1._) `${data} === \"false\" || ${data} === 0 || ${data} === null`)\n                    .assign(coerced, false)\n                    .elseIf((0, codegen_1._) `${data} === \"true\" || ${data} === 1`)\n                    .assign(coerced, true);\n                return;\n            case \"null\":\n                gen.elseIf((0, codegen_1._) `${data} === \"\" || ${data} === 0 || ${data} === false`);\n                gen.assign(coerced, null);\n                return;\n            case \"array\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `[${data}]`);\n        }\n    }\n}\nfunction assignParentData({ gen, parentData, parentDataProperty }, expr) {\n    // TODO use gen.property\n    gen.if((0, codegen_1._) `${parentData} !== undefined`, () => gen.assign((0, codegen_1._) `${parentData}[${parentDataProperty}]`, expr));\n}\nfunction checkDataType(dataType, data, strictNums, correct = DataType.Correct) {\n    const EQ = correct === DataType.Correct ? codegen_1.operators.EQ : codegen_1.operators.NEQ;\n    let cond;\n    switch (dataType) {\n        case \"null\":\n            return (0, codegen_1._) `${data} ${EQ} null`;\n        case \"array\":\n            cond = (0, codegen_1._) `Array.isArray(${data})`;\n            break;\n        case \"object\":\n            cond = (0, codegen_1._) `${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`;\n            break;\n        case \"integer\":\n            cond = numCond((0, codegen_1._) `!(${data} % 1) && !isNaN(${data})`);\n            break;\n        case \"number\":\n            cond = numCond();\n            break;\n        default:\n            return (0, codegen_1._) `typeof ${data} ${EQ} ${dataType}`;\n    }\n    return correct === DataType.Correct ? cond : (0, codegen_1.not)(cond);\n    function numCond(_cond = codegen_1.nil) {\n        return (0, codegen_1.and)((0, codegen_1._) `typeof ${data} == \"number\"`, _cond, strictNums ? (0, codegen_1._) `isFinite(${data})` : codegen_1.nil);\n    }\n}\nexports.checkDataType = checkDataType;\nfunction checkDataTypes(dataTypes, data, strictNums, correct) {\n    if (dataTypes.length === 1) {\n        return checkDataType(dataTypes[0], data, strictNums, correct);\n    }\n    let cond;\n    const types = (0, util_1.toHash)(dataTypes);\n    if (types.array && types.object) {\n        const notObj = (0, codegen_1._) `typeof ${data} != \"object\"`;\n        cond = types.null ? notObj : (0, codegen_1._) `!${data} || ${notObj}`;\n        delete types.null;\n        delete types.array;\n        delete types.object;\n    }\n    else {\n        cond = codegen_1.nil;\n    }\n    if (types.number)\n        delete types.integer;\n    for (const t in types)\n        cond = (0, codegen_1.and)(cond, checkDataType(t, data, strictNums, correct));\n    return cond;\n}\nexports.checkDataTypes = checkDataTypes;\nconst typeError = {\n    message: ({ schema }) => `must be ${schema}`,\n    params: ({ schema, schemaValue }) => typeof schema == \"string\" ? (0, codegen_1._) `{type: ${schema}}` : (0, codegen_1._) `{type: ${schemaValue}}`,\n};\nfunction reportTypeError(it) {\n    const cxt = getTypeErrorContext(it);\n    (0, errors_1.reportError)(cxt, typeError);\n}\nexports.reportTypeError = reportTypeError;\nfunction getTypeErrorContext(it) {\n    const { gen, data, schema } = it;\n    const schemaCode = (0, util_1.schemaRefOrVal)(it, schema, \"type\");\n    return {\n        gen,\n        keyword: \"type\",\n        data,\n        schema: schema.type,\n        schemaCode,\n        schemaValue: schemaCode,\n        parentSchema: schema,\n        params: {},\n        it,\n    };\n}\n//# sourceMappingURL=dataType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assignDefaults = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction assignDefaults(it, ty) {\n    const { properties, items } = it.schema;\n    if (ty === \"object\" && properties) {\n        for (const key in properties) {\n            assignDefault(it, key, properties[key].default);\n        }\n    }\n    else if (ty === \"array\" && Array.isArray(items)) {\n        items.forEach((sch, i) => assignDefault(it, i, sch.default));\n    }\n}\nexports.assignDefaults = assignDefaults;\nfunction assignDefault(it, prop, defaultValue) {\n    const { gen, compositeRule, data, opts } = it;\n    if (defaultValue === undefined)\n        return;\n    const childData = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(prop)}`;\n    if (compositeRule) {\n        (0, util_1.checkStrictMode)(it, `default is ignored for: ${childData}`);\n        return;\n    }\n    let condition = (0, codegen_1._) `${childData} === undefined`;\n    if (opts.useDefaults === \"empty\") {\n        condition = (0, codegen_1._) `${condition} || ${childData} === null || ${childData} === \"\"`;\n    }\n    // `${childData} === undefined` +\n    // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n    gen.if(condition, (0, codegen_1._) `${childData} = ${(0, codegen_1.stringify)(defaultValue)}`);\n}\n//# sourceMappingURL=defaults.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getData = exports.KeywordCxt = exports.validateFunctionCode = void 0;\nconst boolSchema_1 = require(\"./boolSchema\");\nconst dataType_1 = require(\"./dataType\");\nconst applicability_1 = require(\"./applicability\");\nconst dataType_2 = require(\"./dataType\");\nconst defaults_1 = require(\"./defaults\");\nconst keyword_1 = require(\"./keyword\");\nconst subschema_1 = require(\"./subschema\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst resolve_1 = require(\"../resolve\");\nconst util_1 = require(\"../util\");\nconst errors_1 = require(\"../errors\");\n// schema compilation - generates validation function, subschemaCode (below) is used for subschemas\nfunction validateFunctionCode(it) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            topSchemaObjCode(it);\n            return;\n        }\n    }\n    validateFunction(it, () => (0, boolSchema_1.topBoolOrEmptySchema)(it));\n}\nexports.validateFunctionCode = validateFunctionCode;\nfunction validateFunction({ gen, validateName, schema, schemaEnv, opts }, body) {\n    if (opts.code.es5) {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${names_1.default.valCxt}`, schemaEnv.$async, () => {\n            gen.code((0, codegen_1._) `\"use strict\"; ${funcSourceUrl(schema, opts)}`);\n            destructureValCxtES5(gen, opts);\n            gen.code(body);\n        });\n    }\n    else {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${destructureValCxt(opts)}`, schemaEnv.$async, () => gen.code(funcSourceUrl(schema, opts)).code(body));\n    }\n}\nfunction destructureValCxt(opts) {\n    return (0, codegen_1._) `{${names_1.default.instancePath}=\"\", ${names_1.default.parentData}, ${names_1.default.parentDataProperty}, ${names_1.default.rootData}=${names_1.default.data}${opts.dynamicRef ? (0, codegen_1._) `, ${names_1.default.dynamicAnchors}={}` : codegen_1.nil}}={}`;\n}\nfunction destructureValCxtES5(gen, opts) {\n    gen.if(names_1.default.valCxt, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.instancePath}`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentData}`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentDataProperty}`);\n        gen.var(names_1.default.rootData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.rootData}`);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.dynamicAnchors}`);\n    }, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `\"\"`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.rootData, names_1.default.data);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `{}`);\n    });\n}\nfunction topSchemaObjCode(it) {\n    const { schema, opts, gen } = it;\n    validateFunction(it, () => {\n        if (opts.$comment && schema.$comment)\n            commentKeyword(it);\n        checkNoDefault(it);\n        gen.let(names_1.default.vErrors, null);\n        gen.let(names_1.default.errors, 0);\n        if (opts.unevaluated)\n            resetEvaluated(it);\n        typeAndKeywords(it);\n        returnResults(it);\n    });\n    return;\n}\nfunction resetEvaluated(it) {\n    // TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated\n    const { gen, validateName } = it;\n    it.evaluated = gen.const(\"evaluated\", (0, codegen_1._) `${validateName}.evaluated`);\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicProps`, () => gen.assign((0, codegen_1._) `${it.evaluated}.props`, (0, codegen_1._) `undefined`));\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicItems`, () => gen.assign((0, codegen_1._) `${it.evaluated}.items`, (0, codegen_1._) `undefined`));\n}\nfunction funcSourceUrl(schema, opts) {\n    const schId = typeof schema == \"object\" && schema[opts.schemaId];\n    return schId && (opts.code.source || opts.code.process) ? (0, codegen_1._) `/*# sourceURL=${schId} */` : codegen_1.nil;\n}\n// schema compilation - this function is used recursively to generate code for sub-schemas\nfunction subschemaCode(it, valid) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            subSchemaObjCode(it, valid);\n            return;\n        }\n    }\n    (0, boolSchema_1.boolOrEmptySchema)(it, valid);\n}\nfunction schemaCxtHasRules({ schema, self }) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (self.RULES.all[key])\n            return true;\n    return false;\n}\nfunction isSchemaObj(it) {\n    return typeof it.schema != \"boolean\";\n}\nfunction subSchemaObjCode(it, valid) {\n    const { schema, gen, opts } = it;\n    if (opts.$comment && schema.$comment)\n        commentKeyword(it);\n    updateContext(it);\n    checkAsyncSchema(it);\n    const errsCount = gen.const(\"_errs\", names_1.default.errors);\n    typeAndKeywords(it, errsCount);\n    // TODO var\n    gen.var(valid, (0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n}\nfunction checkKeywords(it) {\n    (0, util_1.checkUnknownRules)(it);\n    checkRefsAndKeywords(it);\n}\nfunction typeAndKeywords(it, errsCount) {\n    if (it.opts.jtd)\n        return schemaKeywords(it, [], false, errsCount);\n    const types = (0, dataType_1.getSchemaTypes)(it.schema);\n    const checkedTypes = (0, dataType_1.coerceAndCheckDataType)(it, types);\n    schemaKeywords(it, types, !checkedTypes, errsCount);\n}\nfunction checkRefsAndKeywords(it) {\n    const { schema, errSchemaPath, opts, self } = it;\n    if (schema.$ref && opts.ignoreKeywordsWithRef && (0, util_1.schemaHasRulesButRef)(schema, self.RULES)) {\n        self.logger.warn(`$ref: keywords ignored in schema at path \"${errSchemaPath}\"`);\n    }\n}\nfunction checkNoDefault(it) {\n    const { schema, opts } = it;\n    if (schema.default !== undefined && opts.useDefaults && opts.strictSchema) {\n        (0, util_1.checkStrictMode)(it, \"default is ignored in the schema root\");\n    }\n}\nfunction updateContext(it) {\n    const schId = it.schema[it.opts.schemaId];\n    if (schId)\n        it.baseId = (0, resolve_1.resolveUrl)(it.opts.uriResolver, it.baseId, schId);\n}\nfunction checkAsyncSchema(it) {\n    if (it.schema.$async && !it.schemaEnv.$async)\n        throw new Error(\"async schema in sync schema\");\n}\nfunction commentKeyword({ gen, schemaEnv, schema, errSchemaPath, opts }) {\n    const msg = schema.$comment;\n    if (opts.$comment === true) {\n        gen.code((0, codegen_1._) `${names_1.default.self}.logger.log(${msg})`);\n    }\n    else if (typeof opts.$comment == \"function\") {\n        const schemaPath = (0, codegen_1.str) `${errSchemaPath}/$comment`;\n        const rootName = gen.scopeValue(\"root\", { ref: schemaEnv.root });\n        gen.code((0, codegen_1._) `${names_1.default.self}.opts.$comment(${msg}, ${schemaPath}, ${rootName}.schema)`);\n    }\n}\nfunction returnResults(it) {\n    const { gen, schemaEnv, validateName, ValidationError, opts } = it;\n    if (schemaEnv.$async) {\n        // TODO assign unevaluated\n        gen.if((0, codegen_1._) `${names_1.default.errors} === 0`, () => gen.return(names_1.default.data), () => gen.throw((0, codegen_1._) `new ${ValidationError}(${names_1.default.vErrors})`));\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, names_1.default.vErrors);\n        if (opts.unevaluated)\n            assignEvaluated(it);\n        gen.return((0, codegen_1._) `${names_1.default.errors} === 0`);\n    }\n}\nfunction assignEvaluated({ gen, evaluated, props, items }) {\n    if (props instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.props`, props);\n    if (items instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.items`, items);\n}\nfunction schemaKeywords(it, types, typeErrors, errsCount) {\n    const { gen, schema, data, allErrors, opts, self } = it;\n    const { RULES } = self;\n    if (schema.$ref && (opts.ignoreKeywordsWithRef || !(0, util_1.schemaHasRulesButRef)(schema, RULES))) {\n        gen.block(() => keywordCode(it, \"$ref\", RULES.all.$ref.definition)); // TODO typecast\n        return;\n    }\n    if (!opts.jtd)\n        checkStrictTypes(it, types);\n    gen.block(() => {\n        for (const group of RULES.rules)\n            groupKeywords(group);\n        groupKeywords(RULES.post);\n    });\n    function groupKeywords(group) {\n        if (!(0, applicability_1.shouldUseGroup)(schema, group))\n            return;\n        if (group.type) {\n            gen.if((0, dataType_2.checkDataType)(group.type, data, opts.strictNumbers));\n            iterateKeywords(it, group);\n            if (types.length === 1 && types[0] === group.type && typeErrors) {\n                gen.else();\n                (0, dataType_2.reportTypeError)(it);\n            }\n            gen.endIf();\n        }\n        else {\n            iterateKeywords(it, group);\n        }\n        // TODO make it \"ok\" call?\n        if (!allErrors)\n            gen.if((0, codegen_1._) `${names_1.default.errors} === ${errsCount || 0}`);\n    }\n}\nfunction iterateKeywords(it, group) {\n    const { gen, schema, opts: { useDefaults }, } = it;\n    if (useDefaults)\n        (0, defaults_1.assignDefaults)(it, group.type);\n    gen.block(() => {\n        for (const rule of group.rules) {\n            if ((0, applicability_1.shouldUseRule)(schema, rule)) {\n                keywordCode(it, rule.keyword, rule.definition, group.type);\n            }\n        }\n    });\n}\nfunction checkStrictTypes(it, types) {\n    if (it.schemaEnv.meta || !it.opts.strictTypes)\n        return;\n    checkContextTypes(it, types);\n    if (!it.opts.allowUnionTypes)\n        checkMultipleTypes(it, types);\n    checkKeywordTypes(it, it.dataTypes);\n}\nfunction checkContextTypes(it, types) {\n    if (!types.length)\n        return;\n    if (!it.dataTypes.length) {\n        it.dataTypes = types;\n        return;\n    }\n    types.forEach((t) => {\n        if (!includesType(it.dataTypes, t)) {\n            strictTypesError(it, `type \"${t}\" not allowed by context \"${it.dataTypes.join(\",\")}\"`);\n        }\n    });\n    narrowSchemaTypes(it, types);\n}\nfunction checkMultipleTypes(it, ts) {\n    if (ts.length > 1 && !(ts.length === 2 && ts.includes(\"null\"))) {\n        strictTypesError(it, \"use allowUnionTypes to allow union type keyword\");\n    }\n}\nfunction checkKeywordTypes(it, ts) {\n    const rules = it.self.RULES.all;\n    for (const keyword in rules) {\n        const rule = rules[keyword];\n        if (typeof rule == \"object\" && (0, applicability_1.shouldUseRule)(it.schema, rule)) {\n            const { type } = rule.definition;\n            if (type.length && !type.some((t) => hasApplicableType(ts, t))) {\n                strictTypesError(it, `missing type \"${type.join(\",\")}\" for keyword \"${keyword}\"`);\n            }\n        }\n    }\n}\nfunction hasApplicableType(schTs, kwdT) {\n    return schTs.includes(kwdT) || (kwdT === \"number\" && schTs.includes(\"integer\"));\n}\nfunction includesType(ts, t) {\n    return ts.includes(t) || (t === \"integer\" && ts.includes(\"number\"));\n}\nfunction narrowSchemaTypes(it, withTypes) {\n    const ts = [];\n    for (const t of it.dataTypes) {\n        if (includesType(withTypes, t))\n            ts.push(t);\n        else if (withTypes.includes(\"integer\") && t === \"number\")\n            ts.push(\"integer\");\n    }\n    it.dataTypes = ts;\n}\nfunction strictTypesError(it, msg) {\n    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n    msg += ` at \"${schemaPath}\" (strictTypes)`;\n    (0, util_1.checkStrictMode)(it, msg, it.opts.strictTypes);\n}\nclass KeywordCxt {\n    constructor(it, def, keyword) {\n        (0, keyword_1.validateKeywordUsage)(it, def, keyword);\n        this.gen = it.gen;\n        this.allErrors = it.allErrors;\n        this.keyword = keyword;\n        this.data = it.data;\n        this.schema = it.schema[keyword];\n        this.$data = def.$data && it.opts.$data && this.schema && this.schema.$data;\n        this.schemaValue = (0, util_1.schemaRefOrVal)(it, this.schema, keyword, this.$data);\n        this.schemaType = def.schemaType;\n        this.parentSchema = it.schema;\n        this.params = {};\n        this.it = it;\n        this.def = def;\n        if (this.$data) {\n            this.schemaCode = it.gen.const(\"vSchema\", getData(this.$data, it));\n        }\n        else {\n            this.schemaCode = this.schemaValue;\n            if (!(0, keyword_1.validSchemaType)(this.schema, def.schemaType, def.allowUndefined)) {\n                throw new Error(`${keyword} value must be ${JSON.stringify(def.schemaType)}`);\n            }\n        }\n        if (\"code\" in def ? def.trackErrors : def.errors !== false) {\n            this.errsCount = it.gen.const(\"_errs\", names_1.default.errors);\n        }\n    }\n    result(condition, successAction, failAction) {\n        this.failResult((0, codegen_1.not)(condition), successAction, failAction);\n    }\n    failResult(condition, successAction, failAction) {\n        this.gen.if(condition);\n        if (failAction)\n            failAction();\n        else\n            this.error();\n        if (successAction) {\n            this.gen.else();\n            successAction();\n            if (this.allErrors)\n                this.gen.endIf();\n        }\n        else {\n            if (this.allErrors)\n                this.gen.endIf();\n            else\n                this.gen.else();\n        }\n    }\n    pass(condition, failAction) {\n        this.failResult((0, codegen_1.not)(condition), undefined, failAction);\n    }\n    fail(condition) {\n        if (condition === undefined) {\n            this.error();\n            if (!this.allErrors)\n                this.gen.if(false); // this branch will be removed by gen.optimize\n            return;\n        }\n        this.gen.if(condition);\n        this.error();\n        if (this.allErrors)\n            this.gen.endIf();\n        else\n            this.gen.else();\n    }\n    fail$data(condition) {\n        if (!this.$data)\n            return this.fail(condition);\n        const { schemaCode } = this;\n        this.fail((0, codegen_1._) `${schemaCode} !== undefined && (${(0, codegen_1.or)(this.invalid$data(), condition)})`);\n    }\n    error(append, errorParams, errorPaths) {\n        if (errorParams) {\n            this.setParams(errorParams);\n            this._error(append, errorPaths);\n            this.setParams({});\n            return;\n        }\n        this._error(append, errorPaths);\n    }\n    _error(append, errorPaths) {\n        ;\n        (append ? errors_1.reportExtraError : errors_1.reportError)(this, this.def.error, errorPaths);\n    }\n    $dataError() {\n        (0, errors_1.reportError)(this, this.def.$dataError || errors_1.keyword$DataError);\n    }\n    reset() {\n        if (this.errsCount === undefined)\n            throw new Error('add \"trackErrors\" to keyword definition');\n        (0, errors_1.resetErrorsCount)(this.gen, this.errsCount);\n    }\n    ok(cond) {\n        if (!this.allErrors)\n            this.gen.if(cond);\n    }\n    setParams(obj, assign) {\n        if (assign)\n            Object.assign(this.params, obj);\n        else\n            this.params = obj;\n    }\n    block$data(valid, codeBlock, $dataValid = codegen_1.nil) {\n        this.gen.block(() => {\n            this.check$data(valid, $dataValid);\n            codeBlock();\n        });\n    }\n    check$data(valid = codegen_1.nil, $dataValid = codegen_1.nil) {\n        if (!this.$data)\n            return;\n        const { gen, schemaCode, schemaType, def } = this;\n        gen.if((0, codegen_1.or)((0, codegen_1._) `${schemaCode} === undefined`, $dataValid));\n        if (valid !== codegen_1.nil)\n            gen.assign(valid, true);\n        if (schemaType.length || def.validateSchema) {\n            gen.elseIf(this.invalid$data());\n            this.$dataError();\n            if (valid !== codegen_1.nil)\n                gen.assign(valid, false);\n        }\n        gen.else();\n    }\n    invalid$data() {\n        const { gen, schemaCode, schemaType, def, it } = this;\n        return (0, codegen_1.or)(wrong$DataType(), invalid$DataSchema());\n        function wrong$DataType() {\n            if (schemaType.length) {\n                /* istanbul ignore if */\n                if (!(schemaCode instanceof codegen_1.Name))\n                    throw new Error(\"ajv implementation error\");\n                const st = Array.isArray(schemaType) ? schemaType : [schemaType];\n                return (0, codegen_1._) `${(0, dataType_2.checkDataTypes)(st, schemaCode, it.opts.strictNumbers, dataType_2.DataType.Wrong)}`;\n            }\n            return codegen_1.nil;\n        }\n        function invalid$DataSchema() {\n            if (def.validateSchema) {\n                const validateSchemaRef = gen.scopeValue(\"validate$data\", { ref: def.validateSchema }); // TODO value.code for standalone\n                return (0, codegen_1._) `!${validateSchemaRef}(${schemaCode})`;\n            }\n            return codegen_1.nil;\n        }\n    }\n    subschema(appl, valid) {\n        const subschema = (0, subschema_1.getSubschema)(this.it, appl);\n        (0, subschema_1.extendSubschemaData)(subschema, this.it, appl);\n        (0, subschema_1.extendSubschemaMode)(subschema, appl);\n        const nextContext = { ...this.it, ...subschema, items: undefined, props: undefined };\n        subschemaCode(nextContext, valid);\n        return nextContext;\n    }\n    mergeEvaluated(schemaCxt, toName) {\n        const { it, gen } = this;\n        if (!it.opts.unevaluated)\n            return;\n        if (it.props !== true && schemaCxt.props !== undefined) {\n            it.props = util_1.mergeEvaluated.props(gen, schemaCxt.props, it.props, toName);\n        }\n        if (it.items !== true && schemaCxt.items !== undefined) {\n            it.items = util_1.mergeEvaluated.items(gen, schemaCxt.items, it.items, toName);\n        }\n    }\n    mergeValidEvaluated(schemaCxt, valid) {\n        const { it, gen } = this;\n        if (it.opts.unevaluated && (it.props !== true || it.items !== true)) {\n            gen.if(valid, () => this.mergeEvaluated(schemaCxt, codegen_1.Name));\n            return true;\n        }\n    }\n}\nexports.KeywordCxt = KeywordCxt;\nfunction keywordCode(it, keyword, def, ruleType) {\n    const cxt = new KeywordCxt(it, def, keyword);\n    if (\"code\" in def) {\n        def.code(cxt, ruleType);\n    }\n    else if (cxt.$data && def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n    else if (\"macro\" in def) {\n        (0, keyword_1.macroKeywordCode)(cxt, def);\n    }\n    else if (def.compile || def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n}\nconst JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nconst RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, { dataLevel, dataNames, dataPathArr }) {\n    let jsonPointer;\n    let data;\n    if ($data === \"\")\n        return names_1.default.rootData;\n    if ($data[0] === \"/\") {\n        if (!JSON_POINTER.test($data))\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        jsonPointer = $data;\n        data = names_1.default.rootData;\n    }\n    else {\n        const matches = RELATIVE_JSON_POINTER.exec($data);\n        if (!matches)\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        const up = +matches[1];\n        jsonPointer = matches[2];\n        if (jsonPointer === \"#\") {\n            if (up >= dataLevel)\n                throw new Error(errorMsg(\"property/index\", up));\n            return dataPathArr[dataLevel - up];\n        }\n        if (up > dataLevel)\n            throw new Error(errorMsg(\"data\", up));\n        data = dataNames[dataLevel - up];\n        if (!jsonPointer)\n            return data;\n    }\n    let expr = data;\n    const segments = jsonPointer.split(\"/\");\n    for (const segment of segments) {\n        if (segment) {\n            data = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)((0, util_1.unescapeJsonPointer)(segment))}`;\n            expr = (0, codegen_1._) `${expr} && ${data}`;\n        }\n    }\n    return expr;\n    function errorMsg(pointerType, up) {\n        return `Cannot access ${pointerType} ${up} levels up, current level is ${dataLevel}`;\n    }\n}\nexports.getData = getData;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateKeywordUsage = exports.validSchemaType = exports.funcKeywordCode = exports.macroKeywordCode = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst code_1 = require(\"../../vocabularies/code\");\nconst errors_1 = require(\"../errors\");\nfunction macroKeywordCode(cxt, def) {\n    const { gen, keyword, schema, parentSchema, it } = cxt;\n    const macroSchema = def.macro.call(it.self, schema, parentSchema, it);\n    const schemaRef = useKeyword(gen, keyword, macroSchema);\n    if (it.opts.validateSchema !== false)\n        it.self.validateSchema(macroSchema, true);\n    const valid = gen.name(\"valid\");\n    cxt.subschema({\n        schema: macroSchema,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n        topSchemaRef: schemaRef,\n        compositeRule: true,\n    }, valid);\n    cxt.pass(valid, () => cxt.error(true));\n}\nexports.macroKeywordCode = macroKeywordCode;\nfunction funcKeywordCode(cxt, def) {\n    var _a;\n    const { gen, keyword, schema, parentSchema, $data, it } = cxt;\n    checkAsyncKeyword(it, def);\n    const validate = !$data && def.compile ? def.compile.call(it.self, schema, parentSchema, it) : def.validate;\n    const validateRef = useKeyword(gen, keyword, validate);\n    const valid = gen.let(\"valid\");\n    cxt.block$data(valid, validateKeyword);\n    cxt.ok((_a = def.valid) !== null && _a !== void 0 ? _a : valid);\n    function validateKeyword() {\n        if (def.errors === false) {\n            assignValid();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => cxt.error());\n        }\n        else {\n            const ruleErrs = def.async ? validateAsync() : validateSync();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => addErrs(cxt, ruleErrs));\n        }\n    }\n    function validateAsync() {\n        const ruleErrs = gen.let(\"ruleErrs\", null);\n        gen.try(() => assignValid((0, codegen_1._) `await `), (e) => gen.assign(valid, false).if((0, codegen_1._) `${e} instanceof ${it.ValidationError}`, () => gen.assign(ruleErrs, (0, codegen_1._) `${e}.errors`), () => gen.throw(e)));\n        return ruleErrs;\n    }\n    function validateSync() {\n        const validateErrs = (0, codegen_1._) `${validateRef}.errors`;\n        gen.assign(validateErrs, null);\n        assignValid(codegen_1.nil);\n        return validateErrs;\n    }\n    function assignValid(_await = def.async ? (0, codegen_1._) `await ` : codegen_1.nil) {\n        const passCxt = it.opts.passContext ? names_1.default.this : names_1.default.self;\n        const passSchema = !((\"compile\" in def && !$data) || def.schema === false);\n        gen.assign(valid, (0, codegen_1._) `${_await}${(0, code_1.callValidateCode)(cxt, validateRef, passCxt, passSchema)}`, def.modifying);\n    }\n    function reportErrs(errors) {\n        var _a;\n        gen.if((0, codegen_1.not)((_a = def.valid) !== null && _a !== void 0 ? _a : valid), errors);\n    }\n}\nexports.funcKeywordCode = funcKeywordCode;\nfunction modifyData(cxt) {\n    const { gen, data, it } = cxt;\n    gen.if(it.parentData, () => gen.assign(data, (0, codegen_1._) `${it.parentData}[${it.parentDataProperty}]`));\n}\nfunction addErrs(cxt, errs) {\n    const { gen } = cxt;\n    gen.if((0, codegen_1._) `Array.isArray(${errs})`, () => {\n        gen\n            .assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`)\n            .assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n        (0, errors_1.extendErrors)(cxt);\n    }, () => cxt.error());\n}\nfunction checkAsyncKeyword({ schemaEnv }, def) {\n    if (def.async && !schemaEnv.$async)\n        throw new Error(\"async keyword in sync schema\");\n}\nfunction useKeyword(gen, keyword, result) {\n    if (result === undefined)\n        throw new Error(`keyword \"${keyword}\" failed to compile`);\n    return gen.scopeValue(\"keyword\", typeof result == \"function\" ? { ref: result } : { ref: result, code: (0, codegen_1.stringify)(result) });\n}\nfunction validSchemaType(schema, schemaType, allowUndefined = false) {\n    // TODO add tests\n    return (!schemaType.length ||\n        schemaType.some((st) => st === \"array\"\n            ? Array.isArray(schema)\n            : st === \"object\"\n                ? schema && typeof schema == \"object\" && !Array.isArray(schema)\n                : typeof schema == st || (allowUndefined && typeof schema == \"undefined\")));\n}\nexports.validSchemaType = validSchemaType;\nfunction validateKeywordUsage({ schema, opts, self, errSchemaPath }, def, keyword) {\n    /* istanbul ignore if */\n    if (Array.isArray(def.keyword) ? !def.keyword.includes(keyword) : def.keyword !== keyword) {\n        throw new Error(\"ajv implementation error\");\n    }\n    const deps = def.dependencies;\n    if (deps === null || deps === void 0 ? void 0 : deps.some((kwd) => !Object.prototype.hasOwnProperty.call(schema, kwd))) {\n        throw new Error(`parent schema must have dependencies of ${keyword}: ${deps.join(\",\")}`);\n    }\n    if (def.validateSchema) {\n        const valid = def.validateSchema(schema[keyword]);\n        if (!valid) {\n            const msg = `keyword \"${keyword}\" value is invalid at path \"${errSchemaPath}\": ` +\n                self.errorsText(def.validateSchema.errors);\n            if (opts.validateSchema === \"log\")\n                self.logger.error(msg);\n            else\n                throw new Error(msg);\n        }\n    }\n}\nexports.validateKeywordUsage = validateKeywordUsage;\n//# sourceMappingURL=keyword.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendSubschemaMode = exports.extendSubschemaData = exports.getSubschema = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction getSubschema(it, { keyword, schemaProp, schema, schemaPath, errSchemaPath, topSchemaRef }) {\n    if (keyword !== undefined && schema !== undefined) {\n        throw new Error('both \"keyword\" and \"schema\" passed, only one allowed');\n    }\n    if (keyword !== undefined) {\n        const sch = it.schema[keyword];\n        return schemaProp === undefined\n            ? {\n                schema: sch,\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n            }\n            : {\n                schema: sch[schemaProp],\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}${(0, codegen_1.getProperty)(schemaProp)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}/${(0, util_1.escapeFragment)(schemaProp)}`,\n            };\n    }\n    if (schema !== undefined) {\n        if (schemaPath === undefined || errSchemaPath === undefined || topSchemaRef === undefined) {\n            throw new Error('\"schemaPath\", \"errSchemaPath\" and \"topSchemaRef\" are required with \"schema\"');\n        }\n        return {\n            schema,\n            schemaPath,\n            topSchemaRef,\n            errSchemaPath,\n        };\n    }\n    throw new Error('either \"keyword\" or \"schema\" must be passed');\n}\nexports.getSubschema = getSubschema;\nfunction extendSubschemaData(subschema, it, { dataProp, dataPropType: dpType, data, dataTypes, propertyName }) {\n    if (data !== undefined && dataProp !== undefined) {\n        throw new Error('both \"data\" and \"dataProp\" passed, only one allowed');\n    }\n    const { gen } = it;\n    if (dataProp !== undefined) {\n        const { errorPath, dataPathArr, opts } = it;\n        const nextData = gen.let(\"data\", (0, codegen_1._) `${it.data}${(0, codegen_1.getProperty)(dataProp)}`, true);\n        dataContextProps(nextData);\n        subschema.errorPath = (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(dataProp, dpType, opts.jsPropertySyntax)}`;\n        subschema.parentDataProperty = (0, codegen_1._) `${dataProp}`;\n        subschema.dataPathArr = [...dataPathArr, subschema.parentDataProperty];\n    }\n    if (data !== undefined) {\n        const nextData = data instanceof codegen_1.Name ? data : gen.let(\"data\", data, true); // replaceable if used once?\n        dataContextProps(nextData);\n        if (propertyName !== undefined)\n            subschema.propertyName = propertyName;\n        // TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr\n    }\n    if (dataTypes)\n        subschema.dataTypes = dataTypes;\n    function dataContextProps(_nextData) {\n        subschema.data = _nextData;\n        subschema.dataLevel = it.dataLevel + 1;\n        subschema.dataTypes = [];\n        it.definedProperties = new Set();\n        subschema.parentData = it.data;\n        subschema.dataNames = [...it.dataNames, _nextData];\n    }\n}\nexports.extendSubschemaData = extendSubschemaData;\nfunction extendSubschemaMode(subschema, { jtdDiscriminator, jtdMetadata, compositeRule, createErrors, allErrors }) {\n    if (compositeRule !== undefined)\n        subschema.compositeRule = compositeRule;\n    if (createErrors !== undefined)\n        subschema.createErrors = createErrors;\n    if (allErrors !== undefined)\n        subschema.allErrors = allErrors;\n    subschema.jtdDiscriminator = jtdDiscriminator; // not inherited\n    subschema.jtdMetadata = jtdMetadata; // not inherited\n}\nexports.extendSubschemaMode = extendSubschemaMode;\n//# sourceMappingURL=subschema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = void 0;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nconst validation_error_1 = require(\"./runtime/validation_error\");\nconst ref_error_1 = require(\"./compile/ref_error\");\nconst rules_1 = require(\"./compile/rules\");\nconst compile_1 = require(\"./compile\");\nconst codegen_2 = require(\"./compile/codegen\");\nconst resolve_1 = require(\"./compile/resolve\");\nconst dataType_1 = require(\"./compile/validate/dataType\");\nconst util_1 = require(\"./compile/util\");\nconst $dataRefSchema = require(\"./refs/data.json\");\nconst uri_1 = require(\"./runtime/uri\");\nconst defaultRegExp = (str, flags) => new RegExp(str, flags);\ndefaultRegExp.code = \"new RegExp\";\nconst META_IGNORE_OPTIONS = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\"];\nconst EXT_SCOPE_NAMES = new Set([\n    \"validate\",\n    \"serialize\",\n    \"parse\",\n    \"wrapper\",\n    \"root\",\n    \"schema\",\n    \"keyword\",\n    \"pattern\",\n    \"formats\",\n    \"validate$data\",\n    \"func\",\n    \"obj\",\n    \"Error\",\n]);\nconst removedOptions = {\n    errorDataPath: \"\",\n    format: \"`validateFormats: false` can be used instead.\",\n    nullable: '\"nullable\" keyword is supported by default.',\n    jsonPointers: \"Deprecated jsPropertySyntax can be used instead.\",\n    extendRefs: \"Deprecated ignoreKeywordsWithRef can be used instead.\",\n    missingRefs: \"Pass empty schema with $id that should be ignored to ajv.addSchema.\",\n    processCode: \"Use option `code: {process: (code, schemaEnv: object) => string}`\",\n    sourceCode: \"Use option `code: {source: true}`\",\n    strictDefaults: \"It is default now, see option `strict`.\",\n    strictKeywords: \"It is default now, see option `strict`.\",\n    uniqueItems: '\"uniqueItems\" keyword is always validated.',\n    unknownFormats: \"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\",\n    cache: \"Map is used as cache, schema object as key.\",\n    serialize: \"Map is used as cache, schema object as key.\",\n    ajvErrors: \"It is default now.\",\n};\nconst deprecatedOptions = {\n    ignoreKeywordsWithRef: \"\",\n    jsPropertySyntax: \"\",\n    unicode: '\"minLength\"/\"maxLength\" account for unicode characters by default.',\n};\nconst MAX_EXPRESSION = 200;\n// eslint-disable-next-line complexity\nfunction requiredOptions(o) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0;\n    const s = o.strict;\n    const _optz = (_a = o.code) === null || _a === void 0 ? void 0 : _a.optimize;\n    const optimize = _optz === true || _optz === undefined ? 1 : _optz || 0;\n    const regExp = (_c = (_b = o.code) === null || _b === void 0 ? void 0 : _b.regExp) !== null && _c !== void 0 ? _c : defaultRegExp;\n    const uriResolver = (_d = o.uriResolver) !== null && _d !== void 0 ? _d : uri_1.default;\n    return {\n        strictSchema: (_f = (_e = o.strictSchema) !== null && _e !== void 0 ? _e : s) !== null && _f !== void 0 ? _f : true,\n        strictNumbers: (_h = (_g = o.strictNumbers) !== null && _g !== void 0 ? _g : s) !== null && _h !== void 0 ? _h : true,\n        strictTypes: (_k = (_j = o.strictTypes) !== null && _j !== void 0 ? _j : s) !== null && _k !== void 0 ? _k : \"log\",\n        strictTuples: (_m = (_l = o.strictTuples) !== null && _l !== void 0 ? _l : s) !== null && _m !== void 0 ? _m : \"log\",\n        strictRequired: (_p = (_o = o.strictRequired) !== null && _o !== void 0 ? _o : s) !== null && _p !== void 0 ? _p : false,\n        code: o.code ? { ...o.code, optimize, regExp } : { optimize, regExp },\n        loopRequired: (_q = o.loopRequired) !== null && _q !== void 0 ? _q : MAX_EXPRESSION,\n        loopEnum: (_r = o.loopEnum) !== null && _r !== void 0 ? _r : MAX_EXPRESSION,\n        meta: (_s = o.meta) !== null && _s !== void 0 ? _s : true,\n        messages: (_t = o.messages) !== null && _t !== void 0 ? _t : true,\n        inlineRefs: (_u = o.inlineRefs) !== null && _u !== void 0 ? _u : true,\n        schemaId: (_v = o.schemaId) !== null && _v !== void 0 ? _v : \"$id\",\n        addUsedSchema: (_w = o.addUsedSchema) !== null && _w !== void 0 ? _w : true,\n        validateSchema: (_x = o.validateSchema) !== null && _x !== void 0 ? _x : true,\n        validateFormats: (_y = o.validateFormats) !== null && _y !== void 0 ? _y : true,\n        unicodeRegExp: (_z = o.unicodeRegExp) !== null && _z !== void 0 ? _z : true,\n        int32range: (_0 = o.int32range) !== null && _0 !== void 0 ? _0 : true,\n        uriResolver: uriResolver,\n    };\n}\nclass Ajv {\n    constructor(opts = {}) {\n        this.schemas = {};\n        this.refs = {};\n        this.formats = {};\n        this._compilations = new Set();\n        this._loading = {};\n        this._cache = new Map();\n        opts = this.opts = { ...opts, ...requiredOptions(opts) };\n        const { es5, lines } = this.opts.code;\n        this.scope = new codegen_2.ValueScope({ scope: {}, prefixes: EXT_SCOPE_NAMES, es5, lines });\n        this.logger = getLogger(opts.logger);\n        const formatOpt = opts.validateFormats;\n        opts.validateFormats = false;\n        this.RULES = (0, rules_1.getRules)();\n        checkOptions.call(this, removedOptions, opts, \"NOT SUPPORTED\");\n        checkOptions.call(this, deprecatedOptions, opts, \"DEPRECATED\", \"warn\");\n        this._metaOpts = getMetaSchemaOptions.call(this);\n        if (opts.formats)\n            addInitialFormats.call(this);\n        this._addVocabularies();\n        this._addDefaultMetaSchema();\n        if (opts.keywords)\n            addInitialKeywords.call(this, opts.keywords);\n        if (typeof opts.meta == \"object\")\n            this.addMetaSchema(opts.meta);\n        addInitialSchemas.call(this);\n        opts.validateFormats = formatOpt;\n    }\n    _addVocabularies() {\n        this.addKeyword(\"$async\");\n    }\n    _addDefaultMetaSchema() {\n        const { $data, meta, schemaId } = this.opts;\n        let _dataRefSchema = $dataRefSchema;\n        if (schemaId === \"id\") {\n            _dataRefSchema = { ...$dataRefSchema };\n            _dataRefSchema.id = _dataRefSchema.$id;\n            delete _dataRefSchema.$id;\n        }\n        if (meta && $data)\n            this.addMetaSchema(_dataRefSchema, _dataRefSchema[schemaId], false);\n    }\n    defaultMeta() {\n        const { meta, schemaId } = this.opts;\n        return (this.opts.defaultMeta = typeof meta == \"object\" ? meta[schemaId] || meta : undefined);\n    }\n    validate(schemaKeyRef, // key, ref or schema object\n    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n    data // to be validated\n    ) {\n        let v;\n        if (typeof schemaKeyRef == \"string\") {\n            v = this.getSchema(schemaKeyRef);\n            if (!v)\n                throw new Error(`no schema with key or ref \"${schemaKeyRef}\"`);\n        }\n        else {\n            v = this.compile(schemaKeyRef);\n        }\n        const valid = v(data);\n        if (!(\"$async\" in v))\n            this.errors = v.errors;\n        return valid;\n    }\n    compile(schema, _meta) {\n        const sch = this._addSchema(schema, _meta);\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    compileAsync(schema, meta) {\n        if (typeof this.opts.loadSchema != \"function\") {\n            throw new Error(\"options.loadSchema should be a function\");\n        }\n        const { loadSchema } = this.opts;\n        return runCompileAsync.call(this, schema, meta);\n        async function runCompileAsync(_schema, _meta) {\n            await loadMetaSchema.call(this, _schema.$schema);\n            const sch = this._addSchema(_schema, _meta);\n            return sch.validate || _compileAsync.call(this, sch);\n        }\n        async function loadMetaSchema($ref) {\n            if ($ref && !this.getSchema($ref)) {\n                await runCompileAsync.call(this, { $ref }, true);\n            }\n        }\n        async function _compileAsync(sch) {\n            try {\n                return this._compileSchemaEnv(sch);\n            }\n            catch (e) {\n                if (!(e instanceof ref_error_1.default))\n                    throw e;\n                checkLoaded.call(this, e);\n                await loadMissingSchema.call(this, e.missingSchema);\n                return _compileAsync.call(this, sch);\n            }\n        }\n        function checkLoaded({ missingSchema: ref, missingRef }) {\n            if (this.refs[ref]) {\n                throw new Error(`AnySchema ${ref} is loaded but ${missingRef} cannot be resolved`);\n            }\n        }\n        async function loadMissingSchema(ref) {\n            const _schema = await _loadSchema.call(this, ref);\n            if (!this.refs[ref])\n                await loadMetaSchema.call(this, _schema.$schema);\n            if (!this.refs[ref])\n                this.addSchema(_schema, ref, meta);\n        }\n        async function _loadSchema(ref) {\n            const p = this._loading[ref];\n            if (p)\n                return p;\n            try {\n                return await (this._loading[ref] = loadSchema(ref));\n            }\n            finally {\n                delete this._loading[ref];\n            }\n        }\n    }\n    // Adds schema to the instance\n    addSchema(schema, // If array is passed, `key` will be ignored\n    key, // Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n    _meta, // true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n    _validateSchema = this.opts.validateSchema // false to skip schema validation. Used internally, option validateSchema should be used instead.\n    ) {\n        if (Array.isArray(schema)) {\n            for (const sch of schema)\n                this.addSchema(sch, undefined, _meta, _validateSchema);\n            return this;\n        }\n        let id;\n        if (typeof schema === \"object\") {\n            const { schemaId } = this.opts;\n            id = schema[schemaId];\n            if (id !== undefined && typeof id != \"string\") {\n                throw new Error(`schema ${schemaId} must be string`);\n            }\n        }\n        key = (0, resolve_1.normalizeId)(key || id);\n        this._checkUnique(key);\n        this.schemas[key] = this._addSchema(schema, _meta, key, _validateSchema, true);\n        return this;\n    }\n    // Add schema that will be used to validate other schemas\n    // options in META_IGNORE_OPTIONS are alway set to false\n    addMetaSchema(schema, key, // schema key\n    _validateSchema = this.opts.validateSchema // false to skip schema validation, can be used to override validateSchema option for meta-schema\n    ) {\n        this.addSchema(schema, key, true, _validateSchema);\n        return this;\n    }\n    //  Validate schema against its meta-schema\n    validateSchema(schema, throwOrLogError) {\n        if (typeof schema == \"boolean\")\n            return true;\n        let $schema;\n        $schema = schema.$schema;\n        if ($schema !== undefined && typeof $schema != \"string\") {\n            throw new Error(\"$schema must be a string\");\n        }\n        $schema = $schema || this.opts.defaultMeta || this.defaultMeta();\n        if (!$schema) {\n            this.logger.warn(\"meta-schema not available\");\n            this.errors = null;\n            return true;\n        }\n        const valid = this.validate($schema, schema);\n        if (!valid && throwOrLogError) {\n            const message = \"schema is invalid: \" + this.errorsText();\n            if (this.opts.validateSchema === \"log\")\n                this.logger.error(message);\n            else\n                throw new Error(message);\n        }\n        return valid;\n    }\n    // Get compiled schema by `key` or `ref`.\n    // (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)\n    getSchema(keyRef) {\n        let sch;\n        while (typeof (sch = getSchEnv.call(this, keyRef)) == \"string\")\n            keyRef = sch;\n        if (sch === undefined) {\n            const { schemaId } = this.opts;\n            const root = new compile_1.SchemaEnv({ schema: {}, schemaId });\n            sch = compile_1.resolveSchema.call(this, root, keyRef);\n            if (!sch)\n                return;\n            this.refs[keyRef] = sch;\n        }\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    // Remove cached schema(s).\n    // If no parameter is passed all schemas but meta-schemas are removed.\n    // If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n    // Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n    removeSchema(schemaKeyRef) {\n        if (schemaKeyRef instanceof RegExp) {\n            this._removeAllSchemas(this.schemas, schemaKeyRef);\n            this._removeAllSchemas(this.refs, schemaKeyRef);\n            return this;\n        }\n        switch (typeof schemaKeyRef) {\n            case \"undefined\":\n                this._removeAllSchemas(this.schemas);\n                this._removeAllSchemas(this.refs);\n                this._cache.clear();\n                return this;\n            case \"string\": {\n                const sch = getSchEnv.call(this, schemaKeyRef);\n                if (typeof sch == \"object\")\n                    this._cache.delete(sch.schema);\n                delete this.schemas[schemaKeyRef];\n                delete this.refs[schemaKeyRef];\n                return this;\n            }\n            case \"object\": {\n                const cacheKey = schemaKeyRef;\n                this._cache.delete(cacheKey);\n                let id = schemaKeyRef[this.opts.schemaId];\n                if (id) {\n                    id = (0, resolve_1.normalizeId)(id);\n                    delete this.schemas[id];\n                    delete this.refs[id];\n                }\n                return this;\n            }\n            default:\n                throw new Error(\"ajv.removeSchema: invalid parameter\");\n        }\n    }\n    // add \"vocabulary\" - a collection of keywords\n    addVocabulary(definitions) {\n        for (const def of definitions)\n            this.addKeyword(def);\n        return this;\n    }\n    addKeyword(kwdOrDef, def // deprecated\n    ) {\n        let keyword;\n        if (typeof kwdOrDef == \"string\") {\n            keyword = kwdOrDef;\n            if (typeof def == \"object\") {\n                this.logger.warn(\"these parameters are deprecated, see docs for addKeyword\");\n                def.keyword = keyword;\n            }\n        }\n        else if (typeof kwdOrDef == \"object\" && def === undefined) {\n            def = kwdOrDef;\n            keyword = def.keyword;\n            if (Array.isArray(keyword) && !keyword.length) {\n                throw new Error(\"addKeywords: keyword must be string or non-empty array\");\n            }\n        }\n        else {\n            throw new Error(\"invalid addKeywords parameters\");\n        }\n        checkKeyword.call(this, keyword, def);\n        if (!def) {\n            (0, util_1.eachItem)(keyword, (kwd) => addRule.call(this, kwd));\n            return this;\n        }\n        keywordMetaschema.call(this, def);\n        const definition = {\n            ...def,\n            type: (0, dataType_1.getJSONTypes)(def.type),\n            schemaType: (0, dataType_1.getJSONTypes)(def.schemaType),\n        };\n        (0, util_1.eachItem)(keyword, definition.type.length === 0\n            ? (k) => addRule.call(this, k, definition)\n            : (k) => definition.type.forEach((t) => addRule.call(this, k, definition, t)));\n        return this;\n    }\n    getKeyword(keyword) {\n        const rule = this.RULES.all[keyword];\n        return typeof rule == \"object\" ? rule.definition : !!rule;\n    }\n    // Remove keyword\n    removeKeyword(keyword) {\n        // TODO return type should be Ajv\n        const { RULES } = this;\n        delete RULES.keywords[keyword];\n        delete RULES.all[keyword];\n        for (const group of RULES.rules) {\n            const i = group.rules.findIndex((rule) => rule.keyword === keyword);\n            if (i >= 0)\n                group.rules.splice(i, 1);\n        }\n        return this;\n    }\n    // Add format\n    addFormat(name, format) {\n        if (typeof format == \"string\")\n            format = new RegExp(format);\n        this.formats[name] = format;\n        return this;\n    }\n    errorsText(errors = this.errors, // optional array of validation errors\n    { separator = \", \", dataVar = \"data\" } = {} // optional options with properties `separator` and `dataVar`\n    ) {\n        if (!errors || errors.length === 0)\n            return \"No errors\";\n        return errors\n            .map((e) => `${dataVar}${e.instancePath} ${e.message}`)\n            .reduce((text, msg) => text + separator + msg);\n    }\n    $dataMetaSchema(metaSchema, keywordsJsonPointers) {\n        const rules = this.RULES.all;\n        metaSchema = JSON.parse(JSON.stringify(metaSchema));\n        for (const jsonPointer of keywordsJsonPointers) {\n            const segments = jsonPointer.split(\"/\").slice(1); // first segment is an empty string\n            let keywords = metaSchema;\n            for (const seg of segments)\n                keywords = keywords[seg];\n            for (const key in rules) {\n                const rule = rules[key];\n                if (typeof rule != \"object\")\n                    continue;\n                const { $data } = rule.definition;\n                const schema = keywords[key];\n                if ($data && schema)\n                    keywords[key] = schemaOrData(schema);\n            }\n        }\n        return metaSchema;\n    }\n    _removeAllSchemas(schemas, regex) {\n        for (const keyRef in schemas) {\n            const sch = schemas[keyRef];\n            if (!regex || regex.test(keyRef)) {\n                if (typeof sch == \"string\") {\n                    delete schemas[keyRef];\n                }\n                else if (sch && !sch.meta) {\n                    this._cache.delete(sch.schema);\n                    delete schemas[keyRef];\n                }\n            }\n        }\n    }\n    _addSchema(schema, meta, baseId, validateSchema = this.opts.validateSchema, addSchema = this.opts.addUsedSchema) {\n        let id;\n        const { schemaId } = this.opts;\n        if (typeof schema == \"object\") {\n            id = schema[schemaId];\n        }\n        else {\n            if (this.opts.jtd)\n                throw new Error(\"schema must be object\");\n            else if (typeof schema != \"boolean\")\n                throw new Error(\"schema must be object or boolean\");\n        }\n        let sch = this._cache.get(schema);\n        if (sch !== undefined)\n            return sch;\n        baseId = (0, resolve_1.normalizeId)(id || baseId);\n        const localRefs = resolve_1.getSchemaRefs.call(this, schema, baseId);\n        sch = new compile_1.SchemaEnv({ schema, schemaId, meta, baseId, localRefs });\n        this._cache.set(sch.schema, sch);\n        if (addSchema && !baseId.startsWith(\"#\")) {\n            // TODO atm it is allowed to overwrite schemas without id (instead of not adding them)\n            if (baseId)\n                this._checkUnique(baseId);\n            this.refs[baseId] = sch;\n        }\n        if (validateSchema)\n            this.validateSchema(schema, true);\n        return sch;\n    }\n    _checkUnique(id) {\n        if (this.schemas[id] || this.refs[id]) {\n            throw new Error(`schema with key or id \"${id}\" already exists`);\n        }\n    }\n    _compileSchemaEnv(sch) {\n        if (sch.meta)\n            this._compileMetaSchema(sch);\n        else\n            compile_1.compileSchema.call(this, sch);\n        /* istanbul ignore if */\n        if (!sch.validate)\n            throw new Error(\"ajv implementation error\");\n        return sch.validate;\n    }\n    _compileMetaSchema(sch) {\n        const currentOpts = this.opts;\n        this.opts = this._metaOpts;\n        try {\n            compile_1.compileSchema.call(this, sch);\n        }\n        finally {\n            this.opts = currentOpts;\n        }\n    }\n}\nAjv.ValidationError = validation_error_1.default;\nAjv.MissingRefError = ref_error_1.default;\nexports.default = Ajv;\nfunction checkOptions(checkOpts, options, msg, log = \"error\") {\n    for (const key in checkOpts) {\n        const opt = key;\n        if (opt in options)\n            this.logger[log](`${msg}: option ${key}. ${checkOpts[opt]}`);\n    }\n}\nfunction getSchEnv(keyRef) {\n    keyRef = (0, resolve_1.normalizeId)(keyRef); // TODO tests fail without this line\n    return this.schemas[keyRef] || this.refs[keyRef];\n}\nfunction addInitialSchemas() {\n    const optsSchemas = this.opts.schemas;\n    if (!optsSchemas)\n        return;\n    if (Array.isArray(optsSchemas))\n        this.addSchema(optsSchemas);\n    else\n        for (const key in optsSchemas)\n            this.addSchema(optsSchemas[key], key);\n}\nfunction addInitialFormats() {\n    for (const name in this.opts.formats) {\n        const format = this.opts.formats[name];\n        if (format)\n            this.addFormat(name, format);\n    }\n}\nfunction addInitialKeywords(defs) {\n    if (Array.isArray(defs)) {\n        this.addVocabulary(defs);\n        return;\n    }\n    this.logger.warn(\"keywords option as map is deprecated, pass array\");\n    for (const keyword in defs) {\n        const def = defs[keyword];\n        if (!def.keyword)\n            def.keyword = keyword;\n        this.addKeyword(def);\n    }\n}\nfunction getMetaSchemaOptions() {\n    const metaOpts = { ...this.opts };\n    for (const opt of META_IGNORE_OPTIONS)\n        delete metaOpts[opt];\n    return metaOpts;\n}\nconst noLogs = { log() { }, warn() { }, error() { } };\nfunction getLogger(logger) {\n    if (logger === false)\n        return noLogs;\n    if (logger === undefined)\n        return console;\n    if (logger.log && logger.warn && logger.error)\n        return logger;\n    throw new Error(\"logger must implement log, warn and error methods\");\n}\nconst KEYWORD_NAME = /^[a-z_$][a-z0-9_$:-]*$/i;\nfunction checkKeyword(keyword, def) {\n    const { RULES } = this;\n    (0, util_1.eachItem)(keyword, (kwd) => {\n        if (RULES.keywords[kwd])\n            throw new Error(`Keyword ${kwd} is already defined`);\n        if (!KEYWORD_NAME.test(kwd))\n            throw new Error(`Keyword ${kwd} has invalid name`);\n    });\n    if (!def)\n        return;\n    if (def.$data && !(\"code\" in def || \"validate\" in def)) {\n        throw new Error('$data keyword must have \"code\" or \"validate\" function');\n    }\n}\nfunction addRule(keyword, definition, dataType) {\n    var _a;\n    const post = definition === null || definition === void 0 ? void 0 : definition.post;\n    if (dataType && post)\n        throw new Error('keyword with \"post\" flag cannot have \"type\"');\n    const { RULES } = this;\n    let ruleGroup = post ? RULES.post : RULES.rules.find(({ type: t }) => t === dataType);\n    if (!ruleGroup) {\n        ruleGroup = { type: dataType, rules: [] };\n        RULES.rules.push(ruleGroup);\n    }\n    RULES.keywords[keyword] = true;\n    if (!definition)\n        return;\n    const rule = {\n        keyword,\n        definition: {\n            ...definition,\n            type: (0, dataType_1.getJSONTypes)(definition.type),\n            schemaType: (0, dataType_1.getJSONTypes)(definition.schemaType),\n        },\n    };\n    if (definition.before)\n        addBeforeRule.call(this, ruleGroup, rule, definition.before);\n    else\n        ruleGroup.rules.push(rule);\n    RULES.all[keyword] = rule;\n    (_a = definition.implements) === null || _a === void 0 ? void 0 : _a.forEach((kwd) => this.addKeyword(kwd));\n}\nfunction addBeforeRule(ruleGroup, rule, before) {\n    const i = ruleGroup.rules.findIndex((_rule) => _rule.keyword === before);\n    if (i >= 0) {\n        ruleGroup.rules.splice(i, 0, rule);\n    }\n    else {\n        ruleGroup.rules.push(rule);\n        this.logger.warn(`rule ${before} is not defined`);\n    }\n}\nfunction keywordMetaschema(def) {\n    let { metaSchema } = def;\n    if (metaSchema === undefined)\n        return;\n    if (def.$data && this.opts.$data)\n        metaSchema = schemaOrData(metaSchema);\n    def.validateSchema = this.compile(metaSchema, true);\n}\nconst $dataRef = {\n    $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n};\nfunction schemaOrData(schema) {\n    return { anyOf: [schema, $dataRef] };\n}\n//# sourceMappingURL=core.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://github.com/ajv-validator/ajv/issues/889\nconst equal = require(\"fast-deep-equal\");\nequal.code = 'require(\"ajv/dist/runtime/equal\").default';\nexports.default = equal;\n//# sourceMappingURL=equal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nfunction ucs2length(str) {\n    const len = str.length;\n    let length = 0;\n    let pos = 0;\n    let value;\n    while (pos < len) {\n        length++;\n        value = str.charCodeAt(pos++);\n        if (value >= 0xd800 && value <= 0xdbff && pos < len) {\n            // high surrogate, and there is a next character\n            value = str.charCodeAt(pos);\n            if ((value & 0xfc00) === 0xdc00)\n                pos++; // low surrogate\n        }\n    }\n    return length;\n}\nexports.default = ucs2length;\nucs2length.code = 'require(\"ajv/dist/runtime/ucs2length\").default';\n//# sourceMappingURL=ucs2length.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst uri = require(\"fast-uri\");\nuri.code = 'require(\"ajv/dist/runtime/uri\").default';\nexports.default = uri;\n//# sourceMappingURL=uri.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ValidationError extends Error {\n    constructor(errors) {\n        super(\"validation failed\");\n        this.errors = errors;\n        this.ajv = this.validation = true;\n    }\n}\nexports.default = ValidationError;\n//# sourceMappingURL=validation_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateAdditionalItems = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"additionalItems\",\n    type: \"array\",\n    schemaType: [\"boolean\", \"object\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { parentSchema, it } = cxt;\n        const { items } = parentSchema;\n        if (!Array.isArray(items)) {\n            (0, util_1.checkStrictMode)(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas');\n            return;\n        }\n        validateAdditionalItems(cxt, items);\n    },\n};\nfunction validateAdditionalItems(cxt, items) {\n    const { gen, schema, data, keyword, it } = cxt;\n    it.items = true;\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    if (schema === false) {\n        cxt.setParams({ len: items.length });\n        cxt.pass((0, codegen_1._) `${len} <= ${items.length}`);\n    }\n    else if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n        const valid = gen.var(\"valid\", (0, codegen_1._) `${len} <= ${items.length}`); // TODO var\n        gen.if((0, codegen_1.not)(valid), () => validateItems(valid));\n        cxt.ok(valid);\n    }\n    function validateItems(valid) {\n        gen.forRange(\"i\", items.length, len, (i) => {\n            cxt.subschema({ keyword, dataProp: i, dataPropType: util_1.Type.Num }, valid);\n            if (!it.allErrors)\n                gen.if((0, codegen_1.not)(valid), () => gen.break());\n        });\n    }\n}\nexports.validateAdditionalItems = validateAdditionalItems;\nexports.default = def;\n//# sourceMappingURL=additionalItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must NOT have additional properties\",\n    params: ({ params }) => (0, codegen_1._) `{additionalProperty: ${params.additionalProperty}}`,\n};\nconst def = {\n    keyword: \"additionalProperties\",\n    type: [\"object\"],\n    schemaType: [\"boolean\", \"object\"],\n    allowUndefined: true,\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, errsCount, it } = cxt;\n        /* istanbul ignore if */\n        if (!errsCount)\n            throw new Error(\"ajv implementation error\");\n        const { allErrors, opts } = it;\n        it.props = true;\n        if (opts.removeAdditional !== \"all\" && (0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const props = (0, code_1.allSchemaProperties)(parentSchema.properties);\n        const patProps = (0, code_1.allSchemaProperties)(parentSchema.patternProperties);\n        checkAdditionalProperties();\n        cxt.ok((0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n        function checkAdditionalProperties() {\n            gen.forIn(\"key\", data, (key) => {\n                if (!props.length && !patProps.length)\n                    additionalPropertyCode(key);\n                else\n                    gen.if(isAdditional(key), () => additionalPropertyCode(key));\n            });\n        }\n        function isAdditional(key) {\n            let definedProp;\n            if (props.length > 8) {\n                // TODO maybe an option instead of hard-coded 8?\n                const propsSchema = (0, util_1.schemaRefOrVal)(it, parentSchema.properties, \"properties\");\n                definedProp = (0, code_1.isOwnProperty)(gen, propsSchema, key);\n            }\n            else if (props.length) {\n                definedProp = (0, codegen_1.or)(...props.map((p) => (0, codegen_1._) `${key} === ${p}`));\n            }\n            else {\n                definedProp = codegen_1.nil;\n            }\n            if (patProps.length) {\n                definedProp = (0, codegen_1.or)(definedProp, ...patProps.map((p) => (0, codegen_1._) `${(0, code_1.usePattern)(cxt, p)}.test(${key})`));\n            }\n            return (0, codegen_1.not)(definedProp);\n        }\n        function deleteAdditional(key) {\n            gen.code((0, codegen_1._) `delete ${data}[${key}]`);\n        }\n        function additionalPropertyCode(key) {\n            if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n                deleteAdditional(key);\n                return;\n            }\n            if (schema === false) {\n                cxt.setParams({ additionalProperty: key });\n                cxt.error();\n                if (!allErrors)\n                    gen.break();\n                return;\n            }\n            if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n                const valid = gen.name(\"valid\");\n                if (opts.removeAdditional === \"failing\") {\n                    applyAdditionalSchema(key, valid, false);\n                    gen.if((0, codegen_1.not)(valid), () => {\n                        cxt.reset();\n                        deleteAdditional(key);\n                    });\n                }\n                else {\n                    applyAdditionalSchema(key, valid);\n                    if (!allErrors)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                }\n            }\n        }\n        function applyAdditionalSchema(key, valid, errors) {\n            const subschema = {\n                keyword: \"additionalProperties\",\n                dataProp: key,\n                dataPropType: util_1.Type.Str,\n            };\n            if (errors === false) {\n                Object.assign(subschema, {\n                    compositeRule: true,\n                    createErrors: false,\n                    allErrors: false,\n                });\n            }\n            cxt.subschema(subschema, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=additionalProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"allOf\",\n    schemaType: \"array\",\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        const valid = gen.name(\"valid\");\n        schema.forEach((sch, i) => {\n            if ((0, util_1.alwaysValidSchema)(it, sch))\n                return;\n            const schCxt = cxt.subschema({ keyword: \"allOf\", schemaProp: i }, valid);\n            cxt.ok(valid);\n            cxt.mergeEvaluated(schCxt);\n        });\n    },\n};\nexports.default = def;\n//# sourceMappingURL=allOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"anyOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    code: code_1.validateUnion,\n    error: { message: \"must match a schema in anyOf\" },\n};\nexports.default = def;\n//# sourceMappingURL=anyOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { min, max } }) => max === undefined\n        ? (0, codegen_1.str) `must contain at least ${min} valid item(s)`\n        : (0, codegen_1.str) `must contain at least ${min} and no more than ${max} valid item(s)`,\n    params: ({ params: { min, max } }) => max === undefined ? (0, codegen_1._) `{minContains: ${min}}` : (0, codegen_1._) `{minContains: ${min}, maxContains: ${max}}`,\n};\nconst def = {\n    keyword: \"contains\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        let min;\n        let max;\n        const { minContains, maxContains } = parentSchema;\n        if (it.opts.next) {\n            min = minContains === undefined ? 1 : minContains;\n            max = maxContains;\n        }\n        else {\n            min = 1;\n        }\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        cxt.setParams({ min, max });\n        if (max === undefined && min === 0) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored`);\n            return;\n        }\n        if (max !== undefined && min > max) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" > \"maxContains\" is always invalid`);\n            cxt.fail();\n            return;\n        }\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            let cond = (0, codegen_1._) `${len} >= ${min}`;\n            if (max !== undefined)\n                cond = (0, codegen_1._) `${cond} && ${len} <= ${max}`;\n            cxt.pass(cond);\n            return;\n        }\n        it.items = true;\n        const valid = gen.name(\"valid\");\n        if (max === undefined && min === 1) {\n            validateItems(valid, () => gen.if(valid, () => gen.break()));\n        }\n        else if (min === 0) {\n            gen.let(valid, true);\n            if (max !== undefined)\n                gen.if((0, codegen_1._) `${data}.length > 0`, validateItemsWithCount);\n        }\n        else {\n            gen.let(valid, false);\n            validateItemsWithCount();\n        }\n        cxt.result(valid, () => cxt.reset());\n        function validateItemsWithCount() {\n            const schValid = gen.name(\"_valid\");\n            const count = gen.let(\"count\", 0);\n            validateItems(schValid, () => gen.if(schValid, () => checkLimits(count)));\n        }\n        function validateItems(_valid, block) {\n            gen.forRange(\"i\", 0, len, (i) => {\n                cxt.subschema({\n                    keyword: \"contains\",\n                    dataProp: i,\n                    dataPropType: util_1.Type.Num,\n                    compositeRule: true,\n                }, _valid);\n                block();\n            });\n        }\n        function checkLimits(count) {\n            gen.code((0, codegen_1._) `${count}++`);\n            if (max === undefined) {\n                gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true).break());\n            }\n            else {\n                gen.if((0, codegen_1._) `${count} > ${max}`, () => gen.assign(valid, false).break());\n                if (min === 1)\n                    gen.assign(valid, true);\n                else\n                    gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true));\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=contains.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateSchemaDeps = exports.validatePropertyDeps = exports.error = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nexports.error = {\n    message: ({ params: { property, depsCount, deps } }) => {\n        const property_ies = depsCount === 1 ? \"property\" : \"properties\";\n        return (0, codegen_1.str) `must have ${property_ies} ${deps} when property ${property} is present`;\n    },\n    params: ({ params: { property, depsCount, deps, missingProperty } }) => (0, codegen_1._) `{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n};\nconst def = {\n    keyword: \"dependencies\",\n    type: \"object\",\n    schemaType: \"object\",\n    error: exports.error,\n    code(cxt) {\n        const [propDeps, schDeps] = splitDependencies(cxt);\n        validatePropertyDeps(cxt, propDeps);\n        validateSchemaDeps(cxt, schDeps);\n    },\n};\nfunction splitDependencies({ schema }) {\n    const propertyDeps = {};\n    const schemaDeps = {};\n    for (const key in schema) {\n        if (key === \"__proto__\")\n            continue;\n        const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps;\n        deps[key] = schema[key];\n    }\n    return [propertyDeps, schemaDeps];\n}\nfunction validatePropertyDeps(cxt, propertyDeps = cxt.schema) {\n    const { gen, data, it } = cxt;\n    if (Object.keys(propertyDeps).length === 0)\n        return;\n    const missing = gen.let(\"missing\");\n    for (const prop in propertyDeps) {\n        const deps = propertyDeps[prop];\n        if (deps.length === 0)\n            continue;\n        const hasProperty = (0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties);\n        cxt.setParams({\n            property: prop,\n            depsCount: deps.length,\n            deps: deps.join(\", \"),\n        });\n        if (it.allErrors) {\n            gen.if(hasProperty, () => {\n                for (const depProp of deps) {\n                    (0, code_1.checkReportMissingProp)(cxt, depProp);\n                }\n            });\n        }\n        else {\n            gen.if((0, codegen_1._) `${hasProperty} && (${(0, code_1.checkMissingProp)(cxt, deps, missing)})`);\n            (0, code_1.reportMissingProp)(cxt, missing);\n            gen.else();\n        }\n    }\n}\nexports.validatePropertyDeps = validatePropertyDeps;\nfunction validateSchemaDeps(cxt, schemaDeps = cxt.schema) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    for (const prop in schemaDeps) {\n        if ((0, util_1.alwaysValidSchema)(it, schemaDeps[prop]))\n            continue;\n        gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties), () => {\n            const schCxt = cxt.subschema({ keyword, schemaProp: prop }, valid);\n            cxt.mergeValidEvaluated(schCxt, valid);\n        }, () => gen.var(valid, true) // TODO var\n        );\n        cxt.ok(valid);\n    }\n}\nexports.validateSchemaDeps = validateSchemaDeps;\nexports.default = def;\n//# sourceMappingURL=dependencies.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params }) => (0, codegen_1.str) `must match \"${params.ifClause}\" schema`,\n    params: ({ params }) => (0, codegen_1._) `{failingKeyword: ${params.ifClause}}`,\n};\nconst def = {\n    keyword: \"if\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, parentSchema, it } = cxt;\n        if (parentSchema.then === undefined && parentSchema.else === undefined) {\n            (0, util_1.checkStrictMode)(it, '\"if\" without \"then\" and \"else\" is ignored');\n        }\n        const hasThen = hasSchema(it, \"then\");\n        const hasElse = hasSchema(it, \"else\");\n        if (!hasThen && !hasElse)\n            return;\n        const valid = gen.let(\"valid\", true);\n        const schValid = gen.name(\"_valid\");\n        validateIf();\n        cxt.reset();\n        if (hasThen && hasElse) {\n            const ifClause = gen.let(\"ifClause\");\n            cxt.setParams({ ifClause });\n            gen.if(schValid, validateClause(\"then\", ifClause), validateClause(\"else\", ifClause));\n        }\n        else if (hasThen) {\n            gen.if(schValid, validateClause(\"then\"));\n        }\n        else {\n            gen.if((0, codegen_1.not)(schValid), validateClause(\"else\"));\n        }\n        cxt.pass(valid, () => cxt.error(true));\n        function validateIf() {\n            const schCxt = cxt.subschema({\n                keyword: \"if\",\n                compositeRule: true,\n                createErrors: false,\n                allErrors: false,\n            }, schValid);\n            cxt.mergeEvaluated(schCxt);\n        }\n        function validateClause(keyword, ifClause) {\n            return () => {\n                const schCxt = cxt.subschema({ keyword }, schValid);\n                gen.assign(valid, schValid);\n                cxt.mergeValidEvaluated(schCxt, valid);\n                if (ifClause)\n                    gen.assign(ifClause, (0, codegen_1._) `${keyword}`);\n                else\n                    cxt.setParams({ ifClause: keyword });\n            };\n        }\n    },\n};\nfunction hasSchema(it, keyword) {\n    const schema = it.schema[keyword];\n    return schema !== undefined && !(0, util_1.alwaysValidSchema)(it, schema);\n}\nexports.default = def;\n//# sourceMappingURL=if.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst additionalItems_1 = require(\"./additionalItems\");\nconst prefixItems_1 = require(\"./prefixItems\");\nconst items_1 = require(\"./items\");\nconst items2020_1 = require(\"./items2020\");\nconst contains_1 = require(\"./contains\");\nconst dependencies_1 = require(\"./dependencies\");\nconst propertyNames_1 = require(\"./propertyNames\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst properties_1 = require(\"./properties\");\nconst patternProperties_1 = require(\"./patternProperties\");\nconst not_1 = require(\"./not\");\nconst anyOf_1 = require(\"./anyOf\");\nconst oneOf_1 = require(\"./oneOf\");\nconst allOf_1 = require(\"./allOf\");\nconst if_1 = require(\"./if\");\nconst thenElse_1 = require(\"./thenElse\");\nfunction getApplicator(draft2020 = false) {\n    const applicator = [\n        // any\n        not_1.default,\n        anyOf_1.default,\n        oneOf_1.default,\n        allOf_1.default,\n        if_1.default,\n        thenElse_1.default,\n        // object\n        propertyNames_1.default,\n        additionalProperties_1.default,\n        dependencies_1.default,\n        properties_1.default,\n        patternProperties_1.default,\n    ];\n    // array\n    if (draft2020)\n        applicator.push(prefixItems_1.default, items2020_1.default);\n    else\n        applicator.push(additionalItems_1.default, items_1.default);\n    applicator.push(contains_1.default);\n    return applicator;\n}\nexports.default = getApplicator;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateTuple = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"array\", \"boolean\"],\n    before: \"uniqueItems\",\n    code(cxt) {\n        const { schema, it } = cxt;\n        if (Array.isArray(schema))\n            return validateTuple(cxt, \"additionalItems\", schema);\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nfunction validateTuple(cxt, extraItems, schArr = cxt.schema) {\n    const { gen, parentSchema, data, keyword, it } = cxt;\n    checkStrictTuple(parentSchema);\n    if (it.opts.unevaluated && schArr.length && it.items !== true) {\n        it.items = util_1.mergeEvaluated.items(gen, schArr.length, it.items);\n    }\n    const valid = gen.name(\"valid\");\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    schArr.forEach((sch, i) => {\n        if ((0, util_1.alwaysValidSchema)(it, sch))\n            return;\n        gen.if((0, codegen_1._) `${len} > ${i}`, () => cxt.subschema({\n            keyword,\n            schemaProp: i,\n            dataProp: i,\n        }, valid));\n        cxt.ok(valid);\n    });\n    function checkStrictTuple(sch) {\n        const { opts, errSchemaPath } = it;\n        const l = schArr.length;\n        const fullTuple = l === sch.minItems && (l === sch.maxItems || sch[extraItems] === false);\n        if (opts.strictTuples && !fullTuple) {\n            const msg = `\"${keyword}\" is ${l}-tuple, but minItems or maxItems/${extraItems} are not specified or different at path \"${errSchemaPath}\"`;\n            (0, util_1.checkStrictMode)(it, msg, opts.strictTuples);\n        }\n    }\n}\nexports.validateTuple = validateTuple;\nexports.default = def;\n//# sourceMappingURL=items.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst additionalItems_1 = require(\"./additionalItems\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { schema, parentSchema, it } = cxt;\n        const { prefixItems } = parentSchema;\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        if (prefixItems)\n            (0, additionalItems_1.validateAdditionalItems)(cxt, prefixItems);\n        else\n            cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nexports.default = def;\n//# sourceMappingURL=items2020.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"not\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            cxt.fail();\n            return;\n        }\n        const valid = gen.name(\"valid\");\n        cxt.subschema({\n            keyword: \"not\",\n            compositeRule: true,\n            createErrors: false,\n            allErrors: false,\n        }, valid);\n        cxt.failResult(valid, () => cxt.reset(), () => cxt.error());\n    },\n    error: { message: \"must NOT be valid\" },\n};\nexports.default = def;\n//# sourceMappingURL=not.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must match exactly one schema in oneOf\",\n    params: ({ params }) => (0, codegen_1._) `{passingSchemas: ${params.passing}}`,\n};\nconst def = {\n    keyword: \"oneOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        if (it.opts.discriminator && parentSchema.discriminator)\n            return;\n        const schArr = schema;\n        const valid = gen.let(\"valid\", false);\n        const passing = gen.let(\"passing\", null);\n        const schValid = gen.name(\"_valid\");\n        cxt.setParams({ passing });\n        // TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas\n        gen.block(validateOneOf);\n        cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n        function validateOneOf() {\n            schArr.forEach((sch, i) => {\n                let schCxt;\n                if ((0, util_1.alwaysValidSchema)(it, sch)) {\n                    gen.var(schValid, true);\n                }\n                else {\n                    schCxt = cxt.subschema({\n                        keyword: \"oneOf\",\n                        schemaProp: i,\n                        compositeRule: true,\n                    }, schValid);\n                }\n                if (i > 0) {\n                    gen\n                        .if((0, codegen_1._) `${schValid} && ${valid}`)\n                        .assign(valid, false)\n                        .assign(passing, (0, codegen_1._) `[${passing}, ${i}]`)\n                        .else();\n                }\n                gen.if(schValid, () => {\n                    gen.assign(valid, true);\n                    gen.assign(passing, i);\n                    if (schCxt)\n                        cxt.mergeEvaluated(schCxt, codegen_1.Name);\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=oneOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst util_2 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"patternProperties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, data, parentSchema, it } = cxt;\n        const { opts } = it;\n        const patterns = (0, code_1.allSchemaProperties)(schema);\n        const alwaysValidPatterns = patterns.filter((p) => (0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (patterns.length === 0 ||\n            (alwaysValidPatterns.length === patterns.length &&\n                (!it.opts.unevaluated || it.props === true))) {\n            return;\n        }\n        const checkProperties = opts.strictSchema && !opts.allowMatchingProperties && parentSchema.properties;\n        const valid = gen.name(\"valid\");\n        if (it.props !== true && !(it.props instanceof codegen_1.Name)) {\n            it.props = (0, util_2.evaluatedPropsToName)(gen, it.props);\n        }\n        const { props } = it;\n        validatePatternProperties();\n        function validatePatternProperties() {\n            for (const pat of patterns) {\n                if (checkProperties)\n                    checkMatchingProperties(pat);\n                if (it.allErrors) {\n                    validateProperties(pat);\n                }\n                else {\n                    gen.var(valid, true); // TODO var\n                    validateProperties(pat);\n                    gen.if(valid);\n                }\n            }\n        }\n        function checkMatchingProperties(pat) {\n            for (const prop in checkProperties) {\n                if (new RegExp(pat).test(prop)) {\n                    (0, util_1.checkStrictMode)(it, `property ${prop} matches pattern ${pat} (use allowMatchingProperties)`);\n                }\n            }\n        }\n        function validateProperties(pat) {\n            gen.forIn(\"key\", data, (key) => {\n                gen.if((0, codegen_1._) `${(0, code_1.usePattern)(cxt, pat)}.test(${key})`, () => {\n                    const alwaysValid = alwaysValidPatterns.includes(pat);\n                    if (!alwaysValid) {\n                        cxt.subschema({\n                            keyword: \"patternProperties\",\n                            schemaProp: pat,\n                            dataProp: key,\n                            dataPropType: util_2.Type.Str,\n                        }, valid);\n                    }\n                    if (it.opts.unevaluated && props !== true) {\n                        gen.assign((0, codegen_1._) `${props}[${key}]`, true);\n                    }\n                    else if (!alwaysValid && !it.allErrors) {\n                        // can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)\n                        // or if all properties were evaluated (props === true)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                    }\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=patternProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst items_1 = require(\"./items\");\nconst def = {\n    keyword: \"prefixItems\",\n    type: \"array\",\n    schemaType: [\"array\"],\n    before: \"uniqueItems\",\n    code: (cxt) => (0, items_1.validateTuple)(cxt, \"items\"),\n};\nexports.default = def;\n//# sourceMappingURL=prefixItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst validate_1 = require(\"../../compile/validate\");\nconst code_1 = require(\"../code\");\nconst util_1 = require(\"../../compile/util\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst def = {\n    keyword: \"properties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n            additionalProperties_1.default.code(new validate_1.KeywordCxt(it, additionalProperties_1.default, \"additionalProperties\"));\n        }\n        const allProps = (0, code_1.allSchemaProperties)(schema);\n        for (const prop of allProps) {\n            it.definedProperties.add(prop);\n        }\n        if (it.opts.unevaluated && allProps.length && it.props !== true) {\n            it.props = util_1.mergeEvaluated.props(gen, (0, util_1.toHash)(allProps), it.props);\n        }\n        const properties = allProps.filter((p) => !(0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (properties.length === 0)\n            return;\n        const valid = gen.name(\"valid\");\n        for (const prop of properties) {\n            if (hasDefault(prop)) {\n                applyPropertySchema(prop);\n            }\n            else {\n                gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties));\n                applyPropertySchema(prop);\n                if (!it.allErrors)\n                    gen.else().var(valid, true);\n                gen.endIf();\n            }\n            cxt.it.definedProperties.add(prop);\n            cxt.ok(valid);\n        }\n        function hasDefault(prop) {\n            return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined;\n        }\n        function applyPropertySchema(prop) {\n            cxt.subschema({\n                keyword: \"properties\",\n                schemaProp: prop,\n                dataProp: prop,\n            }, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=properties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"property name must be valid\",\n    params: ({ params }) => (0, codegen_1._) `{propertyName: ${params.propertyName}}`,\n};\nconst def = {\n    keyword: \"propertyNames\",\n    type: \"object\",\n    schemaType: [\"object\", \"boolean\"],\n    error,\n    code(cxt) {\n        const { gen, schema, data, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const valid = gen.name(\"valid\");\n        gen.forIn(\"key\", data, (key) => {\n            cxt.setParams({ propertyName: key });\n            cxt.subschema({\n                keyword: \"propertyNames\",\n                data: key,\n                dataTypes: [\"string\"],\n                propertyName: key,\n                compositeRule: true,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), () => {\n                cxt.error(true);\n                if (!it.allErrors)\n                    gen.break();\n            });\n        });\n        cxt.ok(valid);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=propertyNames.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: [\"then\", \"else\"],\n    schemaType: [\"object\", \"boolean\"],\n    code({ keyword, parentSchema, it }) {\n        if (parentSchema.if === undefined)\n            (0, util_1.checkStrictMode)(it, `\"${keyword}\" without \"if\" is ignored`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=thenElse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateUnion = exports.validateArray = exports.usePattern = exports.callValidateCode = exports.schemaProperties = exports.allSchemaProperties = exports.noPropertyInData = exports.propertyInData = exports.isOwnProperty = exports.hasPropFunc = exports.reportMissingProp = exports.checkMissingProp = exports.checkReportMissingProp = void 0;\nconst codegen_1 = require(\"../compile/codegen\");\nconst util_1 = require(\"../compile/util\");\nconst names_1 = require(\"../compile/names\");\nconst util_2 = require(\"../compile/util\");\nfunction checkReportMissingProp(cxt, prop) {\n    const { gen, data, it } = cxt;\n    gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n        cxt.setParams({ missingProperty: (0, codegen_1._) `${prop}` }, true);\n        cxt.error();\n    });\n}\nexports.checkReportMissingProp = checkReportMissingProp;\nfunction checkMissingProp({ gen, data, it: { opts } }, properties, missing) {\n    return (0, codegen_1.or)(...properties.map((prop) => (0, codegen_1.and)(noPropertyInData(gen, data, prop, opts.ownProperties), (0, codegen_1._) `${missing} = ${prop}`)));\n}\nexports.checkMissingProp = checkMissingProp;\nfunction reportMissingProp(cxt, missing) {\n    cxt.setParams({ missingProperty: missing }, true);\n    cxt.error();\n}\nexports.reportMissingProp = reportMissingProp;\nfunction hasPropFunc(gen) {\n    return gen.scopeValue(\"func\", {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        ref: Object.prototype.hasOwnProperty,\n        code: (0, codegen_1._) `Object.prototype.hasOwnProperty`,\n    });\n}\nexports.hasPropFunc = hasPropFunc;\nfunction isOwnProperty(gen, data, property) {\n    return (0, codegen_1._) `${hasPropFunc(gen)}.call(${data}, ${property})`;\n}\nexports.isOwnProperty = isOwnProperty;\nfunction propertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} !== undefined`;\n    return ownProperties ? (0, codegen_1._) `${cond} && ${isOwnProperty(gen, data, property)}` : cond;\n}\nexports.propertyInData = propertyInData;\nfunction noPropertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} === undefined`;\n    return ownProperties ? (0, codegen_1.or)(cond, (0, codegen_1.not)(isOwnProperty(gen, data, property))) : cond;\n}\nexports.noPropertyInData = noPropertyInData;\nfunction allSchemaProperties(schemaMap) {\n    return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : [];\n}\nexports.allSchemaProperties = allSchemaProperties;\nfunction schemaProperties(it, schemaMap) {\n    return allSchemaProperties(schemaMap).filter((p) => !(0, util_1.alwaysValidSchema)(it, schemaMap[p]));\n}\nexports.schemaProperties = schemaProperties;\nfunction callValidateCode({ schemaCode, data, it: { gen, topSchemaRef, schemaPath, errorPath }, it }, func, context, passSchema) {\n    const dataAndSchema = passSchema ? (0, codegen_1._) `${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data;\n    const valCxt = [\n        [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, errorPath)],\n        [names_1.default.parentData, it.parentData],\n        [names_1.default.parentDataProperty, it.parentDataProperty],\n        [names_1.default.rootData, names_1.default.rootData],\n    ];\n    if (it.opts.dynamicRef)\n        valCxt.push([names_1.default.dynamicAnchors, names_1.default.dynamicAnchors]);\n    const args = (0, codegen_1._) `${dataAndSchema}, ${gen.object(...valCxt)}`;\n    return context !== codegen_1.nil ? (0, codegen_1._) `${func}.call(${context}, ${args})` : (0, codegen_1._) `${func}(${args})`;\n}\nexports.callValidateCode = callValidateCode;\nconst newRegExp = (0, codegen_1._) `new RegExp`;\nfunction usePattern({ gen, it: { opts } }, pattern) {\n    const u = opts.unicodeRegExp ? \"u\" : \"\";\n    const { regExp } = opts.code;\n    const rx = regExp(pattern, u);\n    return gen.scopeValue(\"pattern\", {\n        key: rx.toString(),\n        ref: rx,\n        code: (0, codegen_1._) `${regExp.code === \"new RegExp\" ? newRegExp : (0, util_2.useFunc)(gen, regExp)}(${pattern}, ${u})`,\n    });\n}\nexports.usePattern = usePattern;\nfunction validateArray(cxt) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    if (it.allErrors) {\n        const validArr = gen.let(\"valid\", true);\n        validateItems(() => gen.assign(validArr, false));\n        return validArr;\n    }\n    gen.var(valid, true);\n    validateItems(() => gen.break());\n    return valid;\n    function validateItems(notValid) {\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        gen.forRange(\"i\", 0, len, (i) => {\n            cxt.subschema({\n                keyword,\n                dataProp: i,\n                dataPropType: util_1.Type.Num,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), notValid);\n        });\n    }\n}\nexports.validateArray = validateArray;\nfunction validateUnion(cxt) {\n    const { gen, schema, keyword, it } = cxt;\n    /* istanbul ignore if */\n    if (!Array.isArray(schema))\n        throw new Error(\"ajv implementation error\");\n    const alwaysValid = schema.some((sch) => (0, util_1.alwaysValidSchema)(it, sch));\n    if (alwaysValid && !it.opts.unevaluated)\n        return;\n    const valid = gen.let(\"valid\", false);\n    const schValid = gen.name(\"_valid\");\n    gen.block(() => schema.forEach((_sch, i) => {\n        const schCxt = cxt.subschema({\n            keyword,\n            schemaProp: i,\n            compositeRule: true,\n        }, schValid);\n        gen.assign(valid, (0, codegen_1._) `${valid} || ${schValid}`);\n        const merged = cxt.mergeValidEvaluated(schCxt, schValid);\n        // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n        // or if all properties and items were evaluated (it.props === true && it.items === true)\n        if (!merged)\n            gen.if((0, codegen_1.not)(valid));\n    }));\n    cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n}\nexports.validateUnion = validateUnion;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst def = {\n    keyword: \"id\",\n    code() {\n        throw new Error('NOT SUPPORTED: keyword \"id\", use \"$id\" for schema ID');\n    },\n};\nexports.default = def;\n//# sourceMappingURL=id.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst id_1 = require(\"./id\");\nconst ref_1 = require(\"./ref\");\nconst core = [\n    \"$schema\",\n    \"$id\",\n    \"$defs\",\n    \"$vocabulary\",\n    { keyword: \"$comment\" },\n    \"definitions\",\n    id_1.default,\n    ref_1.default,\n];\nexports.default = core;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.callRef = exports.getValidate = void 0;\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst compile_1 = require(\"../../compile\");\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"$ref\",\n    schemaType: \"string\",\n    code(cxt) {\n        const { gen, schema: $ref, it } = cxt;\n        const { baseId, schemaEnv: env, validateName, opts, self } = it;\n        const { root } = env;\n        if (($ref === \"#\" || $ref === \"#/\") && baseId === root.baseId)\n            return callRootRef();\n        const schOrEnv = compile_1.resolveRef.call(self, root, baseId, $ref);\n        if (schOrEnv === undefined)\n            throw new ref_error_1.default(it.opts.uriResolver, baseId, $ref);\n        if (schOrEnv instanceof compile_1.SchemaEnv)\n            return callValidate(schOrEnv);\n        return inlineRefSchema(schOrEnv);\n        function callRootRef() {\n            if (env === root)\n                return callRef(cxt, validateName, env, env.$async);\n            const rootName = gen.scopeValue(\"root\", { ref: root });\n            return callRef(cxt, (0, codegen_1._) `${rootName}.validate`, root, root.$async);\n        }\n        function callValidate(sch) {\n            const v = getValidate(cxt, sch);\n            callRef(cxt, v, sch, sch.$async);\n        }\n        function inlineRefSchema(sch) {\n            const schName = gen.scopeValue(\"schema\", opts.code.source === true ? { ref: sch, code: (0, codegen_1.stringify)(sch) } : { ref: sch });\n            const valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({\n                schema: sch,\n                dataTypes: [],\n                schemaPath: codegen_1.nil,\n                topSchemaRef: schName,\n                errSchemaPath: $ref,\n            }, valid);\n            cxt.mergeEvaluated(schCxt);\n            cxt.ok(valid);\n        }\n    },\n};\nfunction getValidate(cxt, sch) {\n    const { gen } = cxt;\n    return sch.validate\n        ? gen.scopeValue(\"validate\", { ref: sch.validate })\n        : (0, codegen_1._) `${gen.scopeValue(\"wrapper\", { ref: sch })}.validate`;\n}\nexports.getValidate = getValidate;\nfunction callRef(cxt, v, sch, $async) {\n    const { gen, it } = cxt;\n    const { allErrors, schemaEnv: env, opts } = it;\n    const passCxt = opts.passContext ? names_1.default.this : codegen_1.nil;\n    if ($async)\n        callAsyncRef();\n    else\n        callSyncRef();\n    function callAsyncRef() {\n        if (!env.$async)\n            throw new Error(\"async schema referenced by sync schema\");\n        const valid = gen.let(\"valid\");\n        gen.try(() => {\n            gen.code((0, codegen_1._) `await ${(0, code_1.callValidateCode)(cxt, v, passCxt)}`);\n            addEvaluatedFrom(v); // TODO will not work with async, it has to be returned with the result\n            if (!allErrors)\n                gen.assign(valid, true);\n        }, (e) => {\n            gen.if((0, codegen_1._) `!(${e} instanceof ${it.ValidationError})`, () => gen.throw(e));\n            addErrorsFrom(e);\n            if (!allErrors)\n                gen.assign(valid, false);\n        });\n        cxt.ok(valid);\n    }\n    function callSyncRef() {\n        cxt.result((0, code_1.callValidateCode)(cxt, v, passCxt), () => addEvaluatedFrom(v), () => addErrorsFrom(v));\n    }\n    function addErrorsFrom(source) {\n        const errs = (0, codegen_1._) `${source}.errors`;\n        gen.assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`); // TODO tagged\n        gen.assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n    }\n    function addEvaluatedFrom(source) {\n        var _a;\n        if (!it.opts.unevaluated)\n            return;\n        const schEvaluated = (_a = sch === null || sch === void 0 ? void 0 : sch.validate) === null || _a === void 0 ? void 0 : _a.evaluated;\n        // TODO refactor\n        if (it.props !== true) {\n            if (schEvaluated && !schEvaluated.dynamicProps) {\n                if (schEvaluated.props !== undefined) {\n                    it.props = util_1.mergeEvaluated.props(gen, schEvaluated.props, it.props);\n                }\n            }\n            else {\n                const props = gen.var(\"props\", (0, codegen_1._) `${source}.evaluated.props`);\n                it.props = util_1.mergeEvaluated.props(gen, props, it.props, codegen_1.Name);\n            }\n        }\n        if (it.items !== true) {\n            if (schEvaluated && !schEvaluated.dynamicItems) {\n                if (schEvaluated.items !== undefined) {\n                    it.items = util_1.mergeEvaluated.items(gen, schEvaluated.items, it.items);\n                }\n            }\n            else {\n                const items = gen.var(\"items\", (0, codegen_1._) `${source}.evaluated.items`);\n                it.items = util_1.mergeEvaluated.items(gen, items, it.items, codegen_1.Name);\n            }\n        }\n    }\n}\nexports.callRef = callRef;\nexports.default = def;\n//# sourceMappingURL=ref.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst types_1 = require(\"../discriminator/types\");\nconst compile_1 = require(\"../../compile\");\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { discrError, tagName } }) => discrError === types_1.DiscrError.Tag\n        ? `tag \"${tagName}\" must be string`\n        : `value of tag \"${tagName}\" must be in oneOf`,\n    params: ({ params: { discrError, tag, tagName } }) => (0, codegen_1._) `{error: ${discrError}, tag: ${tagName}, tagValue: ${tag}}`,\n};\nconst def = {\n    keyword: \"discriminator\",\n    type: \"object\",\n    schemaType: \"object\",\n    error,\n    code(cxt) {\n        const { gen, data, schema, parentSchema, it } = cxt;\n        const { oneOf } = parentSchema;\n        if (!it.opts.discriminator) {\n            throw new Error(\"discriminator: requires discriminator option\");\n        }\n        const tagName = schema.propertyName;\n        if (typeof tagName != \"string\")\n            throw new Error(\"discriminator: requires propertyName\");\n        if (schema.mapping)\n            throw new Error(\"discriminator: mapping is not supported\");\n        if (!oneOf)\n            throw new Error(\"discriminator: requires oneOf keyword\");\n        const valid = gen.let(\"valid\", false);\n        const tag = gen.const(\"tag\", (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(tagName)}`);\n        gen.if((0, codegen_1._) `typeof ${tag} == \"string\"`, () => validateMapping(), () => cxt.error(false, { discrError: types_1.DiscrError.Tag, tag, tagName }));\n        cxt.ok(valid);\n        function validateMapping() {\n            const mapping = getMapping();\n            gen.if(false);\n            for (const tagValue in mapping) {\n                gen.elseIf((0, codegen_1._) `${tag} === ${tagValue}`);\n                gen.assign(valid, applyTagSchema(mapping[tagValue]));\n            }\n            gen.else();\n            cxt.error(false, { discrError: types_1.DiscrError.Mapping, tag, tagName });\n            gen.endIf();\n        }\n        function applyTagSchema(schemaProp) {\n            const _valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({ keyword: \"oneOf\", schemaProp }, _valid);\n            cxt.mergeEvaluated(schCxt, codegen_1.Name);\n            return _valid;\n        }\n        function getMapping() {\n            var _a;\n            const oneOfMapping = {};\n            const topRequired = hasRequired(parentSchema);\n            let tagRequired = true;\n            for (let i = 0; i < oneOf.length; i++) {\n                let sch = oneOf[i];\n                if ((sch === null || sch === void 0 ? void 0 : sch.$ref) && !(0, util_1.schemaHasRulesButRef)(sch, it.self.RULES)) {\n                    const ref = sch.$ref;\n                    sch = compile_1.resolveRef.call(it.self, it.schemaEnv.root, it.baseId, ref);\n                    if (sch instanceof compile_1.SchemaEnv)\n                        sch = sch.schema;\n                    if (sch === undefined)\n                        throw new ref_error_1.default(it.opts.uriResolver, it.baseId, ref);\n                }\n                const propSch = (_a = sch === null || sch === void 0 ? void 0 : sch.properties) === null || _a === void 0 ? void 0 : _a[tagName];\n                if (typeof propSch != \"object\") {\n                    throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have \"properties/${tagName}\"`);\n                }\n                tagRequired = tagRequired && (topRequired || hasRequired(sch));\n                addMappings(propSch, i);\n            }\n            if (!tagRequired)\n                throw new Error(`discriminator: \"${tagName}\" must be required`);\n            return oneOfMapping;\n            function hasRequired({ required }) {\n                return Array.isArray(required) && required.includes(tagName);\n            }\n            function addMappings(sch, i) {\n                if (sch.const) {\n                    addMapping(sch.const, i);\n                }\n                else if (sch.enum) {\n                    for (const tagValue of sch.enum) {\n                        addMapping(tagValue, i);\n                    }\n                }\n                else {\n                    throw new Error(`discriminator: \"properties/${tagName}\" must have \"const\" or \"enum\"`);\n                }\n            }\n            function addMapping(tagValue, i) {\n                if (typeof tagValue != \"string\" || tagValue in oneOfMapping) {\n                    throw new Error(`discriminator: \"${tagName}\" values must be unique strings`);\n                }\n                oneOfMapping[tagValue] = i;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiscrError = void 0;\nvar DiscrError;\n(function (DiscrError) {\n    DiscrError[\"Tag\"] = \"tag\";\n    DiscrError[\"Mapping\"] = \"mapping\";\n})(DiscrError || (exports.DiscrError = DiscrError = {}));\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_1 = require(\"./core\");\nconst validation_1 = require(\"./validation\");\nconst applicator_1 = require(\"./applicator\");\nconst format_1 = require(\"./format\");\nconst metadata_1 = require(\"./metadata\");\nconst draft7Vocabularies = [\n    core_1.default,\n    validation_1.default,\n    (0, applicator_1.default)(),\n    format_1.default,\n    metadata_1.metadataVocabulary,\n    metadata_1.contentVocabulary,\n];\nexports.default = draft7Vocabularies;\n//# sourceMappingURL=draft7.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match format \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{format: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"format\",\n    type: [\"number\", \"string\"],\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt, ruleType) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        const { opts, errSchemaPath, schemaEnv, self } = it;\n        if (!opts.validateFormats)\n            return;\n        if ($data)\n            validate$DataFormat();\n        else\n            validateFormat();\n        function validate$DataFormat() {\n            const fmts = gen.scopeValue(\"formats\", {\n                ref: self.formats,\n                code: opts.code.formats,\n            });\n            const fDef = gen.const(\"fDef\", (0, codegen_1._) `${fmts}[${schemaCode}]`);\n            const fType = gen.let(\"fType\");\n            const format = gen.let(\"format\");\n            // TODO simplify\n            gen.if((0, codegen_1._) `typeof ${fDef} == \"object\" && !(${fDef} instanceof RegExp)`, () => gen.assign(fType, (0, codegen_1._) `${fDef}.type || \"string\"`).assign(format, (0, codegen_1._) `${fDef}.validate`), () => gen.assign(fType, (0, codegen_1._) `\"string\"`).assign(format, fDef));\n            cxt.fail$data((0, codegen_1.or)(unknownFmt(), invalidFmt()));\n            function unknownFmt() {\n                if (opts.strictSchema === false)\n                    return codegen_1.nil;\n                return (0, codegen_1._) `${schemaCode} && !${format}`;\n            }\n            function invalidFmt() {\n                const callFormat = schemaEnv.$async\n                    ? (0, codegen_1._) `(${fDef}.async ? await ${format}(${data}) : ${format}(${data}))`\n                    : (0, codegen_1._) `${format}(${data})`;\n                const validData = (0, codegen_1._) `(typeof ${format} == \"function\" ? ${callFormat} : ${format}.test(${data}))`;\n                return (0, codegen_1._) `${format} && ${format} !== true && ${fType} === ${ruleType} && !${validData}`;\n            }\n        }\n        function validateFormat() {\n            const formatDef = self.formats[schema];\n            if (!formatDef) {\n                unknownFormat();\n                return;\n            }\n            if (formatDef === true)\n                return;\n            const [fmtType, format, fmtRef] = getFormat(formatDef);\n            if (fmtType === ruleType)\n                cxt.pass(validCondition());\n            function unknownFormat() {\n                if (opts.strictSchema === false) {\n                    self.logger.warn(unknownMsg());\n                    return;\n                }\n                throw new Error(unknownMsg());\n                function unknownMsg() {\n                    return `unknown format \"${schema}\" ignored in schema at path \"${errSchemaPath}\"`;\n                }\n            }\n            function getFormat(fmtDef) {\n                const code = fmtDef instanceof RegExp\n                    ? (0, codegen_1.regexpCode)(fmtDef)\n                    : opts.code.formats\n                        ? (0, codegen_1._) `${opts.code.formats}${(0, codegen_1.getProperty)(schema)}`\n                        : undefined;\n                const fmt = gen.scopeValue(\"formats\", { key: schema, ref: fmtDef, code });\n                if (typeof fmtDef == \"object\" && !(fmtDef instanceof RegExp)) {\n                    return [fmtDef.type || \"string\", fmtDef.validate, (0, codegen_1._) `${fmt}.validate`];\n                }\n                return [\"string\", fmtDef, fmt];\n            }\n            function validCondition() {\n                if (typeof formatDef == \"object\" && !(formatDef instanceof RegExp) && formatDef.async) {\n                    if (!schemaEnv.$async)\n                        throw new Error(\"async format in sync schema\");\n                    return (0, codegen_1._) `await ${fmtRef}(${data})`;\n                }\n                return typeof format == \"function\" ? (0, codegen_1._) `${fmtRef}(${data})` : (0, codegen_1._) `${fmtRef}.test(${data})`;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=format.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst format_1 = require(\"./format\");\nconst format = [format_1.default];\nexports.default = format;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.contentVocabulary = exports.metadataVocabulary = void 0;\nexports.metadataVocabulary = [\n    \"title\",\n    \"description\",\n    \"default\",\n    \"deprecated\",\n    \"readOnly\",\n    \"writeOnly\",\n    \"examples\",\n];\nexports.contentVocabulary = [\n    \"contentMediaType\",\n    \"contentEncoding\",\n    \"contentSchema\",\n];\n//# sourceMappingURL=metadata.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to constant\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValue: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"const\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schemaCode, schema } = cxt;\n        if ($data || (schema && typeof schema == \"object\")) {\n            cxt.fail$data((0, codegen_1._) `!${(0, util_1.useFunc)(gen, equal_1.default)}(${data}, ${schemaCode})`);\n        }\n        else {\n            cxt.fail((0, codegen_1._) `${schema} !== ${data}`);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=const.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to one of the allowed values\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValues: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"enum\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        if (!$data && schema.length === 0)\n            throw new Error(\"enum must have non-empty array\");\n        const useLoop = schema.length >= it.opts.loopEnum;\n        let eql;\n        const getEql = () => (eql !== null && eql !== void 0 ? eql : (eql = (0, util_1.useFunc)(gen, equal_1.default)));\n        let valid;\n        if (useLoop || $data) {\n            valid = gen.let(\"valid\");\n            cxt.block$data(valid, loopEnum);\n        }\n        else {\n            /* istanbul ignore if */\n            if (!Array.isArray(schema))\n                throw new Error(\"ajv implementation error\");\n            const vSchema = gen.const(\"vSchema\", schemaCode);\n            valid = (0, codegen_1.or)(...schema.map((_x, i) => equalCode(vSchema, i)));\n        }\n        cxt.pass(valid);\n        function loopEnum() {\n            gen.assign(valid, false);\n            gen.forOf(\"v\", schemaCode, (v) => gen.if((0, codegen_1._) `${getEql()}(${data}, ${v})`, () => gen.assign(valid, true).break()));\n        }\n        function equalCode(vSchema, i) {\n            const sch = schema[i];\n            return typeof sch === \"object\" && sch !== null\n                ? (0, codegen_1._) `${getEql()}(${data}, ${vSchema}[${i}])`\n                : (0, codegen_1._) `${data} === ${sch}`;\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=enum.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst limitNumber_1 = require(\"./limitNumber\");\nconst multipleOf_1 = require(\"./multipleOf\");\nconst limitLength_1 = require(\"./limitLength\");\nconst pattern_1 = require(\"./pattern\");\nconst limitProperties_1 = require(\"./limitProperties\");\nconst required_1 = require(\"./required\");\nconst limitItems_1 = require(\"./limitItems\");\nconst uniqueItems_1 = require(\"./uniqueItems\");\nconst const_1 = require(\"./const\");\nconst enum_1 = require(\"./enum\");\nconst validation = [\n    // number\n    limitNumber_1.default,\n    multipleOf_1.default,\n    // string\n    limitLength_1.default,\n    pattern_1.default,\n    // object\n    limitProperties_1.default,\n    required_1.default,\n    // array\n    limitItems_1.default,\n    uniqueItems_1.default,\n    // any\n    { keyword: \"type\", schemaType: [\"string\", \"array\"] },\n    { keyword: \"nullable\", schemaType: \"boolean\" },\n    const_1.default,\n    enum_1.default,\n];\nexports.default = validation;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxItems\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} items`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxItems\", \"minItems\"],\n    type: \"array\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxItems\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `${data}.length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst ucs2length_1 = require(\"../../runtime/ucs2length\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxLength\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} characters`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxLength\", \"minLength\"],\n    type: \"string\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode, it } = cxt;\n        const op = keyword === \"maxLength\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        const len = it.opts.unicode === false ? (0, codegen_1._) `${data}.length` : (0, codegen_1._) `${(0, util_1.useFunc)(cxt.gen, ucs2length_1.default)}(${data})`;\n        cxt.fail$data((0, codegen_1._) `${len} ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitLength.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst ops = codegen_1.operators;\nconst KWDs = {\n    maximum: { okStr: \"<=\", ok: ops.LTE, fail: ops.GT },\n    minimum: { okStr: \">=\", ok: ops.GTE, fail: ops.LT },\n    exclusiveMaximum: { okStr: \"<\", ok: ops.LT, fail: ops.GTE },\n    exclusiveMinimum: { okStr: \">\", ok: ops.GT, fail: ops.LTE },\n};\nconst error = {\n    message: ({ keyword, schemaCode }) => (0, codegen_1.str) `must be ${KWDs[keyword].okStr} ${schemaCode}`,\n    params: ({ keyword, schemaCode }) => (0, codegen_1._) `{comparison: ${KWDs[keyword].okStr}, limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: Object.keys(KWDs),\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        cxt.fail$data((0, codegen_1._) `${data} ${KWDs[keyword].fail} ${schemaCode} || isNaN(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitNumber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxProperties\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} properties`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxProperties\", \"minProperties\"],\n    type: \"object\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxProperties\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `Object.keys(${data}).length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must be multiple of ${schemaCode}`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{multipleOf: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"multipleOf\",\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, schemaCode, it } = cxt;\n        // const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)\n        const prec = it.opts.multipleOfPrecision;\n        const res = gen.let(\"res\");\n        const invalid = prec\n            ? (0, codegen_1._) `Math.abs(Math.round(${res}) - ${res}) > 1e-${prec}`\n            : (0, codegen_1._) `${res} !== parseInt(${res})`;\n        cxt.fail$data((0, codegen_1._) `(${schemaCode} === 0 || (${res} = ${data}/${schemaCode}, ${invalid}))`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=multipleOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match pattern \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{pattern: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"pattern\",\n    type: \"string\",\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { data, $data, schema, schemaCode, it } = cxt;\n        // TODO regexp should be wrapped in try/catchs\n        const u = it.opts.unicodeRegExp ? \"u\" : \"\";\n        const regExp = $data ? (0, codegen_1._) `(new RegExp(${schemaCode}, ${u}))` : (0, code_1.usePattern)(cxt, schema);\n        cxt.fail$data((0, codegen_1._) `!${regExp}.test(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=pattern.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { missingProperty } }) => (0, codegen_1.str) `must have required property '${missingProperty}'`,\n    params: ({ params: { missingProperty } }) => (0, codegen_1._) `{missingProperty: ${missingProperty}}`,\n};\nconst def = {\n    keyword: \"required\",\n    type: \"object\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, schema, schemaCode, data, $data, it } = cxt;\n        const { opts } = it;\n        if (!$data && schema.length === 0)\n            return;\n        const useLoop = schema.length >= opts.loopRequired;\n        if (it.allErrors)\n            allErrorsMode();\n        else\n            exitOnErrorMode();\n        if (opts.strictRequired) {\n            const props = cxt.parentSchema.properties;\n            const { definedProperties } = cxt.it;\n            for (const requiredKey of schema) {\n                if ((props === null || props === void 0 ? void 0 : props[requiredKey]) === undefined && !definedProperties.has(requiredKey)) {\n                    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n                    const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`;\n                    (0, util_1.checkStrictMode)(it, msg, it.opts.strictRequired);\n                }\n            }\n        }\n        function allErrorsMode() {\n            if (useLoop || $data) {\n                cxt.block$data(codegen_1.nil, loopAllRequired);\n            }\n            else {\n                for (const prop of schema) {\n                    (0, code_1.checkReportMissingProp)(cxt, prop);\n                }\n            }\n        }\n        function exitOnErrorMode() {\n            const missing = gen.let(\"missing\");\n            if (useLoop || $data) {\n                const valid = gen.let(\"valid\", true);\n                cxt.block$data(valid, () => loopUntilMissing(missing, valid));\n                cxt.ok(valid);\n            }\n            else {\n                gen.if((0, code_1.checkMissingProp)(cxt, schema, missing));\n                (0, code_1.reportMissingProp)(cxt, missing);\n                gen.else();\n            }\n        }\n        function loopAllRequired() {\n            gen.forOf(\"prop\", schemaCode, (prop) => {\n                cxt.setParams({ missingProperty: prop });\n                gen.if((0, code_1.noPropertyInData)(gen, data, prop, opts.ownProperties), () => cxt.error());\n            });\n        }\n        function loopUntilMissing(missing, valid) {\n            cxt.setParams({ missingProperty: missing });\n            gen.forOf(missing, schemaCode, () => {\n                gen.assign(valid, (0, code_1.propertyInData)(gen, data, missing, opts.ownProperties));\n                gen.if((0, codegen_1.not)(valid), () => {\n                    cxt.error();\n                    gen.break();\n                });\n            }, codegen_1.nil);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=required.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dataType_1 = require(\"../../compile/validate/dataType\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: ({ params: { i, j } }) => (0, codegen_1.str) `must NOT have duplicate items (items ## ${j} and ${i} are identical)`,\n    params: ({ params: { i, j } }) => (0, codegen_1._) `{i: ${i}, j: ${j}}`,\n};\nconst def = {\n    keyword: \"uniqueItems\",\n    type: \"array\",\n    schemaType: \"boolean\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, parentSchema, schemaCode, it } = cxt;\n        if (!$data && !schema)\n            return;\n        const valid = gen.let(\"valid\");\n        const itemTypes = parentSchema.items ? (0, dataType_1.getSchemaTypes)(parentSchema.items) : [];\n        cxt.block$data(valid, validateUniqueItems, (0, codegen_1._) `${schemaCode} === false`);\n        cxt.ok(valid);\n        function validateUniqueItems() {\n            const i = gen.let(\"i\", (0, codegen_1._) `${data}.length`);\n            const j = gen.let(\"j\");\n            cxt.setParams({ i, j });\n            gen.assign(valid, true);\n            gen.if((0, codegen_1._) `${i} > 1`, () => (canOptimize() ? loopN : loopN2)(i, j));\n        }\n        function canOptimize() {\n            return itemTypes.length > 0 && !itemTypes.some((t) => t === \"object\" || t === \"array\");\n        }\n        function loopN(i, j) {\n            const item = gen.name(\"item\");\n            const wrongType = (0, dataType_1.checkDataTypes)(itemTypes, item, it.opts.strictNumbers, dataType_1.DataType.Wrong);\n            const indices = gen.const(\"indices\", (0, codegen_1._) `{}`);\n            gen.for((0, codegen_1._) `;${i}--;`, () => {\n                gen.let(item, (0, codegen_1._) `${data}[${i}]`);\n                gen.if(wrongType, (0, codegen_1._) `continue`);\n                if (itemTypes.length > 1)\n                    gen.if((0, codegen_1._) `typeof ${item} == \"string\"`, (0, codegen_1._) `${item} += \"_\"`);\n                gen\n                    .if((0, codegen_1._) `typeof ${indices}[${item}] == \"number\"`, () => {\n                    gen.assign(j, (0, codegen_1._) `${indices}[${item}]`);\n                    cxt.error();\n                    gen.assign(valid, false).break();\n                })\n                    .code((0, codegen_1._) `${indices}[${item}] = ${i}`);\n            });\n        }\n        function loopN2(i, j) {\n            const eql = (0, util_1.useFunc)(gen, equal_1.default);\n            const outer = gen.name(\"outer\");\n            gen.label(outer).for((0, codegen_1._) `;${i}--;`, () => gen.for((0, codegen_1._) `${j} = ${i}; ${j}--;`, () => gen.if((0, codegen_1._) `${eql}(${data}[${i}], ${data}[${j}])`, () => {\n                cxt.error();\n                gen.assign(valid, false).break(outer);\n            })));\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=uniqueItems.js.map","'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true,\n  if: true,\n  then: true,\n  else: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  $defs: true,\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n","const ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","const SPACE_CHARACTERS = /\\s+/g\n\n// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.formatted = undefined\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range.trim().replace(SPACE_CHARACTERS, ' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.formatted = undefined\n  }\n\n  get range () {\n    if (this.formatted === undefined) {\n      this.formatted = ''\n      for (let i = 0; i < this.set.length; i++) {\n        if (i > 0) {\n          this.formatted += '||'\n        }\n        const comps = this.set[i]\n        for (let k = 0; k < comps.length; k++) {\n          if (k > 0) {\n            this.formatted += ' '\n          }\n          this.formatted += comps[k].toString().trim()\n        }\n      }\n    }\n    return this.formatted\n  }\n\n  format () {\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (!identifier && identifierBase === false) {\n          throw new Error('invalid increment argument: identifier is empty')\n        }\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","const parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n","const eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","const SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    // With includePrerelease option set, '1.2.3.4-rc' wants to coerce '2.3.4-rc', not '2.3.4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL]\n    let next\n    while ((next = coerceRtlRegex.exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    coerceRtlRegex.lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  const major = match[2]\n  const minor = match[3] || '0'\n  const patch = match[4] || '0'\n  const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : ''\n  const build = options.includePrerelease && match[6] ? `+${match[6]}` : ''\n\n  return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options)\n}\nmodule.exports = coerce\n","const SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n","const compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","const parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // Otherwise it can be determined by checking the high version\n\n    if (highVersion.patch) {\n      // anything higher than a patch bump would result in the wrong version\n      return 'patch'\n    }\n\n    if (highVersion.minor) {\n      // anything higher than a minor bump would result in the wrong version\n      return 'minor'\n    }\n\n    // bumping major/minor/patch all have same result\n    return 'major'\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n","const compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","const SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n","const compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","const compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","const SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n","const SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n","const compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","const SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n","const SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n","const parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n","const compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n","const compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n","const Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","const compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n","const parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n","// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","class LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n","// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","const {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n","const Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n","const outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n","const SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n","// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n","const Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n","const Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n","const Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n","'use strict';\nconst mimicFn = require('mimic-fn');\n\nmodule.exports = (inputFunction, options = {}) => {\n\tif (typeof inputFunction !== 'function') {\n\t\tthrow new TypeError(`Expected the first argument to be a function, got \\`${typeof inputFunction}\\``);\n\t}\n\n\tconst {\n\t\twait = 0,\n\t\tbefore = false,\n\t\tafter = true\n\t} = options;\n\n\tif (!before && !after) {\n\t\tthrow new Error('Both `before` and `after` are false, function wouldn\\'t be called.');\n\t}\n\n\tlet timeout;\n\tlet result;\n\n\tconst debouncedFunction = function (...arguments_) {\n\t\tconst context = this;\n\n\t\tconst later = () => {\n\t\t\ttimeout = undefined;\n\n\t\t\tif (after) {\n\t\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t\t}\n\t\t};\n\n\t\tconst shouldCallNow = before && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\n\t\tif (shouldCallNow) {\n\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tmimicFn(debouncedFunction, inputFunction);\n\n\tdebouncedFunction.cancel = () => {\n\t\tif (timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = undefined;\n\t\t}\n\t};\n\n\treturn debouncedFunction;\n};\n","'use strict';\nconst isObj = require('is-obj');\n\nconst disallowedKeys = new Set([\n\t'__proto__',\n\t'prototype',\n\t'constructor'\n]);\n\nconst isValidPath = pathSegments => !pathSegments.some(segment => disallowedKeys.has(segment));\n\nfunction getPathSegments(path) {\n\tconst pathArray = path.split('.');\n\tconst parts = [];\n\n\tfor (let i = 0; i < pathArray.length; i++) {\n\t\tlet p = pathArray[i];\n\n\t\twhile (p[p.length - 1] === '\\\\' && pathArray[i + 1] !== undefined) {\n\t\t\tp = p.slice(0, -1) + '.';\n\t\t\tp += pathArray[++i];\n\t\t}\n\n\t\tparts.push(p);\n\t}\n\n\tif (!isValidPath(parts)) {\n\t\treturn [];\n\t}\n\n\treturn parts;\n}\n\nmodule.exports = {\n\tget(object, path, value) {\n\t\tif (!isObj(object) || typeof path !== 'string') {\n\t\t\treturn value === undefined ? object : value;\n\t\t}\n\n\t\tconst pathArray = getPathSegments(path);\n\t\tif (pathArray.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let i = 0; i < pathArray.length; i++) {\n\t\t\tobject = object[pathArray[i]];\n\n\t\t\tif (object === undefined || object === null) {\n\t\t\t\t// `object` is either `undefined` or `null` so we want to stop the loop, and\n\t\t\t\t// if this is not the last bit of the path, and\n\t\t\t\t// if it did't return `undefined`\n\t\t\t\t// it would return `null` if `object` is `null`\n\t\t\t\t// but we want `get({foo: null}, 'foo.bar')` to equal `undefined`, or the supplied value, not `null`\n\t\t\t\tif (i !== pathArray.length - 1) {\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn object === undefined ? value : object;\n\t},\n\n\tset(object, path, value) {\n\t\tif (!isObj(object) || typeof path !== 'string') {\n\t\t\treturn object;\n\t\t}\n\n\t\tconst root = object;\n\t\tconst pathArray = getPathSegments(path);\n\n\t\tfor (let i = 0; i < pathArray.length; i++) {\n\t\t\tconst p = pathArray[i];\n\n\t\t\tif (!isObj(object[p])) {\n\t\t\t\tobject[p] = {};\n\t\t\t}\n\n\t\t\tif (i === pathArray.length - 1) {\n\t\t\t\tobject[p] = value;\n\t\t\t}\n\n\t\t\tobject = object[p];\n\t\t}\n\n\t\treturn root;\n\t},\n\n\tdelete(object, path) {\n\t\tif (!isObj(object) || typeof path !== 'string') {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst pathArray = getPathSegments(path);\n\n\t\tfor (let i = 0; i < pathArray.length; i++) {\n\t\t\tconst p = pathArray[i];\n\n\t\t\tif (i === pathArray.length - 1) {\n\t\t\t\tdelete object[p];\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tobject = object[p];\n\n\t\t\tif (!isObj(object)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\thas(object, path) {\n\t\tif (!isObj(object) || typeof path !== 'string') {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst pathArray = getPathSegments(path);\n\t\tif (pathArray.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// eslint-disable-next-line unicorn/no-for-loop\n\t\tfor (let i = 0; i < pathArray.length; i++) {\n\t\t\tif (isObj(object)) {\n\t\t\t\tif (!(pathArray[i] in object)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tobject = object[pathArray[i]];\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n};\n","'use strict';\nconst path = require('path');\nconst {app, ipcMain, ipcRenderer, shell} = require('electron');\nconst Conf = require('conf');\n\nlet isInitialized = false;\n\n// Set up the `ipcMain` handler for communication between renderer and main process.\nconst initDataListener = () => {\n\tif (!ipcMain || !app) {\n\t\tthrow new Error('Electron Store: You need to call `.initRenderer()` from the main process.');\n\t}\n\n\tconst appData = {\n\t\tdefaultCwd: app.getPath('userData'),\n\t\tappVersion: app.getVersion()\n\t};\n\n\tif (isInitialized) {\n\t\treturn appData;\n\t}\n\n\tipcMain.on('electron-store-get-data', event => {\n\t\tevent.returnValue = appData;\n\t});\n\n\tisInitialized = true;\n\n\treturn appData;\n};\n\nclass ElectronStore extends Conf {\n\tconstructor(options) {\n\t\tlet defaultCwd;\n\t\tlet appVersion;\n\n\t\t// If we are in the renderer process, we communicate with the main process\n\t\t// to get the required data for the module otherwise, we pull from the main process.\n\t\tif (ipcRenderer) {\n\t\t\tconst appData = ipcRenderer.sendSync('electron-store-get-data');\n\n\t\t\tif (!appData) {\n\t\t\t\tthrow new Error('Electron Store: You need to call `.initRenderer()` from the main process.');\n\t\t\t}\n\n\t\t\t({defaultCwd, appVersion} = appData);\n\t\t} else if (ipcMain && app) {\n\t\t\t({defaultCwd, appVersion} = initDataListener());\n\t\t}\n\n\t\toptions = {\n\t\t\tname: 'config',\n\t\t\t...options\n\t\t};\n\n\t\tif (!options.projectVersion) {\n\t\t\toptions.projectVersion = appVersion;\n\t\t}\n\n\t\tif (options.cwd) {\n\t\t\toptions.cwd = path.isAbsolute(options.cwd) ? options.cwd : path.join(defaultCwd, options.cwd);\n\t\t} else {\n\t\t\toptions.cwd = defaultCwd;\n\t\t}\n\n\t\toptions.configName = options.name;\n\t\tdelete options.name;\n\n\t\tsuper(options);\n\t}\n\n\tstatic initRenderer() {\n\t\tinitDataListener();\n\t}\n\n\tasync openInEditor() {\n\t\tconst error = await shell.openPath(this.path);\n\n\t\tif (error) {\n\t\t\tthrow new Error(error);\n\t\t}\n\t}\n}\n\nmodule.exports = ElectronStore;\n","'use strict';\nconst path = require('path');\nconst os = require('os');\n\nconst homedir = os.homedir();\nconst tmpdir = os.tmpdir();\nconst {env} = process;\n\nconst macos = name => {\n\tconst library = path.join(homedir, 'Library');\n\n\treturn {\n\t\tdata: path.join(library, 'Application Support', name),\n\t\tconfig: path.join(library, 'Preferences', name),\n\t\tcache: path.join(library, 'Caches', name),\n\t\tlog: path.join(library, 'Logs', name),\n\t\ttemp: path.join(tmpdir, name)\n\t};\n};\n\nconst windows = name => {\n\tconst appData = env.APPDATA || path.join(homedir, 'AppData', 'Roaming');\n\tconst localAppData = env.LOCALAPPDATA || path.join(homedir, 'AppData', 'Local');\n\n\treturn {\n\t\t// Data/config/cache/log are invented by me as Windows isn't opinionated about this\n\t\tdata: path.join(localAppData, name, 'Data'),\n\t\tconfig: path.join(appData, name, 'Config'),\n\t\tcache: path.join(localAppData, name, 'Cache'),\n\t\tlog: path.join(localAppData, name, 'Log'),\n\t\ttemp: path.join(tmpdir, name)\n\t};\n};\n\n// https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html\nconst linux = name => {\n\tconst username = path.basename(homedir);\n\n\treturn {\n\t\tdata: path.join(env.XDG_DATA_HOME || path.join(homedir, '.local', 'share'), name),\n\t\tconfig: path.join(env.XDG_CONFIG_HOME || path.join(homedir, '.config'), name),\n\t\tcache: path.join(env.XDG_CACHE_HOME || path.join(homedir, '.cache'), name),\n\t\t// https://wiki.debian.org/XDGBaseDirectorySpecification#state\n\t\tlog: path.join(env.XDG_STATE_HOME || path.join(homedir, '.local', 'state'), name),\n\t\ttemp: path.join(tmpdir, username, name)\n\t};\n};\n\nconst envPaths = (name, options) => {\n\tif (typeof name !== 'string') {\n\t\tthrow new TypeError(`Expected string, got ${typeof name}`);\n\t}\n\n\toptions = Object.assign({suffix: 'nodejs'}, options);\n\n\tif (options.suffix) {\n\t\t// Add suffix to prevent possible conflict with native apps\n\t\tname += `-${options.suffix}`;\n\t}\n\n\tif (process.platform === 'darwin') {\n\t\treturn macos(name);\n\t}\n\n\tif (process.platform === 'win32') {\n\t\treturn windows(name);\n\t}\n\n\treturn linux(name);\n};\n\nmodule.exports = envPaths;\n// TODO: Remove this for the next major release\nmodule.exports.default = envPaths;\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","'use strict';\n\nmodule.exports = value => {\n\tconst type = typeof value;\n\treturn value !== null && (type === 'object' || type === 'function');\n};\n","\"use strict\";\n\nvar realFetch = require('node-fetch');\nmodule.exports = function(url, options) {\n\tif (/^\\/\\//.test(url)) {\n\t\turl = 'https:' + url;\n\t}\n\treturn realFetch.call(this, url, options);\n};\n\nif (!global.fetch) {\n\tglobal.fetch = module.exports;\n\tglobal.Response = realFetch.Response;\n\tglobal.Headers = realFetch.Headers;\n\tglobal.Request = realFetch.Request;\n}\n","\"use strict\";\n\nmodule.exports = require('ws');","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = memoize;\n","'use strict';\n\nconst copyProperty = (to, from, property, ignoreNonConfigurable) => {\n\t// `Function#length` should reflect the parameters of `to` not `from` since we keep its body.\n\t// `Function#prototype` is non-writable and non-configurable so can never be modified.\n\tif (property === 'length' || property === 'prototype') {\n\t\treturn;\n\t}\n\n\t// `Function#arguments` and `Function#caller` should not be copied. They were reported to be present in `Reflect.ownKeys` for some devices in React Native (#41), so we explicitly ignore them here.\n\tif (property === 'arguments' || property === 'caller') {\n\t\treturn;\n\t}\n\n\tconst toDescriptor = Object.getOwnPropertyDescriptor(to, property);\n\tconst fromDescriptor = Object.getOwnPropertyDescriptor(from, property);\n\n\tif (!canCopyProperty(toDescriptor, fromDescriptor) && ignoreNonConfigurable) {\n\t\treturn;\n\t}\n\n\tObject.defineProperty(to, property, fromDescriptor);\n};\n\n// `Object.defineProperty()` throws if the property exists, is not configurable and either:\n//  - one its descriptors is changed\n//  - it is non-writable and its value is changed\nconst canCopyProperty = function (toDescriptor, fromDescriptor) {\n\treturn toDescriptor === undefined || toDescriptor.configurable || (\n\t\ttoDescriptor.writable === fromDescriptor.writable &&\n\t\ttoDescriptor.enumerable === fromDescriptor.enumerable &&\n\t\ttoDescriptor.configurable === fromDescriptor.configurable &&\n\t\t(toDescriptor.writable || toDescriptor.value === fromDescriptor.value)\n\t);\n};\n\nconst changePrototype = (to, from) => {\n\tconst fromPrototype = Object.getPrototypeOf(from);\n\tif (fromPrototype === Object.getPrototypeOf(to)) {\n\t\treturn;\n\t}\n\n\tObject.setPrototypeOf(to, fromPrototype);\n};\n\nconst wrappedToString = (withName, fromBody) => `/* Wrapped ${withName}*/\\n${fromBody}`;\n\nconst toStringDescriptor = Object.getOwnPropertyDescriptor(Function.prototype, 'toString');\nconst toStringName = Object.getOwnPropertyDescriptor(Function.prototype.toString, 'name');\n\n// We call `from.toString()` early (not lazily) to ensure `from` can be garbage collected.\n// We use `bind()` instead of a closure for the same reason.\n// Calling `from.toString()` early also allows caching it in case `to.toString()` is called several times.\nconst changeToString = (to, from, name) => {\n\tconst withName = name === '' ? '' : `with ${name.trim()}() `;\n\tconst newToString = wrappedToString.bind(null, withName, from.toString());\n\t// Ensure `to.toString.toString` is non-enumerable and has the same `same`\n\tObject.defineProperty(newToString, 'name', toStringName);\n\tObject.defineProperty(to, 'toString', {...toStringDescriptor, value: newToString});\n};\n\nconst mimicFn = (to, from, {ignoreNonConfigurable = false} = {}) => {\n\tconst {name} = to;\n\n\tfor (const property of Reflect.ownKeys(from)) {\n\t\tcopyProperty(to, from, property, ignoreNonConfigurable);\n\t}\n\n\tchangePrototype(to, from);\n\tchangeToString(to, from, name);\n\n\treturn to;\n};\n\nmodule.exports = mimicFn;\n","'use strict';\nconst mimicFn = require('mimic-fn');\n\nconst calledFunctions = new WeakMap();\n\nconst onetime = (function_, options = {}) => {\n\tif (typeof function_ !== 'function') {\n\t\tthrow new TypeError('Expected a function');\n\t}\n\n\tlet returnValue;\n\tlet callCount = 0;\n\tconst functionName = function_.displayName || function_.name || '<anonymous>';\n\n\tconst onetime = function (...arguments_) {\n\t\tcalledFunctions.set(onetime, ++callCount);\n\n\t\tif (callCount === 1) {\n\t\t\treturnValue = function_.apply(this, arguments_);\n\t\t\tfunction_ = null;\n\t\t} else if (options.throw === true) {\n\t\t\tthrow new Error(`Function \\`${functionName}\\` can only be called once`);\n\t\t}\n\n\t\treturn returnValue;\n\t};\n\n\tmimicFn(onetime, function_);\n\tcalledFunctions.set(onetime, callCount);\n\n\treturn onetime;\n};\n\nmodule.exports = onetime;\n// TODO: Remove this for the next major release\nmodule.exports.default = onetime;\n\nmodule.exports.callCount = function_ => {\n\tif (!calledFunctions.has(function_)) {\n\t\tthrow new Error(`The given function \\`${function_.name}\\` is not wrapped by the \\`onetime\\` package`);\n\t}\n\n\treturn calledFunctions.get(function_);\n};\n","'use strict';\n\nconst mimicFn = (to, from) => {\n\tfor (const prop of Reflect.ownKeys(from)) {\n\t\tObject.defineProperty(to, prop, Object.getOwnPropertyDescriptor(from, prop));\n\t}\n\n\treturn to;\n};\n\nmodule.exports = mimicFn;\n// TODO: Remove this for the next major release\nmodule.exports.default = mimicFn;\n","'use strict';\nconst pTry = require('p-try');\n\nconst pLimit = concurrency => {\n\tif (!((Number.isInteger(concurrency) || concurrency === Infinity) && concurrency > 0)) {\n\t\treturn Promise.reject(new TypeError('Expected `concurrency` to be a number from 1 and up'));\n\t}\n\n\tconst queue = [];\n\tlet activeCount = 0;\n\n\tconst next = () => {\n\t\tactiveCount--;\n\n\t\tif (queue.length > 0) {\n\t\t\tqueue.shift()();\n\t\t}\n\t};\n\n\tconst run = (fn, resolve, ...args) => {\n\t\tactiveCount++;\n\n\t\tconst result = pTry(fn, ...args);\n\n\t\tresolve(result);\n\n\t\tresult.then(next, next);\n\t};\n\n\tconst enqueue = (fn, resolve, ...args) => {\n\t\tif (activeCount < concurrency) {\n\t\t\trun(fn, resolve, ...args);\n\t\t} else {\n\t\t\tqueue.push(run.bind(null, fn, resolve, ...args));\n\t\t}\n\t};\n\n\tconst generator = (fn, ...args) => new Promise(resolve => enqueue(fn, resolve, ...args));\n\tObject.defineProperties(generator, {\n\t\tactiveCount: {\n\t\t\tget: () => activeCount\n\t\t},\n\t\tpendingCount: {\n\t\t\tget: () => queue.length\n\t\t},\n\t\tclearQueue: {\n\t\t\tvalue: () => {\n\t\t\t\tqueue.length = 0;\n\t\t\t}\n\t\t}\n\t});\n\n\treturn generator;\n};\n\nmodule.exports = pLimit;\nmodule.exports.default = pLimit;\n","'use strict';\n\nconst pTry = (fn, ...arguments_) => new Promise(resolve => {\n\tresolve(fn(...arguments_));\n});\n\nmodule.exports = pTry;\n// TODO: remove this in the next major version\nmodule.exports.default = pTry;\n","'use strict';\nconst findUp = require('find-up');\n\nmodule.exports = async ({cwd} = {}) => findUp('package.json', {cwd});\nmodule.exports.sync = ({cwd} = {}) => findUp.sync('package.json', {cwd});\n","'use strict';\nconst path = require('path');\nconst locatePath = require('locate-path');\n\nmodule.exports = (filename, opts = {}) => {\n\tconst startDir = path.resolve(opts.cwd || '');\n\tconst {root} = path.parse(startDir);\n\n\tconst filenames = [].concat(filename);\n\n\treturn new Promise(resolve => {\n\t\t(function find(dir) {\n\t\t\tlocatePath(filenames, {cwd: dir}).then(file => {\n\t\t\t\tif (file) {\n\t\t\t\t\tresolve(path.join(dir, file));\n\t\t\t\t} else if (dir === root) {\n\t\t\t\t\tresolve(null);\n\t\t\t\t} else {\n\t\t\t\t\tfind(path.dirname(dir));\n\t\t\t\t}\n\t\t\t});\n\t\t})(startDir);\n\t});\n};\n\nmodule.exports.sync = (filename, opts = {}) => {\n\tlet dir = path.resolve(opts.cwd || '');\n\tconst {root} = path.parse(dir);\n\n\tconst filenames = [].concat(filename);\n\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\tconst file = locatePath.sync(filenames, {cwd: dir});\n\n\t\tif (file) {\n\t\t\treturn path.join(dir, file);\n\t\t}\n\n\t\tif (dir === root) {\n\t\t\treturn null;\n\t\t}\n\n\t\tdir = path.dirname(dir);\n\t}\n};\n","'use strict';\nconst path = require('path');\nconst pathExists = require('path-exists');\nconst pLocate = require('p-locate');\n\nmodule.exports = (iterable, options) => {\n\toptions = Object.assign({\n\t\tcwd: process.cwd()\n\t}, options);\n\n\treturn pLocate(iterable, el => pathExists(path.resolve(options.cwd, el)), options);\n};\n\nmodule.exports.sync = (iterable, options) => {\n\toptions = Object.assign({\n\t\tcwd: process.cwd()\n\t}, options);\n\n\tfor (const el of iterable) {\n\t\tif (pathExists.sync(path.resolve(options.cwd, el))) {\n\t\t\treturn el;\n\t\t}\n\t}\n};\n","'use strict';\nconst pLimit = require('p-limit');\n\nclass EndError extends Error {\n\tconstructor(value) {\n\t\tsuper();\n\t\tthis.value = value;\n\t}\n}\n\n// The input can also be a promise, so we `Promise.resolve()` it\nconst testElement = (el, tester) => Promise.resolve(el).then(tester);\n\n// The input can also be a promise, so we `Promise.all()` them both\nconst finder = el => Promise.all(el).then(val => val[1] === true && Promise.reject(new EndError(val[0])));\n\nmodule.exports = (iterable, tester, opts) => {\n\topts = Object.assign({\n\t\tconcurrency: Infinity,\n\t\tpreserveOrder: true\n\t}, opts);\n\n\tconst limit = pLimit(opts.concurrency);\n\n\t// Start all the promises concurrently with optional limit\n\tconst items = [...iterable].map(el => [el, limit(testElement, el, tester)]);\n\n\t// Check the promises either serially or concurrently\n\tconst checkLimit = pLimit(opts.preserveOrder ? 1 : Infinity);\n\n\treturn Promise.all(items.map(el => checkLimit(finder, el)))\n\t\t.then(() => {})\n\t\t.catch(err => err instanceof EndError ? err.value : Promise.reject(err));\n};\n","'use strict';\nconst fs = require('fs');\n\nmodule.exports = fp => new Promise(resolve => {\n\tfs.access(fp, err => {\n\t\tresolve(!err);\n\t});\n});\n\nmodule.exports.sync = fp => {\n\ttry {\n\t\tfs.accessSync(fp);\n\t\treturn true;\n\t} catch (err) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar punycode = require(\"punycode\");\nvar mappingTable = require(\"./lib/mappingTable.json\");\n\nvar PROCESSING_OPTIONS = {\n  TRANSITIONAL: 0,\n  NONTRANSITIONAL: 1\n};\n\nfunction normalize(str) { // fix bug in v8\n  return str.split('\\u0000').map(function (s) { return s.normalize('NFC'); }).join('\\u0000');\n}\n\nfunction findStatus(val) {\n  var start = 0;\n  var end = mappingTable.length - 1;\n\n  while (start <= end) {\n    var mid = Math.floor((start + end) / 2);\n\n    var target = mappingTable[mid];\n    if (target[0][0] <= val && target[0][1] >= val) {\n      return target;\n    } else if (target[0][0] > val) {\n      end = mid - 1;\n    } else {\n      start = mid + 1;\n    }\n  }\n\n  return null;\n}\n\nvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n\nfunction countSymbols(string) {\n  return string\n    // replace every surrogate pair with a BMP symbol\n    .replace(regexAstralSymbols, '_')\n    // then get the length\n    .length;\n}\n\nfunction mapChars(domain_name, useSTD3, processing_option) {\n  var hasError = false;\n  var processed = \"\";\n\n  var len = countSymbols(domain_name);\n  for (var i = 0; i < len; ++i) {\n    var codePoint = domain_name.codePointAt(i);\n    var status = findStatus(codePoint);\n\n    switch (status[1]) {\n      case \"disallowed\":\n        hasError = true;\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"ignored\":\n        break;\n      case \"mapped\":\n        processed += String.fromCodePoint.apply(String, status[2]);\n        break;\n      case \"deviation\":\n        if (processing_option === PROCESSING_OPTIONS.TRANSITIONAL) {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        } else {\n          processed += String.fromCodePoint(codePoint);\n        }\n        break;\n      case \"valid\":\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"disallowed_STD3_mapped\":\n        if (useSTD3) {\n          hasError = true;\n          processed += String.fromCodePoint(codePoint);\n        } else {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        }\n        break;\n      case \"disallowed_STD3_valid\":\n        if (useSTD3) {\n          hasError = true;\n        }\n\n        processed += String.fromCodePoint(codePoint);\n        break;\n    }\n  }\n\n  return {\n    string: processed,\n    error: hasError\n  };\n}\n\nvar combiningMarksRegex = /[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFC-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2D]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC00-\\uDC02\\uDC38-\\uDC46\\uDC7F-\\uDC82\\uDCB0-\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD34\\uDD73\\uDD80-\\uDD82\\uDDB3-\\uDDC0\\uDE2C-\\uDE37\\uDEDF-\\uDEEA\\uDF01-\\uDF03\\uDF3C\\uDF3E-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDCB0-\\uDCC3\\uDDAF-\\uDDB5\\uDDB8-\\uDDC0\\uDE30-\\uDE40\\uDEAB-\\uDEB7]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF51-\\uDF7E\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD83A[\\uDCD0-\\uDCD6]|\\uDB40[\\uDD00-\\uDDEF]/;\n\nfunction validateLabel(label, processing_option) {\n  if (label.substr(0, 4) === \"xn--\") {\n    label = punycode.toUnicode(label);\n    processing_option = PROCESSING_OPTIONS.NONTRANSITIONAL;\n  }\n\n  var error = false;\n\n  if (normalize(label) !== label ||\n      (label[3] === \"-\" && label[4] === \"-\") ||\n      label[0] === \"-\" || label[label.length - 1] === \"-\" ||\n      label.indexOf(\".\") !== -1 ||\n      label.search(combiningMarksRegex) === 0) {\n    error = true;\n  }\n\n  var len = countSymbols(label);\n  for (var i = 0; i < len; ++i) {\n    var status = findStatus(label.codePointAt(i));\n    if ((processing === PROCESSING_OPTIONS.TRANSITIONAL && status[1] !== \"valid\") ||\n        (processing === PROCESSING_OPTIONS.NONTRANSITIONAL &&\n         status[1] !== \"valid\" && status[1] !== \"deviation\")) {\n      error = true;\n      break;\n    }\n  }\n\n  return {\n    label: label,\n    error: error\n  };\n}\n\nfunction processing(domain_name, useSTD3, processing_option) {\n  var result = mapChars(domain_name, useSTD3, processing_option);\n  result.string = normalize(result.string);\n\n  var labels = result.string.split(\".\");\n  for (var i = 0; i < labels.length; ++i) {\n    try {\n      var validation = validateLabel(labels[i]);\n      labels[i] = validation.label;\n      result.error = result.error || validation.error;\n    } catch(e) {\n      result.error = true;\n    }\n  }\n\n  return {\n    string: labels.join(\".\"),\n    error: result.error\n  };\n}\n\nmodule.exports.toASCII = function(domain_name, useSTD3, processing_option, verifyDnsLength) {\n  var result = processing(domain_name, useSTD3, processing_option);\n  var labels = result.string.split(\".\");\n  labels = labels.map(function(l) {\n    try {\n      return punycode.toASCII(l);\n    } catch(e) {\n      result.error = true;\n      return l;\n    }\n  });\n\n  if (verifyDnsLength) {\n    var total = labels.slice(0, labels.length - 1).join(\".\").length;\n    if (total.length > 253 || total.length === 0) {\n      result.error = true;\n    }\n\n    for (var i=0; i < labels.length; ++i) {\n      if (labels.length > 63 || labels.length === 0) {\n        result.error = true;\n        break;\n      }\n    }\n  }\n\n  if (result.error) return null;\n  return labels.join(\".\");\n};\n\nmodule.exports.toUnicode = function(domain_name, useSTD3) {\n  var result = processing(domain_name, useSTD3, PROCESSING_OPTIONS.NONTRANSITIONAL);\n\n  return {\n    domain: result.string,\n    error: result.error\n  };\n};\n\nmodule.exports.PROCESSING_OPTIONS = PROCESSING_OPTIONS;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SPEED_REFRESH_INTERVAL = exports.REFRESH_INTERVAL = exports.BADGE_COLOR = exports.MAX_DAILY_RATE = exports.RULE_ID_POST_REQUEST = exports.RULE_ID_VALUE_TO_MODIFY_CONTENT_TYPE_TO = exports.RULE_ID_CONTENT_TYPE = exports.RULE_ID_CONTENT_DISPOSITION = exports.RULE_ID_XFRAME = exports.DATA_ID_STRING = exports.DATA_ID_IFRAME_BATCH = exports.DATA_ID_IFRAME = exports.LIFESPAN_TAB = exports.LIFESPAN_IFRAME = exports.MAX_QUEUE_SIZE = exports.MAX_PARALLEL_EXECUTIONS_BATCH_FETCH = exports.MAX_PARALLEL_EXECUTIONS_FETCH = exports.MAX_PARALLEL_EXECUTIONS_BATCH = exports.MAX_PARALLEL_EXECUTIONS = exports.VERSION = void 0;\nexports.VERSION = \"0.0.1\";\nexports.MAX_PARALLEL_EXECUTIONS = 4;\nexports.MAX_PARALLEL_EXECUTIONS_BATCH = 4;\nexports.MAX_PARALLEL_EXECUTIONS_FETCH = 10;\nexports.MAX_PARALLEL_EXECUTIONS_BATCH_FETCH = 10;\nexports.MAX_QUEUE_SIZE = 24;\nexports.LIFESPAN_IFRAME = 1000 * 60 * 1.5; // 1.5 minutes\nexports.LIFESPAN_TAB = 1000 * 10; // 10 seconds\nexports.DATA_ID_IFRAME = \"data-mllwtl-frame-crwl-ml\";\nexports.DATA_ID_IFRAME_BATCH = \"data-mllwtl-frame-batch-crwl-ml\";\nexports.DATA_ID_STRING = \"data-mllwtl-frame\";\nexports.RULE_ID_XFRAME = 80045;\nexports.RULE_ID_CONTENT_DISPOSITION = 80046;\nexports.RULE_ID_CONTENT_TYPE = 80047;\nexports.RULE_ID_VALUE_TO_MODIFY_CONTENT_TYPE_TO = 80048;\nexports.RULE_ID_POST_REQUEST = 80049;\nexports.MAX_DAILY_RATE = 500;\nexports.BADGE_COLOR = \"#4CAF50\";\nexports.REFRESH_INTERVAL = 1000 * 60 * 60 * 24; // 24 hours\nexports.SPEED_REFRESH_INTERVAL = 1000 * 60 * 60 * 12; // 12 hours\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst identity_helpers_1 = require(\"./utils/identity-helpers\");\nconst logger_1 = require(\"./logger/logger\");\nconst rate_limiter_1 = require(\"./local-rate-limiting/rate-limiter\");\nconst constants_1 = require(\"./constants\");\nconst websockets_1 = require(\"./websockets\");\nconst storage_helpers_1 = require(\"./storage/storage-helpers\");\nconst OPT_IN_STATUS_KEY = \"mellowtel_opt_in_status\";\nclass MellowtelSDK {\n    constructor(publishableKey, options) {\n        this.disableLogs = true;\n        this.MAX_DAILY_RATE = constants_1.MAX_DAILY_RATE;\n        this.wsManager = websockets_1.WebSocketManager.getInstance();\n        this.publishableKey = publishableKey;\n        this.options = options;\n        this.disableLogs = options?.disableLogs !== undefined ? options.disableLogs : true;\n        this.MAX_DAILY_RATE = options?.MAX_DAILY_RATE || constants_1.MAX_DAILY_RATE;\n        rate_limiter_1.RateLimiter.MAX_DAILY_RATE = this.MAX_DAILY_RATE;\n        logger_1.Logger.disableLogs = this.disableLogs;\n    }\n    async init() {\n        (0, storage_helpers_1.getLocalStorage)('test_key');\n        if (!this.publishableKey) {\n            throw new Error(\"publishableKey is undefined, null, or empty\");\n        }\n        const isOptedIn = await this.getOptInStatus();\n        if (!isOptedIn) {\n            logger_1.Logger.log(\"User is not opted in. WebSocket connection will not be established.\");\n            return;\n        }\n        let identifier = (0, identity_helpers_1.getOrGenerateIdentifier)(this.publishableKey);\n        logger_1.Logger.log(identifier);\n        await this.wsManager.initialize(identifier);\n        logger_1.Logger.log(\"Mellowtel SDK initialized\");\n    }\n    getVersion() {\n        return constants_1.VERSION;\n    }\n    /**\n     * Get the current opt-in status\n     * @returns Promise<boolean> - Returns true if user is opted in, false otherwise\n     */\n    getOptInStatus() {\n        const status = (0, storage_helpers_1.getLocalStorage)(OPT_IN_STATUS_KEY);\n        return !!status;\n    }\n    /**\n     * Opt in to the service and initialize WebSocket if not already initialized\n     * @returns Promise<void>\n     */\n    async optIn() {\n        await (0, storage_helpers_1.setLocalStorage)(OPT_IN_STATUS_KEY, true);\n        logger_1.Logger.log(\"User opted in\");\n    }\n    /**\n     * Opt out of the service and disconnect WebSocket if connected\n     * @returns Promise<void>\n     */\n    async optOut() {\n        await (0, storage_helpers_1.setLocalStorage)(OPT_IN_STATUS_KEY, false);\n        logger_1.Logger.log(\"User opted out\");\n    }\n}\nexports.default = MellowtelSDK;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RateLimiter = void 0;\nconst storage_helpers_1 = require(\"../storage/storage-helpers\");\nconst logger_1 = require(\"../logger/logger\");\nconst constants_1 = require(\"../constants\");\nclass RateLimiter {\n    static async getRateLimitData() {\n        let timestamp = await (0, storage_helpers_1.getLocalStorage)(\"timestamp_m\");\n        if (timestamp === undefined || !timestamp.hasOwnProperty(\"timestamp_m\")) {\n            timestamp = undefined;\n        }\n        else {\n            timestamp = parseInt(timestamp.timestamp_m);\n        }\n        let count = await (0, storage_helpers_1.getLocalStorage)(\"count_m\");\n        if (count === undefined || !count.hasOwnProperty(\"count_m\")) {\n            count = undefined;\n        }\n        else {\n            count = parseInt(count.count_m);\n        }\n        return { timestamp, count };\n    }\n    static async setRateLimitData(timestamp, count) {\n        await (0, storage_helpers_1.setLocalStorage)(\"timestamp_m\", timestamp);\n        await (0, storage_helpers_1.setLocalStorage)(\"count_m\", count);\n    }\n    static async getLifetimeTotalCount() {\n        let lifetime_total_count = await (0, storage_helpers_1.getLocalStorage)(\"lifetime_total_count_m\");\n        if (lifetime_total_count === undefined ||\n            !lifetime_total_count.hasOwnProperty(\"lifetime_total_count_m\")) {\n            lifetime_total_count = 0;\n        }\n        else {\n            lifetime_total_count = parseInt(lifetime_total_count.lifetime_total_count_m);\n        }\n        return { lifetime_total_count };\n    }\n    static async setHistoricData(initial_timestamp, lifetime_total_count) {\n        await (0, storage_helpers_1.setLocalStorage)(\"initial_timestamp_m\", initial_timestamp);\n        await (0, storage_helpers_1.setLocalStorage)(\"lifetime_total_count_m\", lifetime_total_count);\n    }\n    static calculateElapsedTime(now, timestamp) {\n        return now - timestamp;\n    }\n    static async resetRateLimitData(now, add_to_count = false) {\n        await this.setRateLimitData(now, add_to_count ? 1 : 0);\n    }\n    static async getIfRateLimitReached() {\n        let mllwtl_rate_limit_object = await (0, storage_helpers_1.getLocalStorage)(\"mllwtl_rate_limit_reached\");\n        if (mllwtl_rate_limit_object === undefined ||\n            !mllwtl_rate_limit_object.hasOwnProperty(\"mllwtl_rate_limit_reached\")) {\n            return false;\n        }\n        else {\n            return mllwtl_rate_limit_object.mllwtl_rate_limit_reached.toString() === \"true\";\n        }\n    }\n    static async checkRateLimit(increase_count = true) {\n        const now = Date.now();\n        let { timestamp, count } = await this.getRateLimitData();\n        let { lifetime_total_count } = await this.getLifetimeTotalCount();\n        if (!timestamp) {\n            logger_1.Logger.log(`[]: NO_TIMESTAMP, setting timestamp, count, and historic data`);\n            await this.setRateLimitData(now, 1);\n            await this.setHistoricData(now, 1);\n            return {\n                shouldContinue: true,\n                isLastCount: false,\n                requestsCount: 0,\n            };\n        }\n        const elapsedTime = this.calculateElapsedTime(now, timestamp);\n        if (elapsedTime > constants_1.REFRESH_INTERVAL) {\n            logger_1.Logger.log(`[]: REFRESH_INTERVAL elapsed, resetting count`);\n            await this.resetRateLimitData(now, true);\n            await (0, storage_helpers_1.setLocalStorage)(\"mllwtl_rate_limit_reached\", false);\n            return {\n                shouldContinue: true,\n                isLastCount: false,\n                requestsCount: 0,\n            };\n        }\n        if (increase_count) {\n            count++;\n            await (0, storage_helpers_1.setLocalStorage)(\"count_m\", count);\n            lifetime_total_count++;\n            await (0, storage_helpers_1.setLocalStorage)(\"lifetime_total_count_m\", lifetime_total_count);\n        }\n        logger_1.Logger.log(`[]: SHOULD CONTINUE? IF COUNT (${count}) <= ${this.MAX_DAILY_RATE} : ${count <= this.MAX_DAILY_RATE}`);\n        if (count <= this.MAX_DAILY_RATE) {\n            let isLastCount = count === this.MAX_DAILY_RATE;\n            return {\n                shouldContinue: true,\n                isLastCount,\n                requestsCount: count,\n            };\n        }\n        else {\n            logger_1.Logger.log(`[]: RATE LIMIT REACHED`);\n            return {\n                shouldContinue: false,\n                isLastCount: false,\n                requestsCount: count,\n            };\n        }\n    }\n}\nexports.RateLimiter = RateLimiter;\nRateLimiter.MAX_DAILY_RATE = constants_1.MAX_DAILY_RATE;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Logger = void 0;\nclass Logger {\n    static log(message, ...optionalParams) {\n        if (!Logger.disableLogs) {\n            console.log(message, ...optionalParams);\n        }\n    }\n    static error(message, ...optionalParams) {\n        if (!Logger.disableLogs) {\n            console.error(message, ...optionalParams);\n        }\n    }\n}\nexports.Logger = Logger;\nLogger.disableLogs = true;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst electron_1 = require(\"electron\");\nconst index_1 = __importDefault(require(\"./index\"));\nlet mainWindow;\nfunction createWindow() {\n    mainWindow = new electron_1.BrowserWindow({\n        width: 800,\n        height: 600,\n        webPreferences: {\n            nodeIntegration: true,\n        },\n    });\n    mainWindow.loadFile('index.html');\n    mainWindow.on('closed', () => {\n        mainWindow = null;\n    });\n    mainWindow.webContents.openDevTools();\n}\nelectron_1.app.on('ready', async () => {\n    createWindow();\n    const sdk = new index_1.default('electrontestkey', { disableLogs: false });\n    console.log(await sdk.getOptInStatus());\n    // await sdk.optIn()\n    await sdk.init();\n    console.log('Mellowtel SDK version:', sdk.getVersion());\n});\nelectron_1.app.on('window-all-closed', () => {\n    if (process.platform !== 'darwin') {\n        electron_1.app.quit();\n    }\n});\nelectron_1.app.on('activate', () => {\n    if (mainWindow === null) {\n        createWindow();\n    }\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getLocalStorage = getLocalStorage;\nexports.setLocalStorage = setLocalStorage;\nexports.deleteLocalStorage = deleteLocalStorage;\nconst electron_store_1 = __importDefault(require(\"electron-store\"));\nconst store = new electron_store_1.default();\nfunction getLocalStorage(key) {\n    return store.get(key);\n}\nfunction setLocalStorage(key, value) {\n    store.set(key, value);\n    return true;\n}\nfunction deleteLocalStorage(keys) {\n    keys.forEach((key) => store.delete(key));\n    return true;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getOrGenerateIdentifier = getOrGenerateIdentifier;\nexports.getIdentifier = getIdentifier;\nconst storage_helpers_1 = require(\"../storage/storage-helpers\");\nfunction getOrGenerateIdentifier(configuration_key) {\n    let mllwtIdentifier = (0, storage_helpers_1.getLocalStorage)(\"mllwtl_identifier\");\n    // First check if result exists at all\n    if (!mllwtIdentifier) {\n        console.log(\"mllwtel_identifier => 0\");\n        // Handle case where no identifier exists yet\n        return generateIdentifier(configuration_key);\n    }\n    console.log(`mllwtl_idenfier => ${mllwtIdentifier}`);\n    if (mllwtIdentifier && mllwtIdentifier.startsWith(`mllwtl_${configuration_key}`)) {\n        console.log(\"mllwtel_identifier => 1\");\n        return mllwtIdentifier;\n    }\n    else if (mllwtIdentifier && mllwtIdentifier.startsWith('mllwtl_')) {\n        console.log(\"mllwtel_identifier => 2\");\n        return generateIdentifier(configuration_key, true, mllwtIdentifier);\n    }\n    else {\n        return generateIdentifier(configuration_key);\n    }\n}\nfunction getIdentifier() {\n    return (0, storage_helpers_1.getLocalStorage)(\"mllwtl_identifier\");\n}\nfunction generateIdentifier(configuration_key, just_update_key = false, previous_identifier = \"\") {\n    const random_string = just_update_key ? previous_identifier.split(\"_\")[1] : generateRandomString(10);\n    const identifier = `mllwtl_${configuration_key}_${random_string}`;\n    (0, storage_helpers_1.setLocalStorage)(\"mllwtl_identifier\", identifier);\n    return identifier;\n}\nfunction generateRandomString(length) {\n    return Math.random().toString(36).substring(2, length + 2);\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MeasureConnectionSpeed = MeasureConnectionSpeed;\nconst logger_1 = require(\"../logger/logger\");\nconst speedtest_1 = __importDefault(require(\"@cloudflare/speedtest\"));\nconst storage_helpers_1 = require(\"../storage/storage-helpers\");\nconst constants_1 = require(\"../constants\");\nasync function MeasureConnectionSpeed() {\n    return new Promise(async (resolve) => {\n        resolve(100);\n        return;\n        let savedSpeedTestResults = await getSavedSpeedTestResults();\n        let speedMbps = savedSpeedTestResults.speedMbps;\n        let speedTestTimestamp = savedSpeedTestResults.speedTestTimestamp;\n        if (speedMbps === undefined || didSpeedTestExpire(speedTestTimestamp)) {\n            logger_1.Logger.log(\"[MeasureConnectionSpeed]: Running speed test...\");\n            const speedTest = new speedtest_1.default({\n                autoStart: false,\n                measurements: [{ type: \"download\", bytes: 10e6, count: 1 }],\n            });\n            speedTest.onFinish = async (results) => {\n                const bandwidth = results.getDownloadBandwidth();\n                if (!bandwidth) {\n                    logger_1.Logger.log(\"Speed test failed. Could not get bandwidth\");\n                    resolve(0);\n                }\n                else {\n                    const speedMbps = (bandwidth / 1e6).toFixed(2);\n                    logger_1.Logger.log(`Speed test finished. Download bandwidth: ${speedMbps} Mbps`);\n                    await saveSpeedTestResults(parseFloat(speedMbps));\n                    resolve(parseFloat(speedMbps));\n                }\n            };\n            speedTest.play();\n        }\n        else {\n            logger_1.Logger.log(\"[MeasureConnectionSpeed]: Using saved speed test results =>\", speedMbps);\n            logger_1.Logger.log(\"[MeasureConnectionSpeed]: Speed test timestamp =>\", speedTestTimestamp);\n            resolve(speedMbps);\n        }\n    });\n}\nasync function saveSpeedTestResults(speedMbps) {\n    return new Promise(async (resolve) => {\n        let timestamp = new Date().getTime();\n        await (0, storage_helpers_1.setLocalStorage)(\"speedMbps\", speedMbps);\n        await (0, storage_helpers_1.setLocalStorage)(\"speedTestTimestamp\", timestamp);\n        resolve(true);\n    });\n}\nasync function getSavedSpeedTestResults() {\n    return new Promise(async (resolve) => {\n        let speedMbps = await (0, storage_helpers_1.getLocalStorage)(\"speedMbps\");\n        if (speedMbps === undefined || !speedMbps.hasOwnProperty(\"speedMbps\")) {\n            speedMbps = undefined;\n        }\n        else {\n            speedMbps = speedMbps.speedMbps;\n        }\n        let speedTestTimestamp = await (0, storage_helpers_1.getLocalStorage)(\"speedTestTimestamp\");\n        if (speedTestTimestamp === undefined || !speedTestTimestamp.hasOwnProperty(\"speedTestTimestamp\")) {\n            speedTestTimestamp = undefined;\n        }\n        else {\n            speedTestTimestamp = speedTestTimestamp.speedTestTimestamp;\n        }\n        resolve({\n            speedMbps: speedMbps,\n            speedTestTimestamp: speedTestTimestamp,\n        });\n    });\n}\nfunction didSpeedTestExpire(timestamp) {\n    if (timestamp === undefined) {\n        return true;\n    }\n    const now = new Date().getTime();\n    return now - timestamp > constants_1.SPEED_REFRESH_INTERVAL;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.putHTMLToSigned = putHTMLToSigned;\nexports.putMarkdownToSigned = putMarkdownToSigned;\nexports.putHTMLVisualizerToSigned = putHTMLVisualizerToSigned;\nexports.putHTMLContainedToSigned = putHTMLContainedToSigned;\nexports.updateDynamo = updateDynamo;\nconst logger_1 = require(\"../logger/logger\");\nfunction putHTMLToSigned(htmlURL_signed, content) {\n    return new Promise((resolve) => {\n        fetch(htmlURL_signed, {\n            method: \"PUT\",\n            body: content,\n            headers: {\n                \"Content-Type\": \"text/html\",\n                \"x-amz-acl\": \"public-read\",\n            },\n        })\n            .then((response) => {\n            if (!response.ok) {\n                throw new Error(\"[putHTMLToSigned]: Network response was not ok\");\n            }\n            return response;\n        })\n            .then((data) => {\n            logger_1.Logger.log(\"[putHTMLToSigned]: Response from server:\", data);\n            resolve(data);\n        });\n    });\n}\nfunction putMarkdownToSigned(markdownURL_signed, markDown) {\n    return new Promise((resolve) => {\n        fetch(markdownURL_signed, {\n            method: \"PUT\",\n            body: markDown,\n            headers: {\n                \"Content-Type\": \"text/markdown\",\n                \"x-amz-acl\": \"public-read\",\n            },\n        })\n            .then((response) => {\n            if (!response.ok) {\n                throw new Error(\"[putMarkdownToSigned]: Network response was not ok\");\n            }\n            return response;\n        })\n            .then((data) => {\n            logger_1.Logger.log(\"[putMarkdownToSigned]: Response from server:\", data);\n            resolve(data);\n        });\n    });\n}\nfunction putHTMLVisualizerToSigned(htmlVisualizerURL_signed, base64image) {\n    return new Promise((resolve) => {\n        // const byteCharacters = atob(base64image.split(\",\")[1]);\n        // const byteNumbers = new Array(byteCharacters.length);\n        // for (let i = 0; i < byteCharacters.length; i++) {\n        //   byteNumbers[i] = byteCharacters.charCodeAt(i);\n        // }\n        const byteArray = new Uint8Array(base64image);\n        fetch(htmlVisualizerURL_signed, {\n            method: \"PUT\",\n            body: byteArray,\n            headers: {\n                \"Content-Type\": \"image/png\",\n                \"Content-Encoding\": \"base64\",\n                \"x-amz-acl\": \"public-read\",\n            },\n        })\n            .then((response) => {\n            if (!response.ok) {\n                throw new Error(\"[putHTMLVisualizerToSigned]: Network response was not ok\");\n            }\n            return response;\n        })\n            .then((data) => {\n            logger_1.Logger.log(\"[putHTMLVisualizerToSigned]: Response from server:\", data);\n            resolve(data);\n        });\n    });\n}\nfunction putHTMLContainedToSigned(htmlContainedURL_signed, htmlContainedString) {\n    return new Promise((resolve) => {\n        fetch(htmlContainedURL_signed, {\n            method: \"PUT\",\n            body: htmlContainedString,\n            headers: {\n                \"Content-Type\": \"text/html\",\n                \"x-amz-acl\": \"public-read\",\n            },\n        })\n            .then((response) => {\n            if (!response.ok) {\n                throw new Error(\"[putHTMLContainedToSigned]: Network response was not ok\");\n            }\n            return response;\n        })\n            .then((data) => {\n            logger_1.Logger.log(\"[putHTMLContainedToSigned]: Response from server:\", data);\n            resolve(data);\n        });\n    });\n}\nasync function updateDynamo(recordID, url, htmlTransformer, orgId, htmlKey = \"--\", markdownKey = \"--\", htmlVisualizerKey = \"--\") {\n    logger_1.Logger.log(\"📋  updateDynamo - Saving Crawl 📋\");\n    logger_1.Logger.log(\"RecordID:\", recordID);\n    logger_1.Logger.log(\"URL:\", url);\n    logger_1.Logger.log(\"HTML Transformer:\", htmlTransformer);\n    logger_1.Logger.log(\"OrgID:\", orgId);\n    logger_1.Logger.log(\"HTML Key:\", htmlKey);\n    logger_1.Logger.log(\"Markdown Key:\", markdownKey);\n    try {\n        let endpoint = \"https://zuaq4uywadlj75qqkfns3bmoom0xpaiz.lambda-url.us-east-1.on.aws/\";\n        const bodyData = {\n            recordID,\n            url,\n            htmlTransformer,\n            orgId,\n            htmlFileName: htmlKey,\n            markdownFileName: markdownKey,\n            htmlVisualizerFileName: htmlVisualizerKey,\n        };\n        const requestOptions = {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"text/plain\" },\n            body: JSON.stringify(bodyData),\n        };\n        logger_1.Logger.log(\"[updateDynamo]: Sending data to server =>\", bodyData);\n        const response = await fetch(endpoint, requestOptions);\n        if (!response.ok) {\n            throw new Error(\"Network response was not ok\");\n        }\n        const data = await response.json();\n        logger_1.Logger.log(\"Response from server:\", data);\n    }\n    catch (error) {\n        logger_1.Logger.error(\"Error:\", error);\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScrapeRequest = void 0;\nclass ScrapeRequest {\n    constructor({ url, orgId, recordID, waitBeforeScraping = 0, htmlVisualizer = false, windowSize = { width: 1024, height: 1024 }, saveHtml = true, saveMarkdown = true, htmlTransformer = 'none', removeCSSselectors = '', }) {\n        this.url = url;\n        this.orgId = orgId;\n        this.recordID = recordID;\n        this.waitBeforeScraping = waitBeforeScraping;\n        this.htmlVisualizer = htmlVisualizer;\n        this.windowSize = windowSize;\n        this.saveHtml = saveHtml;\n        this.saveMarkdown = saveMarkdown;\n        this.htmlTransformer = htmlTransformer;\n        this.removeCSSselectors = removeCSSselectors;\n    }\n    // Helper function to parse size strings\n    static _parseSize(size) {\n        return parseFloat(size.substring(0, size.length - 2));\n    }\n    // Factory method to create a ScrapeRequest from a JSON object\n    static fromJson(json) {\n        return new ScrapeRequest({\n            url: json.url,\n            orgId: json.orgId,\n            recordID: json.recordID,\n            waitBeforeScraping: json.waitBeforeScraping,\n            htmlVisualizer: json.htmlVisualizer,\n            windowSize: json.screen_width && json.screen_height\n                ? { width: ScrapeRequest._parseSize(json.screen_width), height: ScrapeRequest._parseSize(json.screen_height) }\n                : { width: 1024, height: 1024 },\n            saveHtml: json.saveHtml ?? true,\n            saveMarkdown: json.saveMarkdown ?? true,\n            htmlTransformer: json.htmlTransformer ?? 'none',\n            removeCSSselectors: json.removeCSSselectors\n        });\n    }\n    // Convert the ScrapeRequest to a JSON object\n    toJson() {\n        return {\n            url: this.url,\n            orgId: this.orgId,\n            recordID: this.recordID,\n            waitBeforeScraping: this.waitBeforeScraping,\n            htmlVisualizer: this.htmlVisualizer,\n            screen_width: this.windowSize ? `${this.windowSize.width}px` : null,\n            screen_height: this.windowSize ? `${this.windowSize.height}px` : null,\n            saveHtml: this.saveHtml,\n            saveMarkdown: this.saveMarkdown,\n            htmlTransformer: this.htmlTransformer,\n            removeCSSselectors: this.removeCSSselectors,\n        };\n    }\n    toString() {\n        return `ScrapeRequest(url: ${this.url}, waitBeforeScraping: ${this.waitBeforeScraping}, htmlVisualizer: ${this.htmlVisualizer}, windowSize: ${this.windowSize}, recordID: ${this.recordID})`;\n    }\n}\nexports.ScrapeRequest = ScrapeRequest;\n//   // Example usage\n//   const jsonData = {\n//     url: \"https://example.com\",\n//     orgId: \"org123\",\n//     recordID: \"rec456\",\n//     waitBeforeScraping: 5,\n//     htmlVisualizer: true,\n//     screen_width: \"1280px\",\n//     screen_height: \"720px\",\n//     saveHtml: true,\n//     saveMarkdown: false,\n//     htmlTransformer: \"custom\",\n//     removeCSSselectors: \".ads\",\n//     actions: '[{\"action\": \"click\", \"selector\": \"#button\"}]'\n//   };\n//   const scrapeRequest = ScrapeRequest.fromJson(jsonData);\n//   console.log(scrapeRequest.toString());\n//   console.log(scrapeRequest.toJson());\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.scrapeUrl = scrapeUrl;\nexports.getS3SignedUrls = getS3SignedUrls;\nconst electron_1 = require(\"electron\");\nconst logger_1 = require(\"../logger/logger\");\nconst turndown_1 = __importDefault(require(\"turndown\"));\nconst delay = (ms) => {\n    return new Promise(resolve => setTimeout(resolve, ms));\n};\nasync function scrapeUrl(scrapeRequest) {\n    return new Promise((resolve, reject) => {\n        const win = new electron_1.BrowserWindow({\n            show: false,\n            webPreferences: {\n                offscreen: true,\n                nodeIntegration: false,\n                contextIsolation: true,\n            },\n            height: scrapeRequest.windowSize.height,\n            width: scrapeRequest.windowSize.width\n        });\n        win.loadURL(scrapeRequest.url);\n        win.webContents.on('did-finish-load', async () => {\n            try {\n                await delay(scrapeRequest.waitBeforeScraping * 1000);\n                if (scrapeRequest.removeCSSselectors) {\n                    let removeSelectorsScript = `\n                    (function() {\n                      function removeSelectorsFromDocument(document, selectorsToRemove) {\n                        const defaultSelectorsToRemove = [\n                          \"nav\", \"footer\", \"script\", \"style\", \"noscript\", \"svg\", '[role=\"alert\"]', '[role=\"banner\"]', '[role=\"dialog\"]', '[role=\"alertdialog\"]', '[role=\"region\"][aria-label*=\"skip\" i]', '[aria-modal=\"true\"]'\n                        ];\n                        if (selectorsToRemove.length === 0) selectorsToRemove = defaultSelectorsToRemove;\n                        selectorsToRemove.forEach((selector) => {\n                          const elements = document.querySelectorAll(selector);\n                          elements.forEach((element) => element.remove());\n                        });\n                      }\n              \n                      let removeCSSselectors = ${scrapeRequest.removeCSSselectors == \"default\" ? \"[]\" : scrapeRequest.removeCSSselectors};\n                      if (removeCSSselectors === \"default\") {\n                        removeSelectorsFromDocument(document, []);\n                      } else if (removeCSSselectors !== \"\" && removeCSSselectors !== \"none\") {\n                        try {\n                          let selectors = JSON.parse(removeCSSselectors);\n                          removeSelectorsFromDocument(document, selectors);\n                        } catch (e) {\n                          console.log(\"Error parsing removeCSSselectors =>\", e);\n                        }\n                      }\n                    })();\n                  `;\n                    await win.webContents.executeJavaScript(removeSelectorsScript);\n                }\n                const content = await win.webContents.executeJavaScript('document.documentElement.outerHTML');\n                logger_1.Logger.log(`[scrapeUrl]: Scraped content from ${scrapeRequest.url}`);\n                let screenshot;\n                if (scrapeRequest.htmlVisualizer) {\n                    screenshot = await win.webContents.capturePage();\n                    logger_1.Logger.log(`[scrapeUrl]: Screenshot captured for ${scrapeRequest.url}`);\n                }\n                // Initialize TurndownService\n                const turndownService = new turndown_1.default({\n                    headingStyle: 'atx',\n                    codeBlockStyle: 'fenced',\n                    bulletListMarker: '*'\n                });\n                // Convert HTML to Markdown\n                let markdown = turndownService.turndown(content);\n                resolve({ html: content, markdown: markdown, screenshot: screenshot?.toPNG() });\n            }\n            catch (error) {\n                logger_1.Logger.error(`[scrapeUrl]: Error scraping ${scrapeRequest.url} - ${error}`);\n                reject(error);\n            }\n            finally {\n                win.close();\n            }\n        });\n        win.webContents.on('did-fail-load', (event, errorCode, errorDescription) => {\n            logger_1.Logger.error(`[scrapeUrl]: Failed to load ${scrapeRequest.url} - ${errorDescription}`);\n            reject(new Error(errorDescription));\n            win.close();\n        });\n    });\n}\nasync function getS3SignedUrls(recordID) {\n    const response = await fetch(`https://5xub3rkd3rqg6ebumgrvkjrm6u0jgqnw.lambda-url.us-east-1.on.aws/?recordID=${recordID}`);\n    if (!response.ok) {\n        throw new Error(\"[getS3SignedUrls]: Network response was not ok\");\n    }\n    const data = await response.json();\n    logger_1.Logger.log(\"[getS3SignedUrls]: Response from server:\", data);\n    return {\n        uploadURL_html: data.uploadURL_html,\n        uploadURL_markDown: data.uploadURL_markDown,\n        uploadURL_htmlVisualizer: data.uploadURL_htmlVisualizer\n    };\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebSocketManager = void 0;\nconst isomorphic_ws_1 = __importDefault(require(\"isomorphic-ws\"));\nconst measure_connection_speed_1 = require(\"./utils/measure-connection-speed\");\nconst rate_limiter_1 = require(\"./local-rate-limiting/rate-limiter\");\nconst logger_1 = require(\"./logger/logger\");\nconst storage_helpers_1 = require(\"./storage/storage-helpers\");\nconst identity_helpers_1 = require(\"./utils/identity-helpers\");\nconst constants_1 = require(\"./constants\");\nconst scraping_helpers_1 = require(\"./utils/scraping-helpers\");\nconst put_to_signed_1 = require(\"./utils/put-to-signed\");\nconst scrape_request_1 = require(\"./utils/scrape-request\");\nclass WebSocketManager {\n    constructor() {\n        this.ws = null;\n        this.wsUrl = \"wss://7joy2r59rf.execute-api.us-east-1.amazonaws.com/production/\";\n        this.reconnectAttempts = 0;\n        this.maxReconnectAttempts = 5;\n        this.reconnectDelay = 5000;\n        this.isConnecting = false;\n        this.identifier = '';\n    }\n    static getInstance() {\n        if (!WebSocketManager.instance) {\n            WebSocketManager.instance = new WebSocketManager();\n        }\n        return WebSocketManager.instance;\n    }\n    async initialize(identifier) {\n        this.identifier = identifier;\n        if (this.isConnected()) {\n            logger_1.Logger.log(\"[WebSocketManager]: WebSocket is already connected\");\n            return true;\n        }\n        if (this.isConnecting) {\n            logger_1.Logger.log(\"[WebSocketManager]: WebSocket connection is in progress\");\n            return false;\n        }\n        const limitReached = await rate_limiter_1.RateLimiter.getIfRateLimitReached();\n        if (limitReached) {\n            return await this.handleRateLimit();\n        }\n        return await this.establishConnection();\n    }\n    async establishConnection() {\n        try {\n            this.isConnecting = true;\n            const extensionIdentifier = await (0, identity_helpers_1.getIdentifier)();\n            const speedMbps = await (0, measure_connection_speed_1.MeasureConnectionSpeed)();\n            logger_1.Logger.log(`[WebSocketManager]: Connection speed: ${speedMbps} Mbps`);\n            this.ws = new isomorphic_ws_1.default(`${this.wsUrl}?device_id=${this.identifier}&version=${constants_1.VERSION}&plugin_id=${encodeURIComponent(extensionIdentifier)}&speed_download=${speedMbps}`);\n            this.setupWebSocketListeners();\n            return true;\n        }\n        catch (error) {\n            logger_1.Logger.error(`[WebSocketManager]: Connection error - ${error}`);\n            return false;\n        }\n        finally {\n            this.isConnecting = false;\n        }\n    }\n    setupWebSocketListeners() {\n        if (!this.ws)\n            return;\n        this.ws.onopen = () => {\n            logger_1.Logger.log(\"[WebSocketManager]: Connection established\");\n            this.reconnectAttempts = 0;\n        };\n        this.ws.onclose = () => {\n            logger_1.Logger.log(\"[WebSocketManager]: Connection closed\");\n            this.handleReconnection();\n        };\n        this.ws.onerror = (error) => {\n            logger_1.Logger.error(`[WebSocketManager]: WebSocket error - ${error}`);\n        };\n        this.ws.onmessage = async (data) => {\n            await this.handleIncomingMessage(data);\n        };\n    }\n    async handleIncomingMessage(data) {\n        try {\n            const json = JSON.parse(data.data);\n            if (!json.url)\n                return;\n            const scrapeRequest = scrape_request_1.ScrapeRequest.fromJson(json);\n            logger_1.Logger.log(`[WebSocketManager]: Received URL to scrape - ${scrapeRequest.url}`);\n            const { shouldContinue, isLastCount } = await rate_limiter_1.RateLimiter.checkRateLimit(true);\n            if (!shouldContinue) {\n                await this.handleRateLimitReached();\n                return;\n            }\n            await this.processScrapeRequest(scrapeRequest);\n        }\n        catch (error) {\n            logger_1.Logger.error(`[WebSocketManager]: Error handling message - ${error}`);\n        }\n    }\n    async processScrapeRequest(scrapeRequest) {\n        const scrapedContent = await (0, scraping_helpers_1.scrapeUrl)(scrapeRequest);\n        const { uploadURL_html, uploadURL_markDown, uploadURL_htmlVisualizer } = await (0, scraping_helpers_1.getS3SignedUrls)(scrapeRequest.recordID);\n        await (0, put_to_signed_1.putHTMLToSigned)(uploadURL_html, scrapedContent.html);\n        await (0, put_to_signed_1.putMarkdownToSigned)(uploadURL_markDown, scrapedContent.markdown);\n        if (scrapedContent.screenshot) {\n            await (0, put_to_signed_1.putHTMLVisualizerToSigned)(uploadURL_htmlVisualizer, scrapedContent.screenshot);\n        }\n        await (0, put_to_signed_1.updateDynamo)(scrapeRequest.recordID, scrapeRequest.url, scrapeRequest.htmlTransformer, scrapeRequest.orgId, `text_${scrapeRequest.recordID}.txt`, `markDown_${scrapeRequest.recordID}.txt`, `image_${scrapeRequest.recordID}.png`);\n    }\n    async handleRateLimit() {\n        const { timestamp, count } = await rate_limiter_1.RateLimiter.getRateLimitData();\n        const timeElapsed = rate_limiter_1.RateLimiter.calculateElapsedTime(Date.now(), timestamp);\n        if (timeElapsed > constants_1.REFRESH_INTERVAL) {\n            await (0, storage_helpers_1.setLocalStorage)(\"mllwtl_rate_limit_reached\", false);\n            await rate_limiter_1.RateLimiter.resetRateLimitData(Date.now(), false);\n            return await this.establishConnection();\n        }\n        return false;\n    }\n    async handleRateLimitReached() {\n        logger_1.Logger.log(\"[WebSocketManager]: Rate limit reached, closing connection...\");\n        await (0, storage_helpers_1.setLocalStorage)(\"mllwtl_rate_limit_reached\", true);\n        this.disconnect();\n    }\n    async handleReconnection() {\n        if (this.reconnectAttempts < this.maxReconnectAttempts) {\n            this.reconnectAttempts++;\n            logger_1.Logger.log(`[WebSocketManager]: Attempting to reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})`);\n            setTimeout(() => this.initialize(this.identifier), this.reconnectDelay);\n        }\n    }\n    isConnected() {\n        return this.ws !== null && this.ws.readyState === isomorphic_ws_1.default.OPEN;\n    }\n    disconnect() {\n        if (this.ws) {\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n}\nexports.WebSocketManager = WebSocketManager;\n","function extend (destination) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (source.hasOwnProperty(key)) destination[key] = source[key];\n    }\n  }\n  return destination\n}\n\nfunction repeat (character, count) {\n  return Array(count + 1).join(character)\n}\n\nfunction trimLeadingNewlines (string) {\n  return string.replace(/^\\n*/, '')\n}\n\nfunction trimTrailingNewlines (string) {\n  // avoid match-at-end regexp bottleneck, see #370\n  var indexEnd = string.length;\n  while (indexEnd > 0 && string[indexEnd - 1] === '\\n') indexEnd--;\n  return string.substring(0, indexEnd)\n}\n\nvar blockElements = [\n  'ADDRESS', 'ARTICLE', 'ASIDE', 'AUDIO', 'BLOCKQUOTE', 'BODY', 'CANVAS',\n  'CENTER', 'DD', 'DIR', 'DIV', 'DL', 'DT', 'FIELDSET', 'FIGCAPTION', 'FIGURE',\n  'FOOTER', 'FORM', 'FRAMESET', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'HEADER',\n  'HGROUP', 'HR', 'HTML', 'ISINDEX', 'LI', 'MAIN', 'MENU', 'NAV', 'NOFRAMES',\n  'NOSCRIPT', 'OL', 'OUTPUT', 'P', 'PRE', 'SECTION', 'TABLE', 'TBODY', 'TD',\n  'TFOOT', 'TH', 'THEAD', 'TR', 'UL'\n];\n\nfunction isBlock (node) {\n  return is(node, blockElements)\n}\n\nvar voidElements = [\n  'AREA', 'BASE', 'BR', 'COL', 'COMMAND', 'EMBED', 'HR', 'IMG', 'INPUT',\n  'KEYGEN', 'LINK', 'META', 'PARAM', 'SOURCE', 'TRACK', 'WBR'\n];\n\nfunction isVoid (node) {\n  return is(node, voidElements)\n}\n\nfunction hasVoid (node) {\n  return has(node, voidElements)\n}\n\nvar meaningfulWhenBlankElements = [\n  'A', 'TABLE', 'THEAD', 'TBODY', 'TFOOT', 'TH', 'TD', 'IFRAME', 'SCRIPT',\n  'AUDIO', 'VIDEO'\n];\n\nfunction isMeaningfulWhenBlank (node) {\n  return is(node, meaningfulWhenBlankElements)\n}\n\nfunction hasMeaningfulWhenBlank (node) {\n  return has(node, meaningfulWhenBlankElements)\n}\n\nfunction is (node, tagNames) {\n  return tagNames.indexOf(node.nodeName) >= 0\n}\n\nfunction has (node, tagNames) {\n  return (\n    node.getElementsByTagName &&\n    tagNames.some(function (tagName) {\n      return node.getElementsByTagName(tagName).length\n    })\n  )\n}\n\nvar rules = {};\n\nrules.paragraph = {\n  filter: 'p',\n\n  replacement: function (content) {\n    return '\\n\\n' + content + '\\n\\n'\n  }\n};\n\nrules.lineBreak = {\n  filter: 'br',\n\n  replacement: function (content, node, options) {\n    return options.br + '\\n'\n  }\n};\n\nrules.heading = {\n  filter: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\n\n  replacement: function (content, node, options) {\n    var hLevel = Number(node.nodeName.charAt(1));\n\n    if (options.headingStyle === 'setext' && hLevel < 3) {\n      var underline = repeat((hLevel === 1 ? '=' : '-'), content.length);\n      return (\n        '\\n\\n' + content + '\\n' + underline + '\\n\\n'\n      )\n    } else {\n      return '\\n\\n' + repeat('#', hLevel) + ' ' + content + '\\n\\n'\n    }\n  }\n};\n\nrules.blockquote = {\n  filter: 'blockquote',\n\n  replacement: function (content) {\n    content = content.replace(/^\\n+|\\n+$/g, '');\n    content = content.replace(/^/gm, '> ');\n    return '\\n\\n' + content + '\\n\\n'\n  }\n};\n\nrules.list = {\n  filter: ['ul', 'ol'],\n\n  replacement: function (content, node) {\n    var parent = node.parentNode;\n    if (parent.nodeName === 'LI' && parent.lastElementChild === node) {\n      return '\\n' + content\n    } else {\n      return '\\n\\n' + content + '\\n\\n'\n    }\n  }\n};\n\nrules.listItem = {\n  filter: 'li',\n\n  replacement: function (content, node, options) {\n    content = content\n      .replace(/^\\n+/, '') // remove leading newlines\n      .replace(/\\n+$/, '\\n') // replace trailing newlines with just a single one\n      .replace(/\\n/gm, '\\n    '); // indent\n    var prefix = options.bulletListMarker + '   ';\n    var parent = node.parentNode;\n    if (parent.nodeName === 'OL') {\n      var start = parent.getAttribute('start');\n      var index = Array.prototype.indexOf.call(parent.children, node);\n      prefix = (start ? Number(start) + index : index + 1) + '.  ';\n    }\n    return (\n      prefix + content + (node.nextSibling && !/\\n$/.test(content) ? '\\n' : '')\n    )\n  }\n};\n\nrules.indentedCodeBlock = {\n  filter: function (node, options) {\n    return (\n      options.codeBlockStyle === 'indented' &&\n      node.nodeName === 'PRE' &&\n      node.firstChild &&\n      node.firstChild.nodeName === 'CODE'\n    )\n  },\n\n  replacement: function (content, node, options) {\n    return (\n      '\\n\\n    ' +\n      node.firstChild.textContent.replace(/\\n/g, '\\n    ') +\n      '\\n\\n'\n    )\n  }\n};\n\nrules.fencedCodeBlock = {\n  filter: function (node, options) {\n    return (\n      options.codeBlockStyle === 'fenced' &&\n      node.nodeName === 'PRE' &&\n      node.firstChild &&\n      node.firstChild.nodeName === 'CODE'\n    )\n  },\n\n  replacement: function (content, node, options) {\n    var className = node.firstChild.getAttribute('class') || '';\n    var language = (className.match(/language-(\\S+)/) || [null, ''])[1];\n    var code = node.firstChild.textContent;\n\n    var fenceChar = options.fence.charAt(0);\n    var fenceSize = 3;\n    var fenceInCodeRegex = new RegExp('^' + fenceChar + '{3,}', 'gm');\n\n    var match;\n    while ((match = fenceInCodeRegex.exec(code))) {\n      if (match[0].length >= fenceSize) {\n        fenceSize = match[0].length + 1;\n      }\n    }\n\n    var fence = repeat(fenceChar, fenceSize);\n\n    return (\n      '\\n\\n' + fence + language + '\\n' +\n      code.replace(/\\n$/, '') +\n      '\\n' + fence + '\\n\\n'\n    )\n  }\n};\n\nrules.horizontalRule = {\n  filter: 'hr',\n\n  replacement: function (content, node, options) {\n    return '\\n\\n' + options.hr + '\\n\\n'\n  }\n};\n\nrules.inlineLink = {\n  filter: function (node, options) {\n    return (\n      options.linkStyle === 'inlined' &&\n      node.nodeName === 'A' &&\n      node.getAttribute('href')\n    )\n  },\n\n  replacement: function (content, node) {\n    var href = node.getAttribute('href');\n    if (href) href = href.replace(/([()])/g, '\\\\$1');\n    var title = cleanAttribute(node.getAttribute('title'));\n    if (title) title = ' \"' + title.replace(/\"/g, '\\\\\"') + '\"';\n    return '[' + content + '](' + href + title + ')'\n  }\n};\n\nrules.referenceLink = {\n  filter: function (node, options) {\n    return (\n      options.linkStyle === 'referenced' &&\n      node.nodeName === 'A' &&\n      node.getAttribute('href')\n    )\n  },\n\n  replacement: function (content, node, options) {\n    var href = node.getAttribute('href');\n    var title = cleanAttribute(node.getAttribute('title'));\n    if (title) title = ' \"' + title + '\"';\n    var replacement;\n    var reference;\n\n    switch (options.linkReferenceStyle) {\n      case 'collapsed':\n        replacement = '[' + content + '][]';\n        reference = '[' + content + ']: ' + href + title;\n        break\n      case 'shortcut':\n        replacement = '[' + content + ']';\n        reference = '[' + content + ']: ' + href + title;\n        break\n      default:\n        var id = this.references.length + 1;\n        replacement = '[' + content + '][' + id + ']';\n        reference = '[' + id + ']: ' + href + title;\n    }\n\n    this.references.push(reference);\n    return replacement\n  },\n\n  references: [],\n\n  append: function (options) {\n    var references = '';\n    if (this.references.length) {\n      references = '\\n\\n' + this.references.join('\\n') + '\\n\\n';\n      this.references = []; // Reset references\n    }\n    return references\n  }\n};\n\nrules.emphasis = {\n  filter: ['em', 'i'],\n\n  replacement: function (content, node, options) {\n    if (!content.trim()) return ''\n    return options.emDelimiter + content + options.emDelimiter\n  }\n};\n\nrules.strong = {\n  filter: ['strong', 'b'],\n\n  replacement: function (content, node, options) {\n    if (!content.trim()) return ''\n    return options.strongDelimiter + content + options.strongDelimiter\n  }\n};\n\nrules.code = {\n  filter: function (node) {\n    var hasSiblings = node.previousSibling || node.nextSibling;\n    var isCodeBlock = node.parentNode.nodeName === 'PRE' && !hasSiblings;\n\n    return node.nodeName === 'CODE' && !isCodeBlock\n  },\n\n  replacement: function (content) {\n    if (!content) return ''\n    content = content.replace(/\\r?\\n|\\r/g, ' ');\n\n    var extraSpace = /^`|^ .*?[^ ].* $|`$/.test(content) ? ' ' : '';\n    var delimiter = '`';\n    var matches = content.match(/`+/gm) || [];\n    while (matches.indexOf(delimiter) !== -1) delimiter = delimiter + '`';\n\n    return delimiter + extraSpace + content + extraSpace + delimiter\n  }\n};\n\nrules.image = {\n  filter: 'img',\n\n  replacement: function (content, node) {\n    var alt = cleanAttribute(node.getAttribute('alt'));\n    var src = node.getAttribute('src') || '';\n    var title = cleanAttribute(node.getAttribute('title'));\n    var titlePart = title ? ' \"' + title + '\"' : '';\n    return src ? '![' + alt + ']' + '(' + src + titlePart + ')' : ''\n  }\n};\n\nfunction cleanAttribute (attribute) {\n  return attribute ? attribute.replace(/(\\n+\\s*)+/g, '\\n') : ''\n}\n\n/**\n * Manages a collection of rules used to convert HTML to Markdown\n */\n\nfunction Rules (options) {\n  this.options = options;\n  this._keep = [];\n  this._remove = [];\n\n  this.blankRule = {\n    replacement: options.blankReplacement\n  };\n\n  this.keepReplacement = options.keepReplacement;\n\n  this.defaultRule = {\n    replacement: options.defaultReplacement\n  };\n\n  this.array = [];\n  for (var key in options.rules) this.array.push(options.rules[key]);\n}\n\nRules.prototype = {\n  add: function (key, rule) {\n    this.array.unshift(rule);\n  },\n\n  keep: function (filter) {\n    this._keep.unshift({\n      filter: filter,\n      replacement: this.keepReplacement\n    });\n  },\n\n  remove: function (filter) {\n    this._remove.unshift({\n      filter: filter,\n      replacement: function () {\n        return ''\n      }\n    });\n  },\n\n  forNode: function (node) {\n    if (node.isBlank) return this.blankRule\n    var rule;\n\n    if ((rule = findRule(this.array, node, this.options))) return rule\n    if ((rule = findRule(this._keep, node, this.options))) return rule\n    if ((rule = findRule(this._remove, node, this.options))) return rule\n\n    return this.defaultRule\n  },\n\n  forEach: function (fn) {\n    for (var i = 0; i < this.array.length; i++) fn(this.array[i], i);\n  }\n};\n\nfunction findRule (rules, node, options) {\n  for (var i = 0; i < rules.length; i++) {\n    var rule = rules[i];\n    if (filterValue(rule, node, options)) return rule\n  }\n  return void 0\n}\n\nfunction filterValue (rule, node, options) {\n  var filter = rule.filter;\n  if (typeof filter === 'string') {\n    if (filter === node.nodeName.toLowerCase()) return true\n  } else if (Array.isArray(filter)) {\n    if (filter.indexOf(node.nodeName.toLowerCase()) > -1) return true\n  } else if (typeof filter === 'function') {\n    if (filter.call(rule, node, options)) return true\n  } else {\n    throw new TypeError('`filter` needs to be a string, array, or function')\n  }\n}\n\n/**\n * The collapseWhitespace function is adapted from collapse-whitespace\n * by Luc Thevenard.\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2014 Luc Thevenard <lucthevenard@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * collapseWhitespace(options) removes extraneous whitespace from an the given element.\n *\n * @param {Object} options\n */\nfunction collapseWhitespace (options) {\n  var element = options.element;\n  var isBlock = options.isBlock;\n  var isVoid = options.isVoid;\n  var isPre = options.isPre || function (node) {\n    return node.nodeName === 'PRE'\n  };\n\n  if (!element.firstChild || isPre(element)) return\n\n  var prevText = null;\n  var keepLeadingWs = false;\n\n  var prev = null;\n  var node = next(prev, element, isPre);\n\n  while (node !== element) {\n    if (node.nodeType === 3 || node.nodeType === 4) { // Node.TEXT_NODE or Node.CDATA_SECTION_NODE\n      var text = node.data.replace(/[ \\r\\n\\t]+/g, ' ');\n\n      if ((!prevText || / $/.test(prevText.data)) &&\n          !keepLeadingWs && text[0] === ' ') {\n        text = text.substr(1);\n      }\n\n      // `text` might be empty at this point.\n      if (!text) {\n        node = remove(node);\n        continue\n      }\n\n      node.data = text;\n\n      prevText = node;\n    } else if (node.nodeType === 1) { // Node.ELEMENT_NODE\n      if (isBlock(node) || node.nodeName === 'BR') {\n        if (prevText) {\n          prevText.data = prevText.data.replace(/ $/, '');\n        }\n\n        prevText = null;\n        keepLeadingWs = false;\n      } else if (isVoid(node) || isPre(node)) {\n        // Avoid trimming space around non-block, non-BR void elements and inline PRE.\n        prevText = null;\n        keepLeadingWs = true;\n      } else if (prevText) {\n        // Drop protection if set previously.\n        keepLeadingWs = false;\n      }\n    } else {\n      node = remove(node);\n      continue\n    }\n\n    var nextNode = next(prev, node, isPre);\n    prev = node;\n    node = nextNode;\n  }\n\n  if (prevText) {\n    prevText.data = prevText.data.replace(/ $/, '');\n    if (!prevText.data) {\n      remove(prevText);\n    }\n  }\n}\n\n/**\n * remove(node) removes the given node from the DOM and returns the\n * next node in the sequence.\n *\n * @param {Node} node\n * @return {Node} node\n */\nfunction remove (node) {\n  var next = node.nextSibling || node.parentNode;\n\n  node.parentNode.removeChild(node);\n\n  return next\n}\n\n/**\n * next(prev, current, isPre) returns the next node in the sequence, given the\n * current and previous nodes.\n *\n * @param {Node} prev\n * @param {Node} current\n * @param {Function} isPre\n * @return {Node}\n */\nfunction next (prev, current, isPre) {\n  if ((prev && prev.parentNode === current) || isPre(current)) {\n    return current.nextSibling || current.parentNode\n  }\n\n  return current.firstChild || current.nextSibling || current.parentNode\n}\n\n/*\n * Set up window for Node.js\n */\n\nvar root = (typeof window !== 'undefined' ? window : {});\n\n/*\n * Parsing HTML strings\n */\n\nfunction canParseHTMLNatively () {\n  var Parser = root.DOMParser;\n  var canParse = false;\n\n  // Adapted from https://gist.github.com/1129031\n  // Firefox/Opera/IE throw errors on unsupported types\n  try {\n    // WebKit returns null on unsupported types\n    if (new Parser().parseFromString('', 'text/html')) {\n      canParse = true;\n    }\n  } catch (e) {}\n\n  return canParse\n}\n\nfunction createHTMLParser () {\n  var Parser = function () {};\n\n  {\n    var domino = require('@mixmark-io/domino');\n    Parser.prototype.parseFromString = function (string) {\n      return domino.createDocument(string)\n    };\n  }\n  return Parser\n}\n\nvar HTMLParser = canParseHTMLNatively() ? root.DOMParser : createHTMLParser();\n\nfunction RootNode (input, options) {\n  var root;\n  if (typeof input === 'string') {\n    var doc = htmlParser().parseFromString(\n      // DOM parsers arrange elements in the <head> and <body>.\n      // Wrapping in a custom element ensures elements are reliably arranged in\n      // a single element.\n      '<x-turndown id=\"turndown-root\">' + input + '</x-turndown>',\n      'text/html'\n    );\n    root = doc.getElementById('turndown-root');\n  } else {\n    root = input.cloneNode(true);\n  }\n  collapseWhitespace({\n    element: root,\n    isBlock: isBlock,\n    isVoid: isVoid,\n    isPre: options.preformattedCode ? isPreOrCode : null\n  });\n\n  return root\n}\n\nvar _htmlParser;\nfunction htmlParser () {\n  _htmlParser = _htmlParser || new HTMLParser();\n  return _htmlParser\n}\n\nfunction isPreOrCode (node) {\n  return node.nodeName === 'PRE' || node.nodeName === 'CODE'\n}\n\nfunction Node (node, options) {\n  node.isBlock = isBlock(node);\n  node.isCode = node.nodeName === 'CODE' || node.parentNode.isCode;\n  node.isBlank = isBlank(node);\n  node.flankingWhitespace = flankingWhitespace(node, options);\n  return node\n}\n\nfunction isBlank (node) {\n  return (\n    !isVoid(node) &&\n    !isMeaningfulWhenBlank(node) &&\n    /^\\s*$/i.test(node.textContent) &&\n    !hasVoid(node) &&\n    !hasMeaningfulWhenBlank(node)\n  )\n}\n\nfunction flankingWhitespace (node, options) {\n  if (node.isBlock || (options.preformattedCode && node.isCode)) {\n    return { leading: '', trailing: '' }\n  }\n\n  var edges = edgeWhitespace(node.textContent);\n\n  // abandon leading ASCII WS if left-flanked by ASCII WS\n  if (edges.leadingAscii && isFlankedByWhitespace('left', node, options)) {\n    edges.leading = edges.leadingNonAscii;\n  }\n\n  // abandon trailing ASCII WS if right-flanked by ASCII WS\n  if (edges.trailingAscii && isFlankedByWhitespace('right', node, options)) {\n    edges.trailing = edges.trailingNonAscii;\n  }\n\n  return { leading: edges.leading, trailing: edges.trailing }\n}\n\nfunction edgeWhitespace (string) {\n  var m = string.match(/^(([ \\t\\r\\n]*)(\\s*))(?:(?=\\S)[\\s\\S]*\\S)?((\\s*?)([ \\t\\r\\n]*))$/);\n  return {\n    leading: m[1], // whole string for whitespace-only strings\n    leadingAscii: m[2],\n    leadingNonAscii: m[3],\n    trailing: m[4], // empty for whitespace-only strings\n    trailingNonAscii: m[5],\n    trailingAscii: m[6]\n  }\n}\n\nfunction isFlankedByWhitespace (side, node, options) {\n  var sibling;\n  var regExp;\n  var isFlanked;\n\n  if (side === 'left') {\n    sibling = node.previousSibling;\n    regExp = / $/;\n  } else {\n    sibling = node.nextSibling;\n    regExp = /^ /;\n  }\n\n  if (sibling) {\n    if (sibling.nodeType === 3) {\n      isFlanked = regExp.test(sibling.nodeValue);\n    } else if (options.preformattedCode && sibling.nodeName === 'CODE') {\n      isFlanked = false;\n    } else if (sibling.nodeType === 1 && !isBlock(sibling)) {\n      isFlanked = regExp.test(sibling.textContent);\n    }\n  }\n  return isFlanked\n}\n\nvar reduce = Array.prototype.reduce;\nvar escapes = [\n  [/\\\\/g, '\\\\\\\\'],\n  [/\\*/g, '\\\\*'],\n  [/^-/g, '\\\\-'],\n  [/^\\+ /g, '\\\\+ '],\n  [/^(=+)/g, '\\\\$1'],\n  [/^(#{1,6}) /g, '\\\\$1 '],\n  [/`/g, '\\\\`'],\n  [/^~~~/g, '\\\\~~~'],\n  [/\\[/g, '\\\\['],\n  [/\\]/g, '\\\\]'],\n  [/^>/g, '\\\\>'],\n  [/_/g, '\\\\_'],\n  [/^(\\d+)\\. /g, '$1\\\\. ']\n];\n\nfunction TurndownService (options) {\n  if (!(this instanceof TurndownService)) return new TurndownService(options)\n\n  var defaults = {\n    rules: rules,\n    headingStyle: 'setext',\n    hr: '* * *',\n    bulletListMarker: '*',\n    codeBlockStyle: 'indented',\n    fence: '```',\n    emDelimiter: '_',\n    strongDelimiter: '**',\n    linkStyle: 'inlined',\n    linkReferenceStyle: 'full',\n    br: '  ',\n    preformattedCode: false,\n    blankReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' : ''\n    },\n    keepReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' + node.outerHTML + '\\n\\n' : node.outerHTML\n    },\n    defaultReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' + content + '\\n\\n' : content\n    }\n  };\n  this.options = extend({}, defaults, options);\n  this.rules = new Rules(this.options);\n}\n\nTurndownService.prototype = {\n  /**\n   * The entry point for converting a string or DOM node to Markdown\n   * @public\n   * @param {String|HTMLElement} input The string or DOM node to convert\n   * @returns A Markdown representation of the input\n   * @type String\n   */\n\n  turndown: function (input) {\n    if (!canConvert(input)) {\n      throw new TypeError(\n        input + ' is not a string, or an element/document/fragment node.'\n      )\n    }\n\n    if (input === '') return ''\n\n    var output = process.call(this, new RootNode(input, this.options));\n    return postProcess.call(this, output)\n  },\n\n  /**\n   * Add one or more plugins\n   * @public\n   * @param {Function|Array} plugin The plugin or array of plugins to add\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  use: function (plugin) {\n    if (Array.isArray(plugin)) {\n      for (var i = 0; i < plugin.length; i++) this.use(plugin[i]);\n    } else if (typeof plugin === 'function') {\n      plugin(this);\n    } else {\n      throw new TypeError('plugin must be a Function or an Array of Functions')\n    }\n    return this\n  },\n\n  /**\n   * Adds a rule\n   * @public\n   * @param {String} key The unique key of the rule\n   * @param {Object} rule The rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  addRule: function (key, rule) {\n    this.rules.add(key, rule);\n    return this\n  },\n\n  /**\n   * Keep a node (as HTML) that matches the filter\n   * @public\n   * @param {String|Array|Function} filter The unique key of the rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  keep: function (filter) {\n    this.rules.keep(filter);\n    return this\n  },\n\n  /**\n   * Remove a node that matches the filter\n   * @public\n   * @param {String|Array|Function} filter The unique key of the rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  remove: function (filter) {\n    this.rules.remove(filter);\n    return this\n  },\n\n  /**\n   * Escapes Markdown syntax\n   * @public\n   * @param {String} string The string to escape\n   * @returns A string with Markdown syntax escaped\n   * @type String\n   */\n\n  escape: function (string) {\n    return escapes.reduce(function (accumulator, escape) {\n      return accumulator.replace(escape[0], escape[1])\n    }, string)\n  }\n};\n\n/**\n * Reduces a DOM node down to its Markdown string equivalent\n * @private\n * @param {HTMLElement} parentNode The node to convert\n * @returns A Markdown representation of the node\n * @type String\n */\n\nfunction process (parentNode) {\n  var self = this;\n  return reduce.call(parentNode.childNodes, function (output, node) {\n    node = new Node(node, self.options);\n\n    var replacement = '';\n    if (node.nodeType === 3) {\n      replacement = node.isCode ? node.nodeValue : self.escape(node.nodeValue);\n    } else if (node.nodeType === 1) {\n      replacement = replacementForNode.call(self, node);\n    }\n\n    return join(output, replacement)\n  }, '')\n}\n\n/**\n * Appends strings as each rule requires and trims the output\n * @private\n * @param {String} output The conversion output\n * @returns A trimmed version of the ouput\n * @type String\n */\n\nfunction postProcess (output) {\n  var self = this;\n  this.rules.forEach(function (rule) {\n    if (typeof rule.append === 'function') {\n      output = join(output, rule.append(self.options));\n    }\n  });\n\n  return output.replace(/^[\\t\\r\\n]+/, '').replace(/[\\t\\r\\n\\s]+$/, '')\n}\n\n/**\n * Converts an element node to its Markdown equivalent\n * @private\n * @param {HTMLElement} node The node to convert\n * @returns A Markdown representation of the node\n * @type String\n */\n\nfunction replacementForNode (node) {\n  var rule = this.rules.forNode(node);\n  var content = process.call(this, node);\n  var whitespace = node.flankingWhitespace;\n  if (whitespace.leading || whitespace.trailing) content = content.trim();\n  return (\n    whitespace.leading +\n    rule.replacement(content, node, this.options) +\n    whitespace.trailing\n  )\n}\n\n/**\n * Joins replacement to the current output with appropriate number of new lines\n * @private\n * @param {String} output The current conversion output\n * @param {String} replacement The string to append to the output\n * @returns Joined output\n * @type String\n */\n\nfunction join (output, replacement) {\n  var s1 = trimTrailingNewlines(output);\n  var s2 = trimLeadingNewlines(replacement);\n  var nls = Math.max(output.length - s1.length, replacement.length - s2.length);\n  var separator = '\\n\\n'.substring(0, nls);\n\n  return s1 + separator + s2\n}\n\n/**\n * Determines whether an input can be converted\n * @private\n * @param {String|HTMLElement} input Describe this parameter\n * @returns Describe what it returns\n * @type String|Object|Array|Boolean|Number\n */\n\nfunction canConvert (input) {\n  return (\n    input != null && (\n      typeof input === 'string' ||\n      (input.nodeType && (\n        input.nodeType === 1 || input.nodeType === 9 || input.nodeType === 11\n      ))\n    )\n  )\n}\n\nexport default TurndownService;\n","\"use strict\";\n\nvar conversions = {};\nmodule.exports = conversions;\n\nfunction sign(x) {\n    return x < 0 ? -1 : 1;\n}\n\nfunction evenRound(x) {\n    // Round x to the nearest integer, choosing the even integer if it lies halfway between two.\n    if ((x % 1) === 0.5 && (x & 1) === 0) { // [even number].5; round down (i.e. floor)\n        return Math.floor(x);\n    } else {\n        return Math.round(x);\n    }\n}\n\nfunction createNumberConversion(bitLength, typeOpts) {\n    if (!typeOpts.unsigned) {\n        --bitLength;\n    }\n    const lowerBound = typeOpts.unsigned ? 0 : -Math.pow(2, bitLength);\n    const upperBound = Math.pow(2, bitLength) - 1;\n\n    const moduloVal = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength) : Math.pow(2, bitLength);\n    const moduloBound = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength - 1) : Math.pow(2, bitLength - 1);\n\n    return function(V, opts) {\n        if (!opts) opts = {};\n\n        let x = +V;\n\n        if (opts.enforceRange) {\n            if (!Number.isFinite(x)) {\n                throw new TypeError(\"Argument is not a finite number\");\n            }\n\n            x = sign(x) * Math.floor(Math.abs(x));\n            if (x < lowerBound || x > upperBound) {\n                throw new TypeError(\"Argument is not in byte range\");\n            }\n\n            return x;\n        }\n\n        if (!isNaN(x) && opts.clamp) {\n            x = evenRound(x);\n\n            if (x < lowerBound) x = lowerBound;\n            if (x > upperBound) x = upperBound;\n            return x;\n        }\n\n        if (!Number.isFinite(x) || x === 0) {\n            return 0;\n        }\n\n        x = sign(x) * Math.floor(Math.abs(x));\n        x = x % moduloVal;\n\n        if (!typeOpts.unsigned && x >= moduloBound) {\n            return x - moduloVal;\n        } else if (typeOpts.unsigned) {\n            if (x < 0) {\n              x += moduloVal;\n            } else if (x === -0) { // don't return negative zero\n              return 0;\n            }\n        }\n\n        return x;\n    }\n}\n\nconversions[\"void\"] = function () {\n    return undefined;\n};\n\nconversions[\"boolean\"] = function (val) {\n    return !!val;\n};\n\nconversions[\"byte\"] = createNumberConversion(8, { unsigned: false });\nconversions[\"octet\"] = createNumberConversion(8, { unsigned: true });\n\nconversions[\"short\"] = createNumberConversion(16, { unsigned: false });\nconversions[\"unsigned short\"] = createNumberConversion(16, { unsigned: true });\n\nconversions[\"long\"] = createNumberConversion(32, { unsigned: false });\nconversions[\"unsigned long\"] = createNumberConversion(32, { unsigned: true });\n\nconversions[\"long long\"] = createNumberConversion(32, { unsigned: false, moduloBitLength: 64 });\nconversions[\"unsigned long long\"] = createNumberConversion(32, { unsigned: true, moduloBitLength: 64 });\n\nconversions[\"double\"] = function (V) {\n    const x = +V;\n\n    if (!Number.isFinite(x)) {\n        throw new TypeError(\"Argument is not a finite floating-point value\");\n    }\n\n    return x;\n};\n\nconversions[\"unrestricted double\"] = function (V) {\n    const x = +V;\n\n    if (isNaN(x)) {\n        throw new TypeError(\"Argument is NaN\");\n    }\n\n    return x;\n};\n\n// not quite valid, but good enough for JS\nconversions[\"float\"] = conversions[\"double\"];\nconversions[\"unrestricted float\"] = conversions[\"unrestricted double\"];\n\nconversions[\"DOMString\"] = function (V, opts) {\n    if (!opts) opts = {};\n\n    if (opts.treatNullAsEmptyString && V === null) {\n        return \"\";\n    }\n\n    return String(V);\n};\n\nconversions[\"ByteString\"] = function (V, opts) {\n    const x = String(V);\n    let c = undefined;\n    for (let i = 0; (c = x.codePointAt(i)) !== undefined; ++i) {\n        if (c > 255) {\n            throw new TypeError(\"Argument is not a valid bytestring\");\n        }\n    }\n\n    return x;\n};\n\nconversions[\"USVString\"] = function (V) {\n    const S = String(V);\n    const n = S.length;\n    const U = [];\n    for (let i = 0; i < n; ++i) {\n        const c = S.charCodeAt(i);\n        if (c < 0xD800 || c > 0xDFFF) {\n            U.push(String.fromCodePoint(c));\n        } else if (0xDC00 <= c && c <= 0xDFFF) {\n            U.push(String.fromCodePoint(0xFFFD));\n        } else {\n            if (i === n - 1) {\n                U.push(String.fromCodePoint(0xFFFD));\n            } else {\n                const d = S.charCodeAt(i + 1);\n                if (0xDC00 <= d && d <= 0xDFFF) {\n                    const a = c & 0x3FF;\n                    const b = d & 0x3FF;\n                    U.push(String.fromCodePoint((2 << 15) + (2 << 9) * a + b));\n                    ++i;\n                } else {\n                    U.push(String.fromCodePoint(0xFFFD));\n                }\n            }\n        }\n    }\n\n    return U.join('');\n};\n\nconversions[\"Date\"] = function (V, opts) {\n    if (!(V instanceof Date)) {\n        throw new TypeError(\"Argument is not a Date object\");\n    }\n    if (isNaN(V)) {\n        return undefined;\n    }\n\n    return V;\n};\n\nconversions[\"RegExp\"] = function (V, opts) {\n    if (!(V instanceof RegExp)) {\n        V = new RegExp(V);\n    }\n\n    return V;\n};\n","\"use strict\";\nconst usm = require(\"./url-state-machine\");\n\nexports.implementation = class URLImpl {\n  constructor(constructorArgs) {\n    const url = constructorArgs[0];\n    const base = constructorArgs[1];\n\n    let parsedBase = null;\n    if (base !== undefined) {\n      parsedBase = usm.basicURLParse(base);\n      if (parsedBase === \"failure\") {\n        throw new TypeError(\"Invalid base URL\");\n      }\n    }\n\n    const parsedURL = usm.basicURLParse(url, { baseURL: parsedBase });\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n\n    // TODO: query stuff\n  }\n\n  get href() {\n    return usm.serializeURL(this._url);\n  }\n\n  set href(v) {\n    const parsedURL = usm.basicURLParse(v);\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n  }\n\n  get origin() {\n    return usm.serializeURLOrigin(this._url);\n  }\n\n  get protocol() {\n    return this._url.scheme + \":\";\n  }\n\n  set protocol(v) {\n    usm.basicURLParse(v + \":\", { url: this._url, stateOverride: \"scheme start\" });\n  }\n\n  get username() {\n    return this._url.username;\n  }\n\n  set username(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setTheUsername(this._url, v);\n  }\n\n  get password() {\n    return this._url.password;\n  }\n\n  set password(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setThePassword(this._url, v);\n  }\n\n  get host() {\n    const url = this._url;\n\n    if (url.host === null) {\n      return \"\";\n    }\n\n    if (url.port === null) {\n      return usm.serializeHost(url.host);\n    }\n\n    return usm.serializeHost(url.host) + \":\" + usm.serializeInteger(url.port);\n  }\n\n  set host(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"host\" });\n  }\n\n  get hostname() {\n    if (this._url.host === null) {\n      return \"\";\n    }\n\n    return usm.serializeHost(this._url.host);\n  }\n\n  set hostname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"hostname\" });\n  }\n\n  get port() {\n    if (this._url.port === null) {\n      return \"\";\n    }\n\n    return usm.serializeInteger(this._url.port);\n  }\n\n  set port(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    if (v === \"\") {\n      this._url.port = null;\n    } else {\n      usm.basicURLParse(v, { url: this._url, stateOverride: \"port\" });\n    }\n  }\n\n  get pathname() {\n    if (this._url.cannotBeABaseURL) {\n      return this._url.path[0];\n    }\n\n    if (this._url.path.length === 0) {\n      return \"\";\n    }\n\n    return \"/\" + this._url.path.join(\"/\");\n  }\n\n  set pathname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    this._url.path = [];\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"path start\" });\n  }\n\n  get search() {\n    if (this._url.query === null || this._url.query === \"\") {\n      return \"\";\n    }\n\n    return \"?\" + this._url.query;\n  }\n\n  set search(v) {\n    // TODO: query stuff\n\n    const url = this._url;\n\n    if (v === \"\") {\n      url.query = null;\n      return;\n    }\n\n    const input = v[0] === \"?\" ? v.substring(1) : v;\n    url.query = \"\";\n    usm.basicURLParse(input, { url, stateOverride: \"query\" });\n  }\n\n  get hash() {\n    if (this._url.fragment === null || this._url.fragment === \"\") {\n      return \"\";\n    }\n\n    return \"#\" + this._url.fragment;\n  }\n\n  set hash(v) {\n    if (v === \"\") {\n      this._url.fragment = null;\n      return;\n    }\n\n    const input = v[0] === \"#\" ? v.substring(1) : v;\n    this._url.fragment = \"\";\n    usm.basicURLParse(input, { url: this._url, stateOverride: \"fragment\" });\n  }\n\n  toJSON() {\n    return this.href;\n  }\n};\n","\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst utils = require(\"./utils.js\");\nconst Impl = require(\".//URL-impl.js\");\n\nconst impl = utils.implSymbol;\n\nfunction URL(url) {\n  if (!this || this[impl] || !(this instanceof URL)) {\n    throw new TypeError(\"Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.\");\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'URL': 1 argument required, but only \" + arguments.length + \" present.\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 2; ++i) {\n    args[i] = arguments[i];\n  }\n  args[0] = conversions[\"USVString\"](args[0]);\n  if (args[1] !== undefined) {\n  args[1] = conversions[\"USVString\"](args[1]);\n  }\n\n  module.exports.setup(this, args);\n}\n\nURL.prototype.toJSON = function toJSON() {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 0; ++i) {\n    args[i] = arguments[i];\n  }\n  return this[impl].toJSON.apply(this[impl], args);\n};\nObject.defineProperty(URL.prototype, \"href\", {\n  get() {\n    return this[impl].href;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].href = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nURL.prototype.toString = function () {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  return this.href;\n};\n\nObject.defineProperty(URL.prototype, \"origin\", {\n  get() {\n    return this[impl].origin;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"protocol\", {\n  get() {\n    return this[impl].protocol;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].protocol = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"username\", {\n  get() {\n    return this[impl].username;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].username = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"password\", {\n  get() {\n    return this[impl].password;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].password = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"host\", {\n  get() {\n    return this[impl].host;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].host = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hostname\", {\n  get() {\n    return this[impl].hostname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hostname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"port\", {\n  get() {\n    return this[impl].port;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].port = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"pathname\", {\n  get() {\n    return this[impl].pathname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].pathname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"search\", {\n  get() {\n    return this[impl].search;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].search = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hash\", {\n  get() {\n    return this[impl].hash;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hash = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\n\nmodule.exports = {\n  is(obj) {\n    return !!obj && obj[impl] instanceof Impl.implementation;\n  },\n  create(constructorArgs, privateData) {\n    let obj = Object.create(URL.prototype);\n    this.setup(obj, constructorArgs, privateData);\n    return obj;\n  },\n  setup(obj, constructorArgs, privateData) {\n    if (!privateData) privateData = {};\n    privateData.wrapper = obj;\n\n    obj[impl] = new Impl.implementation(constructorArgs, privateData);\n    obj[impl][utils.wrapperSymbol] = obj;\n  },\n  interface: URL,\n  expose: {\n    Window: { URL: URL },\n    Worker: { URL: URL }\n  }\n};\n\n","\"use strict\";\n\nexports.URL = require(\"./URL\").interface;\nexports.serializeURL = require(\"./url-state-machine\").serializeURL;\nexports.serializeURLOrigin = require(\"./url-state-machine\").serializeURLOrigin;\nexports.basicURLParse = require(\"./url-state-machine\").basicURLParse;\nexports.setTheUsername = require(\"./url-state-machine\").setTheUsername;\nexports.setThePassword = require(\"./url-state-machine\").setThePassword;\nexports.serializeHost = require(\"./url-state-machine\").serializeHost;\nexports.serializeInteger = require(\"./url-state-machine\").serializeInteger;\nexports.parseURL = require(\"./url-state-machine\").parseURL;\n","\"use strict\";\r\nconst punycode = require(\"punycode\");\r\nconst tr46 = require(\"tr46\");\r\n\r\nconst specialSchemes = {\r\n  ftp: 21,\r\n  file: null,\r\n  gopher: 70,\r\n  http: 80,\r\n  https: 443,\r\n  ws: 80,\r\n  wss: 443\r\n};\r\n\r\nconst failure = Symbol(\"failure\");\r\n\r\nfunction countSymbols(str) {\r\n  return punycode.ucs2.decode(str).length;\r\n}\r\n\r\nfunction at(input, idx) {\r\n  const c = input[idx];\r\n  return isNaN(c) ? undefined : String.fromCodePoint(c);\r\n}\r\n\r\nfunction isASCIIDigit(c) {\r\n  return c >= 0x30 && c <= 0x39;\r\n}\r\n\r\nfunction isASCIIAlpha(c) {\r\n  return (c >= 0x41 && c <= 0x5A) || (c >= 0x61 && c <= 0x7A);\r\n}\r\n\r\nfunction isASCIIAlphanumeric(c) {\r\n  return isASCIIAlpha(c) || isASCIIDigit(c);\r\n}\r\n\r\nfunction isASCIIHex(c) {\r\n  return isASCIIDigit(c) || (c >= 0x41 && c <= 0x46) || (c >= 0x61 && c <= 0x66);\r\n}\r\n\r\nfunction isSingleDot(buffer) {\r\n  return buffer === \".\" || buffer.toLowerCase() === \"%2e\";\r\n}\r\n\r\nfunction isDoubleDot(buffer) {\r\n  buffer = buffer.toLowerCase();\r\n  return buffer === \"..\" || buffer === \"%2e.\" || buffer === \".%2e\" || buffer === \"%2e%2e\";\r\n}\r\n\r\nfunction isWindowsDriveLetterCodePoints(cp1, cp2) {\r\n  return isASCIIAlpha(cp1) && (cp2 === 58 || cp2 === 124);\r\n}\r\n\r\nfunction isWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && (string[1] === \":\" || string[1] === \"|\");\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && string[1] === \":\";\r\n}\r\n\r\nfunction containsForbiddenHostCodePoint(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|%|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction containsForbiddenHostCodePointExcludingPercent(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction isSpecialScheme(scheme) {\r\n  return specialSchemes[scheme] !== undefined;\r\n}\r\n\r\nfunction isSpecial(url) {\r\n  return isSpecialScheme(url.scheme);\r\n}\r\n\r\nfunction defaultPort(scheme) {\r\n  return specialSchemes[scheme];\r\n}\r\n\r\nfunction percentEncode(c) {\r\n  let hex = c.toString(16).toUpperCase();\r\n  if (hex.length === 1) {\r\n    hex = \"0\" + hex;\r\n  }\r\n\r\n  return \"%\" + hex;\r\n}\r\n\r\nfunction utf8PercentEncode(c) {\r\n  const buf = new Buffer(c);\r\n\r\n  let str = \"\";\r\n\r\n  for (let i = 0; i < buf.length; ++i) {\r\n    str += percentEncode(buf[i]);\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\nfunction utf8PercentDecode(str) {\r\n  const input = new Buffer(str);\r\n  const output = [];\r\n  for (let i = 0; i < input.length; ++i) {\r\n    if (input[i] !== 37) {\r\n      output.push(input[i]);\r\n    } else if (input[i] === 37 && isASCIIHex(input[i + 1]) && isASCIIHex(input[i + 2])) {\r\n      output.push(parseInt(input.slice(i + 1, i + 3).toString(), 16));\r\n      i += 2;\r\n    } else {\r\n      output.push(input[i]);\r\n    }\r\n  }\r\n  return new Buffer(output).toString();\r\n}\r\n\r\nfunction isC0ControlPercentEncode(c) {\r\n  return c <= 0x1F || c > 0x7E;\r\n}\r\n\r\nconst extraPathPercentEncodeSet = new Set([32, 34, 35, 60, 62, 63, 96, 123, 125]);\r\nfunction isPathPercentEncode(c) {\r\n  return isC0ControlPercentEncode(c) || extraPathPercentEncodeSet.has(c);\r\n}\r\n\r\nconst extraUserinfoPercentEncodeSet =\r\n  new Set([47, 58, 59, 61, 64, 91, 92, 93, 94, 124]);\r\nfunction isUserinfoPercentEncode(c) {\r\n  return isPathPercentEncode(c) || extraUserinfoPercentEncodeSet.has(c);\r\n}\r\n\r\nfunction percentEncodeChar(c, encodeSetPredicate) {\r\n  const cStr = String.fromCodePoint(c);\r\n\r\n  if (encodeSetPredicate(c)) {\r\n    return utf8PercentEncode(cStr);\r\n  }\r\n\r\n  return cStr;\r\n}\r\n\r\nfunction parseIPv4Number(input) {\r\n  let R = 10;\r\n\r\n  if (input.length >= 2 && input.charAt(0) === \"0\" && input.charAt(1).toLowerCase() === \"x\") {\r\n    input = input.substring(2);\r\n    R = 16;\r\n  } else if (input.length >= 2 && input.charAt(0) === \"0\") {\r\n    input = input.substring(1);\r\n    R = 8;\r\n  }\r\n\r\n  if (input === \"\") {\r\n    return 0;\r\n  }\r\n\r\n  const regex = R === 10 ? /[^0-9]/ : (R === 16 ? /[^0-9A-Fa-f]/ : /[^0-7]/);\r\n  if (regex.test(input)) {\r\n    return failure;\r\n  }\r\n\r\n  return parseInt(input, R);\r\n}\r\n\r\nfunction parseIPv4(input) {\r\n  const parts = input.split(\".\");\r\n  if (parts[parts.length - 1] === \"\") {\r\n    if (parts.length > 1) {\r\n      parts.pop();\r\n    }\r\n  }\r\n\r\n  if (parts.length > 4) {\r\n    return input;\r\n  }\r\n\r\n  const numbers = [];\r\n  for (const part of parts) {\r\n    if (part === \"\") {\r\n      return input;\r\n    }\r\n    const n = parseIPv4Number(part);\r\n    if (n === failure) {\r\n      return input;\r\n    }\r\n\r\n    numbers.push(n);\r\n  }\r\n\r\n  for (let i = 0; i < numbers.length - 1; ++i) {\r\n    if (numbers[i] > 255) {\r\n      return failure;\r\n    }\r\n  }\r\n  if (numbers[numbers.length - 1] >= Math.pow(256, 5 - numbers.length)) {\r\n    return failure;\r\n  }\r\n\r\n  let ipv4 = numbers.pop();\r\n  let counter = 0;\r\n\r\n  for (const n of numbers) {\r\n    ipv4 += n * Math.pow(256, 3 - counter);\r\n    ++counter;\r\n  }\r\n\r\n  return ipv4;\r\n}\r\n\r\nfunction serializeIPv4(address) {\r\n  let output = \"\";\r\n  let n = address;\r\n\r\n  for (let i = 1; i <= 4; ++i) {\r\n    output = String(n % 256) + output;\r\n    if (i !== 4) {\r\n      output = \".\" + output;\r\n    }\r\n    n = Math.floor(n / 256);\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseIPv6(input) {\r\n  const address = [0, 0, 0, 0, 0, 0, 0, 0];\r\n  let pieceIndex = 0;\r\n  let compress = null;\r\n  let pointer = 0;\r\n\r\n  input = punycode.ucs2.decode(input);\r\n\r\n  if (input[pointer] === 58) {\r\n    if (input[pointer + 1] !== 58) {\r\n      return failure;\r\n    }\r\n\r\n    pointer += 2;\r\n    ++pieceIndex;\r\n    compress = pieceIndex;\r\n  }\r\n\r\n  while (pointer < input.length) {\r\n    if (pieceIndex === 8) {\r\n      return failure;\r\n    }\r\n\r\n    if (input[pointer] === 58) {\r\n      if (compress !== null) {\r\n        return failure;\r\n      }\r\n      ++pointer;\r\n      ++pieceIndex;\r\n      compress = pieceIndex;\r\n      continue;\r\n    }\r\n\r\n    let value = 0;\r\n    let length = 0;\r\n\r\n    while (length < 4 && isASCIIHex(input[pointer])) {\r\n      value = value * 0x10 + parseInt(at(input, pointer), 16);\r\n      ++pointer;\r\n      ++length;\r\n    }\r\n\r\n    if (input[pointer] === 46) {\r\n      if (length === 0) {\r\n        return failure;\r\n      }\r\n\r\n      pointer -= length;\r\n\r\n      if (pieceIndex > 6) {\r\n        return failure;\r\n      }\r\n\r\n      let numbersSeen = 0;\r\n\r\n      while (input[pointer] !== undefined) {\r\n        let ipv4Piece = null;\r\n\r\n        if (numbersSeen > 0) {\r\n          if (input[pointer] === 46 && numbersSeen < 4) {\r\n            ++pointer;\r\n          } else {\r\n            return failure;\r\n          }\r\n        }\r\n\r\n        if (!isASCIIDigit(input[pointer])) {\r\n          return failure;\r\n        }\r\n\r\n        while (isASCIIDigit(input[pointer])) {\r\n          const number = parseInt(at(input, pointer));\r\n          if (ipv4Piece === null) {\r\n            ipv4Piece = number;\r\n          } else if (ipv4Piece === 0) {\r\n            return failure;\r\n          } else {\r\n            ipv4Piece = ipv4Piece * 10 + number;\r\n          }\r\n          if (ipv4Piece > 255) {\r\n            return failure;\r\n          }\r\n          ++pointer;\r\n        }\r\n\r\n        address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\r\n\r\n        ++numbersSeen;\r\n\r\n        if (numbersSeen === 2 || numbersSeen === 4) {\r\n          ++pieceIndex;\r\n        }\r\n      }\r\n\r\n      if (numbersSeen !== 4) {\r\n        return failure;\r\n      }\r\n\r\n      break;\r\n    } else if (input[pointer] === 58) {\r\n      ++pointer;\r\n      if (input[pointer] === undefined) {\r\n        return failure;\r\n      }\r\n    } else if (input[pointer] !== undefined) {\r\n      return failure;\r\n    }\r\n\r\n    address[pieceIndex] = value;\r\n    ++pieceIndex;\r\n  }\r\n\r\n  if (compress !== null) {\r\n    let swaps = pieceIndex - compress;\r\n    pieceIndex = 7;\r\n    while (pieceIndex !== 0 && swaps > 0) {\r\n      const temp = address[compress + swaps - 1];\r\n      address[compress + swaps - 1] = address[pieceIndex];\r\n      address[pieceIndex] = temp;\r\n      --pieceIndex;\r\n      --swaps;\r\n    }\r\n  } else if (compress === null && pieceIndex !== 8) {\r\n    return failure;\r\n  }\r\n\r\n  return address;\r\n}\r\n\r\nfunction serializeIPv6(address) {\r\n  let output = \"\";\r\n  const seqResult = findLongestZeroSequence(address);\r\n  const compress = seqResult.idx;\r\n  let ignore0 = false;\r\n\r\n  for (let pieceIndex = 0; pieceIndex <= 7; ++pieceIndex) {\r\n    if (ignore0 && address[pieceIndex] === 0) {\r\n      continue;\r\n    } else if (ignore0) {\r\n      ignore0 = false;\r\n    }\r\n\r\n    if (compress === pieceIndex) {\r\n      const separator = pieceIndex === 0 ? \"::\" : \":\";\r\n      output += separator;\r\n      ignore0 = true;\r\n      continue;\r\n    }\r\n\r\n    output += address[pieceIndex].toString(16);\r\n\r\n    if (pieceIndex !== 7) {\r\n      output += \":\";\r\n    }\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseHost(input, isSpecialArg) {\r\n  if (input[0] === \"[\") {\r\n    if (input[input.length - 1] !== \"]\") {\r\n      return failure;\r\n    }\r\n\r\n    return parseIPv6(input.substring(1, input.length - 1));\r\n  }\r\n\r\n  if (!isSpecialArg) {\r\n    return parseOpaqueHost(input);\r\n  }\r\n\r\n  const domain = utf8PercentDecode(input);\r\n  const asciiDomain = tr46.toASCII(domain, false, tr46.PROCESSING_OPTIONS.NONTRANSITIONAL, false);\r\n  if (asciiDomain === null) {\r\n    return failure;\r\n  }\r\n\r\n  if (containsForbiddenHostCodePoint(asciiDomain)) {\r\n    return failure;\r\n  }\r\n\r\n  const ipv4Host = parseIPv4(asciiDomain);\r\n  if (typeof ipv4Host === \"number\" || ipv4Host === failure) {\r\n    return ipv4Host;\r\n  }\r\n\r\n  return asciiDomain;\r\n}\r\n\r\nfunction parseOpaqueHost(input) {\r\n  if (containsForbiddenHostCodePointExcludingPercent(input)) {\r\n    return failure;\r\n  }\r\n\r\n  let output = \"\";\r\n  const decoded = punycode.ucs2.decode(input);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    output += percentEncodeChar(decoded[i], isC0ControlPercentEncode);\r\n  }\r\n  return output;\r\n}\r\n\r\nfunction findLongestZeroSequence(arr) {\r\n  let maxIdx = null;\r\n  let maxLen = 1; // only find elements > 1\r\n  let currStart = null;\r\n  let currLen = 0;\r\n\r\n  for (let i = 0; i < arr.length; ++i) {\r\n    if (arr[i] !== 0) {\r\n      if (currLen > maxLen) {\r\n        maxIdx = currStart;\r\n        maxLen = currLen;\r\n      }\r\n\r\n      currStart = null;\r\n      currLen = 0;\r\n    } else {\r\n      if (currStart === null) {\r\n        currStart = i;\r\n      }\r\n      ++currLen;\r\n    }\r\n  }\r\n\r\n  // if trailing zeros\r\n  if (currLen > maxLen) {\r\n    maxIdx = currStart;\r\n    maxLen = currLen;\r\n  }\r\n\r\n  return {\r\n    idx: maxIdx,\r\n    len: maxLen\r\n  };\r\n}\r\n\r\nfunction serializeHost(host) {\r\n  if (typeof host === \"number\") {\r\n    return serializeIPv4(host);\r\n  }\r\n\r\n  // IPv6 serializer\r\n  if (host instanceof Array) {\r\n    return \"[\" + serializeIPv6(host) + \"]\";\r\n  }\r\n\r\n  return host;\r\n}\r\n\r\nfunction trimControlChars(url) {\r\n  return url.replace(/^[\\u0000-\\u001F\\u0020]+|[\\u0000-\\u001F\\u0020]+$/g, \"\");\r\n}\r\n\r\nfunction trimTabAndNewline(url) {\r\n  return url.replace(/\\u0009|\\u000A|\\u000D/g, \"\");\r\n}\r\n\r\nfunction shortenPath(url) {\r\n  const path = url.path;\r\n  if (path.length === 0) {\r\n    return;\r\n  }\r\n  if (url.scheme === \"file\" && path.length === 1 && isNormalizedWindowsDriveLetter(path[0])) {\r\n    return;\r\n  }\r\n\r\n  path.pop();\r\n}\r\n\r\nfunction includesCredentials(url) {\r\n  return url.username !== \"\" || url.password !== \"\";\r\n}\r\n\r\nfunction cannotHaveAUsernamePasswordPort(url) {\r\n  return url.host === null || url.host === \"\" || url.cannotBeABaseURL || url.scheme === \"file\";\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetter(string) {\r\n  return /^[A-Za-z]:$/.test(string);\r\n}\r\n\r\nfunction URLStateMachine(input, base, encodingOverride, url, stateOverride) {\r\n  this.pointer = 0;\r\n  this.input = input;\r\n  this.base = base || null;\r\n  this.encodingOverride = encodingOverride || \"utf-8\";\r\n  this.stateOverride = stateOverride;\r\n  this.url = url;\r\n  this.failure = false;\r\n  this.parseError = false;\r\n\r\n  if (!this.url) {\r\n    this.url = {\r\n      scheme: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      host: null,\r\n      port: null,\r\n      path: [],\r\n      query: null,\r\n      fragment: null,\r\n\r\n      cannotBeABaseURL: false\r\n    };\r\n\r\n    const res = trimControlChars(this.input);\r\n    if (res !== this.input) {\r\n      this.parseError = true;\r\n    }\r\n    this.input = res;\r\n  }\r\n\r\n  const res = trimTabAndNewline(this.input);\r\n  if (res !== this.input) {\r\n    this.parseError = true;\r\n  }\r\n  this.input = res;\r\n\r\n  this.state = stateOverride || \"scheme start\";\r\n\r\n  this.buffer = \"\";\r\n  this.atFlag = false;\r\n  this.arrFlag = false;\r\n  this.passwordTokenSeenFlag = false;\r\n\r\n  this.input = punycode.ucs2.decode(this.input);\r\n\r\n  for (; this.pointer <= this.input.length; ++this.pointer) {\r\n    const c = this.input[this.pointer];\r\n    const cStr = isNaN(c) ? undefined : String.fromCodePoint(c);\r\n\r\n    // exec state machine\r\n    const ret = this[\"parse \" + this.state](c, cStr);\r\n    if (!ret) {\r\n      break; // terminate algorithm\r\n    } else if (ret === failure) {\r\n      this.failure = true;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nURLStateMachine.prototype[\"parse scheme start\"] = function parseSchemeStart(c, cStr) {\r\n  if (isASCIIAlpha(c)) {\r\n    this.buffer += cStr.toLowerCase();\r\n    this.state = \"scheme\";\r\n  } else if (!this.stateOverride) {\r\n    this.state = \"no scheme\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse scheme\"] = function parseScheme(c, cStr) {\r\n  if (isASCIIAlphanumeric(c) || c === 43 || c === 45 || c === 46) {\r\n    this.buffer += cStr.toLowerCase();\r\n  } else if (c === 58) {\r\n    if (this.stateOverride) {\r\n      if (isSpecial(this.url) && !isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if (!isSpecial(this.url) && isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if ((includesCredentials(this.url) || this.url.port !== null) && this.buffer === \"file\") {\r\n        return false;\r\n      }\r\n\r\n      if (this.url.scheme === \"file\" && (this.url.host === \"\" || this.url.host === null)) {\r\n        return false;\r\n      }\r\n    }\r\n    this.url.scheme = this.buffer;\r\n    this.buffer = \"\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    if (this.url.scheme === \"file\") {\r\n      if (this.input[this.pointer + 1] !== 47 || this.input[this.pointer + 2] !== 47) {\r\n        this.parseError = true;\r\n      }\r\n      this.state = \"file\";\r\n    } else if (isSpecial(this.url) && this.base !== null && this.base.scheme === this.url.scheme) {\r\n      this.state = \"special relative or authority\";\r\n    } else if (isSpecial(this.url)) {\r\n      this.state = \"special authority slashes\";\r\n    } else if (this.input[this.pointer + 1] === 47) {\r\n      this.state = \"path or authority\";\r\n      ++this.pointer;\r\n    } else {\r\n      this.url.cannotBeABaseURL = true;\r\n      this.url.path.push(\"\");\r\n      this.state = \"cannot-be-a-base-URL path\";\r\n    }\r\n  } else if (!this.stateOverride) {\r\n    this.buffer = \"\";\r\n    this.state = \"no scheme\";\r\n    this.pointer = -1;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse no scheme\"] = function parseNoScheme(c) {\r\n  if (this.base === null || (this.base.cannotBeABaseURL && c !== 35)) {\r\n    return failure;\r\n  } else if (this.base.cannotBeABaseURL && c === 35) {\r\n    this.url.scheme = this.base.scheme;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.url.cannotBeABaseURL = true;\r\n    this.state = \"fragment\";\r\n  } else if (this.base.scheme === \"file\") {\r\n    this.state = \"file\";\r\n    --this.pointer;\r\n  } else {\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special relative or authority\"] = function parseSpecialRelativeOrAuthority(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path or authority\"] = function parsePathOrAuthority(c) {\r\n  if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative\"] = function parseRelative(c) {\r\n  this.url.scheme = this.base.scheme;\r\n  if (isNaN(c)) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n  } else if (c === 47) {\r\n    this.state = \"relative slash\";\r\n  } else if (c === 63) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (isSpecial(this.url) && c === 92) {\r\n    this.parseError = true;\r\n    this.state = \"relative slash\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice(0, this.base.path.length - 1);\r\n\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative slash\"] = function parseRelativeSlash(c) {\r\n  if (isSpecial(this.url) && (c === 47 || c === 92)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"special authority ignore slashes\";\r\n  } else if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority slashes\"] = function parseSpecialAuthoritySlashes(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"special authority ignore slashes\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority ignore slashes\"] = function parseSpecialAuthorityIgnoreSlashes(c) {\r\n  if (c !== 47 && c !== 92) {\r\n    this.state = \"authority\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse authority\"] = function parseAuthority(c, cStr) {\r\n  if (c === 64) {\r\n    this.parseError = true;\r\n    if (this.atFlag) {\r\n      this.buffer = \"%40\" + this.buffer;\r\n    }\r\n    this.atFlag = true;\r\n\r\n    // careful, this is based on buffer and has its own pointer (this.pointer != pointer) and inner chars\r\n    const len = countSymbols(this.buffer);\r\n    for (let pointer = 0; pointer < len; ++pointer) {\r\n      const codePoint = this.buffer.codePointAt(pointer);\r\n\r\n      if (codePoint === 58 && !this.passwordTokenSeenFlag) {\r\n        this.passwordTokenSeenFlag = true;\r\n        continue;\r\n      }\r\n      const encodedCodePoints = percentEncodeChar(codePoint, isUserinfoPercentEncode);\r\n      if (this.passwordTokenSeenFlag) {\r\n        this.url.password += encodedCodePoints;\r\n      } else {\r\n        this.url.username += encodedCodePoints;\r\n      }\r\n    }\r\n    this.buffer = \"\";\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    if (this.atFlag && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n    this.pointer -= countSymbols(this.buffer) + 1;\r\n    this.buffer = \"\";\r\n    this.state = \"host\";\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse hostname\"] =\r\nURLStateMachine.prototype[\"parse host\"] = function parseHostName(c, cStr) {\r\n  if (this.stateOverride && this.url.scheme === \"file\") {\r\n    --this.pointer;\r\n    this.state = \"file host\";\r\n  } else if (c === 58 && !this.arrFlag) {\r\n    if (this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"port\";\r\n    if (this.stateOverride === \"hostname\") {\r\n      return false;\r\n    }\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    --this.pointer;\r\n    if (isSpecial(this.url) && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    } else if (this.stateOverride && this.buffer === \"\" &&\r\n               (includesCredentials(this.url) || this.url.port !== null)) {\r\n      this.parseError = true;\r\n      return false;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"path start\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n  } else {\r\n    if (c === 91) {\r\n      this.arrFlag = true;\r\n    } else if (c === 93) {\r\n      this.arrFlag = false;\r\n    }\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse port\"] = function parsePort(c, cStr) {\r\n  if (isASCIIDigit(c)) {\r\n    this.buffer += cStr;\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92) ||\r\n             this.stateOverride) {\r\n    if (this.buffer !== \"\") {\r\n      const port = parseInt(this.buffer);\r\n      if (port > Math.pow(2, 16) - 1) {\r\n        this.parseError = true;\r\n        return failure;\r\n      }\r\n      this.url.port = port === defaultPort(this.url.scheme) ? null : port;\r\n      this.buffer = \"\";\r\n    }\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    this.state = \"path start\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst fileOtherwiseCodePoints = new Set([47, 92, 63, 35]);\r\n\r\nURLStateMachine.prototype[\"parse file\"] = function parseFile(c) {\r\n  this.url.scheme = \"file\";\r\n\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file slash\";\r\n  } else if (this.base !== null && this.base.scheme === \"file\") {\r\n    if (isNaN(c)) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n    } else if (c === 63) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    } else if (c === 35) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    } else {\r\n      if (this.input.length - this.pointer - 1 === 0 || // remaining consists of 0 code points\r\n          !isWindowsDriveLetterCodePoints(c, this.input[this.pointer + 1]) ||\r\n          (this.input.length - this.pointer - 1 >= 2 && // remaining has at least 2 code points\r\n           !fileOtherwiseCodePoints.has(this.input[this.pointer + 2]))) {\r\n        this.url.host = this.base.host;\r\n        this.url.path = this.base.path.slice();\r\n        shortenPath(this.url);\r\n      } else {\r\n        this.parseError = true;\r\n      }\r\n\r\n      this.state = \"path\";\r\n      --this.pointer;\r\n    }\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file slash\"] = function parseFileSlash(c) {\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file host\";\r\n  } else {\r\n    if (this.base !== null && this.base.scheme === \"file\") {\r\n      if (isNormalizedWindowsDriveLetterString(this.base.path[0])) {\r\n        this.url.path.push(this.base.path[0]);\r\n      } else {\r\n        this.url.host = this.base.host;\r\n      }\r\n    }\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file host\"] = function parseFileHost(c, cStr) {\r\n  if (isNaN(c) || c === 47 || c === 92 || c === 63 || c === 35) {\r\n    --this.pointer;\r\n    if (!this.stateOverride && isWindowsDriveLetterString(this.buffer)) {\r\n      this.parseError = true;\r\n      this.state = \"path\";\r\n    } else if (this.buffer === \"\") {\r\n      this.url.host = \"\";\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n      this.state = \"path start\";\r\n    } else {\r\n      let host = parseHost(this.buffer, isSpecial(this.url));\r\n      if (host === failure) {\r\n        return failure;\r\n      }\r\n      if (host === \"localhost\") {\r\n        host = \"\";\r\n      }\r\n      this.url.host = host;\r\n\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n\r\n      this.buffer = \"\";\r\n      this.state = \"path start\";\r\n    }\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path start\"] = function parsePathStart(c) {\r\n  if (isSpecial(this.url)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"path\";\r\n\r\n    if (c !== 47 && c !== 92) {\r\n      --this.pointer;\r\n    }\r\n  } else if (!this.stateOverride && c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (!this.stateOverride && c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (c !== undefined) {\r\n    this.state = \"path\";\r\n    if (c !== 47) {\r\n      --this.pointer;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path\"] = function parsePath(c) {\r\n  if (isNaN(c) || c === 47 || (isSpecial(this.url) && c === 92) ||\r\n      (!this.stateOverride && (c === 63 || c === 35))) {\r\n    if (isSpecial(this.url) && c === 92) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (isDoubleDot(this.buffer)) {\r\n      shortenPath(this.url);\r\n      if (c !== 47 && !(isSpecial(this.url) && c === 92)) {\r\n        this.url.path.push(\"\");\r\n      }\r\n    } else if (isSingleDot(this.buffer) && c !== 47 &&\r\n               !(isSpecial(this.url) && c === 92)) {\r\n      this.url.path.push(\"\");\r\n    } else if (!isSingleDot(this.buffer)) {\r\n      if (this.url.scheme === \"file\" && this.url.path.length === 0 && isWindowsDriveLetterString(this.buffer)) {\r\n        if (this.url.host !== \"\" && this.url.host !== null) {\r\n          this.parseError = true;\r\n          this.url.host = \"\";\r\n        }\r\n        this.buffer = this.buffer[0] + \":\";\r\n      }\r\n      this.url.path.push(this.buffer);\r\n    }\r\n    this.buffer = \"\";\r\n    if (this.url.scheme === \"file\" && (c === undefined || c === 63 || c === 35)) {\r\n      while (this.url.path.length > 1 && this.url.path[0] === \"\") {\r\n        this.parseError = true;\r\n        this.url.path.shift();\r\n      }\r\n    }\r\n    if (c === 63) {\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    }\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += percentEncodeChar(c, isPathPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse cannot-be-a-base-URL path\"] = function parseCannotBeABaseURLPath(c) {\r\n  if (c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else {\r\n    // TODO: Add: not a URL code point\r\n    if (!isNaN(c) && c !== 37) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (c === 37 &&\r\n        (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n         !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (!isNaN(c)) {\r\n      this.url.path[0] = this.url.path[0] + percentEncodeChar(c, isC0ControlPercentEncode);\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse query\"] = function parseQuery(c, cStr) {\r\n  if (isNaN(c) || (!this.stateOverride && c === 35)) {\r\n    if (!isSpecial(this.url) || this.url.scheme === \"ws\" || this.url.scheme === \"wss\") {\r\n      this.encodingOverride = \"utf-8\";\r\n    }\r\n\r\n    const buffer = new Buffer(this.buffer); // TODO: Use encoding override instead\r\n    for (let i = 0; i < buffer.length; ++i) {\r\n      if (buffer[i] < 0x21 || buffer[i] > 0x7E || buffer[i] === 0x22 || buffer[i] === 0x23 ||\r\n          buffer[i] === 0x3C || buffer[i] === 0x3E) {\r\n        this.url.query += percentEncode(buffer[i]);\r\n      } else {\r\n        this.url.query += String.fromCodePoint(buffer[i]);\r\n      }\r\n    }\r\n\r\n    this.buffer = \"\";\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse fragment\"] = function parseFragment(c) {\r\n  if (isNaN(c)) { // do nothing\r\n  } else if (c === 0x0) {\r\n    this.parseError = true;\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.url.fragment += percentEncodeChar(c, isC0ControlPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nfunction serializeURL(url, excludeFragment) {\r\n  let output = url.scheme + \":\";\r\n  if (url.host !== null) {\r\n    output += \"//\";\r\n\r\n    if (url.username !== \"\" || url.password !== \"\") {\r\n      output += url.username;\r\n      if (url.password !== \"\") {\r\n        output += \":\" + url.password;\r\n      }\r\n      output += \"@\";\r\n    }\r\n\r\n    output += serializeHost(url.host);\r\n\r\n    if (url.port !== null) {\r\n      output += \":\" + url.port;\r\n    }\r\n  } else if (url.host === null && url.scheme === \"file\") {\r\n    output += \"//\";\r\n  }\r\n\r\n  if (url.cannotBeABaseURL) {\r\n    output += url.path[0];\r\n  } else {\r\n    for (const string of url.path) {\r\n      output += \"/\" + string;\r\n    }\r\n  }\r\n\r\n  if (url.query !== null) {\r\n    output += \"?\" + url.query;\r\n  }\r\n\r\n  if (!excludeFragment && url.fragment !== null) {\r\n    output += \"#\" + url.fragment;\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction serializeOrigin(tuple) {\r\n  let result = tuple.scheme + \"://\";\r\n  result += serializeHost(tuple.host);\r\n\r\n  if (tuple.port !== null) {\r\n    result += \":\" + tuple.port;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nmodule.exports.serializeURL = serializeURL;\r\n\r\nmodule.exports.serializeURLOrigin = function (url) {\r\n  // https://url.spec.whatwg.org/#concept-url-origin\r\n  switch (url.scheme) {\r\n    case \"blob\":\r\n      try {\r\n        return module.exports.serializeURLOrigin(module.exports.parseURL(url.path[0]));\r\n      } catch (e) {\r\n        // serializing an opaque origin returns \"null\"\r\n        return \"null\";\r\n      }\r\n    case \"ftp\":\r\n    case \"gopher\":\r\n    case \"http\":\r\n    case \"https\":\r\n    case \"ws\":\r\n    case \"wss\":\r\n      return serializeOrigin({\r\n        scheme: url.scheme,\r\n        host: url.host,\r\n        port: url.port\r\n      });\r\n    case \"file\":\r\n      // spec says \"exercise to the reader\", chrome says \"file://\"\r\n      return \"file://\";\r\n    default:\r\n      // serializing an opaque origin returns \"null\"\r\n      return \"null\";\r\n  }\r\n};\r\n\r\nmodule.exports.basicURLParse = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  const usm = new URLStateMachine(input, options.baseURL, options.encodingOverride, options.url, options.stateOverride);\r\n  if (usm.failure) {\r\n    return \"failure\";\r\n  }\r\n\r\n  return usm.url;\r\n};\r\n\r\nmodule.exports.setTheUsername = function (url, username) {\r\n  url.username = \"\";\r\n  const decoded = punycode.ucs2.decode(username);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.username += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.setThePassword = function (url, password) {\r\n  url.password = \"\";\r\n  const decoded = punycode.ucs2.decode(password);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.password += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.serializeHost = serializeHost;\r\n\r\nmodule.exports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\r\n\r\nmodule.exports.serializeInteger = function (integer) {\r\n  return String(integer);\r\n};\r\n\r\nmodule.exports.parseURL = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  // We don't handle blobs, so this just delegates:\r\n  return module.exports.basicURLParse(input, { baseURL: options.baseURL, encodingOverride: options.encodingOverride });\r\n};\r\n","\"use strict\";\n\nmodule.exports.mixin = function mixin(target, source) {\n  const keys = Object.getOwnPropertyNames(source);\n  for (let i = 0; i < keys.length; ++i) {\n    Object.defineProperty(target, keys[i], Object.getOwnPropertyDescriptor(source, keys[i]));\n  }\n};\n\nmodule.exports.wrapperSymbol = Symbol(\"wrapper\");\nmodule.exports.implSymbol = Symbol(\"impl\");\n\nmodule.exports.wrapperForImpl = function (impl) {\n  return impl[module.exports.wrapperSymbol];\n};\n\nmodule.exports.implForWrapper = function (wrapper) {\n  return wrapper[module.exports.implSymbol];\n};\n\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nWebSocket.WebSocket = WebSocket;\nWebSocket.WebSocketServer = WebSocket.Server;\n\nmodule.exports = WebSocket;\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) {\n    return new FastBuffer(target.buffer, target.byteOffset, offset);\n  }\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.length === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.length);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = new FastBuffer(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = new FastBuffer(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\nmodule.exports = {\n  concat,\n  mask: _mask,\n  toArrayBuffer,\n  toBuffer,\n  unmask: _unmask\n};\n\n/* istanbul ignore else  */\nif (!process.env.WS_NO_BUFFER_UTIL) {\n  try {\n    const bufferUtil = require('bufferutil');\n\n    module.exports.mask = function (source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bufferUtil.mask(source, mask, output, offset, length);\n    };\n\n    module.exports.unmask = function (buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bufferUtil.unmask(buffer, mask);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","'use strict';\n\nconst BINARY_TYPES = ['nodebuffer', 'arraybuffer', 'fragments'];\nconst hasBlob = typeof Blob !== 'undefined';\n\nif (hasBlob) BINARY_TYPES.push('blob');\n\nmodule.exports = {\n  BINARY_TYPES,\n  EMPTY_BUFFER: Buffer.alloc(0),\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  hasBlob,\n  kForOnEventAttribute: Symbol('kIsForOnEventAttribute'),\n  kListener: Symbol('kListener'),\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  NOOP: () => {}\n};\n","'use strict';\n\nconst { kForOnEventAttribute, kListener } = require('./constants');\n\nconst kCode = Symbol('kCode');\nconst kData = Symbol('kData');\nconst kError = Symbol('kError');\nconst kMessage = Symbol('kMessage');\nconst kReason = Symbol('kReason');\nconst kTarget = Symbol('kTarget');\nconst kType = Symbol('kType');\nconst kWasClean = Symbol('kWasClean');\n\n/**\n * Class representing an event.\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @throws {TypeError} If the `type` argument is not specified\n   */\n  constructor(type) {\n    this[kTarget] = null;\n    this[kType] = type;\n  }\n\n  /**\n   * @type {*}\n   */\n  get target() {\n    return this[kTarget];\n  }\n\n  /**\n   * @type {String}\n   */\n  get type() {\n    return this[kType];\n  }\n}\n\nObject.defineProperty(Event.prototype, 'target', { enumerable: true });\nObject.defineProperty(Event.prototype, 'type', { enumerable: true });\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {Number} [options.code=0] The status code explaining why the\n   *     connection was closed\n   * @param {String} [options.reason=''] A human-readable string explaining why\n   *     the connection was closed\n   * @param {Boolean} [options.wasClean=false] Indicates whether or not the\n   *     connection was cleanly closed\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kCode] = options.code === undefined ? 0 : options.code;\n    this[kReason] = options.reason === undefined ? '' : options.reason;\n    this[kWasClean] = options.wasClean === undefined ? false : options.wasClean;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get code() {\n    return this[kCode];\n  }\n\n  /**\n   * @type {String}\n   */\n  get reason() {\n    return this[kReason];\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get wasClean() {\n    return this[kWasClean];\n  }\n}\n\nObject.defineProperty(CloseEvent.prototype, 'code', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'reason', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'wasClean', { enumerable: true });\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.error=null] The error that generated this event\n   * @param {String} [options.message=''] The error message\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kError] = options.error === undefined ? null : options.error;\n    this[kMessage] = options.message === undefined ? '' : options.message;\n  }\n\n  /**\n   * @type {*}\n   */\n  get error() {\n    return this[kError];\n  }\n\n  /**\n   * @type {String}\n   */\n  get message() {\n    return this[kMessage];\n  }\n}\n\nObject.defineProperty(ErrorEvent.prototype, 'error', { enumerable: true });\nObject.defineProperty(ErrorEvent.prototype, 'message', { enumerable: true });\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.data=null] The message content\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kData] = options.data === undefined ? null : options.data;\n  }\n\n  /**\n   * @type {*}\n   */\n  get data() {\n    return this[kData];\n  }\n}\n\nObject.defineProperty(MessageEvent.prototype, 'data', { enumerable: true });\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {(Function|Object)} handler The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, handler, options = {}) {\n    for (const listener of this.listeners(type)) {\n      if (\n        !options[kForOnEventAttribute] &&\n        listener[kListener] === handler &&\n        !listener[kForOnEventAttribute]\n      ) {\n        return;\n      }\n    }\n\n    let wrapper;\n\n    if (type === 'message') {\n      wrapper = function onMessage(data, isBinary) {\n        const event = new MessageEvent('message', {\n          data: isBinary ? data : data.toString()\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'close') {\n      wrapper = function onClose(code, message) {\n        const event = new CloseEvent('close', {\n          code,\n          reason: message.toString(),\n          wasClean: this._closeFrameReceived && this._closeFrameSent\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'error') {\n      wrapper = function onError(error) {\n        const event = new ErrorEvent('error', {\n          error,\n          message: error.message\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'open') {\n      wrapper = function onOpen() {\n        const event = new Event('open');\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else {\n      return;\n    }\n\n    wrapper[kForOnEventAttribute] = !!options[kForOnEventAttribute];\n    wrapper[kListener] = handler;\n\n    if (options.once) {\n      this.once(type, wrapper);\n    } else {\n      this.on(type, wrapper);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {(Function|Object)} handler The listener to remove\n   * @public\n   */\n  removeEventListener(type, handler) {\n    for (const listener of this.listeners(type)) {\n      if (listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n        this.removeListener(type, listener);\n        break;\n      }\n    }\n  }\n};\n\nmodule.exports = {\n  CloseEvent,\n  ErrorEvent,\n  Event,\n  EventTarget,\n  MessageEvent\n};\n\n/**\n * Call an event listener\n *\n * @param {(Function|Object)} listener The listener to call\n * @param {*} thisArg The value to use as `this`` when calling the listener\n * @param {Event} event The event to pass to the listener\n * @private\n */\nfunction callListener(listener, thisArg, event) {\n  if (typeof listener === 'object' && listener.handleEvent) {\n    listener.handleEvent.call(listener, event);\n  } else {\n    listener.call(thisArg, event);\n  }\n}\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let code = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (\n        i !== 0 &&\n        (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n      ) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes || code === 0x20 || code === 0x09) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed if context takeover is disabled\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) {\n        data = new FastBuffer(data.buffer, data.byteOffset, data.length - 4);\n      }\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst FastBuffer = Buffer[Symbol.species];\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\nconst DEFER_EVENT = 6;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {String} [options.binaryType=nodebuffer] The type for binary data\n   * @param {Object} [options.extensions] An object containing the negotiated\n   *     extensions\n   * @param {Boolean} [options.isServer=false] Specifies whether to operate in\n   *     client or server mode\n   * @param {Number} [options.maxPayload=0] The maximum allowed message length\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   */\n  constructor(options = {}) {\n    super();\n\n    this._allowSynchronousEvents =\n      options.allowSynchronousEvents !== undefined\n        ? options.allowSynchronousEvents\n        : true;\n    this._binaryType = options.binaryType || BINARY_TYPES[0];\n    this._extensions = options.extensions || {};\n    this._isServer = !!options.isServer;\n    this._maxPayload = options.maxPayload | 0;\n    this._skipUTF8Validation = !!options.skipUTF8Validation;\n    this[kWebSocket] = undefined;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._errored = false;\n    this._loop = false;\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = new FastBuffer(\n        buf.buffer,\n        buf.byteOffset + n,\n        buf.length - n\n      );\n\n      return new FastBuffer(buf.buffer, buf.byteOffset, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = new FastBuffer(\n          buf.buffer,\n          buf.byteOffset + n,\n          buf.length - n\n        );\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          this.getInfo(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          this.getPayloadLength16(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          this.getPayloadLength64(cb);\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          this.getData(cb);\n          break;\n        case INFLATING:\n        case DEFER_EVENT:\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    if (!this._errored) cb();\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getInfo(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      const error = this.createError(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n\n      cb(error);\n      return;\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      const error = this.createError(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (!this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        const error = this.createError(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (\n        this._payloadLength > 0x7d ||\n        (this._opcode === 0x08 && this._payloadLength === 1)\n      ) {\n        const error = this.createError(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    } else {\n      const error = this.createError(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        const error = this.createError(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n\n        cb(error);\n        return;\n      }\n    } else if (this._masked) {\n      const error = this.createError(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength16(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength64(cb) {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      const error = this.createError(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  haveLength(cb) {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        const error = this.createError(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n\n      if (\n        this._masked &&\n        (this._mask[0] | this._mask[1] | this._mask[2] | this._mask[3]) !== 0\n      ) {\n        unmask(data, this._mask);\n      }\n    }\n\n    if (this._opcode > 0x07) {\n      this.controlMessage(data, cb);\n      return;\n    }\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its length is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    this.dataMessage(cb);\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          const error = this.createError(\n            RangeError,\n            'Max payload size exceeded',\n            false,\n            1009,\n            'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._fragments.push(buf);\n      }\n\n      this.dataMessage(cb);\n      if (this._state === GET_INFO) this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  dataMessage(cb) {\n    if (!this._fin) {\n      this._state = GET_INFO;\n      return;\n    }\n\n    const messageLength = this._messageLength;\n    const fragments = this._fragments;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragmented = 0;\n    this._fragments = [];\n\n    if (this._opcode === 2) {\n      let data;\n\n      if (this._binaryType === 'nodebuffer') {\n        data = concat(fragments, messageLength);\n      } else if (this._binaryType === 'arraybuffer') {\n        data = toArrayBuffer(concat(fragments, messageLength));\n      } else if (this._binaryType === 'blob') {\n        data = new Blob(fragments);\n      } else {\n        data = fragments;\n      }\n\n      if (this._allowSynchronousEvents) {\n        this.emit('message', data, true);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', data, true);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    } else {\n      const buf = concat(fragments, messageLength);\n\n      if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n        const error = this.createError(\n          Error,\n          'invalid UTF-8 sequence',\n          true,\n          1007,\n          'WS_ERR_INVALID_UTF8'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (this._state === INFLATING || this._allowSynchronousEvents) {\n        this.emit('message', buf, false);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', buf, false);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    }\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data, cb) {\n    if (this._opcode === 0x08) {\n      if (data.length === 0) {\n        this._loop = false;\n        this.emit('conclude', 1005, EMPTY_BUFFER);\n        this.end();\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          const error = this.createError(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n\n          cb(error);\n          return;\n        }\n\n        const buf = new FastBuffer(\n          data.buffer,\n          data.byteOffset + 2,\n          data.length - 2\n        );\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          const error = this.createError(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._loop = false;\n        this.emit('conclude', code, buf);\n        this.end();\n      }\n\n      this._state = GET_INFO;\n      return;\n    }\n\n    if (this._allowSynchronousEvents) {\n      this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n      this._state = GET_INFO;\n    } else {\n      this._state = DEFER_EVENT;\n      setImmediate(() => {\n        this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n        this._state = GET_INFO;\n        this.startLoop(cb);\n      });\n    }\n  }\n\n  /**\n   * Builds an error object.\n   *\n   * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n   * @param {String} message The error message\n   * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n   *     `message`\n   * @param {Number} statusCode The status code\n   * @param {String} errorCode The exposed error code\n   * @return {(Error|RangeError)} The error\n   * @private\n   */\n  createError(ErrorCtor, message, prefix, statusCode, errorCode) {\n    this._loop = false;\n    this._errored = true;\n\n    const err = new ErrorCtor(\n      prefix ? `Invalid WebSocket frame: ${message}` : message\n    );\n\n    Error.captureStackTrace(err, this.createError);\n    err.code = errorCode;\n    err[kStatusCode] = statusCode;\n    return err;\n  }\n}\n\nmodule.exports = Receiver;\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex\" }] */\n\n'use strict';\n\nconst { Duplex } = require('stream');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER, kWebSocket, NOOP } = require('./constants');\nconst { isBlob, isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst kByteLength = Symbol('kByteLength');\nconst maskBuffer = Buffer.alloc(4);\nconst RANDOM_POOL_SIZE = 8 * 1024;\nlet randomPool;\nlet randomPoolPointer = RANDOM_POOL_SIZE;\n\nconst DEFAULT = 0;\nconst DEFLATING = 1;\nconst GET_BLOB_DATA = 2;\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {Duplex} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Function} [generateMask] The function used to generate the masking\n   *     key\n   */\n  constructor(socket, extensions, generateMask) {\n    this._extensions = extensions || {};\n\n    if (generateMask) {\n      this._generateMask = generateMask;\n      this._maskBuffer = Buffer.alloc(4);\n    }\n\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._queue = [];\n    this._state = DEFAULT;\n    this.onerror = NOOP;\n    this[kWebSocket] = undefined;\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {(Buffer|String)} data The data to frame\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {(Buffer|String)[]} The framed data\n   * @public\n   */\n  static frame(data, options) {\n    let mask;\n    let merge = false;\n    let offset = 2;\n    let skipMasking = false;\n\n    if (options.mask) {\n      mask = options.maskBuffer || maskBuffer;\n\n      if (options.generateMask) {\n        options.generateMask(mask);\n      } else {\n        if (randomPoolPointer === RANDOM_POOL_SIZE) {\n          /* istanbul ignore else  */\n          if (randomPool === undefined) {\n            //\n            // This is lazily initialized because server-sent frames must not\n            // be masked so it may never be used.\n            //\n            randomPool = Buffer.alloc(RANDOM_POOL_SIZE);\n          }\n\n          randomFillSync(randomPool, 0, RANDOM_POOL_SIZE);\n          randomPoolPointer = 0;\n        }\n\n        mask[0] = randomPool[randomPoolPointer++];\n        mask[1] = randomPool[randomPoolPointer++];\n        mask[2] = randomPool[randomPoolPointer++];\n        mask[3] = randomPool[randomPoolPointer++];\n      }\n\n      skipMasking = (mask[0] | mask[1] | mask[2] | mask[3]) === 0;\n      offset = 6;\n    }\n\n    let dataLength;\n\n    if (typeof data === 'string') {\n      if (\n        (!options.mask || skipMasking) &&\n        options[kByteLength] !== undefined\n      ) {\n        dataLength = options[kByteLength];\n      } else {\n        data = Buffer.from(data);\n        dataLength = data.length;\n      }\n    } else {\n      dataLength = data.length;\n      merge = options.mask && options.readOnly && !skipMasking;\n    }\n\n    let payloadLength = dataLength;\n\n    if (dataLength >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (dataLength > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? dataLength + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(dataLength, 2);\n    } else if (payloadLength === 127) {\n      target[2] = target[3] = 0;\n      target.writeUIntBE(dataLength, 4, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (skipMasking) return [target, data];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, dataLength);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, dataLength);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {(String|Buffer)} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || !data.length) {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n\n      if (typeof data === 'string') {\n        buf.write(data, 2);\n      } else {\n        buf.set(data, 2);\n      }\n    }\n\n    const options = {\n      [kByteLength]: buf.length,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x08,\n      readOnly: false,\n      rsv1: false\n    };\n\n    if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, buf, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(buf, options), cb);\n    }\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x09,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x0a,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (\n        rsv1 &&\n        perMessageDeflate &&\n        perMessageDeflate.params[\n          perMessageDeflate._isServer\n            ? 'server_no_context_takeover'\n            : 'client_no_context_takeover'\n        ]\n      ) {\n        rsv1 = byteLength >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    const opts = {\n      [kByteLength]: byteLength,\n      fin: options.fin,\n      generateMask: this._generateMask,\n      mask: options.mask,\n      maskBuffer: this._maskBuffer,\n      opcode,\n      readOnly,\n      rsv1\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, this._compress, opts, cb]);\n      } else {\n        this.getBlobData(data, this._compress, opts, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, this._compress, opts, cb]);\n    } else {\n      this.dispatch(data, this._compress, opts, cb);\n    }\n  }\n\n  /**\n   * Gets the contents of a blob as binary data.\n   *\n   * @param {Blob} blob The blob\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     the data\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  getBlobData(blob, compress, options, cb) {\n    this._bufferedBytes += options[kByteLength];\n    this._state = GET_BLOB_DATA;\n\n    blob\n      .arrayBuffer()\n      .then((arrayBuffer) => {\n        if (this._socket.destroyed) {\n          const err = new Error(\n            'The socket was closed while the blob was being read'\n          );\n\n          //\n          // `callCallbacks` is called in the next tick to ensure that errors\n          // that might be thrown in the callbacks behave like errors thrown\n          // outside the promise chain.\n          //\n          process.nextTick(callCallbacks, this, err, cb);\n          return;\n        }\n\n        this._bufferedBytes -= options[kByteLength];\n        const data = toBuffer(arrayBuffer);\n\n        if (!compress) {\n          this._state = DEFAULT;\n          this.sendFrame(Sender.frame(data, options), cb);\n          this.dequeue();\n        } else {\n          this.dispatch(data, compress, options, cb);\n        }\n      })\n      .catch((err) => {\n        //\n        // `onError` is called in the next tick for the same reason that\n        // `callCallbacks` above is.\n        //\n        process.nextTick(onError, this, err, cb);\n      });\n  }\n\n  /**\n   * Dispatches a message.\n   *\n   * @param {(Buffer|String)} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += options[kByteLength];\n    this._state = DEFLATING;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        callCallbacks(this, err, cb);\n        return;\n      }\n\n      this._bufferedBytes -= options[kByteLength];\n      this._state = DEFAULT;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (this._state === DEFAULT && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[3][kByteLength];\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[3][kByteLength];\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n\n/**\n * Calls queued callbacks with an error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error to call the callbacks with\n * @param {Function} [cb] The first callback\n * @private\n */\nfunction callCallbacks(sender, err, cb) {\n  if (typeof cb === 'function') cb(err);\n\n  for (let i = 0; i < sender._queue.length; i++) {\n    const params = sender._queue[i];\n    const callback = params[params.length - 1];\n\n    if (typeof callback === 'function') callback(err);\n  }\n}\n\n/**\n * Handles a `Sender` error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error\n * @param {Function} [cb] The first pending callback\n * @private\n */\nfunction onError(sender, err, cb) {\n  callCallbacks(sender, err, cb);\n  sender.onerror(err);\n}\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let terminateOnDestroy = true;\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg, isBinary) {\n    const data =\n      !isBinary && duplex._readableState.objectMode ? msg.toString() : msg;\n\n    if (!duplex.push(data)) ws.pause();\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (ws.isPaused) ws.resume();\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Parses the `Sec-WebSocket-Protocol` header into a set of subprotocol names.\n *\n * @param {String} header The field value of the header\n * @return {Set} The subprotocol names\n * @public\n */\nfunction parse(header) {\n  const protocols = new Set();\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (i; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (end === -1 && tokenChars[code] === 1) {\n      if (start === -1) start = i;\n    } else if (\n      i !== 0 &&\n      (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n    ) {\n      if (end === -1 && start !== -1) end = i;\n    } else if (code === 0x2c /* ',' */) {\n      if (start === -1) {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n\n      if (end === -1) end = i;\n\n      const protocol = header.slice(start, end);\n\n      if (protocols.has(protocol)) {\n        throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n      }\n\n      protocols.add(protocol);\n      start = end = -1;\n    } else {\n      throw new SyntaxError(`Unexpected character at index ${i}`);\n    }\n  }\n\n  if (start === -1 || end !== -1) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  const protocol = header.slice(start, i);\n\n  if (protocols.has(protocol)) {\n    throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n  }\n\n  protocols.add(protocol);\n  return protocols;\n}\n\nmodule.exports = { parse };\n","'use strict';\n\nconst { isUtf8 } = require('buffer');\n\nconst { hasBlob } = require('./constants');\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Determines whether a value is a `Blob`.\n *\n * @param {*} value The value to be tested\n * @return {Boolean} `true` if `value` is a `Blob`, else `false`\n * @private\n */\nfunction isBlob(value) {\n  return (\n    hasBlob &&\n    typeof value === 'object' &&\n    typeof value.arrayBuffer === 'function' &&\n    typeof value.type === 'string' &&\n    typeof value.stream === 'function' &&\n    (value[Symbol.toStringTag] === 'Blob' ||\n      value[Symbol.toStringTag] === 'File')\n  );\n}\n\nmodule.exports = {\n  isBlob,\n  isValidStatusCode,\n  isValidUTF8: _isValidUTF8,\n  tokenChars\n};\n\nif (isUtf8) {\n  module.exports.isValidUTF8 = function (buf) {\n    return buf.length < 24 ? _isValidUTF8(buf) : isUtf8(buf);\n  };\n} /* istanbul ignore else  */ else if (!process.env.WS_NO_UTF_8_VALIDATE) {\n  try {\n    const isValidUTF8 = require('utf-8-validate');\n\n    module.exports.isValidUTF8 = function (buf) {\n      return buf.length < 32 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst { Duplex } = require('stream');\nconst { createHash } = require('crypto');\n\nconst extension = require('./extension');\nconst PerMessageDeflate = require('./permessage-deflate');\nconst subprotocol = require('./subprotocol');\nconst WebSocket = require('./websocket');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n   *     automatically send a pong in response to a ping\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [options.WebSocket=WebSocket] Specifies the `WebSocket`\n   *     class to use. It must be the `WebSocket` class or class that extends it\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      allowSynchronousEvents: true,\n      autoPong: true,\n      maxPayload: 100 * 1024 * 1024,\n      skipUTF8Validation: false,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      WebSocket,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) {\n      this.clients = new Set();\n      this._shouldEmitClose = false;\n    }\n\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Stop the server from accepting new connections and emit the `'close'` event\n   * when all existing connections are closed.\n   *\n   * @param {Function} [cb] A one-time listener for the `'close'` event\n   * @public\n   */\n  close(cb) {\n    if (this._state === CLOSED) {\n      if (cb) {\n        this.once('close', () => {\n          cb(new Error('The server is not running'));\n        });\n      }\n\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    if (this.options.noServer || this.options.server) {\n      if (this._server) {\n        this._removeListeners();\n        this._removeListeners = this._server = null;\n      }\n\n      if (this.clients) {\n        if (!this.clients.size) {\n          process.nextTick(emitClose, this);\n        } else {\n          this._shouldEmitClose = true;\n        }\n      } else {\n        process.nextTick(emitClose, this);\n      }\n    } else {\n      const server = this._server;\n\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // The HTTP/S server was created internally. Close it, and rely on its\n      // `'close'` event.\n      //\n      server.close(() => {\n        emitClose(this);\n      });\n    }\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key = req.headers['sec-websocket-key'];\n    const upgrade = req.headers.upgrade;\n    const version = +req.headers['sec-websocket-version'];\n\n    if (req.method !== 'GET') {\n      const message = 'Invalid HTTP method';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 405, message);\n      return;\n    }\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      const message = 'Invalid Upgrade header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (key === undefined || !keyRegex.test(key)) {\n      const message = 'Missing or invalid Sec-WebSocket-Key header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (version !== 8 && version !== 13) {\n      const message = 'Missing or invalid Sec-WebSocket-Version header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (!this.shouldHandle(req)) {\n      abortHandshake(socket, 400);\n      return;\n    }\n\n    const secWebSocketProtocol = req.headers['sec-websocket-protocol'];\n    let protocols = new Set();\n\n    if (secWebSocketProtocol !== undefined) {\n      try {\n        protocols = subprotocol.parse(secWebSocketProtocol);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Protocol header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    const secWebSocketExtensions = req.headers['sec-websocket-extensions'];\n    const extensions = {};\n\n    if (\n      this.options.perMessageDeflate &&\n      secWebSocketExtensions !== undefined\n    ) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = extension.parse(secWebSocketExtensions);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        const message =\n          'Invalid or unacceptable Sec-WebSocket-Extensions header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(\n            extensions,\n            key,\n            protocols,\n            req,\n            socket,\n            head,\n            cb\n          );\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {Object} extensions The accepted extensions\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Set} protocols The subprotocols\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(extensions, key, protocols, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new this.options.WebSocket(null, undefined, this.options);\n\n    if (protocols.size) {\n      //\n      // Optionally call external protocol selection handler.\n      //\n      const protocol = this.options.handleProtocols\n        ? this.options.handleProtocols(protocols, req)\n        : protocols.values().next().value;\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = extension.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, {\n      allowSynchronousEvents: this.options.allowSynchronousEvents,\n      maxPayload: this.options.maxPayload,\n      skipUTF8Validation: this.options.skipUTF8Validation\n    });\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => {\n        this.clients.delete(ws);\n\n        if (this._shouldEmitClose && !this.clients.size) {\n          process.nextTick(emitClose, this);\n        }\n      });\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  //\n  // The socket is writable unless the user destroyed or ended it before calling\n  // `server.handleUpgrade()` or in the `verifyClient` function, which is a user\n  // error. Handling this does not make much sense as the worst that can happen\n  // is that some of the data written by the user might be discarded due to the\n  // call to `socket.end()` below, which triggers an `'error'` event that in\n  // turn causes the socket to be destroyed.\n  //\n  message = message || http.STATUS_CODES[code];\n  headers = {\n    Connection: 'close',\n    'Content-Type': 'text/html',\n    'Content-Length': Buffer.byteLength(message),\n    ...headers\n  };\n\n  socket.once('finish', socket.destroy);\n\n  socket.end(\n    `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n      Object.keys(headers)\n        .map((h) => `${h}: ${headers[h]}`)\n        .join('\\r\\n') +\n      '\\r\\n\\r\\n' +\n      message\n  );\n}\n\n/**\n * Emit a `'wsClientError'` event on a `WebSocketServer` if there is at least\n * one listener for it, otherwise call `abortHandshake()`.\n *\n * @param {WebSocketServer} server The WebSocket server\n * @param {http.IncomingMessage} req The request object\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} message The HTTP response body\n * @private\n */\nfunction abortHandshakeOrEmitwsClientError(server, req, socket, code, message) {\n  if (server.listenerCount('wsClientError')) {\n    const err = new Error(message);\n    Error.captureStackTrace(err, abortHandshakeOrEmitwsClientError);\n\n    server.emit('wsClientError', err, socket, req);\n  } else {\n    abortHandshake(socket, code, message);\n  }\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex|Readable$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Duplex, Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst { isBlob } = require('./validation');\n\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kForOnEventAttribute,\n  kListener,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst {\n  EventTarget: { addEventListener, removeEventListener }\n} = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst closeTimeout = 30 * 1000;\nconst kAborted = Symbol('kAborted');\nconst protocolVersions = [8, 13];\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst subprotocolRegex = /^[!#$%&'*+\\-.0-9A-Z^_`|a-z~]+$/;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = EMPTY_BUFFER;\n    this._closeTimer = null;\n    this._errorEmitted = false;\n    this._extensions = {};\n    this._paused = false;\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (protocols === undefined) {\n        protocols = [];\n      } else if (!Array.isArray(protocols)) {\n        if (typeof protocols === 'object' && protocols !== null) {\n          options = protocols;\n          protocols = [];\n        } else {\n          protocols = [protocols];\n        }\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._autoPong = options.autoPong;\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * For historical reasons, the custom \"nodebuffer\" type is used by the default\n   * instead of \"blob\".\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get isPaused() {\n    return this._paused;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return null;\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Object} options Options object\n   * @param {Boolean} [options.allowSynchronousEvents=false] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Number} [options.maxPayload=0] The maximum allowed message size\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @private\n   */\n  setSocket(socket, head, options) {\n    const receiver = new Receiver({\n      allowSynchronousEvents: options.allowSynchronousEvents,\n      binaryType: this.binaryType,\n      extensions: this._extensions,\n      isServer: this._isServer,\n      maxPayload: options.maxPayload,\n      skipUTF8Validation: options.skipUTF8Validation\n    });\n\n    const sender = new Sender(socket, this._extensions, options.generateMask);\n\n    this._receiver = receiver;\n    this._sender = sender;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    sender[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    sender.onerror = senderOnError;\n\n    //\n    // These methods may not be available if `socket` is just a `Duplex`.\n    //\n    if (socket.setTimeout) socket.setTimeout(0);\n    if (socket.setNoDelay) socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {(String|Buffer)} [data] The reason why the connection is\n   *     closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    setCloseTimer(this);\n  }\n\n  /**\n   * Pause the socket.\n   *\n   * @public\n   */\n  pause() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = true;\n    this._socket.pause();\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Resume the socket.\n   *\n   * @public\n   */\n  resume() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = false;\n    if (!this._receiver._writableState.needDrain) this._socket.resume();\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'isPaused',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) return listener[kListener];\n      }\n\n      return null;\n    },\n    set(handler) {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) {\n          this.removeListener(method, listener);\n          break;\n        }\n      }\n\n      if (typeof handler !== 'function') return;\n\n      this.addEventListener(method, handler, {\n        [kForOnEventAttribute]: true\n      });\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {Array} protocols The subprotocols\n * @param {Object} [options] Connection options\n * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether any\n *     of the `'message'`, `'ping'`, and `'pong'` events can be emitted multiple\n *     times in the same tick\n * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n *     automatically send a pong in response to a ping\n * @param {Function} [options.finishRequest] A function which can be used to\n *     customize the headers of each http request before it is sent\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Function} [options.generateMask] The function used to generate the\n *     masking key\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n *     not to skip UTF-8 validation for text and close messages\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    allowSynchronousEvents: true,\n    autoPong: true,\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    skipUTF8Validation: false,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: 'GET',\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  websocket._autoPong = opts.autoPong;\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n  } else {\n    try {\n      parsedUrl = new URL(address);\n    } catch (e) {\n      throw new SyntaxError(`Invalid URL: ${address}`);\n    }\n  }\n\n  if (parsedUrl.protocol === 'http:') {\n    parsedUrl.protocol = 'ws:';\n  } else if (parsedUrl.protocol === 'https:') {\n    parsedUrl.protocol = 'wss:';\n  }\n\n  websocket._url = parsedUrl.href;\n\n  const isSecure = parsedUrl.protocol === 'wss:';\n  const isIpcUrl = parsedUrl.protocol === 'ws+unix:';\n  let invalidUrlMessage;\n\n  if (parsedUrl.protocol !== 'ws:' && !isSecure && !isIpcUrl) {\n    invalidUrlMessage =\n      'The URL\\'s protocol must be one of \"ws:\", \"wss:\", ' +\n      '\"http:\", \"https\", or \"ws+unix:\"';\n  } else if (isIpcUrl && !parsedUrl.pathname) {\n    invalidUrlMessage = \"The URL's pathname is empty\";\n  } else if (parsedUrl.hash) {\n    invalidUrlMessage = 'The URL contains a fragment identifier';\n  }\n\n  if (invalidUrlMessage) {\n    const err = new SyntaxError(invalidUrlMessage);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const request = isSecure ? https.request : http.request;\n  const protocolSet = new Set();\n  let perMessageDeflate;\n\n  opts.createConnection =\n    opts.createConnection || (isSecure ? tlsConnect : netConnect);\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    ...opts.headers,\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket'\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols.length) {\n    for (const protocol of protocols) {\n      if (\n        typeof protocol !== 'string' ||\n        !subprotocolRegex.test(protocol) ||\n        protocolSet.has(protocol)\n      ) {\n        throw new SyntaxError(\n          'An invalid or duplicated subprotocol was specified'\n        );\n      }\n\n      protocolSet.add(protocol);\n    }\n\n    opts.headers['Sec-WebSocket-Protocol'] = protocols.join(',');\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isIpcUrl) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req;\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalIpc = isIpcUrl;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isIpcUrl\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else if (websocket.listenerCount('redirect') === 0) {\n      const isSameHost = isIpcUrl\n        ? websocket._originalIpc\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalIpc\n          ? false\n          : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n\n    req = websocket._req = request(opts);\n\n    if (websocket._redirects) {\n      //\n      // Unlike what is done for the `'upgrade'` event, no early exit is\n      // triggered here if the user calls `websocket.close()` or\n      // `websocket.terminate()` from a listener of the `'redirect'` event. This\n      // is because the user can also call `request.destroy()` with an error\n      // before calling `websocket.close()` or `websocket.terminate()` and this\n      // would result in an error being emitted on the `request` object with no\n      // `'error'` event listeners attached.\n      //\n      websocket.emit('redirect', websocket.url, req);\n    }\n  } else {\n    req = websocket._req = request(opts);\n  }\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req[kAborted]) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (e) {\n        const err = new SyntaxError(`Invalid URL: ${location}`);\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the\n    // `'upgrade'` event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const upgrade = res.headers.upgrade;\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    let protError;\n\n    if (serverProt !== undefined) {\n      if (!protocolSet.size) {\n        protError = 'Server sent a subprotocol but none was requested';\n      } else if (!protocolSet.has(serverProt)) {\n        protError = 'Server sent an invalid subprotocol';\n      }\n    } else if (protocolSet.size) {\n      protError = 'Server sent no subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (\n        extensionNames.length !== 1 ||\n        extensionNames[0] !== PerMessageDeflate.extensionName\n      ) {\n        const message = 'Server indicated an extension that was not requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      try {\n        perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      websocket._extensions[PerMessageDeflate.extensionName] =\n        perMessageDeflate;\n    }\n\n    websocket.setSocket(socket, head, {\n      allowSynchronousEvents: opts.allowSynchronousEvents,\n      generateMask: opts.generateMask,\n      maxPayload: opts.maxPayload,\n      skipUTF8Validation: opts.skipUTF8Validation\n    });\n  });\n\n  if (opts.finishRequest) {\n    opts.finishRequest(req, websocket);\n  } else {\n    req.end();\n  }\n}\n\n/**\n * Emit the `'error'` and `'close'` events.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  //\n  // The following assignment is practically useless and is done only for\n  // consistency.\n  //\n  websocket._errorEmitted = true;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream[kAborted] = true;\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    process.nextTick(emitErrorAndClose, websocket, err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = isBlob(data) ? data.size : toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    process.nextTick(cb, err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {Buffer} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  const websocket = this[kWebSocket];\n\n  if (!websocket.isPaused) websocket._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {Buffer|ArrayBuffer|Buffer[])} data The message\n * @param {Boolean} isBinary Specifies whether the message is binary or not\n * @private\n */\nfunction receiverOnMessage(data, isBinary) {\n  this[kWebSocket].emit('message', data, isBinary);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._autoPong) websocket.pong(data, !this._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The `Sender` error event handler.\n *\n * @param {Error} The error\n * @private\n */\nfunction senderOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket.readyState === WebSocket.CLOSED) return;\n  if (websocket.readyState === WebSocket.OPEN) {\n    websocket._readyState = WebSocket.CLOSING;\n    setCloseTimer(websocket);\n  }\n\n  //\n  // `socket.end()` is used instead of `socket.destroy()` to allow the other\n  // peer to finish sending queued data. There is no need to set a timer here\n  // because `CLOSING` means that it is already set or not needed.\n  //\n  this._socket.end();\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * Set a timer to destroy the underlying raw socket of a WebSocket.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @private\n */\nfunction setCloseTimer(websocket) {\n  websocket._closeTimer = setTimeout(\n    websocket._socket.destroy.bind(websocket._socket),\n    closeTimeout\n  );\n}\n\n/**\n * The listener of the socket `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the socket `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the socket `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the socket `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","module.exports = require(\"assert\");","module.exports = require(\"buffer\");","module.exports = require(\"crypto\");","module.exports = require(\"electron\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"punycode\");","module.exports = require(\"stream\");","module.exports = require(\"tls\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"zlib\");","'use strict'\n\nconst { normalizeIPv6, normalizeIPv4, removeDotSegments, recomposeAuthority, normalizeComponentEncoding } = require('./lib/utils')\nconst SCHEMES = require('./lib/schemes')\n\nfunction normalize (uri, options) {\n  if (typeof uri === 'string') {\n    uri = serialize(parse(uri, options), options)\n  } else if (typeof uri === 'object') {\n    uri = parse(serialize(uri, options), options)\n  }\n  return uri\n}\n\nfunction resolve (baseURI, relativeURI, options) {\n  const schemelessOptions = Object.assign({ scheme: 'null' }, options)\n  const resolved = resolveComponents(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true)\n  return serialize(resolved, { ...schemelessOptions, skipEscape: true })\n}\n\nfunction resolveComponents (base, relative, options, skipNormalization) {\n  const target = {}\n  if (!skipNormalization) {\n    base = parse(serialize(base, options), options) // normalize base components\n    relative = parse(serialize(relative, options), options) // normalize relative components\n  }\n  options = options || {}\n\n  if (!options.tolerant && relative.scheme) {\n    target.scheme = relative.scheme\n    // target.authority = relative.authority;\n    target.userinfo = relative.userinfo\n    target.host = relative.host\n    target.port = relative.port\n    target.path = removeDotSegments(relative.path || '')\n    target.query = relative.query\n  } else {\n    if (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n      // target.authority = relative.authority;\n      target.userinfo = relative.userinfo\n      target.host = relative.host\n      target.port = relative.port\n      target.path = removeDotSegments(relative.path || '')\n      target.query = relative.query\n    } else {\n      if (!relative.path) {\n        target.path = base.path\n        if (relative.query !== undefined) {\n          target.query = relative.query\n        } else {\n          target.query = base.query\n        }\n      } else {\n        if (relative.path.charAt(0) === '/') {\n          target.path = removeDotSegments(relative.path)\n        } else {\n          if ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n            target.path = '/' + relative.path\n          } else if (!base.path) {\n            target.path = relative.path\n          } else {\n            target.path = base.path.slice(0, base.path.lastIndexOf('/') + 1) + relative.path\n          }\n          target.path = removeDotSegments(target.path)\n        }\n        target.query = relative.query\n      }\n      // target.authority = base.authority;\n      target.userinfo = base.userinfo\n      target.host = base.host\n      target.port = base.port\n    }\n    target.scheme = base.scheme\n  }\n\n  target.fragment = relative.fragment\n\n  return target\n}\n\nfunction equal (uriA, uriB, options) {\n  if (typeof uriA === 'string') {\n    uriA = unescape(uriA)\n    uriA = serialize(normalizeComponentEncoding(parse(uriA, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriA === 'object') {\n    uriA = serialize(normalizeComponentEncoding(uriA, true), { ...options, skipEscape: true })\n  }\n\n  if (typeof uriB === 'string') {\n    uriB = unescape(uriB)\n    uriB = serialize(normalizeComponentEncoding(parse(uriB, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriB === 'object') {\n    uriB = serialize(normalizeComponentEncoding(uriB, true), { ...options, skipEscape: true })\n  }\n\n  return uriA.toLowerCase() === uriB.toLowerCase()\n}\n\nfunction serialize (cmpts, opts) {\n  const components = {\n    host: cmpts.host,\n    scheme: cmpts.scheme,\n    userinfo: cmpts.userinfo,\n    port: cmpts.port,\n    path: cmpts.path,\n    query: cmpts.query,\n    nid: cmpts.nid,\n    nss: cmpts.nss,\n    uuid: cmpts.uuid,\n    fragment: cmpts.fragment,\n    reference: cmpts.reference,\n    resourceName: cmpts.resourceName,\n    secure: cmpts.secure,\n    error: ''\n  }\n  const options = Object.assign({}, opts)\n  const uriTokens = []\n\n  // find scheme handler\n  const schemeHandler = SCHEMES[(options.scheme || components.scheme || '').toLowerCase()]\n\n  // perform scheme specific serialization\n  if (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(components, options)\n\n  if (components.path !== undefined) {\n    if (!options.skipEscape) {\n      components.path = escape(components.path)\n\n      if (components.scheme !== undefined) {\n        components.path = components.path.split('%3A').join(':')\n      }\n    } else {\n      components.path = unescape(components.path)\n    }\n  }\n\n  if (options.reference !== 'suffix' && components.scheme) {\n    uriTokens.push(components.scheme, ':')\n  }\n\n  const authority = recomposeAuthority(components, options)\n  if (authority !== undefined) {\n    if (options.reference !== 'suffix') {\n      uriTokens.push('//')\n    }\n\n    uriTokens.push(authority)\n\n    if (components.path && components.path.charAt(0) !== '/') {\n      uriTokens.push('/')\n    }\n  }\n  if (components.path !== undefined) {\n    let s = components.path\n\n    if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n      s = removeDotSegments(s)\n    }\n\n    if (authority === undefined) {\n      s = s.replace(/^\\/\\//u, '/%2F') // don't allow the path to start with \"//\"\n    }\n\n    uriTokens.push(s)\n  }\n\n  if (components.query !== undefined) {\n    uriTokens.push('?', components.query)\n  }\n\n  if (components.fragment !== undefined) {\n    uriTokens.push('#', components.fragment)\n  }\n  return uriTokens.join('')\n}\n\nconst hexLookUp = Array.from({ length: 127 }, (v, k) => /[^!\"$&'()*+,\\-.;=_`a-z{}~]/u.test(String.fromCharCode(k)))\n\nfunction nonSimpleDomain (value) {\n  let code = 0\n  for (let i = 0, len = value.length; i < len; ++i) {\n    code = value.charCodeAt(i)\n    if (code > 126 || hexLookUp[code]) {\n      return true\n    }\n  }\n  return false\n}\n\nconst URI_PARSE = /^(?:([^#/:?]+):)?(?:\\/\\/((?:([^#/?@]*)@)?(\\[[^#/?\\]]+\\]|[^#/:?]*)(?::(\\d*))?))?([^#?]*)(?:\\?([^#]*))?(?:#((?:.|[\\n\\r])*))?/u\n\nfunction parse (uri, opts) {\n  const options = Object.assign({}, opts)\n  const parsed = {\n    scheme: undefined,\n    userinfo: undefined,\n    host: '',\n    port: undefined,\n    path: '',\n    query: undefined,\n    fragment: undefined\n  }\n  const gotEncoding = uri.indexOf('%') !== -1\n  let isIP = false\n  if (options.reference === 'suffix') uri = (options.scheme ? options.scheme + ':' : '') + '//' + uri\n\n  const matches = uri.match(URI_PARSE)\n\n  if (matches) {\n    // store each component\n    parsed.scheme = matches[1]\n    parsed.userinfo = matches[3]\n    parsed.host = matches[4]\n    parsed.port = parseInt(matches[5], 10)\n    parsed.path = matches[6] || ''\n    parsed.query = matches[7]\n    parsed.fragment = matches[8]\n\n    // fix port number\n    if (isNaN(parsed.port)) {\n      parsed.port = matches[5]\n    }\n    if (parsed.host) {\n      const ipv4result = normalizeIPv4(parsed.host)\n      if (ipv4result.isIPV4 === false) {\n        const ipv6result = normalizeIPv6(ipv4result.host, { isIPV4: false })\n        parsed.host = ipv6result.host.toLowerCase()\n        isIP = ipv6result.isIPV6\n      } else {\n        parsed.host = ipv4result.host\n        isIP = true\n      }\n    }\n    if (parsed.scheme === undefined && parsed.userinfo === undefined && parsed.host === undefined && parsed.port === undefined && !parsed.path && parsed.query === undefined) {\n      parsed.reference = 'same-document'\n    } else if (parsed.scheme === undefined) {\n      parsed.reference = 'relative'\n    } else if (parsed.fragment === undefined) {\n      parsed.reference = 'absolute'\n    } else {\n      parsed.reference = 'uri'\n    }\n\n    // check for reference errors\n    if (options.reference && options.reference !== 'suffix' && options.reference !== parsed.reference) {\n      parsed.error = parsed.error || 'URI is not a ' + options.reference + ' reference.'\n    }\n\n    // find scheme handler\n    const schemeHandler = SCHEMES[(options.scheme || parsed.scheme || '').toLowerCase()]\n\n    // check if scheme can't handle IRIs\n    if (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n      // if host component is a domain name\n      if (parsed.host && (options.domainHost || (schemeHandler && schemeHandler.domainHost)) && isIP === false && nonSimpleDomain(parsed.host)) {\n        // convert Unicode IDN -> ASCII IDN\n        try {\n          parsed.host = URL.domainToASCII(parsed.host.toLowerCase())\n        } catch (e) {\n          parsed.error = parsed.error || \"Host's domain name can not be converted to ASCII: \" + e\n        }\n      }\n      // convert IRI -> URI\n    }\n\n    if (!schemeHandler || (schemeHandler && !schemeHandler.skipNormalize)) {\n      if (gotEncoding && parsed.scheme !== undefined) {\n        parsed.scheme = unescape(parsed.scheme)\n      }\n      if (gotEncoding && parsed.host !== undefined) {\n        parsed.host = unescape(parsed.host)\n      }\n      if (parsed.path !== undefined && parsed.path.length) {\n        parsed.path = escape(unescape(parsed.path))\n      }\n      if (parsed.fragment !== undefined && parsed.fragment.length) {\n        parsed.fragment = encodeURI(decodeURIComponent(parsed.fragment))\n      }\n    }\n\n    // perform scheme specific parsing\n    if (schemeHandler && schemeHandler.parse) {\n      schemeHandler.parse(parsed, options)\n    }\n  } else {\n    parsed.error = parsed.error || 'URI can not be parsed.'\n  }\n  return parsed\n}\n\nconst fastUri = {\n  SCHEMES,\n  normalize,\n  resolve,\n  resolveComponents,\n  equal,\n  serialize,\n  parse\n}\n\nmodule.exports = fastUri\nmodule.exports.default = fastUri\nmodule.exports.fastUri = fastUri\n","'use strict'\n\nconst UUID_REG = /^[\\da-f]{8}\\b-[\\da-f]{4}\\b-[\\da-f]{4}\\b-[\\da-f]{4}\\b-[\\da-f]{12}$/iu\nconst URN_REG = /([\\da-z][\\d\\-a-z]{0,31}):((?:[\\w!$'()*+,\\-.:;=@]|%[\\da-f]{2})+)/iu\n\nfunction isSecure (wsComponents) {\n  return typeof wsComponents.secure === 'boolean' ? wsComponents.secure : String(wsComponents.scheme).toLowerCase() === 'wss'\n}\n\nfunction httpParse (components) {\n  if (!components.host) {\n    components.error = components.error || 'HTTP URIs must have a host.'\n  }\n\n  return components\n}\n\nfunction httpSerialize (components) {\n  const secure = String(components.scheme).toLowerCase() === 'https'\n\n  // normalize the default port\n  if (components.port === (secure ? 443 : 80) || components.port === '') {\n    components.port = undefined\n  }\n\n  // normalize the empty path\n  if (!components.path) {\n    components.path = '/'\n  }\n\n  // NOTE: We do not parse query strings for HTTP URIs\n  // as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n  // and not the HTTP spec.\n\n  return components\n}\n\nfunction wsParse (wsComponents) {\n// indicate if the secure flag is set\n  wsComponents.secure = isSecure(wsComponents)\n\n  // construct resouce name\n  wsComponents.resourceName = (wsComponents.path || '/') + (wsComponents.query ? '?' + wsComponents.query : '')\n  wsComponents.path = undefined\n  wsComponents.query = undefined\n\n  return wsComponents\n}\n\nfunction wsSerialize (wsComponents) {\n// normalize the default port\n  if (wsComponents.port === (isSecure(wsComponents) ? 443 : 80) || wsComponents.port === '') {\n    wsComponents.port = undefined\n  }\n\n  // ensure scheme matches secure flag\n  if (typeof wsComponents.secure === 'boolean') {\n    wsComponents.scheme = (wsComponents.secure ? 'wss' : 'ws')\n    wsComponents.secure = undefined\n  }\n\n  // reconstruct path from resource name\n  if (wsComponents.resourceName) {\n    const [path, query] = wsComponents.resourceName.split('?')\n    wsComponents.path = (path && path !== '/' ? path : undefined)\n    wsComponents.query = query\n    wsComponents.resourceName = undefined\n  }\n\n  // forbid fragment component\n  wsComponents.fragment = undefined\n\n  return wsComponents\n}\n\nfunction urnParse (urnComponents, options) {\n  if (!urnComponents.path) {\n    urnComponents.error = 'URN can not be parsed'\n    return urnComponents\n  }\n  const matches = urnComponents.path.match(URN_REG)\n  if (matches) {\n    const scheme = options.scheme || urnComponents.scheme || 'urn'\n    urnComponents.nid = matches[1].toLowerCase()\n    urnComponents.nss = matches[2]\n    const urnScheme = `${scheme}:${options.nid || urnComponents.nid}`\n    const schemeHandler = SCHEMES[urnScheme]\n    urnComponents.path = undefined\n\n    if (schemeHandler) {\n      urnComponents = schemeHandler.parse(urnComponents, options)\n    }\n  } else {\n    urnComponents.error = urnComponents.error || 'URN can not be parsed.'\n  }\n\n  return urnComponents\n}\n\nfunction urnSerialize (urnComponents, options) {\n  const scheme = options.scheme || urnComponents.scheme || 'urn'\n  const nid = urnComponents.nid.toLowerCase()\n  const urnScheme = `${scheme}:${options.nid || nid}`\n  const schemeHandler = SCHEMES[urnScheme]\n\n  if (schemeHandler) {\n    urnComponents = schemeHandler.serialize(urnComponents, options)\n  }\n\n  const uriComponents = urnComponents\n  const nss = urnComponents.nss\n  uriComponents.path = `${nid || options.nid}:${nss}`\n\n  options.skipEscape = true\n  return uriComponents\n}\n\nfunction urnuuidParse (urnComponents, options) {\n  const uuidComponents = urnComponents\n  uuidComponents.uuid = uuidComponents.nss\n  uuidComponents.nss = undefined\n\n  if (!options.tolerant && (!uuidComponents.uuid || !UUID_REG.test(uuidComponents.uuid))) {\n    uuidComponents.error = uuidComponents.error || 'UUID is not valid.'\n  }\n\n  return uuidComponents\n}\n\nfunction urnuuidSerialize (uuidComponents) {\n  const urnComponents = uuidComponents\n  // normalize UUID\n  urnComponents.nss = (uuidComponents.uuid || '').toLowerCase()\n  return urnComponents\n}\n\nconst http = {\n  scheme: 'http',\n  domainHost: true,\n  parse: httpParse,\n  serialize: httpSerialize\n}\n\nconst https = {\n  scheme: 'https',\n  domainHost: http.domainHost,\n  parse: httpParse,\n  serialize: httpSerialize\n}\n\nconst ws = {\n  scheme: 'ws',\n  domainHost: true,\n  parse: wsParse,\n  serialize: wsSerialize\n}\n\nconst wss = {\n  scheme: 'wss',\n  domainHost: ws.domainHost,\n  parse: ws.parse,\n  serialize: ws.serialize\n}\n\nconst urn = {\n  scheme: 'urn',\n  parse: urnParse,\n  serialize: urnSerialize,\n  skipNormalize: true\n}\n\nconst urnuuid = {\n  scheme: 'urn:uuid',\n  parse: urnuuidParse,\n  serialize: urnuuidSerialize,\n  skipNormalize: true\n}\n\nconst SCHEMES = {\n  http,\n  https,\n  ws,\n  wss,\n  urn,\n  'urn:uuid': urnuuid\n}\n\nmodule.exports = SCHEMES\n","'use strict'\n\nconst HEX = {\n  0: 0,\n  1: 1,\n  2: 2,\n  3: 3,\n  4: 4,\n  5: 5,\n  6: 6,\n  7: 7,\n  8: 8,\n  9: 9,\n  a: 10,\n  A: 10,\n  b: 11,\n  B: 11,\n  c: 12,\n  C: 12,\n  d: 13,\n  D: 13,\n  e: 14,\n  E: 14,\n  f: 15,\n  F: 15\n}\n\nmodule.exports = {\n  HEX\n}\n","'use strict'\n\nconst { HEX } = require('./scopedChars')\n\nfunction normalizeIPv4 (host) {\n  if (findToken(host, '.') < 3) { return { host, isIPV4: false } }\n  const matches = host.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u) || []\n  const [address] = matches\n  if (address) {\n    return { host: stripLeadingZeros(address, '.'), isIPV4: true }\n  } else {\n    return { host, isIPV4: false }\n  }\n}\n\n/**\n * @param {string[]} input\n * @param {boolean} [keepZero=false]\n * @returns {string|undefined}\n */\nfunction stringArrayToHexStripped (input, keepZero = false) {\n  let acc = ''\n  let strip = true\n  for (const c of input) {\n    if (HEX[c] === undefined) return undefined\n    if (c !== '0' && strip === true) strip = false\n    if (!strip) acc += c\n  }\n  if (keepZero && acc.length === 0) acc = '0'\n  return acc\n}\n\nfunction getIPV6 (input) {\n  let tokenCount = 0\n  const output = { error: false, address: '', zone: '' }\n  const address = []\n  const buffer = []\n  let isZone = false\n  let endipv6Encountered = false\n  let endIpv6 = false\n\n  function consume () {\n    if (buffer.length) {\n      if (isZone === false) {\n        const hex = stringArrayToHexStripped(buffer)\n        if (hex !== undefined) {\n          address.push(hex)\n        } else {\n          output.error = true\n          return false\n        }\n      }\n      buffer.length = 0\n    }\n    return true\n  }\n\n  for (let i = 0; i < input.length; i++) {\n    const cursor = input[i]\n    if (cursor === '[' || cursor === ']') { continue }\n    if (cursor === ':') {\n      if (endipv6Encountered === true) {\n        endIpv6 = true\n      }\n      if (!consume()) { break }\n      tokenCount++\n      address.push(':')\n      if (tokenCount > 7) {\n        // not valid\n        output.error = true\n        break\n      }\n      if (i - 1 >= 0 && input[i - 1] === ':') {\n        endipv6Encountered = true\n      }\n      continue\n    } else if (cursor === '%') {\n      if (!consume()) { break }\n      // switch to zone detection\n      isZone = true\n    } else {\n      buffer.push(cursor)\n      continue\n    }\n  }\n  if (buffer.length) {\n    if (isZone) {\n      output.zone = buffer.join('')\n    } else if (endIpv6) {\n      address.push(buffer.join(''))\n    } else {\n      address.push(stringArrayToHexStripped(buffer))\n    }\n  }\n  output.address = address.join('')\n  return output\n}\n\nfunction normalizeIPv6 (host, opts = {}) {\n  if (findToken(host, ':') < 2) { return { host, isIPV6: false } }\n  const ipv6 = getIPV6(host)\n\n  if (!ipv6.error) {\n    let newHost = ipv6.address\n    let escapedHost = ipv6.address\n    if (ipv6.zone) {\n      newHost += '%' + ipv6.zone\n      escapedHost += '%25' + ipv6.zone\n    }\n    return { host: newHost, escapedHost, isIPV6: true }\n  } else {\n    return { host, isIPV6: false }\n  }\n}\n\nfunction stripLeadingZeros (str, token) {\n  let out = ''\n  let skip = true\n  const l = str.length\n  for (let i = 0; i < l; i++) {\n    const c = str[i]\n    if (c === '0' && skip) {\n      if ((i + 1 <= l && str[i + 1] === token) || i + 1 === l) {\n        out += c\n        skip = false\n      }\n    } else {\n      if (c === token) {\n        skip = true\n      } else {\n        skip = false\n      }\n      out += c\n    }\n  }\n  return out\n}\n\nfunction findToken (str, token) {\n  let ind = 0\n  for (let i = 0; i < str.length; i++) {\n    if (str[i] === token) ind++\n  }\n  return ind\n}\n\nconst RDS1 = /^\\.\\.?\\//u\nconst RDS2 = /^\\/\\.(?:\\/|$)/u\nconst RDS3 = /^\\/\\.\\.(?:\\/|$)/u\nconst RDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/u\n\nfunction removeDotSegments (input) {\n  const output = []\n\n  while (input.length) {\n    if (input.match(RDS1)) {\n      input = input.replace(RDS1, '')\n    } else if (input.match(RDS2)) {\n      input = input.replace(RDS2, '/')\n    } else if (input.match(RDS3)) {\n      input = input.replace(RDS3, '/')\n      output.pop()\n    } else if (input === '.' || input === '..') {\n      input = ''\n    } else {\n      const im = input.match(RDS5)\n      if (im) {\n        const s = im[0]\n        input = input.slice(s.length)\n        output.push(s)\n      } else {\n        throw new Error('Unexpected dot segment condition')\n      }\n    }\n  }\n  return output.join('')\n}\n\nfunction normalizeComponentEncoding (components, esc) {\n  const func = esc !== true ? escape : unescape\n  if (components.scheme !== undefined) {\n    components.scheme = func(components.scheme)\n  }\n  if (components.userinfo !== undefined) {\n    components.userinfo = func(components.userinfo)\n  }\n  if (components.host !== undefined) {\n    components.host = func(components.host)\n  }\n  if (components.path !== undefined) {\n    components.path = func(components.path)\n  }\n  if (components.query !== undefined) {\n    components.query = func(components.query)\n  }\n  if (components.fragment !== undefined) {\n    components.fragment = func(components.fragment)\n  }\n  return components\n}\n\nfunction recomposeAuthority (components, options) {\n  const uriTokens = []\n\n  if (components.userinfo !== undefined) {\n    uriTokens.push(components.userinfo)\n    uriTokens.push('@')\n  }\n\n  if (components.host !== undefined) {\n    let host = unescape(components.host)\n    const ipV4res = normalizeIPv4(host)\n\n    if (ipV4res.isIPV4) {\n      host = ipV4res.host\n    } else {\n      const ipV6res = normalizeIPv6(ipV4res.host, { isIPV4: false })\n      if (ipV6res.isIPV6 === true) {\n        host = `[${ipV6res.escapedHost}]`\n      } else {\n        host = components.host\n      }\n    }\n    uriTokens.push(host)\n  }\n\n  if (typeof components.port === 'number' || typeof components.port === 'string') {\n    uriTokens.push(':')\n    uriTokens.push(String(components.port))\n  }\n\n  return uriTokens.length ? uriTokens.join('') : undefined\n};\n\nmodule.exports = {\n  recomposeAuthority,\n  normalizeComponentEncoding,\n  removeDotSegments,\n  normalizeIPv4,\n  normalizeIPv6,\n  stringArrayToHexStripped\n}\n","export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b < a ? -1\n    : b > a ? 1\n    : b >= a ? 0\n    : NaN;\n}\n","import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We can’t do this\n  // for a comparator (except for specific, known comparators) because we can’t\n  // tell if the comparator is symmetric, and an asymmetric comparator can’t be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n    delta = (d, x) => f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {bisect} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport default function threshold() {\n  var domain = [0.5],\n      range = [0, 1],\n      unknown,\n      n = 1;\n\n  function scale(x) {\n    return x != null && x <= x ? range[bisect(domain, x, 0, n)] : unknown;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return [domain[i - 1], domain[i]];\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return threshold()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}\n","import 'isomorphic-fetch';\nimport memoize from 'lodash.memoize';\nimport { scaleThreshold } from 'd3-scale';\n\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}\nfunction set(target, property, value, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.set) {\n    set = Reflect.set;\n  } else {\n    set = function set(target, property, value, receiver) {\n      var base = _superPropBase(target, property);\n      var desc;\n      if (base) {\n        desc = Object.getOwnPropertyDescriptor(base, property);\n        if (desc.set) {\n          desc.set.call(receiver, value);\n          return true;\n        } else if (!desc.writable) {\n          return false;\n        }\n      }\n      desc = Object.getOwnPropertyDescriptor(receiver, property);\n      if (desc) {\n        if (!desc.writable) {\n          return false;\n        }\n        desc.value = value;\n        Object.defineProperty(receiver, property, desc);\n      } else {\n        _defineProperty(receiver, property, value);\n      }\n      return true;\n    };\n  }\n  return set(target, property, value, receiver);\n}\nfunction _set(target, property, value, receiver, isStrict) {\n  var s = set(target, property, value, receiver || target);\n  if (!s && isStrict) {\n    throw new TypeError('failed to set property');\n  }\n  return value;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\nfunction _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"get\");\n  return _classApplyDescriptorGet(receiver, descriptor);\n}\nfunction _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"set\");\n  _classApplyDescriptorSet(receiver, descriptor, value);\n  return value;\n}\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n  return privateMap.get(receiver);\n}\nfunction _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n  return descriptor.value;\n}\nfunction _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n    descriptor.value = value;\n  }\n}\nfunction _classPrivateMethodGet(receiver, privateSet, fn) {\n  if (!privateSet.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n  return fn;\n}\nfunction _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) {\n  _checkPrivateRedeclaration(obj, privateMap);\n  privateMap.set(obj, value);\n}\nfunction _classPrivateMethodInitSpec(obj, privateSet) {\n  _checkPrivateRedeclaration(obj, privateSet);\n  privateSet.add(obj);\n}\n\nvar REL_API_URL = 'https://speed.cloudflare.com';\nvar defaultConfig = {\n  // Engine\n  autoStart: true,\n  // APIs\n  downloadApiUrl: \"\".concat(REL_API_URL, \"/__down\"),\n  uploadApiUrl: \"\".concat(REL_API_URL, \"/__up\"),\n  logMeasurementApiUrl: null,\n  logAimApiUrl: 'https://aim.cloudflare.com/__log',\n  turnServerUri: 'turn.speed.cloudflare.com:50000',\n  turnServerCredsApiUrl: \"\".concat(REL_API_URL, \"/turn-creds\"),\n  turnServerUser: null,\n  turnServerPass: null,\n  rpkiInvalidHost: 'invalid.rpki.cloudflare.com',\n  cfTraceUrl: \"\".concat(REL_API_URL, \"/cdn-cgi/trace\"),\n  includeCredentials: false,\n  // Measurements\n  measurements: [{\n    type: 'latency',\n    numPackets: 1\n  },\n  // initial ttfb estimation\n  {\n    type: 'download',\n    bytes: 1e5,\n    count: 1,\n    bypassMinDuration: true\n  },\n  // initial download estimation\n  {\n    type: 'latency',\n    numPackets: 20\n  }, {\n    type: 'download',\n    bytes: 1e5,\n    count: 9\n  }, {\n    type: 'download',\n    bytes: 1e6,\n    count: 8\n  }, {\n    type: 'upload',\n    bytes: 1e5,\n    count: 8\n  }, {\n    type: 'packetLoss',\n    numPackets: 1e3,\n    batchSize: 10,\n    batchWaitTime: 10,\n    // ms (in between batches)\n    responsesWaitTime: 3000 // ms (silent time after last sent msg)\n  }, {\n    type: 'upload',\n    bytes: 1e6,\n    count: 6\n  }, {\n    type: 'download',\n    bytes: 1e7,\n    count: 6\n  }, {\n    type: 'upload',\n    bytes: 1e7,\n    count: 4\n  }, {\n    type: 'download',\n    bytes: 2.5e7,\n    count: 4\n  }, {\n    type: 'upload',\n    bytes: 2.5e7,\n    count: 4\n  }, {\n    type: 'download',\n    bytes: 1e8,\n    count: 3\n  }, {\n    type: 'upload',\n    bytes: 5e7,\n    count: 3\n  }, {\n    type: 'download',\n    bytes: 2.5e8,\n    count: 2\n  }],\n  measureDownloadLoadedLatency: true,\n  measureUploadLoadedLatency: true,\n  loadedLatencyThrottle: 400,\n  // ms in between loaded latency requests\n  bandwidthFinishRequestDuration: 1000,\n  // download/upload duration (ms) to reach for stopping further measurements\n  estimatedServerTime: 10,\n  // ms to discount from latency calculation (if not present in response headers)\n\n  // Result interpretation\n  latencyPercentile: 0.5,\n  // Percentile used to calculate latency from a set of measurements\n  bandwidthPercentile: 0.9,\n  // Percentile used to calculate bandwidth from a set of measurements\n  bandwidthMinRequestDuration: 10,\n  // minimum duration (ms) to consider a measurement good enough to use in bandwidth calculation\n  loadedRequestMinDuration: 250,\n  // minimum duration (ms) of a request to consider it to be loading the connection\n  loadedLatencyMaxPoints: 20 // number of data points to keep for loaded latency\n};\n\nvar internalConfig = {\n  // AIM\n  aimMeasurementScoring: {\n    packetLoss: scaleThreshold([0.01, 0.05, 0.25, 0.5], [10, 5, 0, -10, -20]),\n    latency: scaleThreshold([10, 20, 50, 100, 500], [20, 10, 5, 0, -10, -20]),\n    loadedLatencyIncrease: scaleThreshold([10, 20, 50, 100, 500], [20, 10, 5, 0, -10, -20]),\n    jitter: scaleThreshold([10, 20, 100, 500], [10, 5, 0, -10, -20]),\n    download: scaleThreshold([1e6, 10e6, 50e6, 100e6], [0, 5, 10, 20, 30]),\n    upload: scaleThreshold([1e6, 10e6, 50e6, 100e6], [0, 5, 10, 20, 30])\n  },\n  aimExperiencesDefs: {\n    streaming: {\n      input: ['latency', 'packetLoss', 'download', 'loadedLatencyIncrease'],\n      pointThresholds: [15, 20, 40, 60]\n    },\n    gaming: {\n      input: ['latency', 'packetLoss', 'loadedLatencyIncrease'],\n      pointThresholds: [5, 15, 25, 30]\n    },\n    rtc: {\n      input: ['latency', 'jitter', 'packetLoss', 'loadedLatencyIncrease'],\n      pointThresholds: [5, 15, 25, 40]\n    }\n  }\n};\n\nvar MAX_RETRIES = 20;\nvar ESTIMATED_HEADER_FRACTION = 0.005; // ~.5% of packet header / payload size. used when transferSize is not available.\n\nvar cfGetServerTime = function cfGetServerTime(r) {\n  // extract server-timing from headers: server-timing: cfRequestDuration;dur=15.999794\n  var serverTiming = r.headers.get(\"server-timing\");\n  if (serverTiming) {\n    var re = serverTiming.match(/dur=([0-9.]+)/);\n    if (re) return +re[1];\n  }\n};\nvar getTtfb = function getTtfb(perf) {\n  return perf.responseStart - perf.requestStart;\n};\nvar gePayloadDownload = function gePayloadDownload(perf) {\n  return perf.responseEnd - perf.responseStart;\n}; // min 1ms\n\nvar calcDownloadDuration = function calcDownloadDuration(_ref) {\n  var ping = _ref.ping,\n    payloadDownloadTime = _ref.payloadDownloadTime;\n  return ping + payloadDownloadTime;\n}; // request duration excluding server time\n\nvar calcUploadDuration = function calcUploadDuration(_ref2) {\n  var ttfb = _ref2.ttfb;\n  return ttfb;\n};\nvar calcDownloadSpeed = function calcDownloadSpeed(_ref3, numBytes) {\n  var duration = _ref3.duration,\n    transferSize = _ref3.transferSize;\n  // use transferSize if available. if estimating from numBytes, add ~0.5% of headers.\n  var bits = 8 * (transferSize || +numBytes * (1 + ESTIMATED_HEADER_FRACTION));\n  var secs = duration / 1000;\n  return !secs ? undefined : bits / secs;\n};\nvar calcUploadSpeed = function calcUploadSpeed(_ref4, numBytes) {\n  var duration = _ref4.duration;\n  var bits = 8 * numBytes * (1 + ESTIMATED_HEADER_FRACTION); // take into account estimated packet headers\n  var secs = duration / 1000; // subtract estimated server time\n\n  return !secs ? undefined : bits / secs;\n};\nvar genContent = memoize(function (numBytes) {\n  return '0'.repeat(numBytes);\n});\n\n//\nvar _qsParams = /*#__PURE__*/new WeakMap();\nvar _fetchOptions = /*#__PURE__*/new WeakMap();\nvar _responseHook = /*#__PURE__*/new WeakMap();\nvar _onRunningChange = /*#__PURE__*/new WeakMap();\nvar _onNewMeasurementStarted = /*#__PURE__*/new WeakMap();\nvar _onMeasurementResult = /*#__PURE__*/new WeakMap();\nvar _onFinished$1 = /*#__PURE__*/new WeakMap();\nvar _onConnectionError$1 = /*#__PURE__*/new WeakMap();\nvar _measurements = /*#__PURE__*/new WeakMap();\nvar _downloadApi = /*#__PURE__*/new WeakMap();\nvar _uploadApi = /*#__PURE__*/new WeakMap();\nvar _running$2 = /*#__PURE__*/new WeakMap();\nvar _finished$1 = /*#__PURE__*/new WeakMap();\nvar _results$1 = /*#__PURE__*/new WeakMap();\nvar _measIdx = /*#__PURE__*/new WeakMap();\nvar _counter = /*#__PURE__*/new WeakMap();\nvar _retries = /*#__PURE__*/new WeakMap();\nvar _minDuration = /*#__PURE__*/new WeakMap();\nvar _throttleMs = /*#__PURE__*/new WeakMap();\nvar _estimatedServerTime = /*#__PURE__*/new WeakMap();\nvar _currentFetchPromise = /*#__PURE__*/new WeakMap();\nvar _currentNextMsmTimeoutId = /*#__PURE__*/new WeakMap();\nvar _setRunning$2 = /*#__PURE__*/new WeakSet();\nvar _saveMeasurementResults = /*#__PURE__*/new WeakSet();\nvar _nextMeasurement = /*#__PURE__*/new WeakSet();\nvar _cancelCurrentMeasurement = /*#__PURE__*/new WeakSet();\nvar BandwidthMeasurementEngine = /*#__PURE__*/function () {\n  function BandwidthMeasurementEngine(_measurements2) {\n    var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      downloadApiUrl = _ref5.downloadApiUrl,\n      uploadApiUrl = _ref5.uploadApiUrl,\n      _ref5$throttleMs = _ref5.throttleMs,\n      throttleMs = _ref5$throttleMs === void 0 ? 0 : _ref5$throttleMs,\n      _ref5$estimatedServer = _ref5.estimatedServerTime,\n      estimatedServerTime = _ref5$estimatedServer === void 0 ? 0 : _ref5$estimatedServer;\n    _classCallCheck(this, BandwidthMeasurementEngine);\n    _classPrivateMethodInitSpec(this, _cancelCurrentMeasurement);\n    _classPrivateMethodInitSpec(this, _nextMeasurement);\n    _classPrivateMethodInitSpec(this, _saveMeasurementResults);\n    // Internal methods\n    _classPrivateMethodInitSpec(this, _setRunning$2);\n    _classPrivateFieldInitSpec(this, _qsParams, {\n      writable: true,\n      value: {}\n    });\n    _classPrivateFieldInitSpec(this, _fetchOptions, {\n      writable: true,\n      value: {}\n    });\n    _defineProperty(this, \"finishRequestDuration\", 1000);\n    // download/upload duration (ms) to reach for stopping further measurements\n    _defineProperty(this, \"getServerTime\", cfGetServerTime);\n    // method to extract server time from response\n    _classPrivateFieldInitSpec(this, _responseHook, {\n      writable: true,\n      value: function value(r) {\n        return r;\n      }\n    });\n    _classPrivateFieldInitSpec(this, _onRunningChange, {\n      writable: true,\n      value: function value() {}\n    });\n    _classPrivateFieldInitSpec(this, _onNewMeasurementStarted, {\n      writable: true,\n      value: function value() {}\n    });\n    _classPrivateFieldInitSpec(this, _onMeasurementResult, {\n      writable: true,\n      value: function value() {}\n    });\n    _classPrivateFieldInitSpec(this, _onFinished$1, {\n      writable: true,\n      value: function value() {}\n    });\n    _classPrivateFieldInitSpec(this, _onConnectionError$1, {\n      writable: true,\n      value: function value() {}\n    });\n    // Internal state\n    _classPrivateFieldInitSpec(this, _measurements, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _downloadApi, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _uploadApi, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _running$2, {\n      writable: true,\n      value: false\n    });\n    _classPrivateFieldInitSpec(this, _finished$1, {\n      writable: true,\n      value: {\n        down: false,\n        up: false\n      }\n    });\n    _classPrivateFieldInitSpec(this, _results$1, {\n      writable: true,\n      value: {\n        down: {},\n        up: {}\n      }\n    });\n    _classPrivateFieldInitSpec(this, _measIdx, {\n      writable: true,\n      value: 0\n    });\n    _classPrivateFieldInitSpec(this, _counter, {\n      writable: true,\n      value: 0\n    });\n    _classPrivateFieldInitSpec(this, _retries, {\n      writable: true,\n      value: 0\n    });\n    _classPrivateFieldInitSpec(this, _minDuration, {\n      writable: true,\n      value: -Infinity\n    });\n    // of current measurement\n    _classPrivateFieldInitSpec(this, _throttleMs, {\n      writable: true,\n      value: 0\n    });\n    _classPrivateFieldInitSpec(this, _estimatedServerTime, {\n      writable: true,\n      value: 0\n    });\n    _classPrivateFieldInitSpec(this, _currentFetchPromise, {\n      writable: true,\n      value: undefined\n    });\n    _classPrivateFieldInitSpec(this, _currentNextMsmTimeoutId, {\n      writable: true,\n      value: undefined\n    });\n    if (!_measurements2) throw new Error('Missing measurements argument');\n    if (!downloadApiUrl) throw new Error('Missing downloadApiUrl argument');\n    if (!uploadApiUrl) throw new Error('Missing uploadApiUrl argument');\n    _classPrivateFieldSet(this, _measurements, _measurements2);\n    _classPrivateFieldSet(this, _downloadApi, downloadApiUrl);\n    _classPrivateFieldSet(this, _uploadApi, uploadApiUrl);\n    _classPrivateFieldSet(this, _throttleMs, throttleMs);\n    _classPrivateFieldSet(this, _estimatedServerTime, Math.max(0, estimatedServerTime));\n  }\n\n  // Public attributes\n  _createClass(BandwidthMeasurementEngine, [{\n    key: \"results\",\n    get: function get() {\n      // read access to results\n      return _classPrivateFieldGet(this, _results$1);\n    }\n  }, {\n    key: \"qsParams\",\n    get:\n    // additional query string params to include in the requests\n    function get() {\n      return _classPrivateFieldGet(this, _qsParams);\n    },\n    set: function set(v) {\n      _classPrivateFieldSet(this, _qsParams, v);\n    }\n  }, {\n    key: \"fetchOptions\",\n    get:\n    // additional options included in the requests\n    function get() {\n      return _classPrivateFieldGet(this, _fetchOptions);\n    },\n    set: function set(v) {\n      _classPrivateFieldSet(this, _fetchOptions, v);\n    }\n  }, {\n    key: \"responseHook\",\n    set:\n    // pipe-through of response objects\n    function set(f) {\n      _classPrivateFieldSet(this, _responseHook, f);\n    }\n  }, {\n    key: \"onRunningChange\",\n    set:\n    // callback invoked when engine starts/stops\n    function set(f) {\n      _classPrivateFieldSet(this, _onRunningChange, f);\n    }\n  }, {\n    key: \"onNewMeasurementStarted\",\n    set:\n    // callback invoked when a new item in the measurement list is started\n    function set(f) {\n      _classPrivateFieldSet(this, _onNewMeasurementStarted, f);\n    }\n  }, {\n    key: \"onMeasurementResult\",\n    set:\n    // callback invoked when a new measurement result arrives\n    function set(f) {\n      _classPrivateFieldSet(this, _onMeasurementResult, f);\n    }\n  }, {\n    key: \"onFinished\",\n    set:\n    // callback invoked when all the measurements are finished\n    function set(f) {\n      _classPrivateFieldSet(this, _onFinished$1, f);\n    }\n  }, {\n    key: \"onConnectionError\",\n    set:\n    // Invoked when unable to get a response from the API\n    function set(f) {\n      _classPrivateFieldSet(this, _onConnectionError$1, f);\n    }\n\n    // Public methods\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      clearTimeout(_classPrivateFieldGet(this, _currentNextMsmTimeoutId));\n      _classPrivateMethodGet(this, _cancelCurrentMeasurement, _cancelCurrentMeasurement2).call(this);\n      _classPrivateMethodGet(this, _setRunning$2, _setRunning2$2).call(this, false);\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      if (!_classPrivateFieldGet(this, _running$2)) {\n        _classPrivateMethodGet(this, _setRunning$2, _setRunning2$2).call(this, true);\n        _classPrivateMethodGet(this, _nextMeasurement, _nextMeasurement2).call(this);\n      }\n    }\n  }]);\n  return BandwidthMeasurementEngine;\n}();\nfunction _setRunning2$2(running) {\n  var _this = this;\n  if (running !== _classPrivateFieldGet(this, _running$2)) {\n    _classPrivateFieldSet(this, _running$2, running);\n    setTimeout(function () {\n      return _classPrivateFieldGet(_this, _onRunningChange).call(_this, _classPrivateFieldGet(_this, _running$2));\n    });\n  }\n}\nfunction _saveMeasurementResults2(measIdx, measTiming) {\n  var _this2 = this;\n  var _classPrivateFieldGet2 = _classPrivateFieldGet(this, _measurements)[measIdx],\n    bytes = _classPrivateFieldGet2.bytes,\n    dir = _classPrivateFieldGet2.dir;\n  var results = _classPrivateFieldGet(this, _results$1);\n  var bytesResult = results[dir].hasOwnProperty(bytes) ? results[dir][bytes] : {\n    timings: [],\n    // count all measurements with same bytes and direction\n    numMeasurements: _classPrivateFieldGet(this, _measurements).filter(function (_ref6) {\n      var b = _ref6.bytes,\n        d = _ref6.dir;\n      return bytes === b && dir === d;\n    }).map(function (m) {\n      return m.count;\n    }).reduce(function (agg, cnt) {\n      return agg + cnt;\n    }, 0)\n  };\n  !!measTiming && bytesResult.timings.push(measTiming);\n  bytesResult.timings = bytesResult.timings.slice(-bytesResult.numMeasurements);\n  results[dir][bytes] = bytesResult;\n  if (measTiming) {\n    setTimeout(function () {\n      _classPrivateFieldGet(_this2, _onMeasurementResult).call(_this2, _objectSpread2({\n        type: dir,\n        bytes: bytes\n      }, measTiming), results);\n    });\n  } else {\n    _classPrivateFieldGet(this, _onNewMeasurementStarted).call(this, _classPrivateFieldGet(this, _measurements)[measIdx], results);\n  }\n}\nfunction _nextMeasurement2() {\n  var _this3 = this;\n  var measurements = _classPrivateFieldGet(this, _measurements);\n  var meas = measurements[_classPrivateFieldGet(this, _measIdx)];\n  if (_classPrivateFieldGet(this, _counter) >= meas.count) {\n    // Finished current measurement\n    var finished = _classPrivateFieldGet(this, _finished$1);\n    if (_classPrivateFieldGet(this, _minDuration) > this.finishRequestDuration && !meas.bypassMinDuration) {\n      // mark direction as finished\n      var _dir = meas.dir;\n      _classPrivateFieldGet(this, _finished$1)[_dir] = true;\n      Object.values(_classPrivateFieldGet(this, _finished$1)).every(function (finished) {\n        return finished;\n      }) && _classPrivateFieldGet(this, _onFinished$1).call(this, _classPrivateFieldGet(this, _results$1));\n    }\n\n    // clear settings\n    _classPrivateFieldSet(this, _counter, 0);\n    _classPrivateFieldSet(this, _minDuration, -Infinity);\n    performance.clearResourceTimings();\n    do {\n      _classPrivateFieldSet(this, _measIdx, _classPrivateFieldGet(this, _measIdx) + 1); // skip through finished measurements\n    } while (_classPrivateFieldGet(this, _measIdx) < measurements.length && finished[measurements[_classPrivateFieldGet(this, _measIdx)].dir]);\n    if (_classPrivateFieldGet(this, _measIdx) >= measurements.length) {\n      // reached the end: halt further measurements\n      _classPrivateFieldSet(this, _finished$1, {\n        down: true,\n        up: true\n      });\n      _classPrivateMethodGet(this, _setRunning$2, _setRunning2$2).call(this, false);\n      _classPrivateFieldGet(this, _onFinished$1).call(this, _classPrivateFieldGet(this, _results$1));\n      return;\n    }\n    meas = measurements[_classPrivateFieldGet(this, _measIdx)];\n  }\n  var measIdx = _classPrivateFieldGet(this, _measIdx);\n  if (_classPrivateFieldGet(this, _counter) === 0) {\n    _classPrivateMethodGet(this, _saveMeasurementResults, _saveMeasurementResults2).call(this, measIdx); // register measurement start\n  }\n\n  var _meas = meas,\n    numBytes = _meas.bytes,\n    dir = _meas.dir;\n  var isDown = dir === 'down';\n  var apiUrl = isDown ? _classPrivateFieldGet(this, _downloadApi) : _classPrivateFieldGet(this, _uploadApi);\n  var qsParams = Object.assign({}, _classPrivateFieldGet(this, _qsParams));\n  isDown && (qsParams.bytes = \"\".concat(numBytes));\n  var url = \"\".concat(apiUrl.startsWith('http') || apiUrl.startsWith('//') ? '' : window.location.origin // use abs to match perf timing urls\n  ).concat(apiUrl, \"?\").concat(Object.entries(qsParams).map(function (_ref7) {\n    var _ref8 = _slicedToArray(_ref7, 2),\n      k = _ref8[0],\n      v = _ref8[1];\n    return \"\".concat(k, \"=\").concat(v);\n  }).join('&'));\n  var fetchOpt = Object.assign({}, isDown ? {} : {\n    method: 'POST',\n    body: genContent(numBytes)\n  }, _classPrivateFieldGet(this, _fetchOptions));\n  var serverTime;\n  var curPromise = _classPrivateFieldSet(this, _currentFetchPromise, fetch(url, fetchOpt) // eslint-disable-line compat/compat\n  .then(function (r) {\n    if (r.ok) return r;\n    throw Error(r.statusText);\n  }).then(function (r) {\n    _this3.getServerTime && (serverTime = _this3.getServerTime(r));\n    return r;\n  }).then(function (r) {\n    return r.text().then(function (body) {\n      _classPrivateFieldGet(_this3, _responseHook) && _classPrivateFieldGet(_this3, _responseHook).call(_this3, {\n        url: url,\n        headers: r.headers,\n        body: body\n      });\n      return body;\n    });\n  }).then(function (_, reject) {\n    if (curPromise._cancel) {\n      reject('cancelled');\n      return;\n    }\n    var perf = performance.getEntriesByName(url).slice(-1)[0]; // get latest perf timing\n    var timing = {\n      transferSize: perf.transferSize,\n      ttfb: getTtfb(perf),\n      payloadDownloadTime: gePayloadDownload(perf),\n      serverTime: serverTime || -1,\n      measTime: new Date()\n    };\n    timing.ping = Math.max(1e-2, timing.ttfb - (serverTime || _classPrivateFieldGet(_this3, _estimatedServerTime))); // ttfb = network latency + server time\n\n    timing.duration = (isDown ? calcDownloadDuration : calcUploadDuration)(timing);\n    timing.bps = (isDown ? calcDownloadSpeed : calcUploadSpeed)(timing, numBytes);\n    if (isDown && numBytes) {\n      var reqSize = +numBytes;\n      if (timing.transferSize && (timing.transferSize < reqSize || timing.transferSize / reqSize > 1.05)) {\n        // log if transferSize is too different from requested size\n        console.warn(\"Requested \".concat(reqSize, \"B but received \").concat(timing.transferSize, \"B (\").concat(Math.round(timing.transferSize / reqSize * 1e4) / 1e2, \"%).\"));\n      }\n    }\n    _classPrivateMethodGet(_this3, _saveMeasurementResults, _saveMeasurementResults2).call(_this3, measIdx, timing);\n    var requestDuration = timing.duration;\n    _classPrivateFieldSet(_this3, _minDuration, _classPrivateFieldGet(_this3, _minDuration) < 0 ? requestDuration : Math.min(_classPrivateFieldGet(_this3, _minDuration), requestDuration)); // carry minimum request duration\n\n    _classPrivateFieldSet(_this3, _counter, _classPrivateFieldGet(_this3, _counter) + 1);\n    _classPrivateFieldSet(_this3, _retries, 0);\n    if (_classPrivateFieldGet(_this3, _throttleMs)) {\n      _classPrivateFieldSet(_this3, _currentNextMsmTimeoutId, setTimeout(function () {\n        return _classPrivateMethodGet(_this3, _nextMeasurement, _nextMeasurement2).call(_this3);\n      }, _classPrivateFieldGet(_this3, _throttleMs)));\n    } else {\n      _classPrivateMethodGet(_this3, _nextMeasurement, _nextMeasurement2).call(_this3);\n    }\n  })[\"catch\"](function (error) {\n    var _this$retries, _this$retries2;\n    if (curPromise._cancel) return;\n    console.warn(\"Error fetching \".concat(url, \": \").concat(error));\n    if ((_classPrivateFieldSet(_this3, _retries, (_this$retries = _classPrivateFieldGet(_this3, _retries), _this$retries2 = _this$retries++, _this$retries)), _this$retries2) < MAX_RETRIES) {\n      _classPrivateMethodGet(_this3, _nextMeasurement, _nextMeasurement2).call(_this3); // keep trying\n    } else {\n      _classPrivateFieldSet(_this3, _retries, 0);\n      _classPrivateMethodGet(_this3, _setRunning$2, _setRunning2$2).call(_this3, false);\n      _classPrivateFieldGet(_this3, _onConnectionError$1).call(_this3, \"Connection failed to \".concat(url, \". Gave up after \").concat(MAX_RETRIES, \" retries.\"));\n    }\n  }));\n}\nfunction _cancelCurrentMeasurement2() {\n  var curPromise = _classPrivateFieldGet(this, _currentFetchPromise);\n  curPromise && (curPromise._cancel = true);\n}\nvar BandwidthEngine$2 = BandwidthMeasurementEngine;\n\nvar _excluded$5 = [\"measureParallelLatency\", \"parallelLatencyThrottleMs\", \"downloadApiUrl\", \"uploadApiUrl\", \"estimatedServerTime\"];\nvar _latencyEngine = /*#__PURE__*/new WeakMap();\nvar _setLatencyRunning = /*#__PURE__*/new WeakSet();\nvar BandwidthWithParallelLatencyEngine = /*#__PURE__*/function (_BandwidthEngine) {\n  _inherits(BandwidthWithParallelLatencyEngine, _BandwidthEngine);\n  var _super = _createSuper(BandwidthWithParallelLatencyEngine);\n  function BandwidthWithParallelLatencyEngine(measurements) {\n    var _thisSuper, _thisSuper2, _this;\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$measureParallelL = _ref.measureParallelLatency,\n      measureParallelLatency = _ref$measureParallelL === void 0 ? false : _ref$measureParallelL,\n      _ref$parallelLatencyT = _ref.parallelLatencyThrottleMs,\n      parallelLatencyThrottleMs = _ref$parallelLatencyT === void 0 ? 100 : _ref$parallelLatencyT,\n      downloadApiUrl = _ref.downloadApiUrl,\n      uploadApiUrl = _ref.uploadApiUrl,\n      _ref$estimatedServerT = _ref.estimatedServerTime,\n      estimatedServerTime = _ref$estimatedServerT === void 0 ? 0 : _ref$estimatedServerT,\n      ptProps = _objectWithoutProperties(_ref, _excluded$5);\n    _classCallCheck(this, BandwidthWithParallelLatencyEngine);\n    _this = _super.call(this, measurements, _objectSpread2({\n      downloadApiUrl: downloadApiUrl,\n      uploadApiUrl: uploadApiUrl,\n      estimatedServerTime: estimatedServerTime\n    }, ptProps));\n    // Internal methods\n    _classPrivateMethodInitSpec(_assertThisInitialized(_this), _setLatencyRunning);\n    // Internal state\n    _classPrivateFieldInitSpec(_assertThisInitialized(_this), _latencyEngine, {\n      writable: true,\n      value: void 0\n    });\n    if (measureParallelLatency) {\n      _classPrivateFieldSet(_assertThisInitialized(_this), _latencyEngine, new BandwidthEngine$2([{\n        dir: 'down',\n        bytes: 0,\n        count: Infinity,\n        bypassMinDuration: true\n      }], {\n        downloadApiUrl: downloadApiUrl,\n        uploadApiUrl: uploadApiUrl,\n        estimatedServerTime: estimatedServerTime,\n        throttleMs: parallelLatencyThrottleMs\n      }));\n      _classPrivateFieldGet(_assertThisInitialized(_this), _latencyEngine).qsParams = {\n        during: \"\".concat(measurements[0].dir, \"load\")\n      };\n      _set((_thisSuper = _assertThisInitialized(_this), _getPrototypeOf(BandwidthWithParallelLatencyEngine.prototype)), \"onRunningChange\", _classPrivateMethodGet(_assertThisInitialized(_this), _setLatencyRunning, _setLatencyRunning2), _thisSuper, true);\n      _set((_thisSuper2 = _assertThisInitialized(_this), _getPrototypeOf(BandwidthWithParallelLatencyEngine.prototype)), \"onConnectionError\", function () {\n        return _classPrivateFieldGet(_assertThisInitialized(_this), _latencyEngine).pause();\n      }, _thisSuper2, true);\n    }\n    return _this;\n  }\n\n  // Public attributes\n  _createClass(BandwidthWithParallelLatencyEngine, [{\n    key: \"latencyResults\",\n    get: function get() {\n      // read access to latency results\n      return _classPrivateFieldGet(this, _latencyEngine) && _classPrivateFieldGet(this, _latencyEngine).results.down[0].timings;\n    }\n\n    // callback invoked when a new parallel latency result arrives\n  }, {\n    key: \"onParallelLatencyResult\",\n    set: function set(f) {\n      _classPrivateFieldGet(this, _latencyEngine) && (_classPrivateFieldGet(this, _latencyEngine).onMeasurementResult = function (res) {\n        return f(res);\n      });\n    }\n\n    // Overridden attributes\n  }, {\n    key: \"fetchOptions\",\n    get: function get() {\n      return _get(_getPrototypeOf(BandwidthWithParallelLatencyEngine.prototype), \"fetchOptions\", this);\n    },\n    set: function set(fetchOptions) {\n      _set(_getPrototypeOf(BandwidthWithParallelLatencyEngine.prototype), \"fetchOptions\", fetchOptions, this, true);\n      _classPrivateFieldGet(this, _latencyEngine) && (_classPrivateFieldGet(this, _latencyEngine).fetchOptions = fetchOptions);\n    }\n  }, {\n    key: \"onRunningChange\",\n    set: function set(onRunningChange) {\n      var _this2 = this;\n      _set(_getPrototypeOf(BandwidthWithParallelLatencyEngine.prototype), \"onRunningChange\", function (running) {\n        _classPrivateMethodGet(_this2, _setLatencyRunning, _setLatencyRunning2).call(_this2, running);\n        onRunningChange(running);\n      }, this, true);\n    }\n  }, {\n    key: \"onConnectionError\",\n    set: function set(onConnectionError) {\n      var _this3 = this;\n      _set(_getPrototypeOf(BandwidthWithParallelLatencyEngine.prototype), \"onConnectionError\", function () {\n        _classPrivateFieldGet(_this3, _latencyEngine) && _classPrivateFieldGet(_this3, _latencyEngine).pause();\n        onConnectionError.apply(void 0, arguments);\n      }, this, true);\n    }\n  }]);\n  return BandwidthWithParallelLatencyEngine;\n}(BandwidthEngine$2);\nfunction _setLatencyRunning2(running) {\n  var _this4 = this;\n  _classPrivateFieldGet(this, _latencyEngine) && (!running ? _classPrivateFieldGet(this, _latencyEngine).pause() :\n  // slight delay in starting latency measurements\n  setTimeout(function () {\n    return _classPrivateFieldGet(_this4, _latencyEngine).play();\n  }, 20));\n}\nvar BandwidthEngine$1 = BandwidthWithParallelLatencyEngine;\n\nvar _excluded$4 = [\"measurementId\", \"logApiUrl\"];\nvar _measurementId$1 = /*#__PURE__*/new WeakMap();\nvar _token = /*#__PURE__*/new WeakMap();\nvar _requestTime = /*#__PURE__*/new WeakMap();\nvar _logApiUrl = /*#__PURE__*/new WeakMap();\nvar _loggingResponseHook = /*#__PURE__*/new WeakSet();\nvar _logMeasurement = /*#__PURE__*/new WeakSet();\nvar LoggingBandwidthEngine = /*#__PURE__*/function (_BandwidthEngine) {\n  _inherits(LoggingBandwidthEngine, _BandwidthEngine);\n  var _super = _createSuper(LoggingBandwidthEngine);\n  function LoggingBandwidthEngine(measurements) {\n    var _thisSuper, _thisSuper2, _thisSuper3, _this;\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      measurementId = _ref.measurementId,\n      logApiUrl = _ref.logApiUrl,\n      ptProps = _objectWithoutProperties(_ref, _excluded$4);\n    _classCallCheck(this, LoggingBandwidthEngine);\n    _this = _super.call(this, measurements, ptProps);\n    _classPrivateMethodInitSpec(_assertThisInitialized(_this), _logMeasurement);\n    // Internal methods\n    _classPrivateMethodInitSpec(_assertThisInitialized(_this), _loggingResponseHook);\n    // Internal state\n    _classPrivateFieldInitSpec(_assertThisInitialized(_this), _measurementId$1, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(_assertThisInitialized(_this), _token, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(_assertThisInitialized(_this), _requestTime, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(_assertThisInitialized(_this), _logApiUrl, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldSet(_assertThisInitialized(_this), _measurementId$1, measurementId);\n    _classPrivateFieldSet(_assertThisInitialized(_this), _logApiUrl, logApiUrl);\n    _set((_thisSuper = _assertThisInitialized(_this), _getPrototypeOf(LoggingBandwidthEngine.prototype)), \"qsParams\", logApiUrl ? {\n      measId: _classPrivateFieldGet(_assertThisInitialized(_this), _measurementId$1)\n    } : {}, _thisSuper, true);\n    _set((_thisSuper2 = _assertThisInitialized(_this), _getPrototypeOf(LoggingBandwidthEngine.prototype)), \"responseHook\", function (r) {\n      return _classPrivateMethodGet(_assertThisInitialized(_this), _loggingResponseHook, _loggingResponseHook2).call(_assertThisInitialized(_this), r);\n    }, _thisSuper2, true);\n    _set((_thisSuper3 = _assertThisInitialized(_this), _getPrototypeOf(LoggingBandwidthEngine.prototype)), \"onMeasurementResult\", function (meas) {\n      return _classPrivateMethodGet(_assertThisInitialized(_this), _logMeasurement, _logMeasurement2).call(_assertThisInitialized(_this), meas);\n    }, _thisSuper3, true);\n    return _this;\n  }\n\n  // Overridden attributes\n  _createClass(LoggingBandwidthEngine, [{\n    key: \"qsParams\",\n    set: function set(qsParams) {\n      _set(_getPrototypeOf(LoggingBandwidthEngine.prototype), \"qsParams\", _classPrivateFieldGet(this, _logApiUrl) ? _objectSpread2({\n        measId: _classPrivateFieldGet(this, _measurementId$1)\n      }, qsParams) : qsParams, this, true);\n    }\n  }, {\n    key: \"responseHook\",\n    set: function set(responseHook) {\n      var _this2 = this;\n      _set(_getPrototypeOf(LoggingBandwidthEngine.prototype), \"responseHook\", function (r) {\n        responseHook(r);\n        _classPrivateMethodGet(_this2, _loggingResponseHook, _loggingResponseHook2).call(_this2, r);\n      }, this, true);\n    }\n  }, {\n    key: \"onMeasurementResult\",\n    set: function set(onMeasurementResult) {\n      var _this3 = this;\n      _set(_getPrototypeOf(LoggingBandwidthEngine.prototype), \"onMeasurementResult\", function (meas) {\n        for (var _len = arguments.length, restArgs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          restArgs[_key - 1] = arguments[_key];\n        }\n        onMeasurementResult.apply(void 0, [meas].concat(restArgs));\n        _classPrivateMethodGet(_this3, _logMeasurement, _logMeasurement2).call(_this3, meas);\n      }, this, true);\n    }\n  }]);\n  return LoggingBandwidthEngine;\n}(BandwidthEngine$1);\nfunction _loggingResponseHook2(r) {\n  if (!_classPrivateFieldGet(this, _logApiUrl)) return;\n\n  // get request time\n  _classPrivateFieldSet(this, _requestTime, +r.headers.get(\"cf-meta-request-time\"));\n\n  // get token in payload\n  _classPrivateFieldSet(this, _token, r.body.slice(-300).split('___').pop());\n}\nfunction _logMeasurement2(measData) {\n  if (!_classPrivateFieldGet(this, _logApiUrl)) return;\n  var logData = {\n    type: measData.type,\n    bytes: measData.bytes,\n    ping: Math.round(measData.ping),\n    // round to ms\n    ttfb: Math.round(measData.ttfb),\n    // round to ms\n    payloadDownloadTime: Math.round(measData.payloadDownloadTime),\n    duration: Math.round(measData.duration),\n    transferSize: Math.round(measData.transferSize),\n    serverTime: Math.round(measData.serverTime),\n    token: _classPrivateFieldGet(this, _token),\n    requestTime: _classPrivateFieldGet(this, _requestTime),\n    measId: _classPrivateFieldGet(this, _measurementId$1)\n  };\n  _classPrivateFieldSet(this, _token, null);\n  _classPrivateFieldSet(this, _requestTime, null);\n\n  // eslint-disable-next-line compat/compat\n  fetch(_classPrivateFieldGet(this, _logApiUrl), _objectSpread2({\n    method: 'POST',\n    body: JSON.stringify(logData)\n  }, this.fetchOptions));\n}\nvar BandwidthEngine = LoggingBandwidthEngine;\n\nvar _running$1 = /*#__PURE__*/new WeakMap();\nvar _currentPromise = /*#__PURE__*/new WeakMap();\nvar _promiseFn = /*#__PURE__*/new WeakMap();\nvar _setRunning$1 = /*#__PURE__*/new WeakSet();\nvar _next$1 = /*#__PURE__*/new WeakSet();\nvar _cancelCurrent = /*#__PURE__*/new WeakSet();\nvar PromiseEngine = /*#__PURE__*/function () {\n  function PromiseEngine(promiseFn) {\n    _classCallCheck(this, PromiseEngine);\n    _classPrivateMethodInitSpec(this, _cancelCurrent);\n    _classPrivateMethodInitSpec(this, _next$1);\n    // Internal methods\n    _classPrivateMethodInitSpec(this, _setRunning$1);\n    // Internal state\n    _classPrivateFieldInitSpec(this, _running$1, {\n      writable: true,\n      value: false\n    });\n    _classPrivateFieldInitSpec(this, _currentPromise, {\n      writable: true,\n      value: undefined\n    });\n    _classPrivateFieldInitSpec(this, _promiseFn, {\n      writable: true,\n      value: void 0\n    });\n    if (!promiseFn) throw new Error(\"Missing operation to perform\");\n    _classPrivateFieldSet(this, _promiseFn, promiseFn);\n    this.play();\n  }\n\n  // Public methods\n  _createClass(PromiseEngine, [{\n    key: \"pause\",\n    value: function pause() {\n      _classPrivateMethodGet(this, _cancelCurrent, _cancelCurrent2).call(this);\n      _classPrivateMethodGet(this, _setRunning$1, _setRunning2$1).call(this, false);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.pause();\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      if (!_classPrivateFieldGet(this, _running$1)) {\n        _classPrivateMethodGet(this, _setRunning$1, _setRunning2$1).call(this, true);\n        _classPrivateMethodGet(this, _next$1, _next2$1).call(this);\n      }\n    }\n  }]);\n  return PromiseEngine;\n}();\nfunction _setRunning2$1(running) {\n  if (running !== _classPrivateFieldGet(this, _running$1)) {\n    _classPrivateFieldSet(this, _running$1, running);\n  }\n}\nfunction _next2$1() {\n  var _this2 = this;\n  var curPromise = _classPrivateFieldSet(this, _currentPromise, _classPrivateFieldGet(this, _promiseFn).call(this) // eslint-disable-line compat/compat\n  .then(function () {\n    !curPromise._cancel && _classPrivateMethodGet(_this2, _next$1, _next2$1).call(_this2);\n  }));\n}\nfunction _cancelCurrent2() {\n  var curPromise = _classPrivateFieldGet(this, _currentPromise);\n  curPromise && (curPromise._cancel = true);\n}\nvar _engines = /*#__PURE__*/new WeakMap();\nvar LoadNetworkEngine = /*#__PURE__*/function () {\n  function LoadNetworkEngine() {\n    var _this = this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      download = _ref.download,\n      upload = _ref.upload;\n    _classCallCheck(this, LoadNetworkEngine);\n    // Public attributes\n    _defineProperty(this, \"qsParams\", {});\n    // additional query string params to include in the requests\n    _defineProperty(this, \"fetchOptions\", {});\n    // Internal state\n    _classPrivateFieldInitSpec(this, _engines, {\n      writable: true,\n      value: []\n    });\n    // Expected attrs for each: { apiUrl, chunkSize }\n    if (!download && !upload) throw new Error('Missing at least one of download/upload config');\n    [[download, 'download'], [upload, 'upload']].filter(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 1),\n        cfg = _ref3[0];\n      return cfg;\n    }).forEach(function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n        cfg = _ref5[0],\n        type = _ref5[1];\n      var apiUrl = cfg.apiUrl,\n        chunkSize = cfg.chunkSize;\n      if (!apiUrl) throw new Error(\"Missing \".concat(type, \" apiUrl argument\"));\n      if (!chunkSize) throw new Error(\"Missing \".concat(type, \" chunkSize argument\"));\n    });\n    var getLoadEngine = function getLoadEngine(_ref6) {\n      var apiUrl = _ref6.apiUrl,\n        _ref6$qsParams = _ref6.qsParams,\n        qsParams = _ref6$qsParams === void 0 ? {} : _ref6$qsParams,\n        _ref6$fetchOptions = _ref6.fetchOptions,\n        fetchOptions = _ref6$fetchOptions === void 0 ? {} : _ref6$fetchOptions;\n      return new PromiseEngine(function () {\n        var fetchQsParams = Object.assign({}, qsParams, _this.qsParams);\n        var url = \"\".concat(apiUrl.startsWith('http') || apiUrl.startsWith('//') ? '' : window.location.origin // use abs to match perf timing urls\n        ).concat(apiUrl, \"?\").concat(Object.entries(fetchQsParams).map(function (_ref7) {\n          var _ref8 = _slicedToArray(_ref7, 2),\n            k = _ref8[0],\n            v = _ref8[1];\n          return \"\".concat(k, \"=\").concat(v);\n        }).join('&'));\n        var fetchOpt = Object.assign({}, fetchOptions, _this.fetchOptions);\n        return fetch(url, fetchOpt).then(function (r) {\n          if (r.ok) return r;\n          throw Error(r.statusText);\n        }).then(function (r) {\n          return r.text();\n        });\n      });\n    };\n    download && _classPrivateFieldGet(this, _engines).push(getLoadEngine({\n      apiUrl: download.apiUrl,\n      qsParams: {\n        bytes: \"\".concat(download.chunkSize)\n      }\n    }));\n    upload && _classPrivateFieldGet(this, _engines).push(getLoadEngine({\n      apiUrl: upload.apiUrl,\n      fetchOptions: {\n        method: 'POST',\n        body: '0'.repeat(upload.chunkSize)\n      }\n    }));\n  }\n  _createClass(LoadNetworkEngine, [{\n    key: \"pause\",\n    value:\n    // additional options included in the requests\n    // Public methods\n    function pause() {\n      _classPrivateFieldGet(this, _engines).forEach(function (engine) {\n        return engine.pause();\n      });\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.pause();\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      _classPrivateFieldGet(this, _engines).forEach(function (engine) {\n        return engine.play();\n      });\n    }\n  }]);\n  return LoadNetworkEngine;\n}();\nvar LoadNetworkEngine$1 = LoadNetworkEngine;\n\nvar _excluded$3 = [\"iceServers\", \"acceptIceCandidate\", \"dataChannelCfg\"];\nvar _established = /*#__PURE__*/new WeakMap();\nvar _sender = /*#__PURE__*/new WeakMap();\nvar _receiver = /*#__PURE__*/new WeakMap();\nvar _senderDc = /*#__PURE__*/new WeakMap();\nvar _receiverDc = /*#__PURE__*/new WeakMap();\nvar SelfWebRtcDataConnection = /*#__PURE__*/function () {\n  function SelfWebRtcDataConnection() {\n    var _this = this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$iceServers = _ref.iceServers,\n      iceServers = _ref$iceServers === void 0 ? [] : _ref$iceServers,\n      _ref$acceptIceCandida = _ref.acceptIceCandidate,\n      acceptIceCandidate = _ref$acceptIceCandida === void 0 ? function (candidate) {\n        var protocol = candidate.protocol || '';\n        // parsed webRTC candidate properties not extracted in Firefox: https://developer.mozilla.org/en-US/docs/Web/API/RTCIceCandidate\n        if (!protocol && candidate.candidate) {\n          var sdpAttrs = candidate.candidate.split(' ');\n          sdpAttrs.length >= 3 && (protocol = sdpAttrs[2]);\n        }\n        return protocol.toLowerCase() === 'udp';\n      } : _ref$acceptIceCandida,\n      _ref$dataChannelCfg = _ref.dataChannelCfg,\n      dataChannelCfg = _ref$dataChannelCfg === void 0 ? {\n        ordered: false,\n        maxRetransmits: 0\n      } : _ref$dataChannelCfg,\n      rtcPeerConnectionCfg = _objectWithoutProperties(_ref, _excluded$3);\n    _classCallCheck(this, SelfWebRtcDataConnection);\n    // Public attributes\n    _defineProperty(this, \"onOpen\", function () {});\n    // callback invoked when WebRTC TURN connection is established\n    _defineProperty(this, \"onClose\", function () {});\n    // callback invoked when WebRTC TURN connection is closed\n    _defineProperty(this, \"onMessageReceived\", function () {});\n    // Internal state\n    _classPrivateFieldInitSpec(this, _established, {\n      writable: true,\n      value: false\n    });\n    _classPrivateFieldInitSpec(this, _sender, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _receiver, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _senderDc, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _receiverDc, {\n      writable: true,\n      value: void 0\n    });\n    var sender = new RTCPeerConnection(_objectSpread2({\n      iceServers: iceServers\n    }, rtcPeerConnectionCfg));\n    var receiver = new RTCPeerConnection(_objectSpread2({\n      iceServers: iceServers\n    }, rtcPeerConnectionCfg));\n    var senderDc = sender.createDataChannel('channel', dataChannelCfg);\n    senderDc.onopen = function () {\n      _classPrivateFieldSet(_this, _established, true);\n      _this.onOpen();\n    };\n    senderDc.onclose = function () {\n      return _this.close();\n    };\n    // senderDc.onmessage = msg => this.#onMessage(msg.data);\n\n    receiver.ondatachannel = function (e) {\n      var dc = e.channel;\n      dc.onclose = function () {\n        return _this.close();\n      };\n      dc.onmessage = function (msg) {\n        return _this.onMessageReceived(msg.data);\n      };\n      _classPrivateFieldSet(_this, _receiverDc, dc);\n    };\n\n    // sender.onconnectionstatechange = e => console.log('connection state change', e);\n    // sender.oniceconnectionstatechange = e => console.log('ice connection state change', e);\n    // sender.onicecandidateerror = e => console.log('ice error', e);\n    sender.onicecandidate = function (e) {\n      // console.log('sender', e.candidate);\n      e.candidate && acceptIceCandidate(e.candidate) && receiver.addIceCandidate(e.candidate);\n    };\n    receiver.onicecandidate = function (e) {\n      // console.log('receiver', e.candidate);\n      e.candidate && acceptIceCandidate(e.candidate) && sender.addIceCandidate(e.candidate);\n    };\n    sender.createOffer().then(function (offer) {\n      return sender.setLocalDescription(offer);\n    }).then(function () {\n      return receiver.setRemoteDescription(sender.localDescription);\n    }).then(function () {\n      return receiver.createAnswer();\n    }).then(function (answer) {\n      return receiver.setLocalDescription(answer);\n    }).then(function () {\n      return sender.setRemoteDescription(receiver.localDescription);\n    });\n    _classPrivateFieldSet(this, _sender, sender);\n    _classPrivateFieldSet(this, _receiver, receiver);\n    _classPrivateFieldSet(this, _senderDc, senderDc);\n    _classPrivateFieldSet(this, _established, false);\n  }\n  _createClass(SelfWebRtcDataConnection, [{\n    key: \"send\",\n    value:\n    // callback invoked when a new message is received from the TURN server\n    // Public methods\n    function send(msg) {\n      return _classPrivateFieldGet(this, _senderDc).send(msg);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      _classPrivateFieldGet(this, _sender) && _classPrivateFieldGet(this, _sender).close();\n      _classPrivateFieldGet(this, _receiver) && _classPrivateFieldGet(this, _receiver).close();\n      _classPrivateFieldGet(this, _senderDc) && _classPrivateFieldGet(this, _senderDc).close();\n      _classPrivateFieldGet(this, _receiverDc) && _classPrivateFieldGet(this, _receiverDc).close();\n      _classPrivateFieldGet(this, _established) && this.onClose();\n      _classPrivateFieldSet(this, _established, false);\n      return this;\n    }\n  }]);\n  return SelfWebRtcDataConnection;\n}();\n\nvar _onCredentialsFailure = /*#__PURE__*/new WeakMap();\nvar _onConnectionError = /*#__PURE__*/new WeakMap();\nvar _onFinished = /*#__PURE__*/new WeakMap();\nvar _msgTracker = /*#__PURE__*/new WeakMap();\nvar _webRtcConnection = /*#__PURE__*/new WeakMap();\nvar _numMsgs = /*#__PURE__*/new WeakMap();\nvar PacketLossEngine$1 = /*#__PURE__*/function () {\n  function PacketLossEngine() {\n    var _this = this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      turnServerUri = _ref.turnServerUri,\n      turnServerCredsApi = _ref.turnServerCredsApi,\n      _ref$turnServerCredsA = _ref.turnServerCredsApiParser,\n      turnServerCredsApiParser = _ref$turnServerCredsA === void 0 ? function (_ref2) {\n        var username = _ref2.username,\n          credential = _ref2.credential;\n        return {\n          turnServerUser: username,\n          turnServerPass: credential\n        };\n      } : _ref$turnServerCredsA,\n      _ref$turnServerCredsA2 = _ref.turnServerCredsApiIncludeCredentials,\n      turnServerCredsApiIncludeCredentials = _ref$turnServerCredsA2 === void 0 ? false : _ref$turnServerCredsA2,\n      turnServerUser = _ref.turnServerUser,\n      turnServerPass = _ref.turnServerPass,\n      _ref$numMsgs = _ref.numMsgs,\n      numMsgs = _ref$numMsgs === void 0 ? 100 : _ref$numMsgs,\n      _ref$batchSize = _ref.batchSize,\n      batchSize = _ref$batchSize === void 0 ? 10 : _ref$batchSize,\n      _ref$batchWaitTime = _ref.batchWaitTime,\n      batchWaitTime = _ref$batchWaitTime === void 0 ? 10 : _ref$batchWaitTime,\n      _ref$responsesWaitTim = _ref.responsesWaitTime,\n      responsesWaitTime = _ref$responsesWaitTim === void 0 ? 5000 : _ref$responsesWaitTim,\n      _ref$connectionTimeou = _ref.connectionTimeout,\n      connectionTimeout = _ref$connectionTimeou === void 0 ? 5000 : _ref$connectionTimeou;\n    _classCallCheck(this, PacketLossEngine);\n    // Public attributes\n    _classPrivateFieldInitSpec(this, _onCredentialsFailure, {\n      writable: true,\n      value: function value() {}\n    });\n    _classPrivateFieldInitSpec(this, _onConnectionError, {\n      writable: true,\n      value: function value() {}\n    });\n    _classPrivateFieldInitSpec(this, _onFinished, {\n      writable: true,\n      value: function value() {}\n    });\n    _defineProperty(this, \"onMsgSent\", function () {});\n    // Invoked when sending a new message to the TURN server\n    _defineProperty(this, \"onAllMsgsSent\", function () {});\n    // Invoked when all messages have been sent\n    _defineProperty(this, \"onMsgReceived\", function () {});\n    // Public methods\n    // Internal state\n    _classPrivateFieldInitSpec(this, _msgTracker, {\n      writable: true,\n      value: {}\n    });\n    _classPrivateFieldInitSpec(this, _webRtcConnection, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _numMsgs, {\n      writable: true,\n      value: void 0\n    });\n    if (!turnServerUri) throw new Error('Missing turnServerUri argument');\n    if ((!turnServerUser || !turnServerPass) && !turnServerCredsApi) throw new Error('Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments');\n    _classPrivateFieldSet(this, _numMsgs, numMsgs);\n    (!turnServerUser || !turnServerPass ?\n    // Get TURN credentials from API endpoint if not statically supplied\n    fetch(turnServerCredsApi, {\n      credentials: turnServerCredsApiIncludeCredentials ? 'include' : undefined\n    }).then(function (r) {\n      return r.json();\n    }).then(function (d) {\n      if (d.error) throw d.error;\n      return d;\n    }).then(turnServerCredsApiParser) : Promise.resolve({\n      turnServerUser: turnServerUser,\n      turnServerPass: turnServerPass\n    }))[\"catch\"](function (e) {\n      return _classPrivateFieldGet(_this, _onCredentialsFailure).call(_this, e);\n    }).then(function (_ref3) {\n      var turnServerUser = _ref3.turnServerUser,\n        turnServerPass = _ref3.turnServerPass;\n      var c = _classPrivateFieldSet(_this, _webRtcConnection, new SelfWebRtcDataConnection({\n        iceServers: [{\n          urls: \"turn:\".concat(turnServerUri, \"?transport=udp\"),\n          username: turnServerUser,\n          credential: turnServerPass\n        }],\n        iceTransportPolicy: 'relay'\n      }));\n      var connectionSuccess = false;\n      setTimeout(function () {\n        if (!connectionSuccess) {\n          c.close();\n          _classPrivateFieldGet(_this, _onConnectionError).call(_this, 'ICE connection timeout!');\n        }\n      }, connectionTimeout);\n      var msgTracker = _classPrivateFieldGet(_this, _msgTracker);\n      c.onOpen = function () {\n        connectionSuccess = true;\n        var self = _this;\n        (function sendNum(n) {\n          if (n <= numMsgs) {\n            var i = n;\n            while (i <= Math.min(numMsgs, n + batchSize - 1)) {\n              msgTracker[i] = false;\n              c.send(i);\n              self.onMsgSent(i);\n              i++;\n            }\n            setTimeout(function () {\n              return sendNum(i);\n            }, batchWaitTime);\n          } else {\n            self.onAllMsgsSent(Object.keys(msgTracker).length);\n            var finishFn = function finishFn() {\n              c.close();\n              _classPrivateFieldGet(self, _onFinished).call(self, self.results);\n            };\n            var finishTimeout = setTimeout(finishFn, responsesWaitTime);\n            var missingMsgs = Object.values(_classPrivateFieldGet(self, _msgTracker)).filter(function (recv) {\n              return !recv;\n            }).length;\n            c.onMessageReceived = function (msg) {\n              clearTimeout(finishTimeout);\n              msgTracker[msg] = true;\n              self.onMsgReceived(msg);\n              missingMsgs--;\n              if (missingMsgs <= 0 && Object.values(_classPrivateFieldGet(self, _msgTracker)).every(function (recv) {\n                return recv;\n              })) {\n                // Last msg received, shortcut out\n                finishFn();\n              } else {\n                // restart timeout\n                finishTimeout = setTimeout(finishFn, responsesWaitTime);\n              }\n            };\n          }\n        })(1);\n      };\n      c.onMessageReceived = function (msg) {\n        msgTracker[msg] = true;\n        _this.onMsgReceived(msg);\n      };\n    })[\"catch\"](function (e) {\n      return _classPrivateFieldGet(_this, _onConnectionError).call(_this, e.toString());\n    });\n  }\n  _createClass(PacketLossEngine, [{\n    key: \"onCredentialsFailure\",\n    set:\n    // Invoked when unable to fetch TURN server credentials\n    function set(f) {\n      _classPrivateFieldSet(this, _onCredentialsFailure, f);\n    }\n  }, {\n    key: \"onConnectionError\",\n    set:\n    // Invoked when unable to establish a connection with TURN server\n    function set(f) {\n      _classPrivateFieldSet(this, _onConnectionError, f);\n    }\n  }, {\n    key: \"onFinished\",\n    set:\n    // Invoked when the packet loss measurement is complete\n    function set(f) {\n      _classPrivateFieldSet(this, _onFinished, f);\n    }\n  }, {\n    key: \"results\",\n    get:\n    // Invoked when receiving a new message from the TURN server\n\n    function get() {\n      var totalMessages = _classPrivateFieldGet(this, _numMsgs);\n      var numMessagesSent = Object.keys(_classPrivateFieldGet(this, _msgTracker)).length;\n      var lostMessages = Object.entries(_classPrivateFieldGet(this, _msgTracker)).filter(function (_ref4) {\n        var _ref5 = _slicedToArray(_ref4, 2),\n          recv = _ref5[1];\n        return !recv;\n      }).map(function (_ref6) {\n        var _ref7 = _slicedToArray(_ref6, 1),\n          n = _ref7[0];\n        return +n;\n      });\n      var packetLoss = lostMessages.length / numMessagesSent;\n      return {\n        totalMessages: totalMessages,\n        numMessagesSent: numMessagesSent,\n        packetLoss: packetLoss,\n        lostMessages: lostMessages\n      };\n    }\n  }]);\n  return PacketLossEngine;\n}();\n\nvar _excluded$2 = [\"downloadChunkSize\", \"uploadChunkSize\", \"downloadApiUrl\", \"uploadApiUrl\"];\nvar _loadEngine = /*#__PURE__*/new WeakMap();\nvar PacketLossUnderLoadEngine = /*#__PURE__*/function (_PacketLossEngine) {\n  _inherits(PacketLossUnderLoadEngine, _PacketLossEngine);\n  var _super = _createSuper(PacketLossUnderLoadEngine);\n  function PacketLossUnderLoadEngine() {\n    var _thisSuper, _thisSuper3, _thisSuper5, _this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      downloadChunkSize = _ref.downloadChunkSize,\n      uploadChunkSize = _ref.uploadChunkSize,\n      downloadApiUrl = _ref.downloadApiUrl,\n      uploadApiUrl = _ref.uploadApiUrl,\n      ptProps = _objectWithoutProperties(_ref, _excluded$2);\n    _classCallCheck(this, PacketLossUnderLoadEngine);\n    _this = _super.call(this, ptProps);\n    // Internal state\n    _classPrivateFieldInitSpec(_assertThisInitialized(_this), _loadEngine, {\n      writable: true,\n      value: void 0\n    });\n    if (downloadChunkSize || uploadChunkSize) {\n      _classPrivateFieldSet(_assertThisInitialized(_this), _loadEngine, new LoadNetworkEngine$1({\n        download: downloadChunkSize ? {\n          apiUrl: downloadApiUrl,\n          chunkSize: downloadChunkSize\n        } : null,\n        upload: uploadChunkSize ? {\n          apiUrl: uploadApiUrl,\n          chunkSize: uploadChunkSize\n        } : null\n      }));\n      _set((_thisSuper = _assertThisInitialized(_this), _getPrototypeOf(PacketLossUnderLoadEngine.prototype)), \"onCredentialsFailure\", _set((_thisSuper5 = _assertThisInitialized(_this), _getPrototypeOf(PacketLossUnderLoadEngine.prototype)), \"onConnectionError\", _set((_thisSuper3 = _assertThisInitialized(_this), _getPrototypeOf(PacketLossUnderLoadEngine.prototype)), \"onFinished\", function () {\n        return _classPrivateFieldGet(_assertThisInitialized(_this), _loadEngine).stop();\n      }, _thisSuper3, true), _thisSuper5, true), _thisSuper, true);\n    }\n    return _this;\n  }\n\n  // Overridden attributes\n  _createClass(PacketLossUnderLoadEngine, [{\n    key: \"qsParams\",\n    set: function set(qsParams) {\n      _classPrivateFieldGet(this, _loadEngine) && (_classPrivateFieldGet(this, _loadEngine).qsParams = qsParams);\n    }\n  }, {\n    key: \"fetchOptions\",\n    set: function set(fetchOptions) {\n      _classPrivateFieldGet(this, _loadEngine) && (_classPrivateFieldGet(this, _loadEngine).fetchOptions = fetchOptions);\n    }\n  }, {\n    key: \"onCredentialsFailure\",\n    set: function set(onCredentialsFailure) {\n      var _this2 = this;\n      _set(_getPrototypeOf(PacketLossUnderLoadEngine.prototype), \"onCredentialsFailure\", function () {\n        onCredentialsFailure.apply(void 0, arguments);\n        _classPrivateFieldGet(_this2, _loadEngine) && _classPrivateFieldGet(_this2, _loadEngine).stop();\n      }, this, true);\n    }\n  }, {\n    key: \"onConnectionError\",\n    set: function set(onConnectionError) {\n      var _this3 = this;\n      _set(_getPrototypeOf(PacketLossUnderLoadEngine.prototype), \"onConnectionError\", function () {\n        onConnectionError.apply(void 0, arguments);\n        _classPrivateFieldGet(_this3, _loadEngine) && _classPrivateFieldGet(_this3, _loadEngine).stop();\n      }, this, true);\n    }\n  }, {\n    key: \"onFinished\",\n    set: function set(onFinished) {\n      var _this4 = this;\n      _set(_getPrototypeOf(PacketLossUnderLoadEngine.prototype), \"onFinished\", function () {\n        onFinished.apply(void 0, arguments);\n        _classPrivateFieldGet(_this4, _loadEngine) && _classPrivateFieldGet(_this4, _loadEngine).stop();\n      }, this, true);\n    }\n  }]);\n  return PacketLossUnderLoadEngine;\n}(PacketLossEngine$1);\nvar PacketLossEngine = PacketLossUnderLoadEngine;\n\nvar _excluded$1 = [\"reachable\"];\nvar ReachabilityEngine = /*#__PURE__*/_createClass(function ReachabilityEngine(targetUrl) {\n  var _this = this;\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n    _ref$timeout = _ref.timeout,\n    timeout = _ref$timeout === void 0 ? -1 : _ref$timeout,\n    _ref$fetchOptions = _ref.fetchOptions,\n    fetchOptions = _ref$fetchOptions === void 0 ? {} : _ref$fetchOptions;\n  _classCallCheck(this, ReachabilityEngine);\n  // Public attributes\n  _defineProperty(this, \"onFinished\", function () {});\n  var finished = false;\n  var finish = function finish(_ref2) {\n    var reachable = _ref2.reachable,\n      rest = _objectWithoutProperties(_ref2, _excluded$1);\n    if (finished) return;\n    finished = true;\n    _this.onFinished(_objectSpread2({\n      targetUrl: targetUrl,\n      reachable: reachable\n    }, rest));\n  };\n  fetch(targetUrl, fetchOptions).then(function (response) {\n    finish({\n      reachable: true,\n      response: response\n    });\n  })[\"catch\"](function (error) {\n    finish({\n      reachable: false,\n      error: error\n    });\n  });\n  timeout > 0 && setTimeout(function () {\n    return finish({\n      reachable: false,\n      error: 'Request timeout'\n    });\n  }, timeout);\n});\n\nvar sum = function sum(vals) {\n  return vals.reduce(function (agg, val) {\n    return agg + val;\n  }, 0);\n};\nvar percentile = function percentile(vals) {\n  var perc = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.5;\n  if (!vals.length) return 0;\n  var sortedVals = vals.slice().sort(function (a, b) {\n    return a - b;\n  });\n  var idx = (vals.length - 1) * perc;\n  var rem = idx % 1;\n  if (rem === 0) return sortedVals[Math.round(idx)];\n\n  // calculate weighted average\n  var edges = [Math.floor, Math.ceil].map(function (rndFn) {\n    return sortedVals[rndFn(idx)];\n  });\n  return edges[0] + (edges[1] - edges[0]) * rem;\n};\n\nvar _config$3 = /*#__PURE__*/new WeakMap();\nvar _extractLoadedLatencies = /*#__PURE__*/new WeakMap();\nvar MeasurementCalculations = /*#__PURE__*/function () {\n  function MeasurementCalculations(config) {\n    var _this = this;\n    _classCallCheck(this, MeasurementCalculations);\n    // Public methods\n    _defineProperty(this, \"getLatencyPoints\", function (latencyResults) {\n      return latencyResults.timings.map(function (d) {\n        return d.ping;\n      });\n    });\n    _defineProperty(this, \"getLatency\", function (latencyResults) {\n      return percentile(_this.getLatencyPoints(latencyResults), _classPrivateFieldGet(_this, _config$3).latencyPercentile);\n    });\n    _defineProperty(this, \"getBandwidthPoints\", function (bandwidthResults) {\n      return Object.entries(bandwidthResults).map(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n          bytes = _ref2[0],\n          timings = _ref2[1].timings;\n        return timings.map(function (_ref3) {\n          var bps = _ref3.bps,\n            duration = _ref3.duration,\n            ping = _ref3.ping,\n            measTime = _ref3.measTime,\n            serverTime = _ref3.serverTime,\n            transferSize = _ref3.transferSize;\n          return {\n            bytes: +bytes,\n            bps: bps,\n            duration: duration,\n            ping: ping,\n            measTime: measTime,\n            serverTime: serverTime,\n            transferSize: transferSize\n          };\n        });\n      }).flat();\n    });\n    _defineProperty(this, \"getBandwidth\", function (bandwidthResults) {\n      return percentile(_this.getBandwidthPoints(bandwidthResults).filter(function (d) {\n        return d.duration >= _classPrivateFieldGet(_this, _config$3).bandwidthMinRequestDuration;\n      }).map(function (d) {\n        return d.bps;\n      }).filter(function (bps) {\n        return bps;\n      }), _classPrivateFieldGet(_this, _config$3).bandwidthPercentile);\n    });\n    _defineProperty(this, \"getLoadedLatency\", function (loadedResults) {\n      return _this.getLatency({\n        timings: _classPrivateFieldGet(_this, _extractLoadedLatencies).call(_this, loadedResults)\n      });\n    });\n    _defineProperty(this, \"getLoadedJitter\", function (loadedResults) {\n      return _this.getJitter({\n        timings: _classPrivateFieldGet(_this, _extractLoadedLatencies).call(_this, loadedResults)\n      });\n    });\n    _defineProperty(this, \"getLoadedLatencyPoints\", function (loadedResults) {\n      return _this.getLatencyPoints({\n        timings: _classPrivateFieldGet(_this, _extractLoadedLatencies).call(_this, loadedResults)\n      });\n    });\n    _defineProperty(this, \"getPacketLoss\", function (plResults) {\n      return plResults.packetLoss;\n    });\n    _defineProperty(this, \"getPacketLossDetails\", function (plResults) {\n      return plResults;\n    });\n    _defineProperty(this, \"getReachability\", function (reachabilityResults) {\n      return !!reachabilityResults.reachable;\n    });\n    _defineProperty(this, \"getReachabilityDetails\", function (d) {\n      return {\n        host: d.host,\n        reachable: d.reachable\n      };\n    });\n    // Internal state\n    _classPrivateFieldInitSpec(this, _config$3, {\n      writable: true,\n      value: void 0\n    });\n    // Internal methods\n    _classPrivateFieldInitSpec(this, _extractLoadedLatencies, {\n      writable: true,\n      value: function value(loadedResults) {\n        return Object.values(loadedResults).filter(\n        // keep only file sizes that saturated the connection\n        function (d) {\n          return d.timings.length && Math.min.apply(Math, _toConsumableArray(d.timings.map(function (d) {\n            return d.duration;\n          }))) >= _classPrivateFieldGet(_this, _config$3).loadedRequestMinDuration;\n        }).map(function (d) {\n          return d.sideLatency || [];\n        }).flat().slice(-_classPrivateFieldGet(_this, _config$3).loadedLatencyMaxPoints);\n      }\n    });\n    _classPrivateFieldSet(this, _config$3, config);\n  }\n  _createClass(MeasurementCalculations, [{\n    key: \"getJitter\",\n    value: function getJitter(latencyResults) {\n      // calc jitter as the average latency delta between consecutive samples\n      var pings = this.getLatencyPoints(latencyResults);\n      return pings.length < 2 ? null : pings.reduce(function (_ref4, latency) {\n        var _ref4$sumDeltas = _ref4.sumDeltas,\n          sumDeltas = _ref4$sumDeltas === void 0 ? 0 : _ref4$sumDeltas,\n          prevLatency = _ref4.prevLatency;\n        return {\n          sumDeltas: sumDeltas + (prevLatency !== undefined ? Math.abs(prevLatency - latency) : 0),\n          prevLatency: latency\n        };\n      }, {}).sumDeltas / (pings.length - 1);\n    }\n\n    // last measurements are most accurate\n  }]);\n  return MeasurementCalculations;\n}();\nvar MeasurementCalculations$1 = MeasurementCalculations;\n\nvar classificationNames = ['bad', 'poor', 'average', 'good', 'great'];\nvar customResultTypes = {\n  loadedLatencyIncrease: function loadedLatencyIncrease(measurements) {\n    return measurements.latency && (measurements.downLoadedLatency || measurements.upLoadedLatency) ? Math.max(measurements.downLoadedLatency, measurements.upLoadedLatency) - measurements.latency : undefined;\n  }\n};\nvar defaultPoints = {\n  packetLoss: 0\n};\nvar _config$2 = /*#__PURE__*/new WeakMap();\nvar ScoresCalculations = /*#__PURE__*/function () {\n  function ScoresCalculations(config) {\n    _classCallCheck(this, ScoresCalculations);\n    // Internal state\n    _classPrivateFieldInitSpec(this, _config$2, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldSet(this, _config$2, config);\n  }\n  _createClass(ScoresCalculations, [{\n    key: \"getScores\",\n    value: function getScores(measurements) {\n      var scores = Object.assign.apply(Object, _toConsumableArray(Object.entries(_classPrivateFieldGet(this, _config$2).aimMeasurementScoring).map(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n          type = _ref2[0],\n          fn = _ref2[1];\n        var val = customResultTypes.hasOwnProperty(type) ? customResultTypes[type](measurements) : measurements[type];\n        return val === undefined ? defaultPoints.hasOwnProperty(type) ? _defineProperty({}, type, defaultPoints[type]) : {} : _defineProperty({}, type, val === undefined ? 0 : +fn(val));\n      })));\n      return Object.assign.apply(Object, [{}].concat(_toConsumableArray(Object.entries(_classPrivateFieldGet(this, _config$2).aimExperiencesDefs).filter(function (_ref5) {\n        var _ref6 = _slicedToArray(_ref5, 2),\n          input = _ref6[1].input;\n        return input.every(function (k) {\n          return scores.hasOwnProperty(k);\n        });\n      }).map(function (_ref7) {\n        var _ref8 = _slicedToArray(_ref7, 2),\n          k = _ref8[0],\n          _ref8$ = _ref8[1],\n          input = _ref8$.input,\n          pointThresholds = _ref8$.pointThresholds;\n        var sumPoints = Math.max(0, sum(input.map(function (k) {\n          return scores[k];\n        })));\n        var classificationIdx = scaleThreshold(pointThresholds, [0, 1, 2, 3, 4])(sumPoints);\n        var classificationName = classificationNames[classificationIdx];\n        return _defineProperty({}, k, {\n          points: sumPoints,\n          classificationIdx: classificationIdx,\n          classificationName: classificationName\n        });\n      }))));\n    }\n  }]);\n  return ScoresCalculations;\n}();\nvar ScoresCalculations$1 = ScoresCalculations;\n\nvar _config$1 = /*#__PURE__*/new WeakMap();\nvar _measCalc = /*#__PURE__*/new WeakMap();\nvar _scoresCalc = /*#__PURE__*/new WeakMap();\nvar _calcGetter = /*#__PURE__*/new WeakMap();\nvar _getV4Reachability = /*#__PURE__*/new WeakMap();\nvar _getV4ReachabilityDetails = /*#__PURE__*/new WeakMap();\nvar _getV6Reachability = /*#__PURE__*/new WeakMap();\nvar _getV6ReachabilityDetails = /*#__PURE__*/new WeakMap();\nvar Results = /*#__PURE__*/function () {\n  function Results(config) {\n    var _this = this;\n    _classCallCheck(this, Results);\n    // Public attributes\n    _defineProperty(this, \"raw\", void 0);\n    _defineProperty(this, \"getUnloadedLatency\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getLatency', 'latency');\n    });\n    _defineProperty(this, \"getUnloadedJitter\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getJitter', 'latency');\n    });\n    _defineProperty(this, \"getUnloadedLatencyPoints\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getLatencyPoints', 'latency', []);\n    });\n    _defineProperty(this, \"getDownLoadedLatency\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getLoadedLatency', 'download');\n    });\n    _defineProperty(this, \"getDownLoadedJitter\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getLoadedJitter', 'download');\n    });\n    _defineProperty(this, \"getDownLoadedLatencyPoints\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getLoadedLatencyPoints', 'download', []);\n    });\n    _defineProperty(this, \"getUpLoadedLatency\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getLoadedLatency', 'upload');\n    });\n    _defineProperty(this, \"getUpLoadedJitter\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getLoadedJitter', 'upload');\n    });\n    _defineProperty(this, \"getUpLoadedLatencyPoints\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getLoadedLatencyPoints', 'upload', []);\n    });\n    _defineProperty(this, \"getDownloadBandwidth\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getBandwidth', 'download');\n    });\n    _defineProperty(this, \"getDownloadBandwidthPoints\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getBandwidthPoints', 'download', []);\n    });\n    _defineProperty(this, \"getUploadBandwidth\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getBandwidth', 'upload');\n    });\n    _defineProperty(this, \"getUploadBandwidthPoints\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getBandwidthPoints', 'upload', []);\n    });\n    _defineProperty(this, \"getPacketLoss\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getPacketLoss', 'packetLoss');\n    });\n    _defineProperty(this, \"getPacketLossDetails\", function () {\n      return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getPacketLossDetails', 'packetLoss', undefined, true);\n    });\n    _defineProperty(this, \"getScores\", function () {\n      return _classPrivateFieldGet(_this, _scoresCalc).getScores(_this.getSummary());\n    });\n    // Internal state\n    _classPrivateFieldInitSpec(this, _config$1, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _measCalc, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _scoresCalc, {\n      writable: true,\n      value: void 0\n    });\n    // Internal methods\n    _classPrivateFieldInitSpec(this, _calcGetter, {\n      writable: true,\n      value: function value(calcFn, resKey) {\n        var defaultVal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n        var surfaceError = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n        return !_this.raw.hasOwnProperty(resKey) || !_this.raw[resKey].started ? defaultVal : surfaceError && _this.raw[resKey].error ? {\n          error: _this.raw[resKey].error\n        } : _classPrivateFieldGet(_this, _measCalc)[calcFn](_this.raw[resKey].results);\n      }\n    });\n    _classPrivateFieldInitSpec(this, _getV4Reachability, {\n      writable: true,\n      value: function value() {\n        return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getReachability', 'v4Reachability');\n      }\n    });\n    _classPrivateFieldInitSpec(this, _getV4ReachabilityDetails, {\n      writable: true,\n      value: function value() {\n        return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getReachabilityDetails', 'v4Reachability');\n      }\n    });\n    _classPrivateFieldInitSpec(this, _getV6Reachability, {\n      writable: true,\n      value: function value() {\n        return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getReachability', 'v6Reachability');\n      }\n    });\n    _classPrivateFieldInitSpec(this, _getV6ReachabilityDetails, {\n      writable: true,\n      value: function value() {\n        return _classPrivateFieldGet(_this, _calcGetter).call(_this, 'getReachabilityDetails', 'v6Reachability');\n      }\n    });\n    _classPrivateFieldSet(this, _config$1, config);\n    this.clear();\n    _classPrivateFieldSet(this, _measCalc, new MeasurementCalculations$1(_classPrivateFieldGet(this, _config$1)));\n    _classPrivateFieldSet(this, _scoresCalc, new ScoresCalculations$1(_classPrivateFieldGet(this, _config$1)));\n  }\n  _createClass(Results, [{\n    key: \"isFinished\",\n    get: function get() {\n      return Object.values(this.raw).every(function (d) {\n        return d.finished;\n      });\n    }\n\n    // Public methods\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.raw = Object.assign.apply(Object, [{}].concat(_toConsumableArray(_toConsumableArray(new Set(_classPrivateFieldGet(this, _config$1).measurements.map(function (m) {\n        return m.type;\n      }))).map(function (m) {\n        return _defineProperty({}, m, {\n          started: false,\n          finished: false,\n          results: {}\n        });\n      }))));\n    }\n  }, {\n    key: \"getSummary\",\n    value: function getSummary() {\n      var items = {\n        download: this.getDownloadBandwidth,\n        upload: this.getUploadBandwidth,\n        latency: this.getUnloadedLatency,\n        jitter: this.getUnloadedJitter,\n        downLoadedLatency: this.getDownLoadedLatency,\n        downLoadedJitter: this.getDownLoadedJitter,\n        upLoadedLatency: this.getUpLoadedLatency,\n        upLoadedJitter: this.getUpLoadedJitter,\n        packetLoss: this.getPacketLoss,\n        v4Reachability: _classPrivateFieldGet(this, _getV4Reachability),\n        v6Reachability: _classPrivateFieldGet(this, _getV6Reachability)\n      };\n      return Object.assign.apply(Object, _toConsumableArray(Object.entries(items).map(function (_ref2) {\n        var _ref3 = _slicedToArray(_ref2, 2),\n          key = _ref3[0],\n          fn = _ref3[1];\n        var val = fn();\n        return val === undefined ? {} : _defineProperty({}, key, val);\n      })));\n    }\n  }]);\n  return Results;\n}();\nvar Results$1 = Results;\n\nvar round = function round(num) {\n  var decimals = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return !num ? num : Math.round(num * Math.pow(10, decimals)) / Math.pow(10, decimals);\n};\nvar latencyPointsParser = function latencyPointsParser(durations) {\n  return durations.map(function (d) {\n    return round(d, 2);\n  });\n};\nvar bpsPointsParser = function bpsPointsParser(pnts) {\n  return pnts.map(function (d) {\n    return {\n      bytes: +d.bytes,\n      bps: round(d.bps)\n    };\n  });\n};\nvar packetLossParser = function packetLossParser(d) {\n  return d.error ? undefined : {\n    numMessages: d.numMessagesSent,\n    lossRatio: round(d.packetLoss, 4)\n  };\n};\nvar resultsParsers = {\n  latencyMs: ['getUnloadedLatencyPoints', latencyPointsParser],\n  download: ['getDownloadBandwidthPoints', bpsPointsParser],\n  upload: ['getUploadBandwidthPoints', bpsPointsParser],\n  downLoadedLatencyMs: ['getDownLoadedLatencyPoints', latencyPointsParser],\n  upLoadedLatencyMs: ['getUpLoadedLatencyPoints', latencyPointsParser],\n  packetLoss: ['getPacketLossDetails', packetLossParser]\n  // v4Reachability: ['getV4ReachabilityDetails'],\n  // v6Reachability: ['getV6ReachabilityDetails']\n};\n\nvar scoreParser = function scoreParser(d) {\n  return {\n    points: d.points,\n    classification: d.classificationName\n  };\n};\nvar logAimResults = function logAimResults(results, _ref) {\n  var apiUrl = _ref.apiUrl;\n  var logData = {};\n  Object.entries(resultsParsers).forEach(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n      logK = _ref3[0],\n      _ref3$ = _slicedToArray(_ref3[1], 2),\n      fn = _ref3$[0],\n      _ref3$$ = _ref3$[1],\n      parser = _ref3$$ === void 0 ? function (d) {\n        return d;\n      } : _ref3$$;\n    var val = results[fn]();\n    val && (logData[logK] = parser(val));\n  });\n  var scores = results.getScores();\n  scores && (logData.scores = Object.assign.apply(Object, [{}].concat(_toConsumableArray(Object.entries(scores).map(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n      k = _ref5[0],\n      score = _ref5[1];\n    return _defineProperty({}, k, scoreParser(score));\n  })))));\n  fetch(apiUrl, {\n    method: 'POST',\n    body: JSON.stringify(logData)\n  });\n};\nvar logFinalResults = logAimResults;\n\nvar _excluded = [\"type\"],\n  _excluded2 = [\"numPackets\"],\n  _excluded3 = [\"bytes\"];\nvar DEFAULT_OPTIMAL_DOWNLOAD_SIZE = 1e6;\nvar DEFAULT_OPTIMAL_UPLOAD_SIZE = 1e6;\nvar OPTIMAL_SIZE_RATIO = 0.5; // of largest size reached in measurement\n\nvar pausableTypes = ['latency', 'latencyUnderLoad', 'download', 'upload'];\nvar genMeasId = function genMeasId() {\n  return \"\".concat(Math.round(Math.random() * 1e16));\n};\nvar _onFinish = /*#__PURE__*/new WeakMap();\nvar _onError = /*#__PURE__*/new WeakMap();\nvar _config = /*#__PURE__*/new WeakMap();\nvar _results = /*#__PURE__*/new WeakMap();\nvar _measurementId = /*#__PURE__*/new WeakMap();\nvar _curMsmIdx = /*#__PURE__*/new WeakMap();\nvar _curEngine = /*#__PURE__*/new WeakMap();\nvar _optimalDownloadChunkSize = /*#__PURE__*/new WeakMap();\nvar _optimalUploadChunkSize = /*#__PURE__*/new WeakMap();\nvar _running = /*#__PURE__*/new WeakMap();\nvar _finished = /*#__PURE__*/new WeakMap();\nvar _setRunning = /*#__PURE__*/new WeakSet();\nvar _setFinished = /*#__PURE__*/new WeakSet();\nvar _curType = /*#__PURE__*/new WeakSet();\nvar _curTypeResults = /*#__PURE__*/new WeakSet();\nvar _clear = /*#__PURE__*/new WeakSet();\nvar _destroyCurEngine = /*#__PURE__*/new WeakSet();\nvar _next = /*#__PURE__*/new WeakSet();\nvar MeasurementEngine = /*#__PURE__*/function () {\n  function MeasurementEngine() {\n    var userConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, MeasurementEngine);\n    _classPrivateMethodInitSpec(this, _next);\n    _classPrivateMethodInitSpec(this, _destroyCurEngine);\n    _classPrivateMethodInitSpec(this, _clear);\n    _classPrivateMethodInitSpec(this, _curTypeResults);\n    _classPrivateMethodInitSpec(this, _curType);\n    _classPrivateMethodInitSpec(this, _setFinished);\n    // Internal methods\n    _classPrivateMethodInitSpec(this, _setRunning);\n    _defineProperty(this, \"onRunningChange\", function () {});\n    _defineProperty(this, \"onResultsChange\", function () {});\n    _classPrivateFieldInitSpec(this, _onFinish, {\n      writable: true,\n      value: function value() {}\n    });\n    _classPrivateFieldInitSpec(this, _onError, {\n      writable: true,\n      value: function value() {}\n    });\n    // Internal state\n    _classPrivateFieldInitSpec(this, _config, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _results, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _measurementId, {\n      writable: true,\n      value: genMeasId()\n    });\n    _classPrivateFieldInitSpec(this, _curMsmIdx, {\n      writable: true,\n      value: -1\n    });\n    _classPrivateFieldInitSpec(this, _curEngine, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _optimalDownloadChunkSize, {\n      writable: true,\n      value: DEFAULT_OPTIMAL_DOWNLOAD_SIZE\n    });\n    _classPrivateFieldInitSpec(this, _optimalUploadChunkSize, {\n      writable: true,\n      value: DEFAULT_OPTIMAL_UPLOAD_SIZE\n    });\n    _classPrivateFieldInitSpec(this, _running, {\n      writable: true,\n      value: false\n    });\n    _classPrivateFieldInitSpec(this, _finished, {\n      writable: true,\n      value: false\n    });\n    _classPrivateFieldSet(this, _config, Object.assign({}, defaultConfig, userConfig, internalConfig));\n    _classPrivateFieldSet(this, _results, new Results$1(_classPrivateFieldGet(this, _config)));\n    _classPrivateFieldGet(this, _config).autoStart && this.play();\n  }\n\n  // Public attributes\n  _createClass(MeasurementEngine, [{\n    key: \"results\",\n    get: function get() {\n      // read access to results\n      return _classPrivateFieldGet(this, _results);\n    }\n  }, {\n    key: \"isRunning\",\n    get: function get() {\n      return _classPrivateFieldGet(this, _running);\n    }\n  }, {\n    key: \"isFinished\",\n    get: function get() {\n      return _classPrivateFieldGet(this, _finished);\n    }\n  }, {\n    key: \"onFinish\",\n    set:\n    // callback invoked when all the measurements are finished\n    function set(f) {\n      _classPrivateFieldSet(this, _onFinish, f);\n    }\n  }, {\n    key: \"onError\",\n    set:\n    // callback invoked if an error occurs during measurement\n    function set(f) {\n      _classPrivateFieldSet(this, _onError, f);\n    }\n\n    // Public methods\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      pausableTypes.includes(_classPrivateMethodGet(this, _curType, _curType2).call(this)) && _classPrivateFieldGet(this, _curEngine).pause();\n      _classPrivateMethodGet(this, _setRunning, _setRunning2).call(this, false);\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      if (!_classPrivateFieldGet(this, _running)) {\n        _classPrivateMethodGet(this, _setRunning, _setRunning2).call(this, true);\n        _classPrivateMethodGet(this, _next, _next2).call(this);\n      }\n    }\n  }, {\n    key: \"restart\",\n    value: function restart() {\n      _classPrivateMethodGet(this, _clear, _clear2).call(this);\n      this.play();\n    }\n  }]);\n  return MeasurementEngine;\n}();\nfunction _setRunning2(running) {\n  if (running !== _classPrivateFieldGet(this, _running)) {\n    _classPrivateFieldSet(this, _running, running);\n    this.onRunningChange(_classPrivateFieldGet(this, _running));\n  }\n}\nfunction _setFinished2(finished) {\n  var _this3 = this;\n  if (finished !== _classPrivateFieldGet(this, _finished)) {\n    _classPrivateFieldSet(this, _finished, finished);\n    finished && setTimeout(function () {\n      return _classPrivateFieldGet(_this3, _onFinish).call(_this3, _this3.results);\n    });\n  }\n}\nfunction _curType2() {\n  return _classPrivateFieldGet(this, _curMsmIdx) < 0 || _classPrivateFieldGet(this, _curMsmIdx) >= _classPrivateFieldGet(this, _config).measurements.length ? null : _classPrivateFieldGet(this, _config).measurements[_classPrivateFieldGet(this, _curMsmIdx)].type;\n}\nfunction _curTypeResults2() {\n  return _classPrivateFieldGet(this, _results).raw[_classPrivateMethodGet(this, _curType, _curType2).call(this)] || undefined;\n}\nfunction _clear2() {\n  _classPrivateMethodGet(this, _destroyCurEngine, _destroyCurEngine2).call(this);\n  _classPrivateFieldSet(this, _measurementId, genMeasId());\n  _classPrivateFieldSet(this, _curMsmIdx, -1);\n  _classPrivateFieldSet(this, _curEngine, undefined);\n  _classPrivateMethodGet(this, _setRunning, _setRunning2).call(this, false);\n  _classPrivateMethodGet(this, _setFinished, _setFinished2).call(this, false);\n  _classPrivateFieldGet(this, _results).clear();\n}\nfunction _destroyCurEngine2() {\n  var engine = _classPrivateFieldGet(this, _curEngine);\n  if (!engine) return;\n  engine.onFinished = engine.onConnectionError = engine.onFail = engine.onMsgReceived = engine.onCredentialsFailure = engine.onMeasurementResult = function () {};\n  pausableTypes.includes(_classPrivateMethodGet(this, _curType, _curType2).call(this)) && engine.pause();\n}\nfunction _next2() {\n  var _this4 = this;\n  var _this$curMsmIdx;\n  if (pausableTypes.includes(_classPrivateMethodGet(this, _curType, _curType2).call(this)) && _classPrivateMethodGet(this, _curTypeResults, _curTypeResults2).call(this) && _classPrivateMethodGet(this, _curTypeResults, _curTypeResults2).call(this).started && !_classPrivateMethodGet(this, _curTypeResults, _curTypeResults2).call(this).finished && !_classPrivateMethodGet(this, _curTypeResults, _curTypeResults2).call(this).finishedCurrentRound && !_classPrivateMethodGet(this, _curTypeResults, _curTypeResults2).call(this).error) {\n    _classPrivateFieldGet(this, _curEngine).play();\n    return;\n  }\n\n  // advance to next msm\n  _classPrivateFieldSet(this, _curMsmIdx, (_this$curMsmIdx = _classPrivateFieldGet(this, _curMsmIdx), _this$curMsmIdx++, _this$curMsmIdx));\n  if (_classPrivateFieldGet(this, _curMsmIdx) >= _classPrivateFieldGet(this, _config).measurements.length) {\n    // done with measurements\n    _classPrivateMethodGet(this, _setRunning, _setRunning2).call(this, false);\n    _classPrivateMethodGet(this, _setFinished, _setFinished2).call(this, true);\n    return;\n  }\n  var _classPrivateFieldGet2 = _classPrivateFieldGet(this, _config).measurements[_classPrivateFieldGet(this, _curMsmIdx)],\n    type = _classPrivateFieldGet2.type,\n    msmConfig = _objectWithoutProperties(_classPrivateFieldGet2, _excluded);\n  var msmResults = _classPrivateMethodGet(this, _curTypeResults, _curTypeResults2).call(this);\n  var _classPrivateFieldGet3 = _classPrivateFieldGet(this, _config),\n    downloadApiUrl = _classPrivateFieldGet3.downloadApiUrl,\n    uploadApiUrl = _classPrivateFieldGet3.uploadApiUrl,\n    estimatedServerTime = _classPrivateFieldGet3.estimatedServerTime;\n  var engine;\n  switch (type) {\n    case 'v4Reachability':\n    case 'v6Reachability':\n      engine = new ReachabilityEngine(\"https://\".concat(msmConfig.host), {\n        fetchOptions: {\n          method: 'GET',\n          mode: 'no-cors'\n        }\n      });\n      engine.onFinished = function (result) {\n        msmResults.finished = true;\n        msmResults.results = _objectSpread2({\n          host: msmConfig.host\n        }, result);\n        _this4.onResultsChange({\n          type: type\n        });\n        _classPrivateMethodGet(_this4, _next, _next2).call(_this4);\n      };\n      break;\n    case 'rpki':\n      engine = new ReachabilityEngine(\"https://\".concat(_classPrivateFieldGet(this, _config).rpkiInvalidHost), {\n        timeout: 5000\n      });\n      engine.onFinished = function (result) {\n        (result.response ? result.response.json() : Promise.resolve()).then(function (response) {\n          msmResults.finished = true;\n          msmResults.results = _objectSpread2({\n            host: _classPrivateFieldGet(_this4, _config).rpkiInvalidHost,\n            filteringInvalids: !result.reachable\n          }, response ? {\n            asn: response.asn,\n            name: response.name\n          } : {});\n          _this4.onResultsChange({\n            type: type\n          });\n          _classPrivateMethodGet(_this4, _next, _next2).call(_this4);\n        });\n      };\n      break;\n    case 'nxdomain':\n      engine = new ReachabilityEngine(\"https://\".concat(msmConfig.nxhost), {\n        fetchOptions: {\n          mode: 'no-cors'\n        }\n      });\n      engine.onFinished = function (result) {\n        msmResults.finished = true;\n        msmResults.results = {\n          host: msmConfig.nxhost,\n          reachable: result.reachable\n        };\n        _this4.onResultsChange({\n          type: type\n        });\n        _classPrivateMethodGet(_this4, _next, _next2).call(_this4);\n      };\n      break;\n    case 'packetLoss':\n    case 'packetLossUnderLoad':\n      {\n        msmResults.finished = false;\n        var numMsgs = msmConfig.numPackets,\n          ptCfg = _objectWithoutProperties(msmConfig, _excluded2);\n        var _classPrivateFieldGet4 = _classPrivateFieldGet(this, _config),\n          turnServerUri = _classPrivateFieldGet4.turnServerUri,\n          turnServerCredsApi = _classPrivateFieldGet4.turnServerCredsApiUrl,\n          turnServerUser = _classPrivateFieldGet4.turnServerUser,\n          turnServerPass = _classPrivateFieldGet4.turnServerPass,\n          includeCredentials = _classPrivateFieldGet4.includeCredentials;\n        engine = new PacketLossEngine(_objectSpread2({\n          turnServerUri: turnServerUri,\n          turnServerCredsApi: turnServerCredsApi,\n          turnServerCredsApiIncludeCredentials: includeCredentials,\n          turnServerUser: turnServerUser,\n          turnServerPass: turnServerPass,\n          numMsgs: numMsgs,\n          // if under load\n          downloadChunkSize: msmConfig.loadDown ? _classPrivateFieldGet(this, _optimalDownloadChunkSize) : undefined,\n          uploadChunkSize: msmConfig.loadUp ? _classPrivateFieldGet(this, _optimalUploadChunkSize) : undefined,\n          downloadApiUrl: downloadApiUrl,\n          uploadApiUrl: uploadApiUrl\n        }, ptCfg));\n      }\n      engine.onMsgReceived = function () {\n        msmResults.results = Object.assign({}, engine.results);\n        _this4.onResultsChange({\n          type: type\n        });\n      };\n      engine.onFinished = function () {\n        msmResults.finished = true;\n        _this4.onResultsChange({\n          type: type\n        });\n        _classPrivateMethodGet(_this4, _next, _next2).call(_this4);\n      };\n      engine.onConnectionError = function (e) {\n        msmResults.error = e;\n        _this4.onResultsChange({\n          type: type\n        });\n        _classPrivateFieldGet(_this4, _onError).call(_this4, \"Connection error while measuring packet loss: \".concat(e));\n        _classPrivateMethodGet(_this4, _next, _next2).call(_this4);\n      };\n      engine.onCredentialsFailure = function () {\n        msmResults.error = 'unable to get turn server credentials';\n        _this4.onResultsChange({\n          type: type\n        });\n        _classPrivateFieldGet(_this4, _onError).call(_this4, 'Error while measuring packet loss: unable to get turn server credentials.');\n        _classPrivateMethodGet(_this4, _next, _next2).call(_this4);\n      };\n      break;\n    case 'latency':\n    case 'latencyUnderLoad':\n      msmResults.finished = false;\n      engine = new BandwidthEngine([{\n        dir: 'down',\n        bytes: 0,\n        count: msmConfig.numPackets,\n        bypassMinDuration: true\n      }], {\n        downloadApiUrl: downloadApiUrl,\n        uploadApiUrl: uploadApiUrl,\n        estimatedServerTime: estimatedServerTime,\n        logApiUrl: _classPrivateFieldGet(this, _config).logMeasurementApiUrl,\n        measurementId: _classPrivateFieldGet(this, _measurementId),\n        // if under load\n        downloadChunkSize: msmConfig.loadDown ? _classPrivateFieldGet(this, _optimalDownloadChunkSize) : undefined,\n        uploadChunkSize: msmConfig.loadUp ? _classPrivateFieldGet(this, _optimalUploadChunkSize) : undefined\n      });\n      engine.fetchOptions = {\n        credentials: _classPrivateFieldGet(this, _config).includeCredentials ? 'include' : undefined\n      };\n      engine.onMeasurementResult = engine.onNewMeasurementStarted = function (meas, results) {\n        msmResults.results = Object.assign({}, results.down[0]);\n        _this4.onResultsChange({\n          type: type\n        });\n      };\n      engine.onFinished = function () {\n        msmResults.finished = true;\n        _this4.onResultsChange({\n          type: type\n        });\n        _classPrivateFieldGet(_this4, _running) && _classPrivateMethodGet(_this4, _next, _next2).call(_this4);\n      };\n      engine.onConnectionError = function (e) {\n        msmResults.error = e;\n        _this4.onResultsChange({\n          type: type\n        });\n        _classPrivateFieldGet(_this4, _onError).call(_this4, \"Connection error while measuring latency: \".concat(e));\n        _classPrivateMethodGet(_this4, _next, _next2).call(_this4);\n      };\n      engine.play();\n      break;\n    case 'download':\n    case 'upload':\n      if (msmResults.finished || msmResults.error) {\n        _classPrivateMethodGet(this, _next, _next2).call(this); // skip, already concluded this bandwidth measurement type\n      } else {\n        delete msmResults.finishedCurrentRound;\n        var measureParallelLatency = _classPrivateFieldGet(this, _config)[\"measure\".concat(type === 'download' ? 'Down' : 'Up', \"loadLoadedLatency\")];\n        engine = new BandwidthEngine([_objectSpread2({\n          dir: type === 'download' ? 'down' : 'up'\n        }, msmConfig)], {\n          downloadApiUrl: downloadApiUrl,\n          uploadApiUrl: uploadApiUrl,\n          estimatedServerTime: estimatedServerTime,\n          logApiUrl: _classPrivateFieldGet(this, _config).logMeasurementApiUrl,\n          measurementId: _classPrivateFieldGet(this, _measurementId),\n          measureParallelLatency: measureParallelLatency,\n          parallelLatencyThrottleMs: _classPrivateFieldGet(this, _config).loadedLatencyThrottle\n        });\n        engine.fetchOptions = {\n          credentials: _classPrivateFieldGet(this, _config).includeCredentials ? 'include' : undefined\n        };\n        engine.finishRequestDuration = _classPrivateFieldGet(this, _config).bandwidthFinishRequestDuration;\n        engine.onNewMeasurementStarted = function (_ref) {\n          var count = _ref.count,\n            bytes = _ref.bytes;\n          var res = msmResults.results = Object.assign({}, msmResults.results);\n          !res.hasOwnProperty(bytes) && (res[bytes] = {\n            timings: [],\n            numMeasurements: 0,\n            sideLatency: measureParallelLatency ? [] : undefined\n          });\n\n          // check if count hasn't already been added\n          if (res[bytes].numMeasurements - res[bytes].timings.length !== count) {\n            res[bytes].numMeasurements += count;\n            _this4.onResultsChange({\n              type: type\n            });\n          }\n        };\n        engine.onMeasurementResult = function (_ref2) {\n          var bytes = _ref2.bytes,\n            timing = _objectWithoutProperties(_ref2, _excluded3);\n          // merge in new result\n          msmResults.results[bytes].timings.push(timing);\n          msmResults.results = Object.assign({}, msmResults.results);\n          _this4.onResultsChange({\n            type: type\n          });\n        };\n        engine.onParallelLatencyResult = function (res) {\n          // merge in new latency result\n          msmResults.results[msmConfig.bytes].sideLatency.push(res);\n          msmResults.results = Object.assign({}, msmResults.results);\n          _this4.onResultsChange({\n            type: type\n          });\n        };\n        engine.onFinished = function (results) {\n          var isLastMsmOfType = !_classPrivateFieldGet(_this4, _config).measurements.slice(_classPrivateFieldGet(_this4, _curMsmIdx) + 1).map(function (d) {\n            return d.type;\n          }).includes(type);\n          var minDuration = Math.min.apply(Math, _toConsumableArray(Object.values(type === 'download' ? results.down : results.up).slice(-1)[0].timings.map(function (d) {\n            return d.duration;\n          })));\n          var reachedEndOfMsmType = isLastMsmOfType || !msmConfig.bypassMinDuration && minDuration > _classPrivateFieldGet(_this4, _config).bandwidthFinishRequestDuration;\n          if (!reachedEndOfMsmType) {\n            msmResults.finishedCurrentRound = true;\n          } else {\n            msmResults.finished = true;\n            _this4.onResultsChange({\n              type: type\n            });\n\n            // record optimal load size\n            var largestSize = Object.keys(msmResults.results).map(function (n) {\n              return +n;\n            }).sort(function (a, b) {\n              return b - a;\n            })[0];\n            var optimalSize = largestSize * OPTIMAL_SIZE_RATIO;\n            type === 'download' && _classPrivateFieldSet(_this4, _optimalDownloadChunkSize, optimalSize);\n            type === 'upload' && _classPrivateFieldSet(_this4, _optimalUploadChunkSize, optimalSize);\n          }\n          _classPrivateFieldGet(_this4, _running) && _classPrivateMethodGet(_this4, _next, _next2).call(_this4);\n        };\n        engine.onConnectionError = function (e) {\n          msmResults.error = e;\n          _this4.onResultsChange({\n            type: type\n          });\n          _classPrivateFieldGet(_this4, _onError).call(_this4, \"Connection error while measuring \".concat(type, \": \").concat(e));\n          _classPrivateMethodGet(_this4, _next, _next2).call(_this4);\n        };\n        engine.play();\n      }\n      break;\n  }\n  _classPrivateFieldSet(this, _curEngine, engine);\n  msmResults.started = true;\n  this.onResultsChange({\n    type: type\n  });\n}\nvar _logAimApiUrl = /*#__PURE__*/new WeakMap();\nvar _logFinalResults = /*#__PURE__*/new WeakMap();\nvar LoggingMeasurementEngine = /*#__PURE__*/function (_MeasurementEngine) {\n  _inherits(LoggingMeasurementEngine, _MeasurementEngine);\n  var _super = _createSuper(LoggingMeasurementEngine);\n  function LoggingMeasurementEngine(userConfig) {\n    var _thisSuper, _this;\n    _classCallCheck(this, LoggingMeasurementEngine);\n    for (var _len = arguments.length, pt = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      pt[_key - 1] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this, userConfig].concat(pt));\n    // Internal state\n    _classPrivateFieldInitSpec(_assertThisInitialized(_this), _logAimApiUrl, {\n      writable: true,\n      value: void 0\n    });\n    // Internal methods\n    _classPrivateFieldInitSpec(_assertThisInitialized(_this), _logFinalResults, {\n      writable: true,\n      value: function value(results) {\n        _classPrivateFieldGet(_assertThisInitialized(_this), _logAimApiUrl) && logFinalResults(results, {\n          apiUrl: _classPrivateFieldGet(_assertThisInitialized(_this), _logAimApiUrl)\n        });\n      }\n    });\n    _set((_thisSuper = _assertThisInitialized(_this), _getPrototypeOf(LoggingMeasurementEngine.prototype)), \"onFinish\", _classPrivateFieldGet(_assertThisInitialized(_this), _logFinalResults), _thisSuper, true);\n    _classPrivateFieldSet(_assertThisInitialized(_this), _logAimApiUrl, Object.assign({}, defaultConfig, userConfig, internalConfig).logAimApiUrl);\n    return _this;\n  }\n\n  // Public attributes\n  _createClass(LoggingMeasurementEngine, [{\n    key: \"onFinish\",\n    set: function set(onFinish) {\n      var _this2 = this;\n      _set(_getPrototypeOf(LoggingMeasurementEngine.prototype), \"onFinish\", function (results) {\n        onFinish(results);\n        _classPrivateFieldGet(_this2, _logFinalResults).call(_this2, results);\n      }, this, true);\n    }\n  }]);\n  return LoggingMeasurementEngine;\n}(MeasurementEngine);\n\nexport { LoggingMeasurementEngine as default };\n","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport whatwgUrl from 'whatwg-url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\nconst URL = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\n/**\n * Wrapper around `new URL` to handle arbitrary URLs\n *\n * @param  {string} urlStr\n * @return {void}\n */\nfunction parseURL(urlStr) {\n\t/*\n \tCheck whether the URL is absolute or not\n \t\tScheme: https://tools.ietf.org/html/rfc3986#section-3.1\n \tAbsolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\n */\n\tif (/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.exec(urlStr)) {\n\t\turlStr = new URL(urlStr).toString();\n\t}\n\n\t// Fallback to old implementation for arbitrary URLs\n\treturn parse_url(urlStr);\n}\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parseURL(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parseURL(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parseURL(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\nconst URL$1 = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\n\nconst isDomainOrSubdomain = function isDomainOrSubdomain(destination, original) {\n\tconst orig = new URL$1(original).hostname;\n\tconst dest = new URL$1(destination).hostname;\n\n\treturn orig === dest || orig[orig.length - dest.length - 1] === '.' && orig.endsWith(dest);\n};\n\n/**\n * isSameProtocol reports whether the two provided URLs use the same protocol.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nconst isSameProtocol = function isSameProtocol(destination, original) {\n\tconst orig = new URL$1(original).protocol;\n\tconst dest = new URL$1(destination).protocol;\n\n\treturn orig === dest;\n};\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\tdestroyStream(request.body, error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\n\t\t\tif (response && response.body) {\n\t\t\t\tdestroyStream(response.body, err);\n\t\t\t}\n\n\t\t\tfinalize();\n\t\t});\n\n\t\tfixResponseChunkedTransferBadEnding(req, function (err) {\n\t\t\tif (signal && signal.aborted) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (response && response.body) {\n\t\t\t\tdestroyStream(response.body, err);\n\t\t\t}\n\t\t});\n\n\t\t/* c8 ignore next 18 */\n\t\tif (parseInt(process.version.substring(1)) < 14) {\n\t\t\t// Before Node.js 14, pipeline() does not fully support async iterators and does not always\n\t\t\t// properly handle when the socket close/end events are out of order.\n\t\t\treq.on('socket', function (s) {\n\t\t\t\ts.addListener('close', function (hadError) {\n\t\t\t\t\t// if a data listener is still present we didn't end cleanly\n\t\t\t\t\tconst hasDataListener = s.listenerCount('data') > 0;\n\n\t\t\t\t\t// if end happened before close but the socket didn't emit an error, do it now\n\t\t\t\t\tif (response && hasDataListener && !hadError && !(signal && signal.aborted)) {\n\t\t\t\t\t\tconst err = new Error('Premature close');\n\t\t\t\t\t\terr.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\t\tresponse.body.emit('error', err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL$1(location, request.url).toString();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL) || !isSameProtocol(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOpts.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\traw.on('end', function () {\n\t\t\t\t\t// some old IIS servers return zero-length OK deflate responses, so 'data' is never emitted.\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\nfunction fixResponseChunkedTransferBadEnding(request, errorCallback) {\n\tlet socket;\n\n\trequest.on('socket', function (s) {\n\t\tsocket = s;\n\t});\n\n\trequest.on('response', function (response) {\n\t\tconst headers = response.headers;\n\n\t\tif (headers['transfer-encoding'] === 'chunked' && !headers['content-length']) {\n\t\t\tresponse.once('close', function (hadError) {\n\t\t\t\t// tests for socket presence, as in some situations the\n\t\t\t\t// the 'socket' event is not triggered for the request\n\t\t\t\t// (happens in deno), avoids `TypeError`\n\t\t\t\t// if a data listener is still present we didn't end cleanly\n\t\t\t\tconst hasDataListener = socket && socket.listenerCount('data') > 0;\n\n\t\t\t\tif (hasDataListener && !hadError) {\n\t\t\t\t\tconst err = new Error('Premature close');\n\t\t\t\t\terr.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\terrorCallback(err);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n}\n\nfunction destroyStream(stream, err) {\n\tif (stream.destroy) {\n\t\tstream.destroy(err);\n\t} else {\n\t\t// node < 8\n\t\tstream.emit('error', err);\n\t\tstream.end();\n\t}\n}\n\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError, AbortError };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__(7927);\n"],"names":["parse","dasherizeProperty","property","replace","toLowerCase","CSSStyleDeclaration","elt","this","_element","module","exports","style","Proxy","get","target","getPropertyValue","has","key","set","value","setProperty","undefined","parseStyles","result","priority","styleValues","length","i","name","endsWith","slice","IMPORTANT_BANG","trim","NO_CHANGE","prototype","Object","create","_parsed","_parsedStyles","cssText","_lastParsedText","text","_names","_serialize","styles","s","getAttribute","setAttribute","getOwnPropertyNames","item","n","getPropertyPriority","test","indexOf","newprops","p","removeProperty","setPropertyValue","setPropertyPriority","CharacterData","Leaf","utils","ChildNode","NonDocumentTypeChildNode","call","substringData","offset","count","arguments","TypeError","data","IndexSizeError","substring","appendData","String","insertData","replaceData","deleteData","curtext","len","prefix","suffix","isEqual","_data","defineProperties","Node","LinkedList","createDocumentFragmentFromArguments","document","args","docFrag","createDocumentFragment","argItem","isNode","appendChild","createTextNode","after","argArr","Array","parentNode","nextSibling","some","v","doc","insertBefore","before","prevSibling","previousSibling","firstChild","remove","_preremoveNodeIterators","rooted","mutateRemove","_remove","parent","_childNodes","splice","index","_firstChild","_nextSibling","modify","replaceWith","replaceChild","Comment","nodeType","COMMENT_NODE","ownerDocument","nodeValue","mutateValue","nodeName","textContent","innerText","clone","ContainerNode","NodeList","hasChildNodes","childNodes","_ensureChildNodes","lastChild","first","kids","_previousSibling","kid","push","removeChildren","root","next","CustomEvent","Event","type","dictionary","constructor","DOMException","names","messages","constants","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","VALIDATION_ERR","TYPE_MISMATCH_ERR","SECURITY_ERR","NETWORK_ERR","ABORT_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR","code","Error","captureStackTrace","message","c","__proto__","defineProperty","DOMImplementation","Document","DocumentType","HTMLParser","xml","contextObject","supportedFeatures","hasFeature","feature","version","f","createDocumentType","qualifiedName","publicId","systemId","isValidQName","InvalidCharacterError","createDocument","namespace","doctype","e","d","createElementNS","NAMESPACE","HTML","_contentType","SVG","createHTMLDocument","titleText","html","createElement","head","title","modclock","mozSetOutputMutationHandler","handler","mutationHandler","mozGetInputMutationHandler","nyi","mozHTMLParser","DOMTokenList","getter","setter","_getString","_setString","_length","_lastStringValue","_update","fixIndex","clist","list","oldLength","handleErrors","token","SyntaxError","getList","strProp","arr","toArray","str","seen","split","filter","contains","add","toggle","force","newToken","idx","idx2","toString","join","Element","Text","DocumentFragment","ProcessingInstruction","TreeWalker","NodeIterator","NodeFilter","URL","select","events","svg","MUTATE","isApiWritable","isHTML","address","DOCUMENT_NODE","_address","readyState","implementation","documentElement","_templateDocCache","_nodeIterators","_nid","_nextnid","_nodes","byId","supportedEvents","event","customevent","uievent","mouseevent","replacementEvent","htmlevents","mouseevents","mutationevents","uievents","mirrorAttr","defaultValue","o","validateAndExtract","localName","pos","NamespaceError","XML","XMLNS","namedHTMLChild","ELEMENT_NODE","namespaceURI","recursivelyRoot","node","id","addId","_roothook","recursivelyUproot","delId","uproot","recursivelySetOwner","owner","_lastModTime","hasOwnProperty","_tagName","MultiId","nodes","firstNode","_setMutationHandler","_dispatchRendererEvent","targetNid","details","_dispatchEvent","documentURI","compatMode","_quirks","createComment","createProcessingInstruction","isValidName","createAttribute","toASCIILowerCase","_Attr","createAttributeNS","ve","contentType","writable","_createElementNS","createEvent","interfaceName","_initialized","NotSupportedError","createTreeWalker","whatToShow","SHOW_ALL","createNodeIterator","_attachNodeIterator","ni","_detachNodeIterator","toBeRemoved","forEach","_preremove","_updateDocTypeElement","DOCUMENT_TYPE_NODE","child","refChild","removeChild","getElementById","getFirst","_hasMultipleElementsWithId","getElementsByName","getElementsByTagName","getElementsByTagNameNS","getElementsByClassName","adoptNode","ATTRIBUTE_NODE","importNode","deep","cloneNode","origin","characterSet","domain","referrer","cookie","lastModified","location","defaultView","_titleElement","dir","htmlElement","tagName","fgColor","body","linkColor","vlinkColor","alinkColor","bgColor","charset","inputEncoding","scrollingElement","images","embeds","plugins","links","forms","scripts","applets","activeElement","innerHTML","serialize","outerHTML","write","InvalidStateError","_parser","writeln","open","close","_appendChild","VALUE","mutateAttr","attr","oldval","ATTR","ownerElement","mutateRemoveAttr","REMOVE_ATTR","REMOVE","mutateInsert","INSERT","mutateMove","MOVE","val","assert","del","downgrade","_resolve","href","_documentBaseURL","resolve","url","base","querySelector","_templateDoc","newDoc","selector","querySelectorAll","_getEventHandler","_setEventHandler","nid","compareDocumentPosition","DOCUMENT_POSITION_PRECEDING","DOCUMENT_FRAGMENT_NODE","getOwnPropertyDescriptor","context","nextElement","attributes","NodeUtils","FilteredElementList","NamedNodeMap","uppercaseCache","_attrsByQName","_attrsByLName","_attrKeys","recursiveGetText","a","TEXT_NODE","Attr","lname","_setOwnerElement","AttributesArray","ChildrenCollection","element","updateCache","localNameElementFilter","tn","up","toASCIIUpperCase","strings","newtext","serializeOne","NoModificationAllowedError","parser","_asDocumentFragment","_insertAdjacent","position","insertAdjacentElement","insertAdjacentText","textNode","insertAdjacentHTML","children","_children","_attributes","firstElementChild","lastElementChild","childElementCount","nextElementSibling","parentElement","lclname","htmlLocalNameElementFilter","ns","namespaceElementFilter","namespaceLocalNameElementFilter","every","classList","classNamesElementFilter","elementNameFilter","b","_addQName","concat","that","_numattrs","_attr","hasAttributeNS","getAttributeNS","_lookupNamespacePrefix","originalElement","lookupNamespaceURI","qname","getAttributeNode","getAttributeNodeNS","isArray","hasAttribute","hasAttributes","toggleAttribute","_setAttribute","removeAttribute","isnew","_newattr","_newattrhook","_setAttributeNS","setAttributeNS","setAttributeNode","oldAttrs","removeAttributeNode","setAttributeNodeNS","oldAttr","shift","onchange","removeAttributeNS","_removeQName","NotFoundError","getAttributeNames","map","_getattr","_setattr","existing","className","self","_classList","dtlist","matches","closest","el","registerChangeHandler","newval","_ownerElement","_attributeChangeHandlers","specified","globalThis","Symbol","iterator","done","childrenByNumber","namedItem","childrenByName","namedItems","namedElts","lastModTime","currentTarget","eventPhase","AT_TARGET","bubbles","cancelable","isTrusted","defaultPrevented","timeStamp","Date","now","_propagationStopped","_immediatePropagationStopped","_dispatching","CAPTURING_PHASE","BUBBLING_PHASE","stopPropagation","stopImmediatePropagation","preventDefault","initEvent","MouseEvent","EventTarget","addEventListener","listener","capture","_listeners","l","obj","removeEventListener","dispatchEvent","trusted","invoke","phase","_handlers","rv","handleEvent","fn","ancestors","ii","nn","_armed","x","clientX","y","clientY","t","_isClick","_doClick","button","Math","abs","Y","_click_in_progress","activated","_post_click_activation_steps","_pre_click_activation_steps","click","initMouseEvent","screenX","screenY","ctrlKey","altKey","shiftKey","metaKey","_cancelled_activation_steps","cache","traverse","checkcache","start","impl","elements","pushAll","Function","apply","bind","EOF","TEXT","TAG","ENDTAG","COMMENT","DOCTYPE","NOATTRS","quirkyPublicIds","quirkySystemId","conditionallyQuirkyPublicIds","limitedQuirkyPublicIds","specialSet","MATHML","addressdivpSet","dddtSet","tablesectionrowSet","impliedEndTagsSet","thoroughImpliedEndTagsSet","tableContextSet","tableBodyContextSet","tableRowContextSet","formassociatedSet","inScopeSet","inListItemScopeSet","ol","ul","inButtonScopeSet","inTableScopeSet","mathmlTextIntegrationPointSet","mi","mo","mn","ms","mtext","htmlIntegrationPointSet","foreignObject","desc","foreignAttributes","XLINK","svgAttrAdjustments","attributename","attributetype","basefrequency","baseprofile","calcmode","clippathunits","diffuseconstant","edgemode","filterunits","glyphref","gradienttransform","gradientunits","kernelmatrix","kernelunitlength","keypoints","keysplines","keytimes","lengthadjust","limitingconeangle","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","numoctaves","pathlength","patterncontentunits","patterntransform","patternunits","pointsatx","pointsaty","pointsatz","preservealpha","preserveaspectratio","primitiveunits","refx","refy","repeatcount","repeatdur","requiredextensions","requiredfeatures","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","surfacescale","systemlanguage","tablevalues","targetx","targety","textlength","viewbox","viewtarget","xchannelselector","ychannelselector","zoomandpan","svgTagNameAdjustments","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","clippath","feblend","fecolormatrix","fecomponenttransfer","fecomposite","feconvolvematrix","fediffuselighting","fedisplacementmap","fedistantlight","feflood","fefunca","fefuncb","fefuncg","fefuncr","fegaussianblur","feimage","femerge","femergenode","femorphology","feoffset","fepointlight","fespecularlighting","fespotlight","fetile","feturbulence","foreignobject","lineargradient","radialgradient","textpath","numericCharRefReplacements","namedCharRefs","NAMEDCHARREF","NAMEDCHARREF_MAXLEN","DBLQUOTEATTRVAL","SINGLEQUOTEATTRVAL","UNQUOTEDATTRVAL","TAGNAME","ATTRNAME","CDATATEXT","DATATEXT","RAWTEXT","PLAINTEXT","SIMPLETAG","SIMPLEATTR","NONWS","ALLNONWS","NONWSNONNUL","LEADINGWS","NULCHARS","buf2str","buf","CHUNKSIZE","fromCharCode","isA","tagnames","isMathmlTextIntegrationPoint","isHTMLIntegrationPoint","encoding","adjustSVGAttributes","attrs","adjustMathMLAttributes","adjustForeignAttributes","transferAttributes","fragmentContext","options","return_state","character_reference_code","chars","numchars","nextchar","input_complete","scanner_skip_newline","reentrant_invocations","saved_scanner_state","leftovers","first_batch","paused","tokenizer","data_state","tagnamebuf","lasttagname","tempbuf","attrnamebuf","attrvaluebuf","commentbuf","doctypenamebuf","doctypepublicbuf","doctypesystembuf","is_end_tag","arg3","arg4","publicid","systemid","force_quirks","_limitedQuirks","before_html_mode","originalInsertionMode","templateInsertionModes","stack","ElementStack","afe","ActiveFormattingElements","fragment","head_element_pointer","form_element_pointer","scripting_enabled","_scripting_enabled","pending_table_text","text_integration_mode","frameset_ok","textrun","textIncludesNUL","ignore_linefeed","htmlparser","frag","pause","resume","end","shouldPauseFunc","moreToDo","charCodeAt","scanChars","pop","rcdata_state","plaintext_state","HTMLTemplateElement","in_template_mode","resetInsertionMode","HTMLFormElement","codepoint","pattern","eof","lookahead","needsString","addAttribute","beginEndTagName","beginTempBuf","beginAttrName","beginAttrValue","beginComment","beginDoctype","beginDoctypePublicId","beginDoctypeSystemId","forcequirks","appropriateEndTag","flushText","insertToken","getMatchingChars","lastIndex","match","exec","emitCharsWhile","emitTag","tagname","emitDoctype","emitEOF","current","top","insertForeignToken","insertComment","foster_parent_mode","fosterParent","content","insertText","createHTMLElt","insertHTMLElement","insertElement","_form","eltFunc","insertForeignElement","lastElementOfType","lastTable","lastTemplate","prev","HTMLTableElement","last","tag","j","ancestor","in_select_in_table_mode","in_select_mode","in_row_mode","in_table_body_mode","in_caption_mode","in_column_group_mode","in_table_mode","in_body_mode","in_frameset_mode","before_head_mode","after_head_mode","in_head_mode","in_cell_mode","parseRawText","rawtext_state","text_mode","afeclone","afereconstruct","entry","MARKER","lastIndexOf","newelt","BOOKMARK","stopParsing","reconsume","new_state","character_reference_state","matched","emitSimpleTag","tag_open_state","rcdata_less_than_sign_state","rawtext_less_than_sign_state","script_data_state","script_data_less_than_sign_state","markup_declaration_open_state","end_tag_open_state","tag_name_state","bogus_comment_state","before_attribute_name_state","self_closing_start_tag_state","rcdata_end_tag_open_state","rcdata_end_tag_name_state","rawtext_end_tag_open_state","rawtext_end_tag_name_state","script_data_end_tag_open_state","script_data_escape_start_state","script_data_end_tag_name_state","script_data_escape_start_dash_state","script_data_escaped_dash_dash_state","script_data_escaped_state","script_data_escaped_dash_state","script_data_escaped_less_than_sign_state","script_data_escaped_end_tag_open_state","script_data_double_escape_start_state","script_data_escaped_end_tag_name_state","script_data_double_escaped_state","script_data_double_escaped_dash_state","script_data_double_escaped_less_than_sign_state","script_data_double_escaped_dash_dash_state","script_data_double_escape_end_state","attribute_name_state","after_attribute_value_quoted_state","handleSimpleAttribute","after_attribute_name_state","before_attribute_value_state","attribute_value_double_quoted_state","attribute_value_single_quoted_state","attribute_value_unquoted_state","comment","comment_start_state","toUpperCase","doctype_state","cdata_section_state","comment_start_dash_state","comment_state","comment_end_state","comment_less_than_sign_state","comment_end_dash_state","comment_less_than_sign_bang_state","comment_less_than_sign_bang_dash_state","comment_less_than_sign_bang_dash_dash_state","comment_end_bang_state","before_doctype_name_state","doctype_name_state","after_doctype_name_state","after_doctype_public_keyword_state","after_doctype_system_keyword_state","bogus_doctype_state","before_doctype_public_identifier_state","doctype_public_identifier_double_quoted_state","doctype_public_identifier_single_quoted_state","after_doctype_public_identifier_state","between_doctype_public_and_system_identifiers_state","doctype_system_identifier_double_quoted_state","doctype_system_identifier_single_quoted_state","before_doctype_system_identifier_state","after_doctype_system_identifier_state","cdata_section_bracket_state","cdata_section_end_state","character_reference_end_state","numeric_character_reference_state","named_character_reference_state","str2buf","hexadecimal_character_reference_start_state","decimal_character_reference_start_state","hexadecimal_character_reference_state","decimal_character_reference_state","numeric_character_reference_end_state","ws","in_head_noscript_mode","_parser_inserted","_force_async","_already_started","insertMarker","generateImpliedEndTags","popTag","clearToMarker","removeElement","HTMLBodyElement","HTMLHtmlElement","inButtonScope","HTMLHeadingElement","HTMLLIElement","inScope","findElementByTag","HTMLOptionElement","after_body_mode","openform","elementInScope","inListItemScope","elementTypeInScope","popElementType","outer","fmtelt","furthestblockindex","furthestblock","popElement","insertAfter","nodeafeindex","lastnode","nodeindex","inner","newelt2","adoptionAgency","HTMLScriptElement","in_table_text_mode","clearToContext","inTableScope","getTypeAttr","end_caption","endsect","endrow","HTMLOptGroupElement","inSelectScope","switchModeAndReprocess","mode","after_after_body_mode","HTMLFrameSetElement","after_frameset_mode","after_after_frameset_mode","isHTMLFont","testTokenizer","input","initialState","lastStartTag","charbychar","tokens","inSpecificScope","elementInSpecificScope","elementTypeInSpecificScope","localname","butnot","thorough","endTagSet","equal","attrcopy","oldelt","oldattrs","oldname","HierarchyRequestError","valid","a_first","a_last","b_first","b_last","URLUtils","Location","window","_window","_href","assign","newurl","reload","UIEvent","buttons","relatedTarget","view","detail","getModifierState","shouldOverride","getNamedItem","getNamedItemNS","setNamedItem","setNamedItemNS","removeNamedItem","removeNamedItemNS","NavigatorID","appCodeName","appName","appVersion","platform","product","productSub","userAgent","vendor","vendorSub","taintEnabled","_index","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","NOTATION_NODE","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","baseURI","isConnected","host","_countChildrenOfType","sum","_ensureInsertValid","isPreinsert","isAncestor","_insertOrReplace","these","those","reverse","min","isSameNode","isEqualNode","c1","c2","lookupPrefix","isDefaultNamespace","ensureSameDoc","WrongDocumentError","isReplace","before_index","bothRooted","spliceArgs","time","normalize","prevChild","_innerHTML","FILTER_ACCEPT","FILTER_REJECT","FILTER_SKIP","SHOW_ELEMENT","SHOW_ATTRIBUTE","SHOW_TEXT","SHOW_CDATA_SECTION","SHOW_ENTITY_REFERENCE","SHOW_ENTITY","SHOW_PROCESSING_INSTRUCTION","SHOW_COMMENT","SHOW_DOCUMENT","SHOW_DOCUMENT_TYPE","SHOW_DOCUMENT_FRAGMENT","SHOW_NOTATION","NodeTraversal","move","stayWithin","directionIsNext","previous","isInclusiveAncestor","possibleChild","beforeNode","_referenceNode","_pointerBeforeReferenceNode","_root","_internalFilter","_whatToShow","Number","_filter","_active","referenceNode","pointerBeforeReferenceNode","acceptNode","toBeRemovedNode","nextNode","previousNode","detach","super","nextAncestorSibling","deepLastChild","nextSkippingChildren","k","attrname","escapeAttr","emptyElements","ss","hasRawContent","escapeMatchingClosingTag","extraNewLine","charAt","parenttag","ESCAPE_REGEXP","escape","escapeClosingCommentTag","escapeProcessingInstructionContent","STYLE","SCRIPT","XMP","IFRAME","NOEMBED","NOFRAMES","area","basefont","bgsound","br","col","embed","frame","hr","img","keygen","link","meta","param","source","track","wbr","ESCAPE_ATTR_REGEXP","rawText","parentTag","parentClosingTag","includes","matchAll","RegExp","CLOSING_COMMENT_REGEXP","rawContent","replaceAll","previousElementSibling","_textchangehook","splitText","newdata","newnode","wholeText","replaceWholeText","mapChild","mapSibling","traverseChildren","tw","sibling","_currentNode","traverseSiblings","currentNode","CHILDREN","initUIEvent","scheme","userinfo","userinfoPattern","username","password","portPattern","port","path","query","authorityPattern","hierarchyPattern","percentEncode","isAbsolute","isAuthorityBased","isHierarchical","relative","r","remove_dot_segments","basepath","refpath","lastslash","merge","output","twochars","threechars","fourchars","segment","_url","protocol","hostname","parseInt","pathname","search","hash","originForPort","defaultPort","_inherit","proto","Window","console","history","back","forward","go","navigator","frames","frameElement","opener","onload","getComputedStyle","expose","WindowTimers","setTimeout","clearTimeout","setInterval","clearInterval","alias","missingValueDefault","missing","invalidValueDefault","invalid","Boolean","def","default","unsigned_long","signed_long","unsigned_fallback","max","setmin","float","parseFloat","isFinite","floor","numberPropDesc","treatNullAsEmptyString","__domino_frozen__","EventHandlerBuilder","form","EventHandlerChangeHandler","build","spec","defaultConstructor","tagList","tagNameToImpl","ctor","props","superclass","eventHandlerTypes","addEventHandlers","tags","defineElement","htmlElements","htmlNameToImpl","define","HTMLElement","CORS","HTMLUnknownElement","REFERRER","focusableElements","dangerouslySetInnerHTML","template","_style","blur","focus","forceSpellCheck","submit","lang","draggable","spellcheck","enterKeyHint","autoCapitalize","autoFocus","accessKey","nonce","hidden","translate","tabIndex","contentEditable","formAssociatedProps","ping","download","rel","media","hreflang","referrerPolicy","coords","rev","shape","alt","noHref","clear","vLink","aLink","background","disabled","autofocus","formTarget","formAction","formNoValidate","formMethod","formEnctype","compact","align","src","width","height","action","autocomplete","acceptCharset","noValidate","method","enctype","color","noShade","size","xmlns","srcdoc","seamless","allow","allowFullscreen","allowUserMedia","allowPaymentRequest","loading","scrolling","frameBorder","longDesc","marginHeight","marginWidth","srcset","crossOrigin","useMap","isMap","sizes","lowsrc","hspace","vspace","border","checked","group","accept","placeholder","step","dirName","multiple","required","readOnly","defaultChecked","minLength","maxLength","inputMode","challenge","keytype","htmlFor","integrity","imageSizes","imageSrcset","label","httpEquiv","cite","dateTime","_numitems","items","reversed","typeMustMatch","archive","declare","standby","codeBase","codeType","defaultSelected","valueType","defer","async","nomodule","scoped","colSpan","rowSpan","scope","abbr","axis","ch","chOff","noWrap","vAlign","span","rows","rules","summary","cellPadding","cellSpacing","_contentFragment","cells","textLength","wrap","cols","pubDate","preload","loop","autoplay","mediaGroup","controls","defaultMuted","HTMLMediaElement","poster","HTMLTableCellElement","getContext","probablySupportsContext","setContext","transferControlToProxy","toDataURL","toBlob","show","showModal","returnValue","_label","icon","radiogroup","srclang","kind","NONE","LOADING","LOADED","ERROR","face","createDOMImplementation","createIncrementalHTMLParser","process","createWindow","order","parentIsElement","unquote","str_escape","m","cp","fromCodePoint","ident","decodeid","makeInside","regex","inside","truncateUrl","num","nth","param_","cap","parseNth","find","advance","selectors","op","operators","sel","compileGroup","selected","arg","con","willValidate","validity","prop","combinators","ref","combinator","nonascii","cssid","simple","pseudo","compile","sel_","subject","buff","tok","makeSubject","makeSimple","noop","makeTest","func","tests","results","sort","hyphenate","parenDepth","quote","valueStart","propStart","currentProp","styleVal","svgElements","svgNameToImpl","SVGElement","createSVGRect","ERR","InvalidModificationError","InvalidAccessError","TypeMismatchError","SecurityError","NetworkError","AbortError","UrlMismatchError","QuotaExceededError","TimeoutError","InvalidNodeTypeError","DataCloneError","expr","msg","documentOrder","simplename","hassurrogates","surrogatename","surrogatechars","pairs","surrogatepairs","simpleqname","surrogateqname","ncnamestartchars","ncnamechars","ncname","namestartchars","namechars","fmtDef","validate","compare","formatNames","fastFormats","fullFormats","date","compareDate","compareTime","DATE_TIME_SEPARATOR","compareDateTime","duration","uri","NOT_URI_FRAGMENT","URI","email","ipv4","ipv6","Z_ANCHOR","uuid","byte","BYTE","int32","isInteger","MAX_INT32","MIN_INT32","int64","validateNumber","double","binary","keys","DATE","DAYS","year","month","day","isLeapYear","d1","d2","TIME","withTimeZone","hour","minute","second","timeZone","t1","t2","a1","a2","dt1","dt2","res","formats_1","limit_1","codegen_1","fullName","Name","fastName","formatsPlugin","ajv","opts","keywords","addFormats","formats","exportName","fs","_a","_b","_","addFormat","formatLimitDefinition","ajv_1","ops","KWDs","formatMaximum","okStr","ok","LTE","fail","GT","formatMinimum","GTE","LT","formatExclusiveMaximum","formatExclusiveMinimum","error","keyword","schemaCode","params","schemaType","$data","cxt","gen","it","validateFormats","fCxt","KeywordCxt","RULES","all","format","definition","compareCode","fmt","fmts","scopeValue","const","fail$data","or","validate$DataFormat","schema","getProperty","validateFormat","dependencies","addKeyword","MissingRefError","ValidationError","CodeGen","nil","stringify","Ajv","core_1","draft7_1","discriminator_1","draft7MetaSchema","META_SUPPORT_DATA","META_SCHEMA_ID","_addVocabularies","addVocabulary","discriminator","_addDefaultMetaSchema","metaSchema","$dataMetaSchema","addMetaSchema","refs","defaultMeta","getSchema","validate_1","enumerable","validation_error_1","ref_error_1","regexpCode","getEsmExportName","safeStringify","strConcat","addCodeArg","_Code","IDENTIFIER","_CodeOrName","emptyStr","_items","_str","reduce","strs","plus","mergeExprItems","optimize","JSON","rx","and","not","varKinds","ValueScopeName","ValueScope","Scope","code_1","scope_1","code_2","scope_2","EQ","NEQ","NOT","OR","AND","ADD","optimizeNodes","optimizeNames","_constants","Def","varKind","rhs","render","es5","_n","var","optimizeExpr","Assign","lhs","sideEffects","addExprNames","AssignOp","Label","Break","Throw","AnyCode","ParentNode","subtractNames","addNames","BlockNode","Root","Else","If","condition","else","cond","For","ForLoop","iteration","ForRange","from","to","ForIter","iterable","Func","Return","Try","catch","finally","Catch","Finally","replaceName","par","extScope","_values","_blockStarts","lines","_extScope","_scope","scopeName","prefixOrName","Set","getScopeValue","keyOrRef","getValue","scopeRefs","scopeCode","_def","nameOrPrefix","constant","toName","_leafNode","_constant","let","object","keyValues","thenBody","elseBody","_blockNode","endIf","elseIf","_elseNode","_endBlockNode","_for","forBody","endFor","forRange","forOf","forIn","ownProperties","tryBody","catchCode","finallyCode","_currNode","block","nodeCount","endBlock","toClose","funcBody","endFunc","N1","N2","andCode","mappend","orCode","UsedValueState","ValueError","prefixes","_prefixes","_parent","_newName","_nameGroup","nameStr","setValue","itemIndex","scopePath","line","valueKey","vs","_name","Map","values","_reduceValues","usedValues","getCode","valueCode","nameSet","Started","Completed","extendErrors","resetErrorsCount","reportExtraError","reportError","keyword$DataError","keywordError","util_1","names_1","addError","errObj","err","if","vErrors","errors","returnErrors","errs","validateName","schemaEnv","$async","throw","return","errorPaths","overrideAllErrors","compositeRule","allErrors","errorObjectCode","errsCount","schemaValue","instancePath","errorPath","errSchemaPath","verbose","E","schemaPath","propertyName","parentSchema","createErrors","errorInstancePath","errorSchemaPath","topSchemaRef","extraErrorProps","errorObject","instPath","getErrorPath","Type","Str","schPath","resolveSchema","getCompilingSchema","resolveRef","compileSchema","SchemaEnv","resolve_1","env","dynamicAnchors","schemaId","baseId","normalizeId","localRefs","sch","_sch","rootId","getFullPath","uriResolver","_ValidationError","schemaCxt","parentData","parentDataProperty","dataNames","dataPathArr","dataLevel","dataTypes","definedProperties","jtd","sourceCode","_compilations","validateFunctionCode","validateCode","makeValidate","scopeValues","unevaluated","evaluated","dynamicProps","dynamicItems","logger","delete","inlineOrCompile","inlineRef","inlineRefs","schEnv","s2","s1","schemas","refPath","_getFullPath","getJsonPointer","schOrRef","schId","resolveUrl","schOrFunc","PREVENT_SCOPE_CHANGE","parsedRef","part","partSchema","unescapeFragment","$ref","schemaHasRulesButRef","valCxt","rootData","json","jsonPos","jsonLen","jsonPart","resolver","missingRef","missingSchema","getSchemaRefs","SIMPLE_INLINED","limit","hasRef","countKeys","REF_KEYWORDS","Infinity","eachItem","TRAILING_SLASH_HASH","ANCHOR","baseIds","pathPrefix","schemaRefs","allKeys","jsonPtr","parentJsonPtr","fullPath","innerBaseId","addRef","ambiguos","checkAmbiguosRef","addAnchor","anchor","$anchor","$dynamicAnchor","sch1","sch2","getRules","isJSONType","jsonTypes","groups","number","string","array","types","integer","boolean","null","post","checkStrictMode","useFunc","setEvaluated","evaluatedPropsToName","mergeEvaluated","unescapeJsonPointer","escapeJsonPointer","escapeFragment","schemaRefOrVal","schemaHasRules","checkUnknownRules","alwaysValidSchema","toHash","strictSchema","makeMergeEvaluated","mergeNames","mergeToName","mergeValues","resultToName","ps","decodeURIComponent","encodeURIComponent","xs","snippets","warn","dataProp","dataPropType","jsPropertySyntax","isNumber","Num","shouldUseGroup","rule","shouldUseRule","implements","kwd","schemaHasRulesForType","boolOrEmptySchema","topBoolOrEmptySchema","errors_1","boolError","falseSchemaError","reportTypeError","checkDataTypes","checkDataType","coerceAndCheckDataType","getJSONTypes","getSchemaTypes","DataType","rules_1","applicability_1","ts","nullable","coerceTo","coerceTypes","COERCIBLE","coerceToTypes","checkTypes","wrongType","strictNumbers","Wrong","dataType","coerced","coerceSpecificType","assignParentData","coerceData","strictNums","correct","Correct","numCond","_cond","notObj","typeError","getTypeErrorContext","assignDefaults","assignDefault","childData","useDefaults","ty","properties","getData","boolSchema_1","dataType_1","dataType_2","defaults_1","keyword_1","subschema_1","validateFunction","funcSourceUrl","dynamicRef","destructureValCxtES5","destructureValCxt","schemaCxtHasRules","isSchemaObj","checkKeywords","ignoreKeywordsWithRef","checkRefsAndKeywords","typeAndKeywords","schemaKeywords","commentKeyword","$comment","rootName","typeErrors","groupKeywords","iterateKeywords","strictTypes","includesType","strictTypesError","withTypes","narrowSchemaTypes","checkContextTypes","allowUnionTypes","checkMultipleTypes","hasApplicableType","kwdT","schTs","checkKeywordTypes","checkStrictTypes","keywordCode","checkNoDefault","resetEvaluated","assignEvaluated","returnResults","topSchemaObjCode","validateKeywordUsage","validSchemaType","allowUndefined","trackErrors","successAction","failAction","failResult","pass","invalid$data","append","errorParams","setParams","_error","$dataError","reset","block$data","codeBlock","$dataValid","check$data","validateSchema","st","wrong$DataType","validateSchemaRef","invalid$DataSchema","subschema","appl","getSubschema","extendSubschemaData","extendSubschemaMode","nextContext","updateContext","checkAsyncSchema","subSchemaObjCode","subschemaCode","mergeValidEvaluated","ruleType","funcKeywordCode","macroKeywordCode","JSON_POINTER","RELATIVE_JSON_POINTER","jsonPointer","errorMsg","segments","pointerType","modifyData","useKeyword","macroSchema","macro","schemaRef","checkAsyncKeyword","validateRef","assignValid","_await","passCxt","passContext","passSchema","callValidateCode","modifying","reportErrs","ruleErrs","try","validateAsync","validateErrs","validateSync","addErrs","deps","errorsText","schemaProp","dpType","dataContextProps","_nextData","jtdDiscriminator","jtdMetadata","compile_1","codegen_2","$dataRefSchema","uri_1","defaultRegExp","flags","META_IGNORE_OPTIONS","EXT_SCOPE_NAMES","removedOptions","errorDataPath","jsonPointers","extendRefs","missingRefs","processCode","strictDefaults","strictKeywords","uniqueItems","unknownFormats","ajvErrors","deprecatedOptions","unicode","requiredOptions","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_0","strict","_optz","regExp","strictTuples","strictRequired","loopRequired","loopEnum","addUsedSchema","unicodeRegExp","int32range","_loading","_cache","noLogs","log","getLogger","formatOpt","checkOptions","_metaOpts","getMetaSchemaOptions","addInitialFormats","addInitialKeywords","addInitialSchemas","_dataRefSchema","$id","schemaKeyRef","_meta","_addSchema","_compileSchemaEnv","compileAsync","loadSchema","runCompileAsync","_schema","loadMetaSchema","$schema","_compileAsync","checkLoaded","loadMissingSchema","_loadSchema","addSchema","_validateSchema","_checkUnique","throwOrLogError","keyRef","getSchEnv","removeSchema","_removeAllSchemas","cacheKey","definitions","kwdOrDef","checkKeyword","addRule","keywordMetaschema","getKeyword","removeKeyword","findIndex","separator","dataVar","keywordsJsonPointers","seg","schemaOrData","startsWith","_compileMetaSchema","currentOpts","checkOpts","opt","optsSchemas","defs","metaOpts","KEYWORD_NAME","ruleGroup","addBeforeRule","_rule","$dataRef","anyOf","ucs2length","validation","validateAdditionalItems","break","validateItems","additionalProperty","removeAdditional","allSchemaProperties","patProps","patternProperties","deleteAdditional","additionalPropertyCode","applyAdditionalSchema","definedProp","propsSchema","isOwnProperty","usePattern","isAdditional","schCxt","validateUnion","minContains","maxContains","validateItemsWithCount","schValid","checkLimits","_valid","validateSchemaDeps","validatePropertyDeps","depsCount","property_ies","missingProperty","propDeps","schDeps","propertyDeps","schemaDeps","splitDependencies","hasProperty","propertyInData","depProp","checkReportMissingProp","checkMissingProp","reportMissingProp","ifClause","then","hasThen","hasSchema","hasElse","validateIf","validateClause","additionalItems_1","prefixItems_1","items_1","items2020_1","contains_1","dependencies_1","propertyNames_1","additionalProperties_1","properties_1","patternProperties_1","not_1","anyOf_1","oneOf_1","allOf_1","if_1","thenElse_1","draft2020","applicator","validateTuple","validateArray","extraItems","schArr","fullTuple","minItems","maxItems","checkStrictTuple","prefixItems","passing","util_2","patterns","alwaysValidPatterns","checkProperties","allowMatchingProperties","checkMatchingProperties","pat","validateProperties","alwaysValid","validatePatternProperties","additionalProperties","allProps","hasDefault","applyPropertySchema","schemaProperties","noPropertyInData","hasPropFunc","schemaMap","dataAndSchema","newRegExp","u","validArr","notValid","id_1","ref_1","core","callRef","getValidate","callRootRef","schOrEnv","callValidate","schName","inlineRefSchema","addErrorsFrom","addEvaluatedFrom","schEvaluated","callAsyncRef","types_1","discrError","DiscrError","Tag","oneOf","mapping","applyTagSchema","oneOfMapping","topRequired","hasRequired","tagRequired","propSch","addMappings","addMapping","enum","tagValue","getMapping","Mapping","validateMapping","validation_1","applicator_1","format_1","metadata_1","draft7Vocabularies","metadataVocabulary","contentVocabulary","fDef","fType","callFormat","validData","invalidFmt","formatDef","unknownMsg","unknownFormat","fmtType","fmtRef","getFormat","validCondition","equal_1","useLoop","eql","getEql","vSchema","equalCode","limitNumber_1","multipleOf_1","limitLength_1","pattern_1","limitProperties_1","required_1","limitItems_1","uniqueItems_1","const_1","enum_1","comp","ucs2length_1","maximum","minimum","exclusiveMaximum","exclusiveMinimum","prec","multipleOfPrecision","loopAllRequired","allErrorsMode","loopUntilMissing","exitOnErrorMode","requiredKey","itemTypes","loopN","indices","for","loopN2","cb","_traverse","pre","rootSchema","parentKeyword","keyIndex","arrayKeywords","propsKeywords","skipKeywords","additionalItems","propertyNames","allOf","$defs","multipleOf","maxProperties","minProperties","NOOP","LIMIT_FILES_DESCRIPTORS","LIMIT_BASENAME_LENGTH","IS_USER_ROOT","IS_POSIX","DEFAULT_TIMEOUT_SYNC","DEFAULT_TIMEOUT_ASYNC","DEFAULT_WRITE_OPTIONS","DEFAULT_READ_OPTIONS","DEFAULT_FOLDER_MODE","DEFAULT_FILE_MODE","DEFAULT_ENCODING","getuid","writeFileSync","writeFile","readFileSync","readFile","consts_1","fs_1","lang_1","scheduler_1","temp_1","filePath","isString","timeout","readFileRetry","readFileSyncRetry","callback","isFunction","promise","writeFileAsync","schedulerCustomDisposer","schedulerDisposer","tempDisposer","tempPath","fd","schedule","realpathAttempt","tmpCreate","tmpPurge","useStatChown","isUndefined","chown","useStatMode","stat","statAttempt","uid","gid","parentPath","dirname","mkdirAttempt","recursive","openRetry","tmpCreated","writeRetry","fsync","fsyncWait","fsyncRetry","fsyncAttempt","closeRetry","chownAttempt","chmodAttempt","renameRetry","truncate","closeAttempt","purge","realpathSyncAttempt","statSyncAttempt","mkdirSyncAttempt","openSyncRetry","writeSyncRetry","fsyncSyncRetry","closeSyncRetry","chownSyncAttempt","chmodSyncAttempt","renameSyncRetry","closeSyncAttempt","attemptifySync","attemptifyAsync","onError","attemptify_1","fs_handlers_1","retryify_1","FS","promisify","chmod","onChangeError","mkdir","realpath","unlinkAttempt","unlink","retryifyAsync","isRetriableError","rename","statRetry","chmodSync","chownSync","closeSync","mkdirSync","realpathSync","statSync","unlinkSyncAttempt","unlinkSync","retryifySync","fsyncSync","openSync","renameSync","statSyncRetry","writeSync","Handlers","isChangeErrorOk","retryify_queue_1","timestamp","attempt","cleanup","delay","round","random","Promise","RetryfyQueue","interval","intervalId","queueActive","queueWaiting","init","tick","Queues","Scheduler","queue","job","Temp","store","randomness","creator","purgeSync","purgeSyncAll","basename","truncable","truncationLength","on","_Conf_validator","_Conf_encryptionKey","_Conf_options","_Conf_defaultValues","__classPrivateFieldSet","receiver","state","__classPrivateFieldGet","crypto","events_1","dotProp","pkgUp","envPaths","atomically","ajv_formats_1","debounceFn","semver","onetime","encryptionAlgorithm","createPlainObject","parentDir","__filename","filename","INTERNAL_KEY","MIGRATION_KEY","Conf","partialOptions","_deserialize","configName","fileExtension","projectSuffix","clearInvalidConfig","accessPropertiesByDotNotation","configFileMode","getPackageData","packagePath","sync","cwd","packageData","projectName","config","entries","defaults","deserialize","EventEmitter","encryptionKey","fileStore","_validate","deepEqual","watch","_watch","migrations","projectVersion","_migrate","beforeEachMigration","_get","_containsReservedKey","checkValueType","onDidChange","_handleChange","onDidAnyChange","dataString","_encryptData","deserializedData","_ensureDirectory","_write","emit","WeakMap","initializationVector","pbkdf2Sync","decipher","createDecipheriv","Buffer","update","final","createDecipher","currentValue","onChange","oldValue","newValue","isDeepStrictEqual","removeListener","randomBytes","cipher","createCipheriv","SNAP","existsSync","persistent","wait","watchFile","versionToMigrate","previousMigratedVersion","newerVersions","candidateVersion","_shouldPerformMigration","storeBackup","fromVersion","toVersion","finalVersion","versions","migration","_set","_isVersionInRangeFormat","eq","clean","satisfies","lte","gt","ANY","Comparator","parseOptions","loose","debug","operator","re","COMPARATORLOOSE","COMPARATOR","SemVer","er","cmp","intersects","Range","includePrerelease","safeRe","SPACE_CHARACTERS","range","raw","formatted","parseRange","isNullSet","isAny","comps","memoKey","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","cached","HYPHENRANGELOOSE","HYPHENRANGE","hyphenReplace","COMPARATORTRIM","comparatorTrimReplace","TILDETRIM","tildeTrimReplace","CARETTRIM","caretTrimReplace","rangeList","parseComparator","replaceGTE0","rangeMap","comparators","thisComparators","isSatisfiable","rangeComparators","thisComparator","rangeComparator","testSet","remainingComparators","testComparator","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","replaceTilde","TILDELOOSE","TILDE","M","pr","ret","replaceCaret","CARETLOOSE","CARET","z","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","GTE0PRE","GTE0","incPr","$0","fM","fm","fp","fpr","fb","tM","tm","tp","tpr","prerelease","allowed","major","minor","patch","MAX_LENGTH","MAX_SAFE_INTEGER","compareIdentifiers","LOOSE","FULL","other","compareMain","comparePre","compareBuild","inc","release","identifier","identifierBase","isNaN","neq","gte","lt","rtl","coerceRtlRegex","COERCERTLFULL","COERCERTL","COERCEFULL","COERCE","versionA","versionB","version1","version2","v1","v2","comparison","v1Higher","highVersion","lowVersion","highHasPre","throwErrors","parsed","internalRe","identifiers","diff","rcompare","compareLoose","rsort","coerce","toComparators","maxSatisfying","minSatisfying","minVersion","validRange","outside","gtr","ltr","simplifyRange","subset","SEMVER_SPEC_VERSION","RELEASE_TYPES","rcompareIdentifiers","MAX_SAFE_COMPONENT_LENGTH","MAX_SAFE_BUILD_LENGTH","NODE_DEBUG","numeric","anum","bnum","firstKey","looseOption","freeze","emptyOpts","R","LETTERDASHNUMBER","safeRegexReplacements","createToken","isGlobal","safe","makeSafeRegex","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCEPLAIN","LONETILDE","LONECARET","r1","r2","maxSV","rangeObj","minSV","minver","setMin","comparator","compver","hilo","gtfn","ltefn","ltfn","ecomp","high","low","ranges","simplified","original","minimumVersionWithPreRelease","minimumVersion","simpleSubset","sub","dom","eqSet","gtltComp","higher","lower","hasDomLT","hasDomGT","higherGT","lowerLT","needDomLTPre","needDomGTPre","sawNonNull","OUTER","simpleSub","simpleDom","isSub","mimicFn","inputFunction","debouncedFunction","arguments_","shouldCallNow","cancel","isObj","disallowedKeys","getPathSegments","pathArray","parts","app","ipcMain","ipcRenderer","shell","isInitialized","initDataListener","appData","defaultCwd","getPath","getVersion","sendSync","initRenderer","openInEditor","openPath","os","homedir","tmpdir","library","temp","macos","APPDATA","localAppData","LOCALAPPDATA","windows","XDG_DATA_HOME","XDG_CONFIG_HOME","XDG_CACHE_HOME","XDG_STATE_HOME","linux","valueOf","realFetch","global","fetch","Response","Headers","Request","HASH_UNDEFINED","reIsHostCtor","freeGlobal","freeSelf","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","IE_PROTO","funcToString","objectToString","reIsNative","getNative","nativeCreate","Hash","ListCache","MapCache","assocIndexOf","getMapData","__data__","isObject","isHostObject","toSource","baseIsNative","memoize","memoized","Cache","copyProperty","ignoreNonConfigurable","toDescriptor","fromDescriptor","canCopyProperty","configurable","wrappedToString","withName","fromBody","toStringDescriptor","toStringName","Reflect","ownKeys","fromPrototype","getPrototypeOf","setPrototypeOf","changePrototype","newToString","changeToString","calledFunctions","function_","callCount","functionName","displayName","pTry","pLimit","concurrency","reject","activeCount","run","generator","enqueue","pendingCount","clearQueue","findUp","locatePath","startDir","filenames","file","pathExists","pLocate","EndError","testElement","tester","finder","preserveOrder","checkLimit","access","accessSync","punycode","mappingTable","PROCESSING_OPTIONS","TRANSITIONAL","NONTRANSITIONAL","findStatus","mid","regexAstralSymbols","countSymbols","combiningMarksRegex","validateLabel","processing_option","substr","toUnicode","status","codePointAt","processing","domain_name","useSTD3","hasError","processed","codePoint","mapChars","labels","toASCII","verifyDnsLength","total","SPEED_REFRESH_INTERVAL","REFRESH_INTERVAL","BADGE_COLOR","MAX_DAILY_RATE","RULE_ID_POST_REQUEST","RULE_ID_VALUE_TO_MODIFY_CONTENT_TYPE_TO","RULE_ID_CONTENT_TYPE","RULE_ID_CONTENT_DISPOSITION","RULE_ID_XFRAME","DATA_ID_STRING","DATA_ID_IFRAME_BATCH","DATA_ID_IFRAME","LIFESPAN_TAB","LIFESPAN_IFRAME","MAX_QUEUE_SIZE","MAX_PARALLEL_EXECUTIONS_BATCH_FETCH","MAX_PARALLEL_EXECUTIONS_FETCH","MAX_PARALLEL_EXECUTIONS_BATCH","MAX_PARALLEL_EXECUTIONS","VERSION","identity_helpers_1","logger_1","rate_limiter_1","constants_1","websockets_1","storage_helpers_1","OPT_IN_STATUS_KEY","publishableKey","disableLogs","wsManager","WebSocketManager","getInstance","RateLimiter","Logger","getLocalStorage","getOptInStatus","getOrGenerateIdentifier","initialize","optIn","setLocalStorage","optOut","getRateLimitData","timestamp_m","count_m","setRateLimitData","getLifetimeTotalCount","lifetime_total_count","lifetime_total_count_m","setHistoricData","initial_timestamp","calculateElapsedTime","resetRateLimitData","add_to_count","getIfRateLimitReached","mllwtl_rate_limit_object","mllwtl_rate_limit_reached","checkRateLimit","increase_count","shouldContinue","isLastCount","requestsCount","optionalParams","__importDefault","mod","__esModule","electron_1","index_1","mainWindow","BrowserWindow","webPreferences","nodeIntegration","loadFile","webContents","openDevTools","sdk","quit","deleteLocalStorage","configuration_key","mllwtIdentifier","generateIdentifier","getIdentifier","just_update_key","previous_identifier","MeasureConnectionSpeed","putHTMLToSigned","htmlURL_signed","headers","response","putMarkdownToSigned","markdownURL_signed","markDown","putHTMLVisualizerToSigned","htmlVisualizerURL_signed","base64image","byteArray","Uint8Array","putHTMLContainedToSigned","htmlContainedURL_signed","htmlContainedString","updateDynamo","recordID","htmlTransformer","orgId","htmlKey","markdownKey","htmlVisualizerKey","endpoint","bodyData","htmlFileName","markdownFileName","htmlVisualizerFileName","requestOptions","ScrapeRequest","waitBeforeScraping","htmlVisualizer","windowSize","saveHtml","saveMarkdown","removeCSSselectors","_parseSize","fromJson","screen_width","screen_height","toJson","scrapeUrl","scrapeRequest","win","offscreen","contextIsolation","loadURL","removeSelectorsScript","executeJavaScript","screenshot","capturePage","markdown","turndown_1","headingStyle","codeBlockStyle","bulletListMarker","turndown","toPNG","errorCode","errorDescription","getS3SignedUrls","uploadURL_html","uploadURL_markDown","uploadURL_htmlVisualizer","isomorphic_ws_1","measure_connection_speed_1","scraping_helpers_1","put_to_signed_1","scrape_request_1","wsUrl","reconnectAttempts","maxReconnectAttempts","reconnectDelay","isConnecting","instance","handleRateLimit","establishConnection","extensionIdentifier","speedMbps","setupWebSocketListeners","onopen","onclose","handleReconnection","onerror","onmessage","handleIncomingMessage","handleRateLimitReached","processScrapeRequest","scrapedContent","disconnect","OPEN","repeat","character","blockElements","isBlock","is","voidElements","isVoid","meaningfulWhenBlankElements","tagNames","cleanAttribute","attribute","Rules","_keep","blankRule","replacement","blankReplacement","keepReplacement","defaultRule","defaultReplacement","findRule","filterValue","isPre","paragraph","lineBreak","heading","hLevel","blockquote","listItem","indentedCodeBlock","fencedCodeBlock","language","fenceChar","fence","fenceSize","fenceInCodeRegex","horizontalRule","inlineLink","linkStyle","referenceLink","reference","linkReferenceStyle","references","emphasis","emDelimiter","strong","strongDelimiter","hasSiblings","isCodeBlock","extraSpace","delimiter","image","unshift","keep","forNode","isBlank","Parser","domino","_htmlParser","DOMParser","canParse","parseFromString","canParseHTMLNatively","RootNode","prevText","keepLeadingWs","collapseWhitespace","preformattedCode","isPreOrCode","isCode","isMeaningfulWhenBlank","hasVoid","hasMeaningfulWhenBlank","flankingWhitespace","leading","trailing","edges","leadingAscii","leadingNonAscii","trailingNonAscii","trailingAscii","isFlankedByWhitespace","side","isFlanked","escapes","TurndownService","destination","extend","replacementForNode","postProcess","whitespace","indexEnd","trimTrailingNewlines","nls","canConvert","use","plugin","accumulator","conversions","sign","createNumberConversion","bitLength","typeOpts","unsigned","lowerBound","pow","upperBound","moduloVal","moduloBitLength","moduloBound","V","enforceRange","clamp","evenRound","S","U","usm","constructorArgs","parsedBase","basicURLParse","parsedURL","baseURL","serializeURL","serializeURLOrigin","stateOverride","cannotHaveAUsernamePasswordPort","setTheUsername","setThePassword","serializeHost","serializeInteger","cannotBeABaseURL","toJSON","Impl","implSymbol","setup","privateData","wrapper","wrapperSymbol","interface","Worker","tr46","specialSchemes","ftp","gopher","http","https","wss","failure","ucs2","decode","at","isASCIIDigit","isASCIIAlpha","isASCIIHex","isSingleDot","buffer","isWindowsDriveLetterString","isSpecialScheme","isSpecial","hex","isC0ControlPercentEncode","extraPathPercentEncodeSet","isPathPercentEncode","extraUserinfoPercentEncodeSet","isUserinfoPercentEncode","percentEncodeChar","encodeSetPredicate","cStr","utf8PercentEncode","parseIPv4Number","parseHost","isSpecialArg","pieceIndex","compress","pointer","numbersSeen","ipv4Piece","swaps","parseIPv6","decoded","parseOpaqueHost","utf8PercentDecode","asciiDomain","ipv4Host","numbers","counter","parseIPv4","serializeIPv4","maxIdx","maxLen","currStart","currLen","findLongestZeroSequence","ignore0","serializeIPv6","shortenPath","includesCredentials","URLStateMachine","encodingOverride","parseError","trimControlChars","trimTabAndNewline","atFlag","arrFlag","passwordTokenSeenFlag","isASCIIAlphanumeric","encodedCodePoints","fileOtherwiseCodePoints","cp1","cp2","excludeFragment","parseURL","tuple","serializeOrigin","mixin","wrapperForImpl","implForWrapper","WebSocket","createWebSocketStream","Server","Receiver","Sender","WebSocketServer","EMPTY_BUFFER","FastBuffer","species","_mask","mask","_unmask","totalLength","allocUnsafe","byteOffset","toArrayBuffer","byteLength","toBuffer","isBuffer","ArrayBuffer","isView","unmask","WS_NO_BUFFER_UTIL","bufferUtil","BINARY_TYPES","hasBlob","Blob","alloc","GUID","kForOnEventAttribute","kListener","kStatusCode","kWebSocket","kCode","kData","kError","kMessage","kReason","kTarget","kType","kWasClean","CloseEvent","reason","wasClean","ErrorEvent","MessageEvent","listeners","isBinary","callListener","_closeFrameReceived","_closeFrameSent","once","thisArg","tokenChars","dest","elem","extensions","extension","configurations","header","offers","extensionName","paramName","mustUnescape","isEscaping","inQuotes","kDone","kRun","pending","jobs","zlib","Limiter","TRAILER","kPerMessageDeflate","kTotalLength","kCallback","kBuffers","zlibLimiter","deflateOnData","chunk","inflateOnData","_maxPayload","RangeError","inflateOnError","_inflate","isServer","maxPayload","_options","_threshold","threshold","_isServer","_deflate","concurrencyLimit","offer","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","normalizeParams","acceptAsServer","acceptAsClient","accepted","decompress","fin","_decompress","_compress","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","zlibInflateOptions","flush","_readableState","endEmitted","createDeflateRaw","zlibDeflateOptions","Z_SYNC_FLUSH","Writable","PerMessageDeflate","isValidStatusCode","isValidUTF8","_allowSynchronousEvents","allowSynchronousEvents","_binaryType","binaryType","_extensions","_skipUTF8Validation","skipUTF8Validation","_bufferedBytes","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_errored","_loop","_state","startLoop","consume","dst","getInfo","getPayloadLength16","getPayloadLength64","getMask","createError","compressed","haveLength","readUInt16BE","readUInt32BE","controlMessage","dataMessage","messageLength","fragments","setImmediate","ErrorCtor","statusCode","Duplex","randomFillSync","isBlob","applyMask","kByteLength","maskBuffer","RANDOM_POOL_SIZE","randomPool","randomPoolPointer","socket","generateMask","_generateMask","_maskBuffer","_socket","_firstFragment","_queue","dataLength","skipMasking","payloadLength","opcode","rsv1","writeUInt16BE","writeUIntBE","dispatch","sendFrame","getBlobData","pong","send","perMessageDeflate","blob","arrayBuffer","destroyed","nextTick","callCallbacks","dequeue","cork","uncork","sender","emitClose","stream","duplexOnEnd","_writableState","finished","destroy","duplexOnError","listenerCount","terminateOnDestroy","duplex","autoDestroy","objectMode","writableObjectMode","_destroy","CLOSED","called","terminate","_final","CONNECTING","_read","isPaused","protocols","isUtf8","_isValidUTF8","toStringTag","WS_NO_UTF_8_VALIDATE","createHash","subprotocol","keyRegex","server","socketOnError","abortHandshake","STATUS_CODES","Connection","h","abortHandshakeOrEmitwsClientError","req","autoPong","handleProtocols","clientTracking","verifyClient","noServer","backlog","_server","createServer","writeHead","listen","emitConnection","_removeListeners","addListeners","listening","upgrade","handleUpgrade","clients","_shouldEmitClose","shouldHandle","secWebSocketProtocol","secWebSocketExtensions","info","secure","authorized","encrypted","verified","completeUpgrade","readable","digest","_protocol","setSocket","net","tls","Readable","kAborted","protocolVersions","readyStates","subprotocolRegex","_closeCode","_closeMessage","_closeTimer","_errorEmitted","_paused","_readyState","_receiver","_sender","_bufferedAmount","_redirects","initAsClient","_autoPong","bufferedAmount","receiverOnConclude","receiverOnDrain","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","senderOnError","setNoDelay","socketOnClose","socketOnData","socketOnEnd","removeAllListeners","CLOSING","errorEmitted","setCloseTimer","_req","sendAfterClose","needDrain","websocket","protocolVersion","followRedirects","maxRedirects","socketPath","parsedUrl","isSecure","isIpcUrl","invalidUrlMessage","emitErrorAndClose","request","protocolSet","createConnection","tlsConnect","netConnect","Upgrade","handshakeTimeout","Origin","auth","_originalIpc","_originalSecure","_originalHostOrSocketPath","isSameHost","authorization","addr","abort","serverProt","protError","extensionNames","finishRequest","connect","servername","isIP","setHeader","receiverOnFinish","read","require","normalizeIPv6","normalizeIPv4","removeDotSegments","recomposeAuthority","normalizeComponentEncoding","SCHEMES","resolveComponents","skipNormalization","tolerant","cmpts","components","nss","resourceName","uriTokens","schemeHandler","skipEscape","unescape","authority","absolutePath","hexLookUp","URI_PARSE","gotEncoding","ipv4result","isIPV4","ipv6result","isIPV6","unicodeSupport","domainHost","nonSimpleDomain","domainToASCII","skipNormalize","encodeURI","fastUri","relativeURI","schemelessOptions","uriA","uriB","UUID_REG","URN_REG","wsComponents","httpParse","httpSerialize","urn","urnComponents","urnScheme","uriComponents","uuidComponents","HEX","A","B","C","D","F","findToken","stripLeadingZeros","stringArrayToHexStripped","keepZero","acc","strip","tokenCount","zone","isZone","endipv6Encountered","endIpv6","cursor","getIPV6","newHost","escapedHost","out","skip","ind","RDS1","RDS2","RDS3","RDS5","ipV4res","ipV6res","esc","im","ascending","NaN","descending","bisector","compare1","compare2","delta","left","lo","hi","zero","center","right","ascendingBisect","bisectRight","initRange","unknown","scale","bisect","invertExtent","copy","getOwnPropertySymbols","_objectSpread2","_defineProperty","getOwnPropertyDescriptors","_classCallCheck","Constructor","_defineProperties","descriptor","_toPropertyKey","_createClass","protoProps","staticProps","_inherits","subClass","superClass","_setPrototypeOf","_getPrototypeOf","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","_assertThisInitialized","ReferenceError","_createSuper","Derived","hasNativeReflectConstruct","construct","sham","_isNativeReflectConstruct","Super","NewTarget","_possibleConstructorReturn","_superPropBase","isStrict","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayLikeToArray","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","minLen","arr2","prim","toPrimitive","hint","_toPrimitive","_classPrivateFieldGet","privateMap","_classApplyDescriptorGet","_classExtractFieldDescriptor","_classPrivateFieldSet","_classApplyDescriptorSet","_classPrivateMethodGet","privateSet","_checkPrivateRedeclaration","privateCollection","_classPrivateFieldInitSpec","_classPrivateMethodInitSpec","REL_API_URL","defaultConfig","autoStart","downloadApiUrl","uploadApiUrl","logMeasurementApiUrl","logAimApiUrl","turnServerUri","turnServerCredsApiUrl","turnServerUser","turnServerPass","rpkiInvalidHost","cfTraceUrl","includeCredentials","measurements","numPackets","bytes","bypassMinDuration","batchSize","batchWaitTime","responsesWaitTime","measureDownloadLoadedLatency","measureUploadLoadedLatency","loadedLatencyThrottle","bandwidthFinishRequestDuration","estimatedServerTime","latencyPercentile","bandwidthPercentile","bandwidthMinRequestDuration","loadedRequestMinDuration","loadedLatencyMaxPoints","internalConfig","aimMeasurementScoring","packetLoss","latency","loadedLatencyIncrease","jitter","upload","aimExperiencesDefs","streaming","pointThresholds","gaming","rtc","cfGetServerTime","serverTiming","getTtfb","perf","responseStart","requestStart","gePayloadDownload","responseEnd","calcDownloadDuration","_ref","payloadDownloadTime","calcUploadDuration","_ref2","ttfb","calcDownloadSpeed","_ref3","numBytes","transferSize","secs","calcUploadSpeed","_ref4","genContent","_qsParams","_fetchOptions","_responseHook","_onRunningChange","_onNewMeasurementStarted","_onMeasurementResult","_onFinished$1","_onConnectionError$1","_measurements","_downloadApi","_uploadApi","_running$2","_finished$1","_results$1","_measIdx","_counter","_retries","_minDuration","_throttleMs","_estimatedServerTime","_currentFetchPromise","_currentNextMsmTimeoutId","_setRunning$2","WeakSet","_saveMeasurementResults","_nextMeasurement","_cancelCurrentMeasurement","_setRunning2$2","running","_this","_saveMeasurementResults2","measIdx","measTiming","_this2","_classPrivateFieldGet2","bytesResult","timings","numMeasurements","_ref6","agg","cnt","_nextMeasurement2","_this3","meas","finishRequestDuration","_dir","performance","clearResourceTimings","down","_meas","isDown","apiUrl","qsParams","serverTime","_ref7","_ref8","fetchOpt","curPromise","statusText","getServerTime","_cancel","getEntriesByName","timing","measTime","bps","reqSize","requestDuration","_this$retries","_this$retries2","_cancelCurrentMeasurement2","BandwidthEngine$2","BandwidthMeasurementEngine","_measurements2","_ref5","_ref5$throttleMs","throttleMs","_ref5$estimatedServer","_excluded$5","_latencyEngine","_setLatencyRunning","_setLatencyRunning2","_this4","play","BandwidthEngine$1","_BandwidthEngine","BandwidthWithParallelLatencyEngine","_super","_thisSuper","_thisSuper2","_ref$measureParallelL","measureParallelLatency","_ref$parallelLatencyT","parallelLatencyThrottleMs","_ref$estimatedServerT","ptProps","during","onMeasurementResult","fetchOptions","onRunningChange","onConnectionError","_excluded$4","_measurementId$1","_token","_requestTime","_logApiUrl","_loggingResponseHook","_logMeasurement","_loggingResponseHook2","_logMeasurement2","measData","logData","requestTime","measId","BandwidthEngine","LoggingBandwidthEngine","_thisSuper3","measurementId","logApiUrl","responseHook","_len","restArgs","_key","_running$1","_currentPromise","_promiseFn","_setRunning$1","_next$1","_cancelCurrent","PromiseEngine","promiseFn","_cancelCurrent2","_setRunning2$1","_next2$1","_engines","LoadNetworkEngine$1","LoadNetworkEngine","cfg","chunkSize","getLoadEngine","_ref6$qsParams","_ref6$fetchOptions","fetchQsParams","engine","_excluded$3","_established","_senderDc","_receiverDc","SelfWebRtcDataConnection","_ref$iceServers","iceServers","_ref$acceptIceCandida","acceptIceCandidate","candidate","sdpAttrs","_ref$dataChannelCfg","dataChannelCfg","ordered","maxRetransmits","rtcPeerConnectionCfg","RTCPeerConnection","senderDc","createDataChannel","onOpen","ondatachannel","dc","channel","onMessageReceived","onicecandidate","addIceCandidate","createOffer","setLocalDescription","setRemoteDescription","localDescription","createAnswer","answer","onClose","_onCredentialsFailure","_onConnectionError","_onFinished","_msgTracker","_webRtcConnection","_numMsgs","PacketLossEngine$1","PacketLossEngine","turnServerCredsApi","_ref$turnServerCredsA","turnServerCredsApiParser","credential","_ref$turnServerCredsA2","turnServerCredsApiIncludeCredentials","_ref$numMsgs","numMsgs","_ref$batchSize","_ref$batchWaitTime","_ref$responsesWaitTim","_ref$connectionTimeou","connectionTimeout","credentials","urls","iceTransportPolicy","connectionSuccess","msgTracker","sendNum","onMsgSent","onAllMsgsSent","finishFn","finishTimeout","missingMsgs","recv","onMsgReceived","totalMessages","numMessagesSent","lostMessages","_excluded$2","_loadEngine","_PacketLossEngine","PacketLossUnderLoadEngine","_thisSuper5","downloadChunkSize","uploadChunkSize","stop","onCredentialsFailure","onFinished","_excluded$1","ReachabilityEngine","targetUrl","_ref$timeout","_ref$fetchOptions","finish","reachable","rest","percentile","vals","perc","sortedVals","rem","ceil","rndFn","_config$3","_extractLoadedLatencies","MeasurementCalculations$1","MeasurementCalculations","latencyResults","getLatencyPoints","bandwidthResults","flat","getBandwidthPoints","loadedResults","getLatency","getJitter","plResults","reachabilityResults","sideLatency","pings","_ref4$sumDeltas","sumDeltas","prevLatency","classificationNames","customResultTypes","downLoadedLatency","upLoadedLatency","defaultPoints","_config$2","ScoresCalculations$1","ScoresCalculations","scores","_ref8$","sumPoints","classificationIdx","points","classificationName","_config$1","_measCalc","_scoresCalc","_calcGetter","_getV4Reachability","_getV4ReachabilityDetails","_getV6Reachability","_getV6ReachabilityDetails","Results$1","Results","getScores","getSummary","calcFn","resKey","defaultVal","surfaceError","started","getDownloadBandwidth","getUploadBandwidth","getUnloadedLatency","getUnloadedJitter","getDownLoadedLatency","downLoadedJitter","getDownLoadedJitter","getUpLoadedLatency","upLoadedJitter","getUpLoadedJitter","getPacketLoss","v4Reachability","v6Reachability","decimals","latencyPointsParser","durations","bpsPointsParser","pnts","resultsParsers","latencyMs","downLoadedLatencyMs","upLoadedLatencyMs","numMessages","lossRatio","_excluded","_excluded2","_excluded3","pausableTypes","genMeasId","_onFinish","_onError","_config","_results","_measurementId","_curMsmIdx","_curEngine","_optimalDownloadChunkSize","_optimalUploadChunkSize","_running","_finished","_setRunning","_setFinished","_curType","_curTypeResults","_clear","_destroyCurEngine","_next","MeasurementEngine","userConfig","_curType2","_setRunning2","_next2","_clear2","_setFinished2","_curTypeResults2","_destroyCurEngine2","onFail","_this$curMsmIdx","finishedCurrentRound","msmConfig","msmResults","_classPrivateFieldGet3","onResultsChange","filteringInvalids","asn","nxhost","ptCfg","_classPrivateFieldGet4","loadDown","loadUp","onNewMeasurementStarted","onParallelLatencyResult","isLastMsmOfType","minDuration","optimalSize","_logAimApiUrl","_logFinalResults","LoggingMeasurementEngine","_MeasurementEngine","pt","logK","_ref3$","_ref3$$","classification","logFinalResults","onFinish","BUFFER","TYPE","blobParts","buffers","ab","relativeStart","relativeEnd","slicedBuffer","FetchError","systemError","errno","convert","INTERNALS","PassThrough","Body","_ref$size","isURLSearchParams","disturbed","consumeBody","accum","accumBytes","resTimeout","getAll","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","ct","textConverted","convertBody","mixIn","invalidTokenRegex","invalidHeaderCharRegex","validateValue","MAP","rawHeaders","headerNames","headerName","pair","getHeaders","_pairs$i","createHeadersIterator","INTERNAL","HeadersIteratorPrototype","_INTERNAL","exportNodeCompatibleHeaders","hostHeaderKey","INTERNALS$1","redirected","INTERNALS$2","parse_url","format_url","urlStr","streamDestructionSupported","isRequest","inputBody","signal","isAbortSignal","redirect","follow","agent","URL$1","PassThrough$1","contentLengthValue","totalBytes","getNodeRequestOptions","destroyStream","aborted","abortAndFinalize","finalize","reqTimeout","errorCallback","hadError","fixResponseChunkedTransferBadEnding","addListener","hasDataListener","createHeadersLenient","isRedirect","locationURL","requestOpts","orig","isDomainOrSubdomain","response_options","statusMessage","codings","zlibOptions","finishFlush","writeToStream","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","nmd","paths"],"sourceRoot":""}